var LL=Object.defineProperty,EL=Object.defineProperties;var OL=Object.getOwnPropertyDescriptors;var TP=Object.getOwnPropertySymbols;var AL=Object.prototype.hasOwnProperty,jL=Object.prototype.propertyIsEnumerable;var Av=(s,u,f)=>u in s?LL(s,u,{enumerable:!0,configurable:!0,writable:!0,value:f}):s[u]=f,ly=(s,u)=>{for(var f in u||(u={}))AL.call(u,f)&&Av(s,f,u[f]);if(TP)for(var f of TP(u))jL.call(u,f)&&Av(s,f,u[f]);return s},LP=(s,u)=>EL(s,OL(u));var DL=(s,u)=>()=>(u||s((u={exports:{}}).exports,u),u.exports);var Qf=(s,u,f)=>(Av(s,typeof u!="symbol"?u+"":u,f),f);var Dj=DL((Fj,Vy)=>{const IL=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))y(g);new MutationObserver(g=>{for(const w of g)if(w.type==="childList")for(const M of w.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&y(M)}).observe(document,{childList:!0,subtree:!0});function f(g){const w={};return g.integrity&&(w.integrity=g.integrity),g.referrerpolicy&&(w.referrerPolicy=g.referrerpolicy),g.crossorigin==="use-credentials"?w.credentials="include":g.crossorigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function y(g){if(g.ep)return;g.ep=!0;const w=f(g);fetch(g.href,w)}};IL();var ac=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function FL(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Me={exports:{}},me={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var EP=Object.getOwnPropertySymbols,RL=Object.prototype.hasOwnProperty,BL=Object.prototype.propertyIsEnumerable;function VL(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function _L(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var u={},f=0;f<10;f++)u["_"+String.fromCharCode(f)]=f;var y=Object.getOwnPropertyNames(u).map(function(w){return u[w]});if(y.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(w){g[w]=w}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var aC=_L()?Object.assign:function(s,u){for(var f,y=VL(s),g,w=1;w<arguments.length;w++){f=Object(arguments[w]);for(var M in f)RL.call(f,M)&&(y[M]=f[M]);if(EP){g=EP(f);for(var C=0;C<g.length;C++)BL.call(f,g[C])&&(y[g[C]]=f[g[C]])}}return y};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux=aC,Na=60103,fC=60106;me.Fragment=60107;me.StrictMode=60108;me.Profiler=60114;var cC=60109,pC=60110,dC=60112;me.Suspense=60113;var yC=60115,gC=60116;if(typeof Symbol=="function"&&Symbol.for){var Po=Symbol.for;Na=Po("react.element"),fC=Po("react.portal"),me.Fragment=Po("react.fragment"),me.StrictMode=Po("react.strict_mode"),me.Profiler=Po("react.profiler"),cC=Po("react.provider"),pC=Po("react.context"),dC=Po("react.forward_ref"),me.Suspense=Po("react.suspense"),yC=Po("react.memo"),gC=Po("react.lazy")}var OP=typeof Symbol=="function"&&Symbol.iterator;function UL(s){return s===null||typeof s!="object"?null:(s=OP&&s[OP]||s["@@iterator"],typeof s=="function"?s:null)}function Xc(s){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+s,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vC={};function Ta(s,u,f){this.props=s,this.context=u,this.refs=vC,this.updater=f||mC}Ta.prototype.isReactComponent={};Ta.prototype.setState=function(s,u){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error(Xc(85));this.updater.enqueueSetState(this,s,u,"setState")};Ta.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function xC(){}xC.prototype=Ta.prototype;function hx(s,u,f){this.props=s,this.context=u,this.refs=vC,this.updater=f||mC}var ax=hx.prototype=new xC;ax.constructor=hx;ux(ax,Ta.prototype);ax.isPureReactComponent=!0;var fx={current:null},wC=Object.prototype.hasOwnProperty,SC={key:!0,ref:!0,__self:!0,__source:!0};function MC(s,u,f){var y,g={},w=null,M=null;if(u!=null)for(y in u.ref!==void 0&&(M=u.ref),u.key!==void 0&&(w=""+u.key),u)wC.call(u,y)&&!SC.hasOwnProperty(y)&&(g[y]=u[y]);var C=arguments.length-2;if(C===1)g.children=f;else if(1<C){for(var A=Array(C),R=0;R<C;R++)A[R]=arguments[R+2];g.children=A}if(s&&s.defaultProps)for(y in C=s.defaultProps,C)g[y]===void 0&&(g[y]=C[y]);return{$$typeof:Na,type:s,key:w,ref:M,props:g,_owner:fx.current}}function zL(s,u){return{$$typeof:Na,type:s.type,key:u,ref:s.ref,props:s.props,_owner:s._owner}}function cx(s){return typeof s=="object"&&s!==null&&s.$$typeof===Na}function GL(s){var u={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(f){return u[f]})}var AP=/\/+/g;function jv(s,u){return typeof s=="object"&&s!==null&&s.key!=null?GL(""+s.key):u.toString(36)}function Py(s,u,f,y,g){var w=typeof s;(w==="undefined"||w==="boolean")&&(s=null);var M=!1;if(s===null)M=!0;else switch(w){case"string":case"number":M=!0;break;case"object":switch(s.$$typeof){case Na:case fC:M=!0}}if(M)return M=s,g=g(M),s=y===""?"."+jv(M,0):y,Array.isArray(g)?(f="",s!=null&&(f=s.replace(AP,"$&/")+"/"),Py(g,u,f,"",function(R){return R})):g!=null&&(cx(g)&&(g=zL(g,f+(!g.key||M&&M.key===g.key?"":(""+g.key).replace(AP,"$&/")+"/")+s)),u.push(g)),1;if(M=0,y=y===""?".":y+":",Array.isArray(s))for(var C=0;C<s.length;C++){w=s[C];var A=y+jv(w,C);M+=Py(w,u,f,A,g)}else if(A=UL(s),typeof A=="function")for(s=A.call(s),C=0;!(w=s.next()).done;)w=w.value,A=y+jv(w,C++),M+=Py(w,u,f,A,g);else if(w==="object")throw u=""+s,Error(Xc(31,u==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":u));return M}function uy(s,u,f){if(s==null)return s;var y=[],g=0;return Py(s,y,"","",function(w){return u.call(f,w,g++)}),y}function YL(s){if(s._status===-1){var u=s._result;u=u(),s._status=0,s._result=u,u.then(function(f){s._status===0&&(f=f.default,s._status=1,s._result=f)},function(f){s._status===0&&(s._status=2,s._result=f)})}if(s._status===1)return s._result;throw s._result}var kC={current:null};function _s(){var s=kC.current;if(s===null)throw Error(Xc(321));return s}var XL={ReactCurrentDispatcher:kC,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:fx,IsSomeRendererActing:{current:!1},assign:ux};me.Children={map:uy,forEach:function(s,u,f){uy(s,function(){u.apply(this,arguments)},f)},count:function(s){var u=0;return uy(s,function(){u++}),u},toArray:function(s){return uy(s,function(u){return u})||[]},only:function(s){if(!cx(s))throw Error(Xc(143));return s}};me.Component=Ta;me.PureComponent=hx;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XL;me.cloneElement=function(s,u,f){if(s==null)throw Error(Xc(267,s));var y=ux({},s.props),g=s.key,w=s.ref,M=s._owner;if(u!=null){if(u.ref!==void 0&&(w=u.ref,M=fx.current),u.key!==void 0&&(g=""+u.key),s.type&&s.type.defaultProps)var C=s.type.defaultProps;for(A in u)wC.call(u,A)&&!SC.hasOwnProperty(A)&&(y[A]=u[A]===void 0&&C!==void 0?C[A]:u[A])}var A=arguments.length-2;if(A===1)y.children=f;else if(1<A){C=Array(A);for(var R=0;R<A;R++)C[R]=arguments[R+2];y.children=C}return{$$typeof:Na,type:s.type,key:g,ref:w,props:y,_owner:M}};me.createContext=function(s,u){return u===void 0&&(u=null),s={$$typeof:pC,_calculateChangedBits:u,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null},s.Provider={$$typeof:cC,_context:s},s.Consumer=s};me.createElement=MC;me.createFactory=function(s){var u=MC.bind(null,s);return u.type=s,u};me.createRef=function(){return{current:null}};me.forwardRef=function(s){return{$$typeof:dC,render:s}};me.isValidElement=cx;me.lazy=function(s){return{$$typeof:gC,_payload:{_status:-1,_result:s},_init:YL}};me.memo=function(s,u){return{$$typeof:yC,type:s,compare:u===void 0?null:u}};me.useCallback=function(s,u){return _s().useCallback(s,u)};me.useContext=function(s,u){return _s().useContext(s,u)};me.useDebugValue=function(){};me.useEffect=function(s,u){return _s().useEffect(s,u)};me.useImperativeHandle=function(s,u,f){return _s().useImperativeHandle(s,u,f)};me.useLayoutEffect=function(s,u){return _s().useLayoutEffect(s,u)};me.useMemo=function(s,u){return _s().useMemo(s,u)};me.useReducer=function(s,u,f){return _s().useReducer(s,u,f)};me.useRef=function(s){return _s().useRef(s)};me.useState=function(s){return _s().useState(s)};me.version="17.0.2";Me.exports=me;var Cr=Me.exports,px={exports:{}},io={},PC={exports:{}},CC={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){var u,f,y,g;if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;s.unstable_now=function(){return w.now()}}else{var M=Date,C=M.now();s.unstable_now=function(){return M.now()-C}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var A=null,R=null,z=function(){if(A!==null)try{var Nt=s.unstable_now();A(!0,Nt),A=null}catch(zt){throw setTimeout(z,0),zt}};u=function(Nt){A!==null?setTimeout(u,0,Nt):(A=Nt,setTimeout(z,0))},f=function(Nt,zt){R=setTimeout(Nt,zt)},y=function(){clearTimeout(R)},s.unstable_shouldYield=function(){return!1},g=s.unstable_forceFrameRate=function(){}}else{var Y=window.setTimeout,Z=window.clearTimeout;if(typeof console!="undefined"){var lt=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof lt!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var xt=!1,W=null,B=-1,U=5,F=0;s.unstable_shouldYield=function(){return s.unstable_now()>=F},g=function(){},s.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Nt?Math.floor(1e3/Nt):5};var J=new MessageChannel,D=J.port2;J.port1.onmessage=function(){if(W!==null){var Nt=s.unstable_now();F=Nt+U;try{W(!0,Nt)?D.postMessage(null):(xt=!1,W=null)}catch(zt){throw D.postMessage(null),zt}}else xt=!1},u=function(Nt){W=Nt,xt||(xt=!0,D.postMessage(null))},f=function(Nt,zt){B=Y(function(){Nt(s.unstable_now())},zt)},y=function(){Z(B),B=-1}}function rt(Nt,zt){var re=Nt.length;Nt.push(zt);t:for(;;){var K=re-1>>>1,Oe=Nt[K];if(Oe!==void 0&&0<ct(Oe,zt))Nt[K]=zt,Nt[re]=Oe,re=K;else break t}}function st(Nt){return Nt=Nt[0],Nt===void 0?null:Nt}function wt(Nt){var zt=Nt[0];if(zt!==void 0){var re=Nt.pop();if(re!==zt){Nt[0]=re;t:for(var K=0,Oe=Nt.length;K<Oe;){var Lr=2*(K+1)-1,Je=Nt[Lr],Eo=Lr+1,Ae=Nt[Eo];if(Je!==void 0&&0>ct(Je,re))Ae!==void 0&&0>ct(Ae,Je)?(Nt[K]=Ae,Nt[Eo]=re,K=Eo):(Nt[K]=Je,Nt[Lr]=re,K=Lr);else if(Ae!==void 0&&0>ct(Ae,re))Nt[K]=Ae,Nt[Eo]=re,K=Eo;else break t}}return zt}return null}function ct(Nt,zt){var re=Nt.sortIndex-zt.sortIndex;return re!==0?re:Nt.id-zt.id}var mt=[],ke=[],zi=1,Ue=null,Et=3,Ut=!1,Gi=!1,ii=!1;function hs(Nt){for(var zt=st(ke);zt!==null;){if(zt.callback===null)wt(ke);else if(zt.startTime<=Nt)wt(ke),zt.sortIndex=zt.expirationTime,rt(mt,zt);else break;zt=st(ke)}}function Yi(Nt){if(ii=!1,hs(Nt),!Gi)if(st(mt)!==null)Gi=!0,u(Bt);else{var zt=st(ke);zt!==null&&f(Yi,zt.startTime-Nt)}}function Bt(Nt,zt){Gi=!1,ii&&(ii=!1,y()),Ut=!0;var re=Et;try{for(hs(zt),Ue=st(mt);Ue!==null&&(!(Ue.expirationTime>zt)||Nt&&!s.unstable_shouldYield());){var K=Ue.callback;if(typeof K=="function"){Ue.callback=null,Et=Ue.priorityLevel;var Oe=K(Ue.expirationTime<=zt);zt=s.unstable_now(),typeof Oe=="function"?Ue.callback=Oe:Ue===st(mt)&&wt(mt),hs(zt)}else wt(mt);Ue=st(mt)}if(Ue!==null)var Lr=!0;else{var Je=st(ke);Je!==null&&f(Yi,Je.startTime-zt),Lr=!1}return Lr}finally{Ue=null,Et=re,Ut=!1}}var Qc=g;s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Nt){Nt.callback=null},s.unstable_continueExecution=function(){Gi||Ut||(Gi=!0,u(Bt))},s.unstable_getCurrentPriorityLevel=function(){return Et},s.unstable_getFirstCallbackNode=function(){return st(mt)},s.unstable_next=function(Nt){switch(Et){case 1:case 2:case 3:var zt=3;break;default:zt=Et}var re=Et;Et=zt;try{return Nt()}finally{Et=re}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=Qc,s.unstable_runWithPriority=function(Nt,zt){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var re=Et;Et=Nt;try{return zt()}finally{Et=re}},s.unstable_scheduleCallback=function(Nt,zt,re){var K=s.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?K+re:K):re=K,Nt){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=re+Oe,Nt={id:zi++,callback:zt,priorityLevel:Nt,startTime:re,expirationTime:Oe,sortIndex:-1},re>K?(Nt.sortIndex=re,rt(ke,Nt),st(mt)===null&&Nt===st(ke)&&(ii?y():ii=!0,f(Yi,re-K))):(Nt.sortIndex=Oe,rt(mt,Nt),Gi||Ut||(Gi=!0,u(Bt))),Nt},s.unstable_wrapCallback=function(Nt){var zt=Et;return function(){var re=Et;Et=zt;try{return Nt.apply(this,arguments)}finally{Et=re}}}})(CC);PC.exports=CC;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=Me.exports,ei=aC,sn=PC.exports;function St(s){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+s,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!pg)throw Error(St(227));var NC=new Set,Oc={};function Iu(s,u){Sa(s,u),Sa(s+"Capture",u)}function Sa(s,u){for(Oc[s]=u,s=0;s<u.length;s++)NC.add(u[s])}var Vs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),WL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jP=Object.prototype.hasOwnProperty,DP={},IP={};function HL(s){return jP.call(IP,s)?!0:jP.call(DP,s)?!1:WL.test(s)?IP[s]=!0:(DP[s]=!0,!1)}function KL(s,u,f,y){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function $L(s,u,f,y){if(u===null||typeof u=="undefined"||KL(s,u,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function Zn(s,u,f,y,g,w,M){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=y,this.attributeNamespace=g,this.mustUseProperty=f,this.propertyName=s,this.type=u,this.sanitizeURL=w,this.removeEmptyString=M}var Sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Sn[s]=new Zn(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var u=s[0];Sn[u]=new Zn(u,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Sn[s]=new Zn(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Sn[s]=new Zn(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Sn[s]=new Zn(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Sn[s]=new Zn(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Sn[s]=new Zn(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Sn[s]=new Zn(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Sn[s]=new Zn(s,5,!1,s.toLowerCase(),null,!1,!1)});var dx=/[\-:]([a-z])/g;function yx(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var u=s.replace(dx,yx);Sn[u]=new Zn(u,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var u=s.replace(dx,yx);Sn[u]=new Zn(u,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var u=s.replace(dx,yx);Sn[u]=new Zn(u,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Sn[s]=new Zn(s,1,!1,s.toLowerCase(),null,!1,!1)});Sn.xlinkHref=new Zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Sn[s]=new Zn(s,1,!1,s.toLowerCase(),null,!0,!0)});function gx(s,u,f,y){var g=Sn.hasOwnProperty(u)?Sn[u]:null,w=g!==null?g.type===0:y?!1:!(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N");w||($L(u,f,g,y)&&(f=null),y||g===null?HL(u)&&(f===null?s.removeAttribute(u):s.setAttribute(u,""+f)):g.mustUseProperty?s[g.propertyName]=f===null?g.type===3?!1:"":f:(u=g.attributeName,y=g.attributeNamespace,f===null?s.removeAttribute(u):(g=g.type,f=g===3||g===4&&f===!0?"":""+f,y?s.setAttributeNS(y,u,f):s.setAttribute(u,f))))}var Fu=pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fc=60103,Pu=60106,ul=60107,mx=60108,vc=60114,vx=60109,xx=60110,dg=60112,xc=60113,_y=60120,yg=60115,wx=60116,Sx=60121,Mx=60128,TC=60129,kx=60130,u1=60131;if(typeof Symbol=="function"&&Symbol.for){var on=Symbol.for;fc=on("react.element"),Pu=on("react.portal"),ul=on("react.fragment"),mx=on("react.strict_mode"),vc=on("react.profiler"),vx=on("react.provider"),xx=on("react.context"),dg=on("react.forward_ref"),xc=on("react.suspense"),_y=on("react.suspense_list"),yg=on("react.memo"),wx=on("react.lazy"),Sx=on("react.block"),on("react.scope"),Mx=on("react.opaque.id"),TC=on("react.debug_trace_mode"),kx=on("react.offscreen"),u1=on("react.legacy_hidden")}var FP=typeof Symbol=="function"&&Symbol.iterator;function qf(s){return s===null||typeof s!="object"?null:(s=FP&&s[FP]||s["@@iterator"],typeof s=="function"?s:null)}var Dv;function cc(s){if(Dv===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);Dv=u&&u[1]||""}return`
`+Dv+s}var Iv=!1;function hy(s,u){if(!s||Iv)return"";Iv=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(A){var y=A}Reflect.construct(s,[],u)}else{try{u.call()}catch(A){y=A}s.call(u.prototype)}else{try{throw Error()}catch(A){y=A}s()}}catch(A){if(A&&y&&typeof A.stack=="string"){for(var g=A.stack.split(`
`),w=y.stack.split(`
`),M=g.length-1,C=w.length-1;1<=M&&0<=C&&g[M]!==w[C];)C--;for(;1<=M&&0<=C;M--,C--)if(g[M]!==w[C]){if(M!==1||C!==1)do if(M--,C--,0>C||g[M]!==w[C])return`
`+g[M].replace(" at new "," at ");while(1<=M&&0<=C);break}}}finally{Iv=!1,Error.prepareStackTrace=f}return(s=s?s.displayName||s.name:"")?cc(s):""}function JL(s){switch(s.tag){case 5:return cc(s.type);case 16:return cc("Lazy");case 13:return cc("Suspense");case 19:return cc("SuspenseList");case 0:case 2:case 15:return s=hy(s.type,!1),s;case 11:return s=hy(s.type.render,!1),s;case 22:return s=hy(s.type._render,!1),s;case 1:return s=hy(s.type,!0),s;default:return""}}function aa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ul:return"Fragment";case Pu:return"Portal";case vc:return"Profiler";case mx:return"StrictMode";case xc:return"Suspense";case _y:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case xx:return(s.displayName||"Context")+".Consumer";case vx:return(s._context.displayName||"Context")+".Provider";case dg:var u=s.render;return u=u.displayName||u.name||"",s.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case yg:return aa(s.type);case Sx:return aa(s._render);case wx:u=s._payload,s=s._init;try{return aa(s(u))}catch{}}return null}function Sl(s){switch(typeof s){case"boolean":case"number":case"object":case"string":case"undefined":return s;default:return""}}function LC(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ZL(s){var u=LC(s)?"checked":"value",f=Object.getOwnPropertyDescriptor(s.constructor.prototype,u),y=""+s[u];if(!s.hasOwnProperty(u)&&typeof f!="undefined"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,w=f.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return g.call(this)},set:function(M){y=""+M,w.call(this,M)}}),Object.defineProperty(s,u,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function ay(s){s._valueTracker||(s._valueTracker=ZL(s))}function EC(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var f=u.getValue(),y="";return s&&(y=LC(s)?s.checked?"true":"false":s.value),s=y,s!==f?(u.setValue(s),!0):!1}function Uy(s){if(s=s||(typeof document!="undefined"?document:void 0),typeof s=="undefined")return null;try{return s.activeElement||s.body}catch{return s.body}}function h1(s,u){var f=u.checked;return ei({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f!=null?f:s._wrapperState.initialChecked})}function RP(s,u){var f=u.defaultValue==null?"":u.defaultValue,y=u.checked!=null?u.checked:u.defaultChecked;f=Sl(u.value!=null?u.value:f),s._wrapperState={initialChecked:y,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function OC(s,u){u=u.checked,u!=null&&gx(s,"checked",u,!1)}function a1(s,u){OC(s,u);var f=Sl(u.value),y=u.type;if(f!=null)y==="number"?(f===0&&s.value===""||s.value!=f)&&(s.value=""+f):s.value!==""+f&&(s.value=""+f);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}u.hasOwnProperty("value")?f1(s,u.type,f):u.hasOwnProperty("defaultValue")&&f1(s,u.type,Sl(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(s.defaultChecked=!!u.defaultChecked)}function BP(s,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var y=u.type;if(!(y!=="submit"&&y!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+s._wrapperState.initialValue,f||u===s.value||(s.value=u),s.defaultValue=u}f=s.name,f!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,f!==""&&(s.name=f)}function f1(s,u,f){(u!=="number"||Uy(s.ownerDocument)!==s)&&(f==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+f&&(s.defaultValue=""+f))}function QL(s){var u="";return pg.Children.forEach(s,function(f){f!=null&&(u+=f)}),u}function c1(s,u){return s=ei({children:void 0},u),(u=QL(u.children))&&(s.children=u),s}function fa(s,u,f,y){if(s=s.options,u){u={};for(var g=0;g<f.length;g++)u["$"+f[g]]=!0;for(f=0;f<s.length;f++)g=u.hasOwnProperty("$"+s[f].value),s[f].selected!==g&&(s[f].selected=g),g&&y&&(s[f].defaultSelected=!0)}else{for(f=""+Sl(f),u=null,g=0;g<s.length;g++){if(s[g].value===f){s[g].selected=!0,y&&(s[g].defaultSelected=!0);return}u!==null||s[g].disabled||(u=s[g])}u!==null&&(u.selected=!0)}}function p1(s,u){if(u.dangerouslySetInnerHTML!=null)throw Error(St(91));return ei({},u,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function VP(s,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(St(92));if(Array.isArray(f)){if(!(1>=f.length))throw Error(St(93));f=f[0]}u=f}u==null&&(u=""),f=u}s._wrapperState={initialValue:Sl(f)}}function AC(s,u){var f=Sl(u.value),y=Sl(u.defaultValue);f!=null&&(f=""+f,f!==s.value&&(s.value=f),u.defaultValue==null&&s.defaultValue!==f&&(s.defaultValue=f)),y!=null&&(s.defaultValue=""+y)}function _P(s){var u=s.textContent;u===s._wrapperState.initialValue&&u!==""&&u!==null&&(s.value=u)}var d1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function jC(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function y1(s,u){return s==null||s==="http://www.w3.org/1999/xhtml"?jC(u):s==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var fy,DC=function(s){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(u,f,y,g){MSApp.execUnsafeLocalFunction(function(){return s(u,f,y,g)})}:s}(function(s,u){if(s.namespaceURI!==d1.svg||"innerHTML"in s)s.innerHTML=u;else{for(fy=fy||document.createElement("div"),fy.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=fy.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;u.firstChild;)s.appendChild(u.firstChild)}});function Ac(s,u){if(u){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=u;return}}s.textContent=u}var wc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qL=["Webkit","ms","Moz","O"];Object.keys(wc).forEach(function(s){qL.forEach(function(u){u=u+s.charAt(0).toUpperCase()+s.substring(1),wc[u]=wc[s]})});function IC(s,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||wc.hasOwnProperty(s)&&wc[s]?(""+u).trim():u+"px"}function FC(s,u){s=s.style;for(var f in u)if(u.hasOwnProperty(f)){var y=f.indexOf("--")===0,g=IC(f,u[f],y);f==="float"&&(f="cssFloat"),y?s.setProperty(f,g):s[f]=g}}var bL=ei({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g1(s,u){if(u){if(bL[s]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(St(137,s));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(St(60));if(!(typeof u.dangerouslySetInnerHTML=="object"&&"__html"in u.dangerouslySetInnerHTML))throw Error(St(61))}if(u.style!=null&&typeof u.style!="object")throw Error(St(62))}}function m1(s,u){if(s.indexOf("-")===-1)return typeof u.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Px(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var v1=null,ca=null,pa=null;function UP(s){if(s=Hc(s)){if(typeof v1!="function")throw Error(St(280));var u=s.stateNode;u&&(u=Sg(u),v1(s.stateNode,s.type,u))}}function RC(s){ca?pa?pa.push(s):pa=[s]:ca=s}function BC(){if(ca){var s=ca,u=pa;if(pa=ca=null,UP(s),u)for(s=0;s<u.length;s++)UP(u[s])}}function Cx(s,u){return s(u)}function VC(s,u,f,y,g){return s(u,f,y,g)}function Nx(){}var _C=Cx,Cu=!1,Fv=!1;function Tx(){(ca!==null||pa!==null)&&(Nx(),BC())}function tE(s,u,f){if(Fv)return s(u,f);Fv=!0;try{return _C(s,u,f)}finally{Fv=!1,Tx()}}function jc(s,u){var f=s.stateNode;if(f===null)return null;var y=Sg(f);if(y===null)return null;f=y[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break t;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(St(231,u,typeof f));return f}var x1=!1;if(Vs)try{var bf={};Object.defineProperty(bf,"passive",{get:function(){x1=!0}}),window.addEventListener("test",bf,bf),window.removeEventListener("test",bf,bf)}catch{x1=!1}function eE(s,u,f,y,g,w,M,C,A){var R=Array.prototype.slice.call(arguments,3);try{u.apply(f,R)}catch(z){this.onError(z)}}var Sc=!1,zy=null,Gy=!1,w1=null,iE={onError:function(s){Sc=!0,zy=s}};function nE(s,u,f,y,g,w,M,C,A){Sc=!1,zy=null,eE.apply(iE,arguments)}function rE(s,u,f,y,g,w,M,C,A){if(nE.apply(this,arguments),Sc){if(Sc){var R=zy;Sc=!1,zy=null}else throw Error(St(198));Gy||(Gy=!0,w1=R)}}function Ru(s){var u=s,f=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&1026)!==0&&(f=u.return),s=u.return;while(s)}return u.tag===3?f:null}function UC(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function zP(s){if(Ru(s)!==s)throw Error(St(188))}function oE(s){var u=s.alternate;if(!u){if(u=Ru(s),u===null)throw Error(St(188));return u!==s?null:s}for(var f=s,y=u;;){var g=f.return;if(g===null)break;var w=g.alternate;if(w===null){if(y=g.return,y!==null){f=y;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===f)return zP(g),s;if(w===y)return zP(g),u;w=w.sibling}throw Error(St(188))}if(f.return!==y.return)f=g,y=w;else{for(var M=!1,C=g.child;C;){if(C===f){M=!0,f=g,y=w;break}if(C===y){M=!0,y=g,f=w;break}C=C.sibling}if(!M){for(C=w.child;C;){if(C===f){M=!0,f=w,y=g;break}if(C===y){M=!0,y=w,f=g;break}C=C.sibling}if(!M)throw Error(St(189))}}if(f.alternate!==y)throw Error(St(190))}if(f.tag!==3)throw Error(St(188));return f.stateNode.current===f?s:u}function zC(s){if(s=oE(s),!s)return null;for(var u=s;;){if(u.tag===5||u.tag===6)return u;if(u.child)u.child.return=u,u=u.child;else{if(u===s)break;for(;!u.sibling;){if(!u.return||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}}return null}function GP(s,u){for(var f=s.alternate;u!==null;){if(u===s||u===f)return!0;u=u.return}return!1}var GC,Lx,YC,XC,S1=!1,ns=[],pl=null,dl=null,yl=null,Dc=new Map,Ic=new Map,tc=[],YP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M1(s,u,f,y,g){return{blockedOn:s,domEventName:u,eventSystemFlags:f|16,nativeEvent:g,targetContainers:[y]}}function XP(s,u){switch(s){case"focusin":case"focusout":pl=null;break;case"dragenter":case"dragleave":dl=null;break;case"mouseover":case"mouseout":yl=null;break;case"pointerover":case"pointerout":Dc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(u.pointerId)}}function ec(s,u,f,y,g,w){return s===null||s.nativeEvent!==w?(s=M1(u,f,y,g,w),u!==null&&(u=Hc(u),u!==null&&Lx(u)),s):(s.eventSystemFlags|=y,u=s.targetContainers,g!==null&&u.indexOf(g)===-1&&u.push(g),s)}function sE(s,u,f,y,g){switch(u){case"focusin":return pl=ec(pl,s,u,f,y,g),!0;case"dragenter":return dl=ec(dl,s,u,f,y,g),!0;case"mouseover":return yl=ec(yl,s,u,f,y,g),!0;case"pointerover":var w=g.pointerId;return Dc.set(w,ec(Dc.get(w)||null,s,u,f,y,g)),!0;case"gotpointercapture":return w=g.pointerId,Ic.set(w,ec(Ic.get(w)||null,s,u,f,y,g)),!0}return!1}function lE(s){var u=Nu(s.target);if(u!==null){var f=Ru(u);if(f!==null){if(u=f.tag,u===13){if(u=UC(f),u!==null){s.blockedOn=u,XC(s.lanePriority,function(){sn.unstable_runWithPriority(s.priority,function(){YC(f)})});return}}else if(u===3&&f.stateNode.hydrate){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Cy(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var f=jx(s.domEventName,s.eventSystemFlags,u[0],s.nativeEvent);if(f!==null)return u=Hc(f),u!==null&&Lx(u),s.blockedOn=f,!1;u.shift()}return!0}function WP(s,u,f){Cy(s)&&f.delete(u)}function uE(){for(S1=!1;0<ns.length;){var s=ns[0];if(s.blockedOn!==null){s=Hc(s.blockedOn),s!==null&&GC(s);break}for(var u=s.targetContainers;0<u.length;){var f=jx(s.domEventName,s.eventSystemFlags,u[0],s.nativeEvent);if(f!==null){s.blockedOn=f;break}u.shift()}s.blockedOn===null&&ns.shift()}pl!==null&&Cy(pl)&&(pl=null),dl!==null&&Cy(dl)&&(dl=null),yl!==null&&Cy(yl)&&(yl=null),Dc.forEach(WP),Ic.forEach(WP)}function ic(s,u){s.blockedOn===u&&(s.blockedOn=null,S1||(S1=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,uE)))}function WC(s){function u(g){return ic(g,s)}if(0<ns.length){ic(ns[0],s);for(var f=1;f<ns.length;f++){var y=ns[f];y.blockedOn===s&&(y.blockedOn=null)}}for(pl!==null&&ic(pl,s),dl!==null&&ic(dl,s),yl!==null&&ic(yl,s),Dc.forEach(u),Ic.forEach(u),f=0;f<tc.length;f++)y=tc[f],y.blockedOn===s&&(y.blockedOn=null);for(;0<tc.length&&(f=tc[0],f.blockedOn===null);)lE(f),f.blockedOn===null&&tc.shift()}function cy(s,u){var f={};return f[s.toLowerCase()]=u.toLowerCase(),f["Webkit"+s]="webkit"+u,f["Moz"+s]="moz"+u,f}var ra={animationend:cy("Animation","AnimationEnd"),animationiteration:cy("Animation","AnimationIteration"),animationstart:cy("Animation","AnimationStart"),transitionend:cy("Transition","TransitionEnd")},Rv={},HC={};Vs&&(HC=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function gg(s){if(Rv[s])return Rv[s];if(!ra[s])return s;var u=ra[s],f;for(f in u)if(u.hasOwnProperty(f)&&f in HC)return Rv[s]=u[f];return s}var KC=gg("animationend"),$C=gg("animationiteration"),JC=gg("animationstart"),ZC=gg("transitionend"),QC=new Map,Ex=new Map,hE=["abort","abort",KC,"animationEnd",$C,"animationIteration",JC,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ZC,"transitionEnd","waiting","waiting"];function Ox(s,u){for(var f=0;f<s.length;f+=2){var y=s[f],g=s[f+1];g="on"+(g[0].toUpperCase()+g.slice(1)),Ex.set(y,u),QC.set(y,g),Iu(g,[y])}}var aE=sn.unstable_now;aE();var Ge=8;function ea(s){if((1&s)!==0)return Ge=15,1;if((2&s)!==0)return Ge=14,2;if((4&s)!==0)return Ge=13,4;var u=24&s;return u!==0?(Ge=12,u):(s&32)!==0?(Ge=11,32):(u=192&s,u!==0?(Ge=10,u):(s&256)!==0?(Ge=9,256):(u=3584&s,u!==0?(Ge=8,u):(s&4096)!==0?(Ge=7,4096):(u=4186112&s,u!==0?(Ge=6,u):(u=62914560&s,u!==0?(Ge=5,u):s&67108864?(Ge=4,67108864):(s&134217728)!==0?(Ge=3,134217728):(u=805306368&s,u!==0?(Ge=2,u):(1073741824&s)!==0?(Ge=1,1073741824):(Ge=8,s))))))}function fE(s){switch(s){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function cE(s){switch(s){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(St(358,s))}}function Fc(s,u){var f=s.pendingLanes;if(f===0)return Ge=0;var y=0,g=0,w=s.expiredLanes,M=s.suspendedLanes,C=s.pingedLanes;if(w!==0)y=w,g=Ge=15;else if(w=f&134217727,w!==0){var A=w&~M;A!==0?(y=ea(A),g=Ge):(C&=w,C!==0&&(y=ea(C),g=Ge))}else w=f&~M,w!==0?(y=ea(w),g=Ge):C!==0&&(y=ea(C),g=Ge);if(y===0)return 0;if(y=31-Ml(y),y=f&((0>y?0:1<<y)<<1)-1,u!==0&&u!==y&&(u&M)===0){if(ea(u),g<=Ge)return u;Ge=g}if(u=s.entangledLanes,u!==0)for(s=s.entanglements,u&=y;0<u;)f=31-Ml(u),g=1<<f,y|=s[f],u&=~g;return y}function qC(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Yy(s,u){switch(s){case 15:return 1;case 14:return 2;case 12:return s=ia(24&~u),s===0?Yy(10,u):s;case 10:return s=ia(192&~u),s===0?Yy(8,u):s;case 8:return s=ia(3584&~u),s===0&&(s=ia(4186112&~u),s===0&&(s=512)),s;case 2:return u=ia(805306368&~u),u===0&&(u=268435456),u}throw Error(St(358,s))}function ia(s){return s&-s}function Bv(s){for(var u=[],f=0;31>f;f++)u.push(s);return u}function mg(s,u,f){s.pendingLanes|=u;var y=u-1;s.suspendedLanes&=y,s.pingedLanes&=y,s=s.eventTimes,u=31-Ml(u),s[u]=f}var Ml=Math.clz32?Math.clz32:yE,pE=Math.log,dE=Math.LN2;function yE(s){return s===0?32:31-(pE(s)/dE|0)|0}var gE=sn.unstable_UserBlockingPriority,mE=sn.unstable_runWithPriority,Ny=!0;function vE(s,u,f,y){Cu||Nx();var g=Ax,w=Cu;Cu=!0;try{VC(g,s,u,f,y)}finally{(Cu=w)||Tx()}}function xE(s,u,f,y){mE(gE,Ax.bind(null,s,u,f,y))}function Ax(s,u,f,y){if(Ny){var g;if((g=(u&4)===0)&&0<ns.length&&-1<YP.indexOf(s))s=M1(null,s,u,f,y),ns.push(s);else{var w=jx(s,u,f,y);if(w===null)g&&XP(s,y);else{if(g){if(-1<YP.indexOf(s)){s=M1(w,s,u,f,y),ns.push(s);return}if(sE(w,s,u,f,y))return;XP(s,y)}fN(s,u,y,null,f)}}}}function jx(s,u,f,y){var g=Px(y);if(g=Nu(g),g!==null){var w=Ru(g);if(w===null)g=null;else{var M=w.tag;if(M===13){if(g=UC(w),g!==null)return g;g=null}else if(M===3){if(w.stateNode.hydrate)return w.tag===3?w.stateNode.containerInfo:null;g=null}else w!==g&&(g=null)}}return fN(s,u,y,g,f),null}var hl=null,Dx=null,Ty=null;function bC(){if(Ty)return Ty;var s,u=Dx,f=u.length,y,g="value"in hl?hl.value:hl.textContent,w=g.length;for(s=0;s<f&&u[s]===g[s];s++);var M=f-s;for(y=1;y<=M&&u[f-y]===g[w-y];y++);return Ty=g.slice(s,1<y?1-y:void 0)}function Ly(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function py(){return!0}function HP(){return!1}function Tr(s){function u(f,y,g,w,M){this._reactName=f,this._targetInst=g,this.type=y,this.nativeEvent=w,this.target=M,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(f=s[C],this[C]=f?f(w):w[C]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?py:HP,this.isPropagationStopped=HP,this}return ei(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=py)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=py)},persist:function(){},isPersistent:py}),u}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ix=Tr(La),Wc=ei({},La,{view:0,detail:0}),wE=Tr(Wc),Vv,_v,nc,vg=ei({},Wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fx,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==nc&&(nc&&s.type==="mousemove"?(Vv=s.screenX-nc.screenX,_v=s.screenY-nc.screenY):_v=Vv=0,nc=s),Vv)},movementY:function(s){return"movementY"in s?s.movementY:_v}}),KP=Tr(vg),SE=ei({},vg,{dataTransfer:0}),ME=Tr(SE),kE=ei({},Wc,{relatedTarget:0}),Uv=Tr(kE),PE=ei({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),CE=Tr(PE),NE=ei({},La,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),TE=Tr(NE),LE=ei({},La,{data:0}),$P=Tr(LE),EE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jE(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=AE[s])?!!u[s]:!1}function Fx(){return jE}var DE=ei({},Wc,{key:function(s){if(s.key){var u=EE[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=Ly(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?OE[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fx,charCode:function(s){return s.type==="keypress"?Ly(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ly(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),IE=Tr(DE),FE=ei({},vg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JP=Tr(FE),RE=ei({},Wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fx}),BE=Tr(RE),VE=ei({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),_E=Tr(VE),UE=ei({},vg,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),zE=Tr(UE),GE=[9,13,27,32],Rx=Vs&&"CompositionEvent"in window,Mc=null;Vs&&"documentMode"in document&&(Mc=document.documentMode);var YE=Vs&&"TextEvent"in window&&!Mc,tN=Vs&&(!Rx||Mc&&8<Mc&&11>=Mc),ZP=String.fromCharCode(32),QP=!1;function eN(s,u){switch(s){case"keyup":return GE.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iN(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var oa=!1;function XE(s,u){switch(s){case"compositionend":return iN(u);case"keypress":return u.which!==32?null:(QP=!0,ZP);case"textInput":return s=u.data,s===ZP&&QP?null:s;default:return null}}function WE(s,u){if(oa)return s==="compositionend"||!Rx&&eN(s,u)?(s=bC(),Ty=Dx=hl=null,oa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return tN&&u.locale!=="ko"?null:u.data;default:return null}}var HE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qP(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!HE[s.type]:u==="textarea"}function nN(s,u,f,y){RC(y),u=Xy(u,"onChange"),0<u.length&&(f=new Ix("onChange","change",null,f,y),s.push({event:f,listeners:u}))}var kc=null,Rc=null;function KE(s){uN(s,0)}function xg(s){var u=la(s);if(EC(u))return s}function $E(s,u){if(s==="change")return u}var rN=!1;if(Vs){var zv;if(Vs){var Gv="oninput"in document;if(!Gv){var bP=document.createElement("div");bP.setAttribute("oninput","return;"),Gv=typeof bP.oninput=="function"}zv=Gv}else zv=!1;rN=zv&&(!document.documentMode||9<document.documentMode)}function t2(){kc&&(kc.detachEvent("onpropertychange",oN),Rc=kc=null)}function oN(s){if(s.propertyName==="value"&&xg(Rc)){var u=[];if(nN(u,Rc,s,Px(s)),s=KE,Cu)s(u);else{Cu=!0;try{Cx(s,u)}finally{Cu=!1,Tx()}}}}function JE(s,u,f){s==="focusin"?(t2(),kc=u,Rc=f,kc.attachEvent("onpropertychange",oN)):s==="focusout"&&t2()}function ZE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return xg(Rc)}function QE(s,u){if(s==="click")return xg(u)}function qE(s,u){if(s==="input"||s==="change")return xg(u)}function bE(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var Qr=typeof Object.is=="function"?Object.is:bE,tO=Object.prototype.hasOwnProperty;function Bc(s,u){if(Qr(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var f=Object.keys(s),y=Object.keys(u);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++)if(!tO.call(u,f[y])||!Qr(s[f[y]],u[f[y]]))return!1;return!0}function e2(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function i2(s,u){var f=e2(s);s=0;for(var y;f;){if(f.nodeType===3){if(y=s+f.textContent.length,s<=u&&y>=u)return{node:f,offset:u-s};s=y}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=e2(f)}}function sN(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?sN(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function n2(){for(var s=window,u=Uy();u instanceof s.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)s=u.contentWindow;else break;u=Uy(s.document)}return u}function k1(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var eO=Vs&&"documentMode"in document&&11>=document.documentMode,sa=null,P1=null,Pc=null,C1=!1;function r2(s,u,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;C1||sa==null||sa!==Uy(y)||(y=sa,"selectionStart"in y&&k1(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Pc&&Bc(Pc,y)||(Pc=y,y=Xy(P1,"onSelect"),0<y.length&&(u=new Ix("onSelect","select",null,u,f),s.push({event:u,listeners:y}),u.target=sa)))}Ox("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Ox("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Ox(hE,2);for(var o2="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Yv=0;Yv<o2.length;Yv++)Ex.set(o2[Yv],0);Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);Iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lN=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function s2(s,u,f){var y=s.type||"unknown-event";s.currentTarget=f,rE(y,u,void 0,s),s.currentTarget=null}function uN(s,u){u=(u&4)!==0;for(var f=0;f<s.length;f++){var y=s[f],g=y.event;y=y.listeners;t:{var w=void 0;if(u)for(var M=y.length-1;0<=M;M--){var C=y[M],A=C.instance,R=C.currentTarget;if(C=C.listener,A!==w&&g.isPropagationStopped())break t;s2(g,C,R),w=A}else for(M=0;M<y.length;M++){if(C=y[M],A=C.instance,R=C.currentTarget,C=C.listener,A!==w&&g.isPropagationStopped())break t;s2(g,C,R),w=A}}}if(Gy)throw s=w1,Gy=!1,w1=null,s}function He(s,u){var f=pN(u),y=s+"__bubble";f.has(y)||(aN(u,s,2,!1),f.add(y))}var l2="_reactListening"+Math.random().toString(36).slice(2);function hN(s){s[l2]||(s[l2]=!0,NC.forEach(function(u){lN.has(u)||u2(u,!1,s,null),u2(u,!0,s,null)}))}function u2(s,u,f,y){var g=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,w=f;if(s==="selectionchange"&&f.nodeType!==9&&(w=f.ownerDocument),y!==null&&!u&&lN.has(s)){if(s!=="scroll")return;g|=2,w=y}var M=pN(w),C=s+"__"+(u?"capture":"bubble");M.has(C)||(u&&(g|=4),aN(w,s,g,u),M.add(C))}function aN(s,u,f,y){var g=Ex.get(u);switch(g===void 0?2:g){case 0:g=vE;break;case 1:g=xE;break;default:g=Ax}f=g.bind(null,u,f,s),g=void 0,!x1||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(g=!0),y?g!==void 0?s.addEventListener(u,f,{capture:!0,passive:g}):s.addEventListener(u,f,!0):g!==void 0?s.addEventListener(u,f,{passive:g}):s.addEventListener(u,f,!1)}function fN(s,u,f,y,g){var w=y;if((u&1)===0&&(u&2)===0&&y!==null)t:for(;;){if(y===null)return;var M=y.tag;if(M===3||M===4){var C=y.stateNode.containerInfo;if(C===g||C.nodeType===8&&C.parentNode===g)break;if(M===4)for(M=y.return;M!==null;){var A=M.tag;if((A===3||A===4)&&(A=M.stateNode.containerInfo,A===g||A.nodeType===8&&A.parentNode===g))return;M=M.return}for(;C!==null;){if(M=Nu(C),M===null)return;if(A=M.tag,A===5||A===6){y=w=M;continue t}C=C.parentNode}}y=y.return}tE(function(){var R=w,z=Px(f),Y=[];t:{var Z=QC.get(s);if(Z!==void 0){var lt=Ix,xt=s;switch(s){case"keypress":if(Ly(f)===0)break t;case"keydown":case"keyup":lt=IE;break;case"focusin":xt="focus",lt=Uv;break;case"focusout":xt="blur",lt=Uv;break;case"beforeblur":case"afterblur":lt=Uv;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=KP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=ME;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=BE;break;case KC:case $C:case JC:lt=CE;break;case ZC:lt=_E;break;case"scroll":lt=wE;break;case"wheel":lt=zE;break;case"copy":case"cut":case"paste":lt=TE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=JP}var W=(u&4)!==0,B=!W&&s==="scroll",U=W?Z!==null?Z+"Capture":null:Z;W=[];for(var F=R,J;F!==null;){J=F;var D=J.stateNode;if(J.tag===5&&D!==null&&(J=D,U!==null&&(D=jc(F,U),D!=null&&W.push(Vc(F,D,J)))),B)break;F=F.return}0<W.length&&(Z=new lt(Z,xt,null,f,z),Y.push({event:Z,listeners:W}))}}if((u&7)===0){t:{if(Z=s==="mouseover"||s==="pointerover",lt=s==="mouseout"||s==="pointerout",Z&&(u&16)===0&&(xt=f.relatedTarget||f.fromElement)&&(Nu(xt)||xt[Ea]))break t;if((lt||Z)&&(Z=z.window===z?z:(Z=z.ownerDocument)?Z.defaultView||Z.parentWindow:window,lt?(xt=f.relatedTarget||f.toElement,lt=R,xt=xt?Nu(xt):null,xt!==null&&(B=Ru(xt),xt!==B||xt.tag!==5&&xt.tag!==6)&&(xt=null)):(lt=null,xt=R),lt!==xt)){if(W=KP,D="onMouseLeave",U="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(W=JP,D="onPointerLeave",U="onPointerEnter",F="pointer"),B=lt==null?Z:la(lt),J=xt==null?Z:la(xt),Z=new W(D,F+"leave",lt,f,z),Z.target=B,Z.relatedTarget=J,D=null,Nu(z)===R&&(W=new W(U,F+"enter",xt,f,z),W.target=J,W.relatedTarget=B,D=W),B=D,lt&&xt)e:{for(W=lt,U=xt,F=0,J=W;J;J=bh(J))F++;for(J=0,D=U;D;D=bh(D))J++;for(;0<F-J;)W=bh(W),F--;for(;0<J-F;)U=bh(U),J--;for(;F--;){if(W===U||U!==null&&W===U.alternate)break e;W=bh(W),U=bh(U)}W=null}else W=null;lt!==null&&h2(Y,Z,lt,W,!1),xt!==null&&B!==null&&h2(Y,B,xt,W,!0)}}t:{if(Z=R?la(R):window,lt=Z.nodeName&&Z.nodeName.toLowerCase(),lt==="select"||lt==="input"&&Z.type==="file")var rt=$E;else if(qP(Z))if(rN)rt=qE;else{rt=ZE;var st=JE}else(lt=Z.nodeName)&&lt.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(rt=QE);if(rt&&(rt=rt(s,R))){nN(Y,rt,f,z);break t}st&&st(s,Z,R),s==="focusout"&&(st=Z._wrapperState)&&st.controlled&&Z.type==="number"&&f1(Z,"number",Z.value)}switch(st=R?la(R):window,s){case"focusin":(qP(st)||st.contentEditable==="true")&&(sa=st,P1=R,Pc=null);break;case"focusout":Pc=P1=sa=null;break;case"mousedown":C1=!0;break;case"contextmenu":case"mouseup":case"dragend":C1=!1,r2(Y,f,z);break;case"selectionchange":if(eO)break;case"keydown":case"keyup":r2(Y,f,z)}var wt;if(Rx)t:{switch(s){case"compositionstart":var ct="onCompositionStart";break t;case"compositionend":ct="onCompositionEnd";break t;case"compositionupdate":ct="onCompositionUpdate";break t}ct=void 0}else oa?eN(s,f)&&(ct="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(ct="onCompositionStart");ct&&(tN&&f.locale!=="ko"&&(oa||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&oa&&(wt=bC()):(hl=z,Dx="value"in hl?hl.value:hl.textContent,oa=!0)),st=Xy(R,ct),0<st.length&&(ct=new $P(ct,s,null,f,z),Y.push({event:ct,listeners:st}),wt?ct.data=wt:(wt=iN(f),wt!==null&&(ct.data=wt)))),(wt=YE?XE(s,f):WE(s,f))&&(R=Xy(R,"onBeforeInput"),0<R.length&&(z=new $P("onBeforeInput","beforeinput",null,f,z),Y.push({event:z,listeners:R}),z.data=wt))}uN(Y,u)})}function Vc(s,u,f){return{instance:s,listener:u,currentTarget:f}}function Xy(s,u){for(var f=u+"Capture",y=[];s!==null;){var g=s,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=jc(s,f),w!=null&&y.unshift(Vc(s,w,g)),w=jc(s,u),w!=null&&y.push(Vc(s,w,g))),s=s.return}return y}function bh(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function h2(s,u,f,y,g){for(var w=u._reactName,M=[];f!==null&&f!==y;){var C=f,A=C.alternate,R=C.stateNode;if(A!==null&&A===y)break;C.tag===5&&R!==null&&(C=R,g?(A=jc(f,w),A!=null&&M.unshift(Vc(f,A,C))):g||(A=jc(f,w),A!=null&&M.push(Vc(f,A,C)))),f=f.return}M.length!==0&&s.push({event:u,listeners:M})}function Wy(){}var Xv=null,Wv=null;function cN(s,u){switch(s){case"button":case"input":case"select":case"textarea":return!!u.autoFocus}return!1}function N1(s,u){return s==="textarea"||s==="option"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var a2=typeof setTimeout=="function"?setTimeout:void 0,iO=typeof clearTimeout=="function"?clearTimeout:void 0;function Bx(s){s.nodeType===1?s.textContent="":s.nodeType===9&&(s=s.body,s!=null&&(s.textContent=""))}function da(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break}return s}function f2(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return s;u--}else f==="/$"&&u++}s=s.previousSibling}return null}var Hv=0;function nO(s){return{$$typeof:Mx,toString:s,valueOf:s}}var wg=Math.random().toString(36).slice(2),al="__reactFiber$"+wg,Hy="__reactProps$"+wg,Ea="__reactContainer$"+wg,c2="__reactEvents$"+wg;function Nu(s){var u=s[al];if(u)return u;for(var f=s.parentNode;f;){if(u=f[Ea]||f[al]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(s=f2(s);s!==null;){if(f=s[al])return f;s=f2(s)}return u}s=f,f=s.parentNode}return null}function Hc(s){return s=s[al]||s[Ea],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function la(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(St(33))}function Sg(s){return s[Hy]||null}function pN(s){var u=s[c2];return u===void 0&&(u=s[c2]=new Set),u}var T1=[],ua=-1;function Nl(s){return{current:s}}function $e(s){0>ua||(s.current=T1[ua],T1[ua]=null,ua--)}function ki(s,u){ua++,T1[ua]=s.current,s.current=u}var kl={},Bn=Nl(kl),yr=Nl(!1),Au=kl;function Ma(s,u){var f=s.type.contextTypes;if(!f)return kl;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===u)return y.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in f)g[w]=u[w];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=u,s.__reactInternalMemoizedMaskedChildContext=g),g}function gr(s){return s=s.childContextTypes,s!=null}function Ky(){$e(yr),$e(Bn)}function p2(s,u,f){if(Bn.current!==kl)throw Error(St(168));ki(Bn,u),ki(yr,f)}function dN(s,u,f){var y=s.stateNode;if(s=u.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var g in y)if(!(g in s))throw Error(St(108,aa(u)||"Unknown",g));return ei({},f,y)}function Ey(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||kl,Au=Bn.current,ki(Bn,s),ki(yr,yr.current),!0}function d2(s,u,f){var y=s.stateNode;if(!y)throw Error(St(169));f?(s=dN(s,u,Au),y.__reactInternalMemoizedMergedChildContext=s,$e(yr),$e(Bn),ki(Bn,s)):$e(yr),ki(yr,f)}var Vx=null,Ou=null,rO=sn.unstable_runWithPriority,_x=sn.unstable_scheduleCallback,L1=sn.unstable_cancelCallback,oO=sn.unstable_shouldYield,y2=sn.unstable_requestPaint,E1=sn.unstable_now,sO=sn.unstable_getCurrentPriorityLevel,Mg=sn.unstable_ImmediatePriority,yN=sn.unstable_UserBlockingPriority,gN=sn.unstable_NormalPriority,mN=sn.unstable_LowPriority,vN=sn.unstable_IdlePriority,Kv={},lO=y2!==void 0?y2:function(){},Ds=null,Oy=null,$v=!1,g2=E1(),Fn=1e4>g2?E1:function(){return E1()-g2};function ka(){switch(sO()){case Mg:return 99;case yN:return 98;case gN:return 97;case mN:return 96;case vN:return 95;default:throw Error(St(332))}}function xN(s){switch(s){case 99:return Mg;case 98:return yN;case 97:return gN;case 96:return mN;case 95:return vN;default:throw Error(St(332))}}function ju(s,u){return s=xN(s),rO(s,u)}function _c(s,u,f){return s=xN(s),_x(s,u,f)}function us(){if(Oy!==null){var s=Oy;Oy=null,L1(s)}wN()}function wN(){if(!$v&&Ds!==null){$v=!0;var s=0;try{var u=Ds;ju(99,function(){for(;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}}),Ds=null}catch(f){throw Ds!==null&&(Ds=Ds.slice(s+1)),_x(Mg,us),f}finally{$v=!1}}}var uO=Fu.ReactCurrentBatchConfig;function Co(s,u){if(s&&s.defaultProps){u=ei({},u),s=s.defaultProps;for(var f in s)u[f]===void 0&&(u[f]=s[f]);return u}return u}var $y=Nl(null),Jy=null,ha=null,Zy=null;function Ux(){Zy=ha=Jy=null}function zx(s){var u=$y.current;$e($y),s.type._context._currentValue=u}function SN(s,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&u)===u){if(f===null||(f.childLanes&u)===u)break;f.childLanes|=u}else s.childLanes|=u,f!==null&&(f.childLanes|=u);s=s.return}}function ya(s,u){Jy=s,Zy=ha=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&u)!==0&&(To=!0),s.firstContext=null)}function to(s,u){if(Zy!==s&&u!==!1&&u!==0)if((typeof u!="number"||u===1073741823)&&(Zy=s,u=1073741823),u={context:s,observedBits:u,next:null},ha===null){if(Jy===null)throw Error(St(308));ha=u,Jy.dependencies={lanes:0,firstContext:u,responders:null}}else ha=ha.next=u;return s._currentValue}var ll=!1;function Gx(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function MN(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function gl(s,u){return{eventTime:s,lane:u,tag:0,payload:null,callback:null,next:null}}function ml(s,u){if(s=s.updateQueue,s!==null){s=s.shared;var f=s.pending;f===null?u.next=u:(u.next=f.next,f.next=u),s.pending=u}}function m2(s,u){var f=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var g=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var M={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};w===null?g=w=M:w=w.next=M,f=f.next}while(f!==null);w===null?g=w=u:w=w.next=u}else g=w=u;f={baseState:y.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:y.shared,effects:y.effects},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=u}function Uc(s,u,f,y){var g=s.updateQueue;ll=!1;var w=g.firstBaseUpdate,M=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var A=C,R=A.next;A.next=null,M===null?w=R:M.next=R,M=A;var z=s.alternate;if(z!==null){z=z.updateQueue;var Y=z.lastBaseUpdate;Y!==M&&(Y===null?z.firstBaseUpdate=R:Y.next=R,z.lastBaseUpdate=A)}}if(w!==null){Y=g.baseState,M=0,z=R=A=null;do{C=w.lane;var Z=w.eventTime;if((y&C)===C){z!==null&&(z=z.next={eventTime:Z,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});t:{var lt=s,xt=w;switch(C=u,Z=f,xt.tag){case 1:if(lt=xt.payload,typeof lt=="function"){Y=lt.call(Z,Y,C);break t}Y=lt;break t;case 3:lt.flags=lt.flags&-4097|64;case 0:if(lt=xt.payload,C=typeof lt=="function"?lt.call(Z,Y,C):lt,C==null)break t;Y=ei({},Y,C);break t;case 2:ll=!0}}w.callback!==null&&(s.flags|=32,C=g.effects,C===null?g.effects=[w]:C.push(w))}else Z={eventTime:Z,lane:C,tag:w.tag,payload:w.payload,callback:w.callback,next:null},z===null?(R=z=Z,A=Y):z=z.next=Z,M|=C;if(w=w.next,w===null){if(C=g.shared.pending,C===null)break;w=C.next,C.next=null,g.lastBaseUpdate=C,g.shared.pending=null}}while(1);z===null&&(A=Y),g.baseState=A,g.firstBaseUpdate=R,g.lastBaseUpdate=z,$c|=M,s.lanes=M,s.memoizedState=Y}}function v2(s,u,f){if(s=u.effects,u.effects=null,s!==null)for(u=0;u<s.length;u++){var y=s[u],g=y.callback;if(g!==null){if(y.callback=null,y=f,typeof g!="function")throw Error(St(191,g));g.call(y)}}}var kN=new pg.Component().refs;function Qy(s,u,f,y){u=s.memoizedState,f=f(y,u),f=f==null?u:ei({},u,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var kg={isMounted:function(s){return(s=s._reactInternals)?Ru(s)===s:!1},enqueueSetState:function(s,u,f){s=s._reactInternals;var y=Nr(),g=vl(s),w=gl(y,g);w.payload=u,f!=null&&(w.callback=f),ml(s,w),xl(s,g,y)},enqueueReplaceState:function(s,u,f){s=s._reactInternals;var y=Nr(),g=vl(s),w=gl(y,g);w.tag=1,w.payload=u,f!=null&&(w.callback=f),ml(s,w),xl(s,g,y)},enqueueForceUpdate:function(s,u){s=s._reactInternals;var f=Nr(),y=vl(s),g=gl(f,y);g.tag=2,u!=null&&(g.callback=u),ml(s,g),xl(s,y,f)}};function x2(s,u,f,y,g,w,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,w,M):u.prototype&&u.prototype.isPureReactComponent?!Bc(f,y)||!Bc(g,w):!0}function PN(s,u,f){var y=!1,g=kl,w=u.contextType;return typeof w=="object"&&w!==null?w=to(w):(g=gr(u)?Au:Bn.current,y=u.contextTypes,w=(y=y!=null)?Ma(s,g):kl),u=new u(f,w),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=kg,s.stateNode=u,u._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=w),u}function w2(s,u,f,y){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,y),u.state!==s&&kg.enqueueReplaceState(u,u.state,null)}function O1(s,u,f,y){var g=s.stateNode;g.props=f,g.state=s.memoizedState,g.refs=kN,Gx(s);var w=u.contextType;typeof w=="object"&&w!==null?g.context=to(w):(w=gr(u)?Au:Bn.current,g.context=Ma(s,w)),Uc(s,f,g,y),g.state=s.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(Qy(s,u,w,f),g.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(u=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),u!==g.state&&kg.enqueueReplaceState(g,g.state,null),Uc(s,f,g,y),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4)}var dy=Array.isArray;function rc(s,u,f){if(s=f.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(St(309));var y=f.stateNode}if(!y)throw Error(St(147,s));var g=""+s;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===g?u.ref:(u=function(w){var M=y.refs;M===kN&&(M=y.refs={}),w===null?delete M[g]:M[g]=w},u._stringRef=g,u)}if(typeof s!="string")throw Error(St(284));if(!f._owner)throw Error(St(290,s))}return s}function yy(s,u){if(s.type!=="textarea")throw Error(St(31,Object.prototype.toString.call(u)==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":u))}function CN(s){function u(B,U){if(s){var F=B.lastEffect;F!==null?(F.nextEffect=U,B.lastEffect=U):B.firstEffect=B.lastEffect=U,U.nextEffect=null,U.flags=8}}function f(B,U){if(!s)return null;for(;U!==null;)u(B,U),U=U.sibling;return null}function y(B,U){for(B=new Map;U!==null;)U.key!==null?B.set(U.key,U):B.set(U.index,U),U=U.sibling;return B}function g(B,U){return B=Cl(B,U),B.index=0,B.sibling=null,B}function w(B,U,F){return B.index=F,s?(F=B.alternate,F!==null?(F=F.index,F<U?(B.flags=2,U):F):(B.flags=2,U)):U}function M(B){return s&&B.alternate===null&&(B.flags=2),B}function C(B,U,F,J){return U===null||U.tag!==6?(U=bv(F,B.mode,J),U.return=B,U):(U=g(U,F),U.return=B,U)}function A(B,U,F,J){return U!==null&&U.elementType===F.type?(J=g(U,F.props),J.ref=rc(B,U,F),J.return=B,J):(J=Iy(F.type,F.key,F.props,null,B.mode,J),J.ref=rc(B,U,F),J.return=B,J)}function R(B,U,F,J){return U===null||U.tag!==4||U.stateNode.containerInfo!==F.containerInfo||U.stateNode.implementation!==F.implementation?(U=t1(F,B.mode,J),U.return=B,U):(U=g(U,F.children||[]),U.return=B,U)}function z(B,U,F,J,D){return U===null||U.tag!==7?(U=xa(F,B.mode,J,D),U.return=B,U):(U=g(U,F),U.return=B,U)}function Y(B,U,F){if(typeof U=="string"||typeof U=="number")return U=bv(""+U,B.mode,F),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case fc:return F=Iy(U.type,U.key,U.props,null,B.mode,F),F.ref=rc(B,null,U),F.return=B,F;case Pu:return U=t1(U,B.mode,F),U.return=B,U}if(dy(U)||qf(U))return U=xa(U,B.mode,F,null),U.return=B,U;yy(B,U)}return null}function Z(B,U,F,J){var D=U!==null?U.key:null;if(typeof F=="string"||typeof F=="number")return D!==null?null:C(B,U,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case fc:return F.key===D?F.type===ul?z(B,U,F.props.children,J,D):A(B,U,F,J):null;case Pu:return F.key===D?R(B,U,F,J):null}if(dy(F)||qf(F))return D!==null?null:z(B,U,F,J,null);yy(B,F)}return null}function lt(B,U,F,J,D){if(typeof J=="string"||typeof J=="number")return B=B.get(F)||null,C(U,B,""+J,D);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case fc:return B=B.get(J.key===null?F:J.key)||null,J.type===ul?z(U,B,J.props.children,D,J.key):A(U,B,J,D);case Pu:return B=B.get(J.key===null?F:J.key)||null,R(U,B,J,D)}if(dy(J)||qf(J))return B=B.get(F)||null,z(U,B,J,D,null);yy(U,J)}return null}function xt(B,U,F,J){for(var D=null,rt=null,st=U,wt=U=0,ct=null;st!==null&&wt<F.length;wt++){st.index>wt?(ct=st,st=null):ct=st.sibling;var mt=Z(B,st,F[wt],J);if(mt===null){st===null&&(st=ct);break}s&&st&&mt.alternate===null&&u(B,st),U=w(mt,U,wt),rt===null?D=mt:rt.sibling=mt,rt=mt,st=ct}if(wt===F.length)return f(B,st),D;if(st===null){for(;wt<F.length;wt++)st=Y(B,F[wt],J),st!==null&&(U=w(st,U,wt),rt===null?D=st:rt.sibling=st,rt=st);return D}for(st=y(B,st);wt<F.length;wt++)ct=lt(st,B,wt,F[wt],J),ct!==null&&(s&&ct.alternate!==null&&st.delete(ct.key===null?wt:ct.key),U=w(ct,U,wt),rt===null?D=ct:rt.sibling=ct,rt=ct);return s&&st.forEach(function(ke){return u(B,ke)}),D}function W(B,U,F,J){var D=qf(F);if(typeof D!="function")throw Error(St(150));if(F=D.call(F),F==null)throw Error(St(151));for(var rt=D=null,st=U,wt=U=0,ct=null,mt=F.next();st!==null&&!mt.done;wt++,mt=F.next()){st.index>wt?(ct=st,st=null):ct=st.sibling;var ke=Z(B,st,mt.value,J);if(ke===null){st===null&&(st=ct);break}s&&st&&ke.alternate===null&&u(B,st),U=w(ke,U,wt),rt===null?D=ke:rt.sibling=ke,rt=ke,st=ct}if(mt.done)return f(B,st),D;if(st===null){for(;!mt.done;wt++,mt=F.next())mt=Y(B,mt.value,J),mt!==null&&(U=w(mt,U,wt),rt===null?D=mt:rt.sibling=mt,rt=mt);return D}for(st=y(B,st);!mt.done;wt++,mt=F.next())mt=lt(st,B,wt,mt.value,J),mt!==null&&(s&&mt.alternate!==null&&st.delete(mt.key===null?wt:mt.key),U=w(mt,U,wt),rt===null?D=mt:rt.sibling=mt,rt=mt);return s&&st.forEach(function(zi){return u(B,zi)}),D}return function(B,U,F,J){var D=typeof F=="object"&&F!==null&&F.type===ul&&F.key===null;D&&(F=F.props.children);var rt=typeof F=="object"&&F!==null;if(rt)switch(F.$$typeof){case fc:t:{for(rt=F.key,D=U;D!==null;){if(D.key===rt){switch(D.tag){case 7:if(F.type===ul){f(B,D.sibling),U=g(D,F.props.children),U.return=B,B=U;break t}break;default:if(D.elementType===F.type){f(B,D.sibling),U=g(D,F.props),U.ref=rc(B,D,F),U.return=B,B=U;break t}}f(B,D);break}else u(B,D);D=D.sibling}F.type===ul?(U=xa(F.props.children,B.mode,J,F.key),U.return=B,B=U):(J=Iy(F.type,F.key,F.props,null,B.mode,J),J.ref=rc(B,U,F),J.return=B,B=J)}return M(B);case Pu:t:{for(D=F.key;U!==null;){if(U.key===D)if(U.tag===4&&U.stateNode.containerInfo===F.containerInfo&&U.stateNode.implementation===F.implementation){f(B,U.sibling),U=g(U,F.children||[]),U.return=B,B=U;break t}else{f(B,U);break}else u(B,U);U=U.sibling}U=t1(F,B.mode,J),U.return=B,B=U}return M(B)}if(typeof F=="string"||typeof F=="number")return F=""+F,U!==null&&U.tag===6?(f(B,U.sibling),U=g(U,F),U.return=B,B=U):(f(B,U),U=bv(F,B.mode,J),U.return=B,B=U),M(B);if(dy(F))return xt(B,U,F,J);if(qf(F))return W(B,U,F,J);if(rt&&yy(B,F),typeof F=="undefined"&&!D)switch(B.tag){case 1:case 22:case 0:case 11:case 15:throw Error(St(152,aa(B.type)||"Component"))}return f(B,U)}}var qy=CN(!0),NN=CN(!1),Kc={},ss=Nl(Kc),zc=Nl(Kc),Gc=Nl(Kc);function Tu(s){if(s===Kc)throw Error(St(174));return s}function A1(s,u){switch(ki(Gc,u),ki(zc,s),ki(ss,Kc),s=u.nodeType,s){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:y1(null,"");break;default:s=s===8?u.parentNode:u,u=s.namespaceURI||null,s=s.tagName,u=y1(u,s)}$e(ss),ki(ss,u)}function Pa(){$e(ss),$e(zc),$e(Gc)}function S2(s){Tu(Gc.current);var u=Tu(ss.current),f=y1(u,s.type);u!==f&&(ki(zc,s),ki(ss,f))}function Yx(s){zc.current===s&&($e(ss),$e(zc))}var Mi=Nl(0);function by(s){for(var u=s;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&64)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Fs=null,fl=null,ls=!1;function TN(s,u){var f=qr(5,null,null,0);f.elementType="DELETED",f.type="DELETED",f.stateNode=u,f.return=s,f.flags=8,s.lastEffect!==null?(s.lastEffect.nextEffect=f,s.lastEffect=f):s.firstEffect=s.lastEffect=f}function M2(s,u){switch(s.tag){case 5:var f=s.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(s.stateNode=u,!0):!1;case 6:return u=s.pendingProps===""||u.nodeType!==3?null:u,u!==null?(s.stateNode=u,!0):!1;case 13:return!1;default:return!1}}function j1(s){if(ls){var u=fl;if(u){var f=u;if(!M2(s,u)){if(u=da(f.nextSibling),!u||!M2(s,u)){s.flags=s.flags&-1025|2,ls=!1,Fs=s;return}TN(Fs,f)}Fs=s,fl=da(u.firstChild)}else s.flags=s.flags&-1025|2,ls=!1,Fs=s}}function k2(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Fs=s}function gy(s){if(s!==Fs)return!1;if(!ls)return k2(s),ls=!0,!1;var u=s.type;if(s.tag!==5||u!=="head"&&u!=="body"&&!N1(u,s.memoizedProps))for(u=fl;u;)TN(s,u),u=da(u.nextSibling);if(k2(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(St(317));t:{for(s=s.nextSibling,u=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"){if(u===0){fl=da(s.nextSibling);break t}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}s=s.nextSibling}fl=null}}else fl=Fs?da(s.stateNode.nextSibling):null;return!0}function Jv(){fl=Fs=null,ls=!1}var ga=[];function Xx(){for(var s=0;s<ga.length;s++)ga[s]._workInProgressVersionPrimary=null;ga.length=0}var Cc=Fu.ReactCurrentDispatcher,br=Fu.ReactCurrentBatchConfig,Yc=0,ji=null,In=null,xn=null,tg=!1,Nc=!1;function fr(){throw Error(St(321))}function Wx(s,u){if(u===null)return!1;for(var f=0;f<u.length&&f<s.length;f++)if(!Qr(s[f],u[f]))return!1;return!0}function Hx(s,u,f,y,g,w){if(Yc=w,ji=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Cc.current=s===null||s.memoizedState===null?aO:fO,s=f(y,g),Nc){w=0;do{if(Nc=!1,!(25>w))throw Error(St(301));w+=1,xn=In=null,u.updateQueue=null,Cc.current=cO,s=f(y,g)}while(Nc)}if(Cc.current=rg,u=In!==null&&In.next!==null,Yc=0,xn=In=ji=null,tg=!1,u)throw Error(St(300));return s}function Lu(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?ji.memoizedState=xn=s:xn=xn.next=s,xn}function Bu(){if(In===null){var s=ji.alternate;s=s!==null?s.memoizedState:null}else s=In.next;var u=xn===null?ji.memoizedState:xn.next;if(u!==null)xn=u,In=s;else{if(s===null)throw Error(St(310));In=s,s={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},xn===null?ji.memoizedState=xn=s:xn=xn.next=s}return xn}function rs(s,u){return typeof u=="function"?u(s):u}function oc(s){var u=Bu(),f=u.queue;if(f===null)throw Error(St(311));f.lastRenderedReducer=s;var y=In,g=y.baseQueue,w=f.pending;if(w!==null){if(g!==null){var M=g.next;g.next=w.next,w.next=M}y.baseQueue=g=w,f.pending=null}if(g!==null){g=g.next,y=y.baseState;var C=M=w=null,A=g;do{var R=A.lane;if((Yc&R)===R)C!==null&&(C=C.next={lane:0,action:A.action,eagerReducer:A.eagerReducer,eagerState:A.eagerState,next:null}),y=A.eagerReducer===s?A.eagerState:s(y,A.action);else{var z={lane:R,action:A.action,eagerReducer:A.eagerReducer,eagerState:A.eagerState,next:null};C===null?(M=C=z,w=y):C=C.next=z,ji.lanes|=R,$c|=R}A=A.next}while(A!==null&&A!==g);C===null?w=y:C.next=M,Qr(y,u.memoizedState)||(To=!0),u.memoizedState=y,u.baseState=w,u.baseQueue=C,f.lastRenderedState=y}return[u.memoizedState,f.dispatch]}function sc(s){var u=Bu(),f=u.queue;if(f===null)throw Error(St(311));f.lastRenderedReducer=s;var y=f.dispatch,g=f.pending,w=u.memoizedState;if(g!==null){f.pending=null;var M=g=g.next;do w=s(w,M.action),M=M.next;while(M!==g);Qr(w,u.memoizedState)||(To=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),f.lastRenderedState=w}return[w,y]}function P2(s,u,f){var y=u._getVersion;y=y(u._source);var g=u._workInProgressVersionPrimary;if(g!==null?s=g===y:(s=s.mutableReadLanes,(s=(Yc&s)===s)&&(u._workInProgressVersionPrimary=y,ga.push(u))),s)return f(u._source);throw ga.push(u),Error(St(350))}function LN(s,u,f,y){var g=Jn;if(g===null)throw Error(St(349));var w=u._getVersion,M=w(u._source),C=Cc.current,A=C.useState(function(){return P2(g,u,f)}),R=A[1],z=A[0];A=xn;var Y=s.memoizedState,Z=Y.refs,lt=Z.getSnapshot,xt=Y.source;Y=Y.subscribe;var W=ji;return s.memoizedState={refs:Z,source:u,subscribe:y},C.useEffect(function(){Z.getSnapshot=f,Z.setSnapshot=R;var B=w(u._source);if(!Qr(M,B)){B=f(u._source),Qr(z,B)||(R(B),B=vl(W),g.mutableReadLanes|=B&g.pendingLanes),B=g.mutableReadLanes,g.entangledLanes|=B;for(var U=g.entanglements,F=B;0<F;){var J=31-Ml(F),D=1<<J;U[J]|=B,F&=~D}}},[f,u,y]),C.useEffect(function(){return y(u._source,function(){var B=Z.getSnapshot,U=Z.setSnapshot;try{U(B(u._source));var F=vl(W);g.mutableReadLanes|=F&g.pendingLanes}catch(J){U(function(){throw J})}})},[u,y]),Qr(lt,f)&&Qr(xt,u)&&Qr(Y,y)||(s={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:z},s.dispatch=R=Jx.bind(null,ji,s),A.queue=s,A.baseQueue=null,z=P2(g,u,f),A.memoizedState=A.baseState=z),z}function EN(s,u,f){var y=Bu();return LN(y,s,u,f)}function lc(s){var u=Lu();return typeof s=="function"&&(s=s()),u.memoizedState=u.baseState=s,s=u.queue={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:s},s=s.dispatch=Jx.bind(null,ji,s),[u.memoizedState,s]}function eg(s,u,f,y){return s={tag:s,create:u,destroy:f,deps:y,next:null},u=ji.updateQueue,u===null?(u={lastEffect:null},ji.updateQueue=u,u.lastEffect=s.next=s):(f=u.lastEffect,f===null?u.lastEffect=s.next=s:(y=f.next,f.next=s,s.next=y,u.lastEffect=s)),s}function C2(s){var u=Lu();return s={current:s},u.memoizedState=s}function ig(){return Bu().memoizedState}function D1(s,u,f,y){var g=Lu();ji.flags|=s,g.memoizedState=eg(1|u,f,void 0,y===void 0?null:y)}function Kx(s,u,f,y){var g=Bu();y=y===void 0?null:y;var w=void 0;if(In!==null){var M=In.memoizedState;if(w=M.destroy,y!==null&&Wx(y,M.deps)){eg(u,f,w,y);return}}ji.flags|=s,g.memoizedState=eg(1|u,f,w,y)}function N2(s,u){return D1(516,4,s,u)}function ng(s,u){return Kx(516,4,s,u)}function ON(s,u){return Kx(4,2,s,u)}function AN(s,u){if(typeof u=="function")return s=s(),u(s),function(){u(null)};if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function jN(s,u,f){return f=f!=null?f.concat([s]):null,Kx(4,2,AN.bind(null,u,s),f)}function $x(){}function DN(s,u){var f=Bu();u=u===void 0?null:u;var y=f.memoizedState;return y!==null&&u!==null&&Wx(u,y[1])?y[0]:(f.memoizedState=[s,u],s)}function IN(s,u){var f=Bu();u=u===void 0?null:u;var y=f.memoizedState;return y!==null&&u!==null&&Wx(u,y[1])?y[0]:(s=s(),f.memoizedState=[s,u],s)}function hO(s,u){var f=ka();ju(98>f?98:f,function(){s(!0)}),ju(97<f?97:f,function(){var y=br.transition;br.transition=1;try{s(!1),u()}finally{br.transition=y}})}function Jx(s,u,f){var y=Nr(),g=vl(s),w={lane:g,action:f,eagerReducer:null,eagerState:null,next:null},M=u.pending;if(M===null?w.next=w:(w.next=M.next,M.next=w),u.pending=w,M=s.alternate,s===ji||M!==null&&M===ji)Nc=tg=!0;else{if(s.lanes===0&&(M===null||M.lanes===0)&&(M=u.lastRenderedReducer,M!==null))try{var C=u.lastRenderedState,A=M(C,f);if(w.eagerReducer=M,w.eagerState=A,Qr(A,C))return}catch{}finally{}xl(s,g,y)}}var rg={readContext:to,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useOpaqueIdentifier:fr,unstable_isNewReconciler:!1},aO={readContext:to,useCallback:function(s,u){return Lu().memoizedState=[s,u===void 0?null:u],s},useContext:to,useEffect:N2,useImperativeHandle:function(s,u,f){return f=f!=null?f.concat([s]):null,D1(4,2,AN.bind(null,u,s),f)},useLayoutEffect:function(s,u){return D1(4,2,s,u)},useMemo:function(s,u){var f=Lu();return u=u===void 0?null:u,s=s(),f.memoizedState=[s,u],s},useReducer:function(s,u,f){var y=Lu();return u=f!==void 0?f(u):u,y.memoizedState=y.baseState=u,s=y.queue={pending:null,dispatch:null,lastRenderedReducer:s,lastRenderedState:u},s=s.dispatch=Jx.bind(null,ji,s),[y.memoizedState,s]},useRef:C2,useState:lc,useDebugValue:$x,useDeferredValue:function(s){var u=lc(s),f=u[0],y=u[1];return N2(function(){var g=br.transition;br.transition=1;try{y(s)}finally{br.transition=g}},[s]),f},useTransition:function(){var s=lc(!1),u=s[0];return s=hO.bind(null,s[1]),C2(s),[s,u]},useMutableSource:function(s,u,f){var y=Lu();return y.memoizedState={refs:{getSnapshot:u,setSnapshot:null},source:s,subscribe:f},LN(y,s,u,f)},useOpaqueIdentifier:function(){if(ls){var s=!1,u=nO(function(){throw s||(s=!0,f("r:"+(Hv++).toString(36))),Error(St(355))}),f=lc(u)[1];return(ji.mode&2)===0&&(ji.flags|=516,eg(5,function(){f("r:"+(Hv++).toString(36))},void 0,null)),u}return u="r:"+(Hv++).toString(36),lc(u),u},unstable_isNewReconciler:!1},fO={readContext:to,useCallback:DN,useContext:to,useEffect:ng,useImperativeHandle:jN,useLayoutEffect:ON,useMemo:IN,useReducer:oc,useRef:ig,useState:function(){return oc(rs)},useDebugValue:$x,useDeferredValue:function(s){var u=oc(rs),f=u[0],y=u[1];return ng(function(){var g=br.transition;br.transition=1;try{y(s)}finally{br.transition=g}},[s]),f},useTransition:function(){var s=oc(rs)[0];return[ig().current,s]},useMutableSource:EN,useOpaqueIdentifier:function(){return oc(rs)[0]},unstable_isNewReconciler:!1},cO={readContext:to,useCallback:DN,useContext:to,useEffect:ng,useImperativeHandle:jN,useLayoutEffect:ON,useMemo:IN,useReducer:sc,useRef:ig,useState:function(){return sc(rs)},useDebugValue:$x,useDeferredValue:function(s){var u=sc(rs),f=u[0],y=u[1];return ng(function(){var g=br.transition;br.transition=1;try{y(s)}finally{br.transition=g}},[s]),f},useTransition:function(){var s=sc(rs)[0];return[ig().current,s]},useMutableSource:EN,useOpaqueIdentifier:function(){return sc(rs)[0]},unstable_isNewReconciler:!1},pO=Fu.ReactCurrentOwner,To=!1;function dr(s,u,f,y){u.child=s===null?NN(u,null,f,y):qy(u,s.child,f,y)}function T2(s,u,f,y,g){f=f.render;var w=u.ref;return ya(u,g),y=Hx(s,u,f,y,w,g),s!==null&&!To?(u.updateQueue=s.updateQueue,u.flags&=-517,s.lanes&=~g,Rs(s,u,g)):(u.flags|=1,dr(s,u,y,g),u.child)}function L2(s,u,f,y,g,w){if(s===null){var M=f.type;return typeof M=="function"&&!ew(M)&&M.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=M,FN(s,u,M,y,g,w)):(s=Iy(f.type,null,y,u,u.mode,w),s.ref=u.ref,s.return=u,u.child=s)}return M=s.child,(g&w)===0&&(g=M.memoizedProps,f=f.compare,f=f!==null?f:Bc,f(g,y)&&s.ref===u.ref)?Rs(s,u,w):(u.flags|=1,s=Cl(M,y),s.ref=u.ref,s.return=u,u.child=s)}function FN(s,u,f,y,g,w){if(s!==null&&Bc(s.memoizedProps,y)&&s.ref===u.ref)if(To=!1,(w&g)!==0)(s.flags&16384)!==0&&(To=!0);else return u.lanes=s.lanes,Rs(s,u,w);return I1(s,u,f,y,w)}function Zv(s,u,f){var y=u.pendingProps,g=y.children,w=s!==null?s.memoizedState:null;if(y.mode==="hidden"||y.mode==="unstable-defer-without-hiding")if((u.mode&4)===0)u.memoizedState={baseLanes:0},vy(u,f);else if((f&1073741824)!==0)u.memoizedState={baseLanes:0},vy(u,w!==null?w.baseLanes:f);else return s=w!==null?w.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:s},vy(u,s),null;else w!==null?(y=w.baseLanes|f,u.memoizedState=null):y=f,vy(u,y);return dr(s,u,g,f),u.child}function RN(s,u){var f=u.ref;(s===null&&f!==null||s!==null&&s.ref!==f)&&(u.flags|=128)}function I1(s,u,f,y,g){var w=gr(f)?Au:Bn.current;return w=Ma(u,w),ya(u,g),f=Hx(s,u,f,y,w,g),s!==null&&!To?(u.updateQueue=s.updateQueue,u.flags&=-517,s.lanes&=~g,Rs(s,u,g)):(u.flags|=1,dr(s,u,f,g),u.child)}function E2(s,u,f,y,g){if(gr(f)){var w=!0;Ey(u)}else w=!1;if(ya(u,g),u.stateNode===null)s!==null&&(s.alternate=null,u.alternate=null,u.flags|=2),PN(u,f,y),O1(u,f,y,g),y=!0;else if(s===null){var M=u.stateNode,C=u.memoizedProps;M.props=C;var A=M.context,R=f.contextType;typeof R=="object"&&R!==null?R=to(R):(R=gr(f)?Au:Bn.current,R=Ma(u,R));var z=f.getDerivedStateFromProps,Y=typeof z=="function"||typeof M.getSnapshotBeforeUpdate=="function";Y||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(C!==y||A!==R)&&w2(u,M,y,R),ll=!1;var Z=u.memoizedState;M.state=Z,Uc(u,y,M,g),A=u.memoizedState,C!==y||Z!==A||yr.current||ll?(typeof z=="function"&&(Qy(u,f,z,y),A=u.memoizedState),(C=ll||x2(u,f,C,y,Z,A,R))?(Y||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(u.flags|=4)):(typeof M.componentDidMount=="function"&&(u.flags|=4),u.memoizedProps=y,u.memoizedState=A),M.props=y,M.state=A,M.context=R,y=C):(typeof M.componentDidMount=="function"&&(u.flags|=4),y=!1)}else{M=u.stateNode,MN(s,u),C=u.memoizedProps,R=u.type===u.elementType?C:Co(u.type,C),M.props=R,Y=u.pendingProps,Z=M.context,A=f.contextType,typeof A=="object"&&A!==null?A=to(A):(A=gr(f)?Au:Bn.current,A=Ma(u,A));var lt=f.getDerivedStateFromProps;(z=typeof lt=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(C!==Y||Z!==A)&&w2(u,M,y,A),ll=!1,Z=u.memoizedState,M.state=Z,Uc(u,y,M,g);var xt=u.memoizedState;C!==Y||Z!==xt||yr.current||ll?(typeof lt=="function"&&(Qy(u,f,lt,y),xt=u.memoizedState),(R=ll||x2(u,f,R,y,Z,xt,A))?(z||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,xt,A),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,xt,A)),typeof M.componentDidUpdate=="function"&&(u.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(u.flags|=256)):(typeof M.componentDidUpdate!="function"||C===s.memoizedProps&&Z===s.memoizedState||(u.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&Z===s.memoizedState||(u.flags|=256),u.memoizedProps=y,u.memoizedState=xt),M.props=y,M.state=xt,M.context=A,y=R):(typeof M.componentDidUpdate!="function"||C===s.memoizedProps&&Z===s.memoizedState||(u.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&Z===s.memoizedState||(u.flags|=256),y=!1)}return F1(s,u,f,y,w,g)}function F1(s,u,f,y,g,w){RN(s,u);var M=(u.flags&64)!==0;if(!y&&!M)return g&&d2(u,f,!1),Rs(s,u,w);y=u.stateNode,pO.current=u;var C=M&&typeof f.getDerivedStateFromError!="function"?null:y.render();return u.flags|=1,s!==null&&M?(u.child=qy(u,s.child,null,w),u.child=qy(u,null,C,w)):dr(s,u,C,w),u.memoizedState=y.state,g&&d2(u,f,!0),u.child}function O2(s){var u=s.stateNode;u.pendingContext?p2(s,u.pendingContext,u.pendingContext!==u.context):u.context&&p2(s,u.context,!1),A1(s,u.containerInfo)}var my={dehydrated:null,retryLane:0};function A2(s,u,f){var y=u.pendingProps,g=Mi.current,w=!1,M;return(M=(u.flags&64)!==0)||(M=s!==null&&s.memoizedState===null?!1:(g&2)!==0),M?(w=!0,u.flags&=-65):s!==null&&s.memoizedState===null||y.fallback===void 0||y.unstable_avoidThisFallback===!0||(g|=1),ki(Mi,g&1),s===null?(y.fallback!==void 0&&j1(u),s=y.children,g=y.fallback,w?(s=j2(u,s,g,f),u.child.memoizedState={baseLanes:f},u.memoizedState=my,s):typeof y.unstable_expectedLoadTime=="number"?(s=j2(u,s,g,f),u.child.memoizedState={baseLanes:f},u.memoizedState=my,u.lanes=33554432,s):(f=iw({mode:"visible",children:s},u.mode,f,null),f.return=u,u.child=f)):s.memoizedState!==null?w?(y=I2(s,u,y.children,y.fallback,f),w=u.child,g=s.child.memoizedState,w.memoizedState=g===null?{baseLanes:f}:{baseLanes:g.baseLanes|f},w.childLanes=s.childLanes&~f,u.memoizedState=my,y):(f=D2(s,u,y.children,f),u.memoizedState=null,f):w?(y=I2(s,u,y.children,y.fallback,f),w=u.child,g=s.child.memoizedState,w.memoizedState=g===null?{baseLanes:f}:{baseLanes:g.baseLanes|f},w.childLanes=s.childLanes&~f,u.memoizedState=my,y):(f=D2(s,u,y.children,f),u.memoizedState=null,f)}function j2(s,u,f,y){var g=s.mode,w=s.child;return u={mode:"hidden",children:u},(g&2)===0&&w!==null?(w.childLanes=0,w.pendingProps=u):w=iw(u,g,0,null),f=xa(f,g,y,null),w.return=s,f.return=s,w.sibling=f,s.child=w,f}function D2(s,u,f,y){var g=s.child;return s=g.sibling,f=Cl(g,{mode:"visible",children:f}),(u.mode&2)===0&&(f.lanes=y),f.return=u,f.sibling=null,s!==null&&(s.nextEffect=null,s.flags=8,u.firstEffect=u.lastEffect=s),u.child=f}function I2(s,u,f,y,g){var w=u.mode,M=s.child;s=M.sibling;var C={mode:"hidden",children:f};return(w&2)===0&&u.child!==M?(f=u.child,f.childLanes=0,f.pendingProps=C,M=f.lastEffect,M!==null?(u.firstEffect=f.firstEffect,u.lastEffect=M,M.nextEffect=null):u.firstEffect=u.lastEffect=null):f=Cl(M,C),s!==null?y=Cl(s,y):(y=xa(y,w,g,null),y.flags|=2),y.return=u,f.return=u,f.sibling=y,u.child=f,y}function F2(s,u){s.lanes|=u;var f=s.alternate;f!==null&&(f.lanes|=u),SN(s.return,u)}function Qv(s,u,f,y,g,w){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:g,lastEffect:w}:(M.isBackwards=u,M.rendering=null,M.renderingStartTime=0,M.last=y,M.tail=f,M.tailMode=g,M.lastEffect=w)}function R2(s,u,f){var y=u.pendingProps,g=y.revealOrder,w=y.tail;if(dr(s,u,y.children,f),y=Mi.current,(y&2)!==0)y=y&1|2,u.flags|=64;else{if(s!==null&&(s.flags&64)!==0)t:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&F2(s,f);else if(s.tag===19)F2(s,f);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break t;for(;s.sibling===null;){if(s.return===null||s.return===u)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(ki(Mi,y),(u.mode&2)===0)u.memoizedState=null;else switch(g){case"forwards":for(f=u.child,g=null;f!==null;)s=f.alternate,s!==null&&by(s)===null&&(g=f),f=f.sibling;f=g,f===null?(g=u.child,u.child=null):(g=f.sibling,f.sibling=null),Qv(u,!1,g,f,w,u.lastEffect);break;case"backwards":for(f=null,g=u.child,u.child=null;g!==null;){if(s=g.alternate,s!==null&&by(s)===null){u.child=g;break}s=g.sibling,g.sibling=f,f=g,g=s}Qv(u,!0,f,null,w,u.lastEffect);break;case"together":Qv(u,!1,null,null,void 0,u.lastEffect);break;default:u.memoizedState=null}return u.child}function Rs(s,u,f){if(s!==null&&(u.dependencies=s.dependencies),$c|=u.lanes,(f&u.childLanes)!==0){if(s!==null&&u.child!==s.child)throw Error(St(153));if(u.child!==null){for(s=u.child,f=Cl(s,s.pendingProps),u.child=f,f.return=u;s.sibling!==null;)s=s.sibling,f=f.sibling=Cl(s,s.pendingProps),f.return=u;f.sibling=null}return u.child}return null}var BN,R1,VN,_N;BN=function(s,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)s.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}};R1=function(){};VN=function(s,u,f,y){var g=s.memoizedProps;if(g!==y){s=u.stateNode,Tu(ss.current);var w=null;switch(f){case"input":g=h1(s,g),y=h1(s,y),w=[];break;case"option":g=c1(s,g),y=c1(s,y),w=[];break;case"select":g=ei({},g,{value:void 0}),y=ei({},y,{value:void 0}),w=[];break;case"textarea":g=p1(s,g),y=p1(s,y),w=[];break;default:typeof g.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=Wy)}g1(f,y);var M;f=null;for(R in g)if(!y.hasOwnProperty(R)&&g.hasOwnProperty(R)&&g[R]!=null)if(R==="style"){var C=g[R];for(M in C)C.hasOwnProperty(M)&&(f||(f={}),f[M]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(Oc.hasOwnProperty(R)?w||(w=[]):(w=w||[]).push(R,null));for(R in y){var A=y[R];if(C=g!=null?g[R]:void 0,y.hasOwnProperty(R)&&A!==C&&(A!=null||C!=null))if(R==="style")if(C){for(M in C)!C.hasOwnProperty(M)||A&&A.hasOwnProperty(M)||(f||(f={}),f[M]="");for(M in A)A.hasOwnProperty(M)&&C[M]!==A[M]&&(f||(f={}),f[M]=A[M])}else f||(w||(w=[]),w.push(R,f)),f=A;else R==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,C=C?C.__html:void 0,A!=null&&C!==A&&(w=w||[]).push(R,A)):R==="children"?typeof A!="string"&&typeof A!="number"||(w=w||[]).push(R,""+A):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(Oc.hasOwnProperty(R)?(A!=null&&R==="onScroll"&&He("scroll",s),w||C===A||(w=[])):typeof A=="object"&&A!==null&&A.$$typeof===Mx?A.toString():(w=w||[]).push(R,A))}f&&(w=w||[]).push("style",f);var R=w;(u.updateQueue=R)&&(u.flags|=4)}};_N=function(s,u,f,y){f!==y&&(u.flags|=4)};function uc(s,u){if(!ls)switch(s.tailMode){case"hidden":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function dO(s,u,f){var y=u.pendingProps;switch(u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gr(u.type)&&Ky(),null;case 3:return Pa(),$e(yr),$e(Bn),Xx(),y=u.stateNode,y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(gy(u)?u.flags|=4:y.hydrate||(u.flags|=256)),R1(u),null;case 5:Yx(u);var g=Tu(Gc.current);if(f=u.type,s!==null&&u.stateNode!=null)VN(s,u,f,y,g),s.ref!==u.ref&&(u.flags|=128);else{if(!y){if(u.stateNode===null)throw Error(St(166));return null}if(s=Tu(ss.current),gy(u)){y=u.stateNode,f=u.type;var w=u.memoizedProps;switch(y[al]=u,y[Hy]=w,f){case"dialog":He("cancel",y),He("close",y);break;case"iframe":case"object":case"embed":He("load",y);break;case"video":case"audio":for(s=0;s<pc.length;s++)He(pc[s],y);break;case"source":He("error",y);break;case"img":case"image":case"link":He("error",y),He("load",y);break;case"details":He("toggle",y);break;case"input":RP(y,w),He("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!w.multiple},He("invalid",y);break;case"textarea":VP(y,w),He("invalid",y)}g1(f,w),s=null;for(var M in w)w.hasOwnProperty(M)&&(g=w[M],M==="children"?typeof g=="string"?y.textContent!==g&&(s=["children",g]):typeof g=="number"&&y.textContent!==""+g&&(s=["children",""+g]):Oc.hasOwnProperty(M)&&g!=null&&M==="onScroll"&&He("scroll",y));switch(f){case"input":ay(y),BP(y,w,!0);break;case"textarea":ay(y),_P(y);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(y.onclick=Wy)}y=s,u.updateQueue=y,y!==null&&(u.flags|=4)}else{switch(M=g.nodeType===9?g:g.ownerDocument,s===d1.html&&(s=jC(f)),s===d1.html?f==="script"?(s=M.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=M.createElement(f,{is:y.is}):(s=M.createElement(f),f==="select"&&(M=s,y.multiple?M.multiple=!0:y.size&&(M.size=y.size))):s=M.createElementNS(s,f),s[al]=u,s[Hy]=y,BN(s,u,!1,!1),u.stateNode=s,M=m1(f,y),f){case"dialog":He("cancel",s),He("close",s),g=y;break;case"iframe":case"object":case"embed":He("load",s),g=y;break;case"video":case"audio":for(g=0;g<pc.length;g++)He(pc[g],s);g=y;break;case"source":He("error",s),g=y;break;case"img":case"image":case"link":He("error",s),He("load",s),g=y;break;case"details":He("toggle",s),g=y;break;case"input":RP(s,y),g=h1(s,y),He("invalid",s);break;case"option":g=c1(s,y);break;case"select":s._wrapperState={wasMultiple:!!y.multiple},g=ei({},y,{value:void 0}),He("invalid",s);break;case"textarea":VP(s,y),g=p1(s,y),He("invalid",s);break;default:g=y}g1(f,g);var C=g;for(w in C)if(C.hasOwnProperty(w)){var A=C[w];w==="style"?FC(s,A):w==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&DC(s,A)):w==="children"?typeof A=="string"?(f!=="textarea"||A!=="")&&Ac(s,A):typeof A=="number"&&Ac(s,""+A):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Oc.hasOwnProperty(w)?A!=null&&w==="onScroll"&&He("scroll",s):A!=null&&gx(s,w,A,M))}switch(f){case"input":ay(s),BP(s,y,!1);break;case"textarea":ay(s),_P(s);break;case"option":y.value!=null&&s.setAttribute("value",""+Sl(y.value));break;case"select":s.multiple=!!y.multiple,w=y.value,w!=null?fa(s,!!y.multiple,w,!1):y.defaultValue!=null&&fa(s,!!y.multiple,y.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Wy)}cN(f,y)&&(u.flags|=4)}u.ref!==null&&(u.flags|=128)}return null;case 6:if(s&&u.stateNode!=null)_N(s,u,s.memoizedProps,y);else{if(typeof y!="string"&&u.stateNode===null)throw Error(St(166));f=Tu(Gc.current),Tu(ss.current),gy(u)?(y=u.stateNode,f=u.memoizedProps,y[al]=u,y.nodeValue!==f&&(u.flags|=4)):(y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[al]=u,u.stateNode=y)}return null;case 13:return $e(Mi),y=u.memoizedState,(u.flags&64)!==0?(u.lanes=f,u):(y=y!==null,f=!1,s===null?u.memoizedProps.fallback!==void 0&&gy(u):f=s.memoizedState!==null,y&&!f&&(u.mode&2)!==0&&(s===null&&u.memoizedProps.unstable_avoidThisFallback!==!0||(Mi.current&1)!==0?wn===0&&(wn=3):((wn===0||wn===3)&&(wn=4),Jn===null||($c&134217727)===0&&(Aa&134217727)===0||ma(Jn,Rn))),(y||f)&&(u.flags|=4),null);case 4:return Pa(),R1(u),s===null&&hN(u.stateNode.containerInfo),null;case 10:return zx(u),null;case 17:return gr(u.type)&&Ky(),null;case 19:if($e(Mi),y=u.memoizedState,y===null)return null;if(w=(u.flags&64)!==0,M=y.rendering,M===null)if(w)uc(y,!1);else{if(wn!==0||s!==null&&(s.flags&64)!==0)for(s=u.child;s!==null;){if(M=by(s),M!==null){for(u.flags|=64,uc(y,!1),w=M.updateQueue,w!==null&&(u.updateQueue=w,u.flags|=4),y.lastEffect===null&&(u.firstEffect=null),u.lastEffect=y.lastEffect,y=f,f=u.child;f!==null;)w=f,s=y,w.flags&=2,w.nextEffect=null,w.firstEffect=null,w.lastEffect=null,M=w.alternate,M===null?(w.childLanes=0,w.lanes=s,w.child=null,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=M.childLanes,w.lanes=M.lanes,w.child=M.child,w.memoizedProps=M.memoizedProps,w.memoizedState=M.memoizedState,w.updateQueue=M.updateQueue,w.type=M.type,s=M.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),f=f.sibling;return ki(Mi,Mi.current&1|2),u.child}s=s.sibling}y.tail!==null&&Fn()>G1&&(u.flags|=64,w=!0,uc(y,!1),u.lanes=33554432)}else{if(!w)if(s=by(M),s!==null){if(u.flags|=64,w=!0,f=s.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),uc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!M.alternate&&!ls)return u=u.lastEffect=y.lastEffect,u!==null&&(u.nextEffect=null),null}else 2*Fn()-y.renderingStartTime>G1&&f!==1073741824&&(u.flags|=64,w=!0,uc(y,!1),u.lanes=33554432);y.isBackwards?(M.sibling=u.child,u.child=M):(f=y.last,f!==null?f.sibling=M:u.child=M,y.last=M)}return y.tail!==null?(f=y.tail,y.rendering=f,y.tail=f.sibling,y.lastEffect=u.lastEffect,y.renderingStartTime=Fn(),f.sibling=null,u=Mi.current,ki(Mi,w?u&1|2:u&1),f):null;case 23:case 24:return tw(),s!==null&&s.memoizedState!==null!=(u.memoizedState!==null)&&y.mode!=="unstable-defer-without-hiding"&&(u.flags|=4),null}throw Error(St(156,u.tag))}function yO(s){switch(s.tag){case 1:gr(s.type)&&Ky();var u=s.flags;return u&4096?(s.flags=u&-4097|64,s):null;case 3:if(Pa(),$e(yr),$e(Bn),Xx(),u=s.flags,(u&64)!==0)throw Error(St(285));return s.flags=u&-4097|64,s;case 5:return Yx(s),null;case 13:return $e(Mi),u=s.flags,u&4096?(s.flags=u&-4097|64,s):null;case 19:return $e(Mi),null;case 4:return Pa(),null;case 10:return zx(s),null;case 23:case 24:return tw(),null;default:return null}}function Zx(s,u){try{var f="",y=u;do f+=JL(y),y=y.return;while(y);var g=f}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:u,stack:g}}function B1(s,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var gO=typeof WeakMap=="function"?WeakMap:Map;function UN(s,u,f){f=gl(-1,f),f.tag=3,f.payload={element:null};var y=u.value;return f.callback=function(){sg||(sg=!0,Y1=y),B1(s,u)},f}function zN(s,u,f){f=gl(-1,f),f.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var g=u.value;f.payload=function(){return B1(s,u),y(g)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(f.callback=function(){typeof y!="function"&&(os===null?os=new Set([this]):os.add(this),B1(s,u));var M=u.stack;this.componentDidCatch(u.value,{componentStack:M!==null?M:""})}),f}var mO=typeof WeakSet=="function"?WeakSet:Set;function B2(s){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){wl(s,f)}else u.current=null}function vO(s,u){switch(u.tag){case 0:case 11:case 15:case 22:return;case 1:if(u.flags&256&&s!==null){var f=s.memoizedProps,y=s.memoizedState;s=u.stateNode,u=s.getSnapshotBeforeUpdate(u.elementType===u.type?f:Co(u.type,f),y),s.__reactInternalSnapshotBeforeUpdate=u}return;case 3:u.flags&256&&Bx(u.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(St(163))}function xO(s,u,f){switch(f.tag){case 0:case 11:case 15:case 22:if(u=f.updateQueue,u=u!==null?u.lastEffect:null,u!==null){s=u=u.next;do{if((s.tag&3)===3){var y=s.create;s.destroy=y()}s=s.next}while(s!==u)}if(u=f.updateQueue,u=u!==null?u.lastEffect:null,u!==null){s=u=u.next;do{var g=s;y=g.next,g=g.tag,(g&4)!==0&&(g&1)!==0&&(ZN(f,s),TO(f,s)),s=y}while(s!==u)}return;case 1:s=f.stateNode,f.flags&4&&(u===null?s.componentDidMount():(y=f.elementType===f.type?u.memoizedProps:Co(f.type,u.memoizedProps),s.componentDidUpdate(y,u.memoizedState,s.__reactInternalSnapshotBeforeUpdate))),u=f.updateQueue,u!==null&&v2(f,u,s);return;case 3:if(u=f.updateQueue,u!==null){if(s=null,f.child!==null)switch(f.child.tag){case 5:s=f.child.stateNode;break;case 1:s=f.child.stateNode}v2(f,u,s)}return;case 5:s=f.stateNode,u===null&&f.flags&4&&cN(f.type,f.memoizedProps)&&s.focus();return;case 6:return;case 4:return;case 12:return;case 13:f.memoizedState===null&&(f=f.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&WC(f))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(St(163))}function V2(s,u){for(var f=s;;){if(f.tag===5){var y=f.stateNode;if(u)y=y.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{y=f.stateNode;var g=f.memoizedProps.style;g=g!=null&&g.hasOwnProperty("display")?g.display:null,y.style.display=IC("display",g)}}else if(f.tag===6)f.stateNode.nodeValue=u?"":f.memoizedProps;else if((f.tag!==23&&f.tag!==24||f.memoizedState===null||f===s)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return;f=f.return}f.sibling.return=f.return,f=f.sibling}}function _2(s,u){if(Ou&&typeof Ou.onCommitFiberUnmount=="function")try{Ou.onCommitFiberUnmount(Vx,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:case 22:if(s=u.updateQueue,s!==null&&(s=s.lastEffect,s!==null)){var f=s=s.next;do{var y=f,g=y.destroy;if(y=y.tag,g!==void 0)if((y&4)!==0)ZN(u,f);else{y=u;try{g()}catch(w){wl(y,w)}}f=f.next}while(f!==s)}break;case 1:if(B2(u),s=u.stateNode,typeof s.componentWillUnmount=="function")try{s.props=u.memoizedProps,s.state=u.memoizedState,s.componentWillUnmount()}catch(w){wl(u,w)}break;case 5:B2(u);break;case 4:GN(s,u)}}function U2(s){s.alternate=null,s.child=null,s.dependencies=null,s.firstEffect=null,s.lastEffect=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.return=null,s.updateQueue=null}function z2(s){return s.tag===5||s.tag===3||s.tag===4}function G2(s){t:{for(var u=s.return;u!==null;){if(z2(u))break t;u=u.return}throw Error(St(160))}var f=u;switch(u=f.stateNode,f.tag){case 5:var y=!1;break;case 3:u=u.containerInfo,y=!0;break;case 4:u=u.containerInfo,y=!0;break;default:throw Error(St(161))}f.flags&16&&(Ac(u,""),f.flags&=-17);t:e:for(f=s;;){for(;f.sibling===null;){if(f.return===null||z2(f.return)){f=null;break t}f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2)){f=f.stateNode;break t}}y?V1(s,f,u):_1(s,f,u)}function V1(s,u,f){var y=s.tag,g=y===5||y===6;if(g)s=g?s.stateNode:s.stateNode.instance,u?f.nodeType===8?f.parentNode.insertBefore(s,u):f.insertBefore(s,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(s,f)):(u=f,u.appendChild(s)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Wy));else if(y!==4&&(s=s.child,s!==null))for(V1(s,u,f),s=s.sibling;s!==null;)V1(s,u,f),s=s.sibling}function _1(s,u,f){var y=s.tag,g=y===5||y===6;if(g)s=g?s.stateNode:s.stateNode.instance,u?f.insertBefore(s,u):f.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(_1(s,u,f),s=s.sibling;s!==null;)_1(s,u,f),s=s.sibling}function GN(s,u){for(var f=u,y=!1,g,w;;){if(!y){y=f.return;t:for(;;){if(y===null)throw Error(St(160));switch(g=y.stateNode,y.tag){case 5:w=!1;break t;case 3:g=g.containerInfo,w=!0;break t;case 4:g=g.containerInfo,w=!0;break t}y=y.return}y=!0}if(f.tag===5||f.tag===6){t:for(var M=s,C=f,A=C;;)if(_2(M,A),A.child!==null&&A.tag!==4)A.child.return=A,A=A.child;else{if(A===C)break t;for(;A.sibling===null;){if(A.return===null||A.return===C)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}w?(M=g,C=f.stateNode,M.nodeType===8?M.parentNode.removeChild(C):M.removeChild(C)):g.removeChild(f.stateNode)}else if(f.tag===4){if(f.child!==null){g=f.stateNode.containerInfo,w=!0,f.child.return=f,f=f.child;continue}}else if(_2(s,f),f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return,f.tag===4&&(y=!1)}f.sibling.return=f.return,f=f.sibling}}function qv(s,u){switch(u.tag){case 0:case 11:case 14:case 15:case 22:var f=u.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do(y.tag&3)===3&&(s=y.destroy,y.destroy=void 0,s!==void 0&&s()),y=y.next;while(y!==f)}return;case 1:return;case 5:if(f=u.stateNode,f!=null){y=u.memoizedProps;var g=s!==null?s.memoizedProps:y;s=u.type;var w=u.updateQueue;if(u.updateQueue=null,w!==null){for(f[Hy]=y,s==="input"&&y.type==="radio"&&y.name!=null&&OC(f,y),m1(s,g),u=m1(s,y),g=0;g<w.length;g+=2){var M=w[g],C=w[g+1];M==="style"?FC(f,C):M==="dangerouslySetInnerHTML"?DC(f,C):M==="children"?Ac(f,C):gx(f,M,C,u)}switch(s){case"input":a1(f,y);break;case"textarea":AC(f,y);break;case"select":s=f._wrapperState.wasMultiple,f._wrapperState.wasMultiple=!!y.multiple,w=y.value,w!=null?fa(f,!!y.multiple,w,!1):s!==!!y.multiple&&(y.defaultValue!=null?fa(f,!!y.multiple,y.defaultValue,!0):fa(f,!!y.multiple,y.multiple?[]:"",!1))}}}return;case 6:if(u.stateNode===null)throw Error(St(162));u.stateNode.nodeValue=u.memoizedProps;return;case 3:f=u.stateNode,f.hydrate&&(f.hydrate=!1,WC(f.containerInfo));return;case 12:return;case 13:u.memoizedState!==null&&(bx=Fn(),V2(u.child,!0)),Y2(u);return;case 19:Y2(u);return;case 17:return;case 23:case 24:V2(u,u.memoizedState!==null);return}throw Error(St(163))}function Y2(s){var u=s.updateQueue;if(u!==null){s.updateQueue=null;var f=s.stateNode;f===null&&(f=s.stateNode=new mO),u.forEach(function(y){var g=OO.bind(null,s,y);f.has(y)||(f.add(y),y.then(g,g))})}}function wO(s,u){return s!==null&&(s=s.memoizedState,s===null||s.dehydrated!==null)?(u=u.memoizedState,u!==null&&u.dehydrated===null):!1}var SO=Math.ceil,og=Fu.ReactCurrentDispatcher,Qx=Fu.ReactCurrentOwner,Zt=0,Jn=null,$i=null,Rn=0,Du=0,U1=Nl(0),wn=0,Pg=null,Oa=0,$c=0,Aa=0,qx=0,z1=null,bx=0,G1=1/0;function ja(){G1=Fn()+500}var At=null,sg=!1,Y1=null,os=null,Pl=!1,Tc=null,dc=90,X1=[],W1=[],Bs=null,Lc=0,H1=null,Ay=-1,Is=0,jy=0,Ec=null,Dy=!1;function Nr(){return(Zt&48)!==0?Fn():Ay!==-1?Ay:Ay=Fn()}function vl(s){if(s=s.mode,(s&2)===0)return 1;if((s&4)===0)return ka()===99?1:2;if(Is===0&&(Is=Oa),uO.transition!==0){jy!==0&&(jy=z1!==null?z1.pendingLanes:0),s=Is;var u=4186112&~jy;return u&=-u,u===0&&(s=4186112&~s,u=s&-s,u===0&&(u=8192)),u}return s=ka(),(Zt&4)!==0&&s===98?s=Yy(12,Is):(s=fE(s),s=Yy(s,Is)),s}function xl(s,u,f){if(50<Lc)throw Lc=0,H1=null,Error(St(185));if(s=Cg(s,u),s===null)return null;mg(s,u,f),s===Jn&&(Aa|=u,wn===4&&ma(s,Rn));var y=ka();u===1?(Zt&8)!==0&&(Zt&48)===0?K1(s):(eo(s,f),Zt===0&&(ja(),us())):((Zt&4)===0||y!==98&&y!==99||(Bs===null?Bs=new Set([s]):Bs.add(s)),eo(s,f)),z1=s}function Cg(s,u){s.lanes|=u;var f=s.alternate;for(f!==null&&(f.lanes|=u),f=s,s=s.return;s!==null;)s.childLanes|=u,f=s.alternate,f!==null&&(f.childLanes|=u),f=s,s=s.return;return f.tag===3?f.stateNode:null}function eo(s,u){for(var f=s.callbackNode,y=s.suspendedLanes,g=s.pingedLanes,w=s.expirationTimes,M=s.pendingLanes;0<M;){var C=31-Ml(M),A=1<<C,R=w[C];if(R===-1){if((A&y)===0||(A&g)!==0){R=u,ea(A);var z=Ge;w[C]=10<=z?R+250:6<=z?R+5e3:-1}}else R<=u&&(s.expiredLanes|=A);M&=~A}if(y=Fc(s,s===Jn?Rn:0),u=Ge,y===0)f!==null&&(f!==Kv&&L1(f),s.callbackNode=null,s.callbackPriority=0);else{if(f!==null){if(s.callbackPriority===u)return;f!==Kv&&L1(f)}u===15?(f=K1.bind(null,s),Ds===null?(Ds=[f],Oy=_x(Mg,wN)):Ds.push(f),f=Kv):u===14?f=_c(99,K1.bind(null,s)):(f=cE(u),f=_c(f,YN.bind(null,s))),s.callbackPriority=u,s.callbackNode=f}}function YN(s){if(Ay=-1,jy=Is=0,(Zt&48)!==0)throw Error(St(327));var u=s.callbackNode;if(Tl()&&s.callbackNode!==u)return null;var f=Fc(s,s===Jn?Rn:0);if(f===0)return null;var y=f,g=Zt;Zt|=16;var w=KN();(Jn!==s||Rn!==y)&&(ja(),va(s,y));do try{PO();break}catch(C){HN(s,C)}while(1);if(Ux(),og.current=w,Zt=g,$i!==null?y=0:(Jn=null,Rn=0,y=wn),(Oa&Aa)!==0)va(s,0);else if(y!==0){if(y===2&&(Zt|=64,s.hydrate&&(s.hydrate=!1,Bx(s.containerInfo)),f=qC(s),f!==0&&(y=yc(s,f))),y===1)throw u=Pg,va(s,0),ma(s,f),eo(s,Fn()),u;switch(s.finishedWork=s.current.alternate,s.finishedLanes=f,y){case 0:case 1:throw Error(St(345));case 2:wu(s);break;case 3:if(ma(s,f),(f&62914560)===f&&(y=bx+500-Fn(),10<y)){if(Fc(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){Nr(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=a2(wu.bind(null,s),y);break}wu(s);break;case 4:if(ma(s,f),(f&4186112)===f)break;for(y=s.eventTimes,g=-1;0<f;){var M=31-Ml(f);w=1<<M,M=y[M],M>g&&(g=M),f&=~w}if(f=g,f=Fn()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*SO(f/1960))-f,10<f){s.timeoutHandle=a2(wu.bind(null,s),f);break}wu(s);break;case 5:wu(s);break;default:throw Error(St(329))}}return eo(s,Fn()),s.callbackNode===u?YN.bind(null,s):null}function ma(s,u){for(u&=~qx,u&=~Aa,s.suspendedLanes|=u,s.pingedLanes&=~u,s=s.expirationTimes;0<u;){var f=31-Ml(u),y=1<<f;s[f]=-1,u&=~y}}function K1(s){if((Zt&48)!==0)throw Error(St(327));if(Tl(),s===Jn&&(s.expiredLanes&Rn)!==0){var u=Rn,f=yc(s,u);(Oa&Aa)!==0&&(u=Fc(s,u),f=yc(s,u))}else u=Fc(s,0),f=yc(s,u);if(s.tag!==0&&f===2&&(Zt|=64,s.hydrate&&(s.hydrate=!1,Bx(s.containerInfo)),u=qC(s),u!==0&&(f=yc(s,u))),f===1)throw f=Pg,va(s,0),ma(s,u),eo(s,Fn()),f;return s.finishedWork=s.current.alternate,s.finishedLanes=u,wu(s),eo(s,Fn()),null}function MO(){if(Bs!==null){var s=Bs;Bs=null,s.forEach(function(u){u.expiredLanes|=24&u.pendingLanes,eo(u,Fn())})}us()}function XN(s,u){var f=Zt;Zt|=1;try{return s(u)}finally{Zt=f,Zt===0&&(ja(),us())}}function WN(s,u){var f=Zt;Zt&=-2,Zt|=8;try{return s(u)}finally{Zt=f,Zt===0&&(ja(),us())}}function vy(s,u){ki(U1,Du),Du|=u,Oa|=u}function tw(){Du=U1.current,$e(U1)}function va(s,u){s.finishedWork=null,s.finishedLanes=0;var f=s.timeoutHandle;if(f!==-1&&(s.timeoutHandle=-1,iO(f)),$i!==null)for(f=$i.return;f!==null;){var y=f;switch(y.tag){case 1:y=y.type.childContextTypes,y!=null&&Ky();break;case 3:Pa(),$e(yr),$e(Bn),Xx();break;case 5:Yx(y);break;case 4:Pa();break;case 13:$e(Mi);break;case 19:$e(Mi);break;case 10:zx(y);break;case 23:case 24:tw()}f=f.return}Jn=s,$i=Cl(s.current,null),Rn=Du=Oa=u,wn=0,Pg=null,qx=Aa=$c=0}function HN(s,u){do{var f=$i;try{if(Ux(),Cc.current=rg,tg){for(var y=ji.memoizedState;y!==null;){var g=y.queue;g!==null&&(g.pending=null),y=y.next}tg=!1}if(Yc=0,xn=In=ji=null,Nc=!1,Qx.current=null,f===null||f.return===null){wn=1,Pg=u,$i=null;break}t:{var w=s,M=f.return,C=f,A=u;if(u=Rn,C.flags|=2048,C.firstEffect=C.lastEffect=null,A!==null&&typeof A=="object"&&typeof A.then=="function"){var R=A;if((C.mode&2)===0){var z=C.alternate;z?(C.updateQueue=z.updateQueue,C.memoizedState=z.memoizedState,C.lanes=z.lanes):(C.updateQueue=null,C.memoizedState=null)}var Y=(Mi.current&1)!==0,Z=M;do{var lt;if(lt=Z.tag===13){var xt=Z.memoizedState;if(xt!==null)lt=xt.dehydrated!==null;else{var W=Z.memoizedProps;lt=W.fallback===void 0?!1:W.unstable_avoidThisFallback!==!0?!0:!Y}}if(lt){var B=Z.updateQueue;if(B===null){var U=new Set;U.add(R),Z.updateQueue=U}else B.add(R);if((Z.mode&2)===0){if(Z.flags|=64,C.flags|=16384,C.flags&=-2981,C.tag===1)if(C.alternate===null)C.tag=17;else{var F=gl(-1,1);F.tag=2,ml(C,F)}C.lanes|=1;break t}A=void 0,C=u;var J=w.pingCache;if(J===null?(J=w.pingCache=new gO,A=new Set,J.set(R,A)):(A=J.get(R),A===void 0&&(A=new Set,J.set(R,A))),!A.has(C)){A.add(C);var D=EO.bind(null,w,R,C);R.then(D,D)}Z.flags|=4096,Z.lanes=u;break t}Z=Z.return}while(Z!==null);A=Error((aa(C.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}wn!==5&&(wn=2),A=Zx(A,C),Z=M;do{switch(Z.tag){case 3:w=A,Z.flags|=4096,u&=-u,Z.lanes|=u;var rt=UN(Z,w,u);m2(Z,rt);break t;case 1:w=A;var st=Z.type,wt=Z.stateNode;if((Z.flags&64)===0&&(typeof st.getDerivedStateFromError=="function"||wt!==null&&typeof wt.componentDidCatch=="function"&&(os===null||!os.has(wt)))){Z.flags|=4096,u&=-u,Z.lanes|=u;var ct=zN(Z,w,u);m2(Z,ct);break t}}Z=Z.return}while(Z!==null)}JN(f)}catch(mt){u=mt,$i===f&&f!==null&&($i=f=f.return);continue}break}while(1)}function KN(){var s=og.current;return og.current=rg,s===null?rg:s}function yc(s,u){var f=Zt;Zt|=16;var y=KN();Jn===s&&Rn===u||va(s,u);do try{kO();break}catch(g){HN(s,g)}while(1);if(Ux(),Zt=f,og.current=y,$i!==null)throw Error(St(261));return Jn=null,Rn=0,wn}function kO(){for(;$i!==null;)$N($i)}function PO(){for(;$i!==null&&!oO();)$N($i)}function $N(s){var u=QN(s.alternate,s,Du);s.memoizedProps=s.pendingProps,u===null?JN(s):$i=u,Qx.current=null}function JN(s){var u=s;do{var f=u.alternate;if(s=u.return,(u.flags&2048)===0){if(f=dO(f,u,Du),f!==null){$i=f;return}if(f=u,f.tag!==24&&f.tag!==23||f.memoizedState===null||(Du&1073741824)!==0||(f.mode&4)===0){for(var y=0,g=f.child;g!==null;)y|=g.lanes|g.childLanes,g=g.sibling;f.childLanes=y}s!==null&&(s.flags&2048)===0&&(s.firstEffect===null&&(s.firstEffect=u.firstEffect),u.lastEffect!==null&&(s.lastEffect!==null&&(s.lastEffect.nextEffect=u.firstEffect),s.lastEffect=u.lastEffect),1<u.flags&&(s.lastEffect!==null?s.lastEffect.nextEffect=u:s.firstEffect=u,s.lastEffect=u))}else{if(f=yO(u),f!==null){f.flags&=2047,$i=f;return}s!==null&&(s.firstEffect=s.lastEffect=null,s.flags|=2048)}if(u=u.sibling,u!==null){$i=u;return}$i=u=s}while(u!==null);wn===0&&(wn=5)}function wu(s){var u=ka();return ju(99,CO.bind(null,s,u)),null}function CO(s,u){do Tl();while(Tc!==null);if((Zt&48)!==0)throw Error(St(327));var f=s.finishedWork;if(f===null)return null;if(s.finishedWork=null,s.finishedLanes=0,f===s.current)throw Error(St(177));s.callbackNode=null;var y=f.lanes|f.childLanes,g=y,w=s.pendingLanes&~g;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=g,s.mutableReadLanes&=g,s.entangledLanes&=g,g=s.entanglements;for(var M=s.eventTimes,C=s.expirationTimes;0<w;){var A=31-Ml(w),R=1<<A;g[A]=0,M[A]=-1,C[A]=-1,w&=~R}if(Bs!==null&&(y&24)===0&&Bs.has(s)&&Bs.delete(s),s===Jn&&($i=Jn=null,Rn=0),1<f.flags?f.lastEffect!==null?(f.lastEffect.nextEffect=f,y=f.firstEffect):y=f:y=f.firstEffect,y!==null){if(g=Zt,Zt|=32,Qx.current=null,Xv=Ny,M=n2(),k1(M)){if("selectionStart"in M)C={start:M.selectionStart,end:M.selectionEnd};else t:if(C=(C=M.ownerDocument)&&C.defaultView||window,(R=C.getSelection&&C.getSelection())&&R.rangeCount!==0){C=R.anchorNode,w=R.anchorOffset,A=R.focusNode,R=R.focusOffset;try{C.nodeType,A.nodeType}catch{C=null;break t}var z=0,Y=-1,Z=-1,lt=0,xt=0,W=M,B=null;e:for(;;){for(var U;W!==C||w!==0&&W.nodeType!==3||(Y=z+w),W!==A||R!==0&&W.nodeType!==3||(Z=z+R),W.nodeType===3&&(z+=W.nodeValue.length),(U=W.firstChild)!==null;)B=W,W=U;for(;;){if(W===M)break e;if(B===C&&++lt===w&&(Y=z),B===A&&++xt===R&&(Z=z),(U=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=U}C=Y===-1||Z===-1?null:{start:Y,end:Z}}else C=null;C=C||{start:0,end:0}}else C=null;Wv={focusedElem:M,selectionRange:C},Ny=!1,Ec=null,Dy=!1,At=y;do try{NO()}catch(mt){if(At===null)throw Error(St(330));wl(At,mt),At=At.nextEffect}while(At!==null);Ec=null,At=y;do try{for(M=s;At!==null;){var F=At.flags;if(F&16&&Ac(At.stateNode,""),F&128){var J=At.alternate;if(J!==null){var D=J.ref;D!==null&&(typeof D=="function"?D(null):D.current=null)}}switch(F&1038){case 2:G2(At),At.flags&=-3;break;case 6:G2(At),At.flags&=-3,qv(At.alternate,At);break;case 1024:At.flags&=-1025;break;case 1028:At.flags&=-1025,qv(At.alternate,At);break;case 4:qv(At.alternate,At);break;case 8:C=At,GN(M,C);var rt=C.alternate;U2(C),rt!==null&&U2(rt)}At=At.nextEffect}}catch(mt){if(At===null)throw Error(St(330));wl(At,mt),At=At.nextEffect}while(At!==null);if(D=Wv,J=n2(),F=D.focusedElem,M=D.selectionRange,J!==F&&F&&F.ownerDocument&&sN(F.ownerDocument.documentElement,F)){for(M!==null&&k1(F)&&(J=M.start,D=M.end,D===void 0&&(D=J),"selectionStart"in F?(F.selectionStart=J,F.selectionEnd=Math.min(D,F.value.length)):(D=(J=F.ownerDocument||document)&&J.defaultView||window,D.getSelection&&(D=D.getSelection(),C=F.textContent.length,rt=Math.min(M.start,C),M=M.end===void 0?rt:Math.min(M.end,C),!D.extend&&rt>M&&(C=M,M=rt,rt=C),C=i2(F,rt),w=i2(F,M),C&&w&&(D.rangeCount!==1||D.anchorNode!==C.node||D.anchorOffset!==C.offset||D.focusNode!==w.node||D.focusOffset!==w.offset)&&(J=J.createRange(),J.setStart(C.node,C.offset),D.removeAllRanges(),rt>M?(D.addRange(J),D.extend(w.node,w.offset)):(J.setEnd(w.node,w.offset),D.addRange(J)))))),J=[],D=F;D=D.parentNode;)D.nodeType===1&&J.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<J.length;F++)D=J[F],D.element.scrollLeft=D.left,D.element.scrollTop=D.top}Ny=!!Xv,Wv=Xv=null,s.current=f,At=y;do try{for(F=s;At!==null;){var st=At.flags;if(st&36&&xO(F,At.alternate,At),st&128){J=void 0;var wt=At.ref;if(wt!==null){var ct=At.stateNode;switch(At.tag){case 5:J=ct;break;default:J=ct}typeof wt=="function"?wt(J):wt.current=J}}At=At.nextEffect}}catch(mt){if(At===null)throw Error(St(330));wl(At,mt),At=At.nextEffect}while(At!==null);At=null,lO(),Zt=g}else s.current=f;if(Pl)Pl=!1,Tc=s,dc=u;else for(At=y;At!==null;)u=At.nextEffect,At.nextEffect=null,At.flags&8&&(st=At,st.sibling=null,st.stateNode=null),At=u;if(y=s.pendingLanes,y===0&&(os=null),y===1?s===H1?Lc++:(Lc=0,H1=s):Lc=0,f=f.stateNode,Ou&&typeof Ou.onCommitFiberRoot=="function")try{Ou.onCommitFiberRoot(Vx,f,void 0,(f.current.flags&64)===64)}catch{}if(eo(s,Fn()),sg)throw sg=!1,s=Y1,Y1=null,s;return(Zt&8)!==0||us(),null}function NO(){for(;At!==null;){var s=At.alternate;Dy||Ec===null||((At.flags&8)!==0?GP(At,Ec)&&(Dy=!0):At.tag===13&&wO(s,At)&&GP(At,Ec)&&(Dy=!0));var u=At.flags;(u&256)!==0&&vO(s,At),(u&512)===0||Pl||(Pl=!0,_c(97,function(){return Tl(),null})),At=At.nextEffect}}function Tl(){if(dc!==90){var s=97<dc?97:dc;return dc=90,ju(s,LO)}return!1}function TO(s,u){X1.push(u,s),Pl||(Pl=!0,_c(97,function(){return Tl(),null}))}function ZN(s,u){W1.push(u,s),Pl||(Pl=!0,_c(97,function(){return Tl(),null}))}function LO(){if(Tc===null)return!1;var s=Tc;if(Tc=null,(Zt&48)!==0)throw Error(St(331));var u=Zt;Zt|=32;var f=W1;W1=[];for(var y=0;y<f.length;y+=2){var g=f[y],w=f[y+1],M=g.destroy;if(g.destroy=void 0,typeof M=="function")try{M()}catch(A){if(w===null)throw Error(St(330));wl(w,A)}}for(f=X1,X1=[],y=0;y<f.length;y+=2){g=f[y],w=f[y+1];try{var C=g.create;g.destroy=C()}catch(A){if(w===null)throw Error(St(330));wl(w,A)}}for(C=s.current.firstEffect;C!==null;)s=C.nextEffect,C.nextEffect=null,C.flags&8&&(C.sibling=null,C.stateNode=null),C=s;return Zt=u,us(),!0}function X2(s,u,f){u=Zx(f,u),u=UN(s,u,1),ml(s,u),u=Nr(),s=Cg(s,1),s!==null&&(mg(s,1,u),eo(s,u))}function wl(s,u){if(s.tag===3)X2(s,s,u);else for(var f=s.return;f!==null;){if(f.tag===3){X2(f,s,u);break}else if(f.tag===1){var y=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(os===null||!os.has(y))){s=Zx(u,s);var g=zN(f,s,1);if(ml(f,g),g=Nr(),f=Cg(f,1),f!==null)mg(f,1,g),eo(f,g);else if(typeof y.componentDidCatch=="function"&&(os===null||!os.has(y)))try{y.componentDidCatch(u,s)}catch{}break}}f=f.return}}function EO(s,u,f){var y=s.pingCache;y!==null&&y.delete(u),u=Nr(),s.pingedLanes|=s.suspendedLanes&f,Jn===s&&(Rn&f)===f&&(wn===4||wn===3&&(Rn&62914560)===Rn&&500>Fn()-bx?va(s,0):qx|=f),eo(s,u)}function OO(s,u){var f=s.stateNode;f!==null&&f.delete(u),u=0,u===0&&(u=s.mode,(u&2)===0?u=1:(u&4)===0?u=ka()===99?1:2:(Is===0&&(Is=Oa),u=ia(62914560&~Is),u===0&&(u=4194304))),f=Nr(),s=Cg(s,u),s!==null&&(mg(s,u,f),eo(s,f))}var QN;QN=function(s,u,f){var y=u.lanes;if(s!==null)if(s.memoizedProps!==u.pendingProps||yr.current)To=!0;else if((f&y)!==0)To=(s.flags&16384)!==0;else{switch(To=!1,u.tag){case 3:O2(u),Jv();break;case 5:S2(u);break;case 1:gr(u.type)&&Ey(u);break;case 4:A1(u,u.stateNode.containerInfo);break;case 10:y=u.memoizedProps.value;var g=u.type._context;ki($y,g._currentValue),g._currentValue=y;break;case 13:if(u.memoizedState!==null)return(f&u.child.childLanes)!==0?A2(s,u,f):(ki(Mi,Mi.current&1),u=Rs(s,u,f),u!==null?u.sibling:null);ki(Mi,Mi.current&1);break;case 19:if(y=(f&u.childLanes)!==0,(s.flags&64)!==0){if(y)return R2(s,u,f);u.flags|=64}if(g=u.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ki(Mi,Mi.current),y)break;return null;case 23:case 24:return u.lanes=0,Zv(s,u,f)}return Rs(s,u,f)}else To=!1;switch(u.lanes=0,u.tag){case 2:if(y=u.type,s!==null&&(s.alternate=null,u.alternate=null,u.flags|=2),s=u.pendingProps,g=Ma(u,Bn.current),ya(u,f),g=Hx(null,u,y,s,g,f),u.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0){if(u.tag=1,u.memoizedState=null,u.updateQueue=null,gr(y)){var w=!0;Ey(u)}else w=!1;u.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Gx(u);var M=y.getDerivedStateFromProps;typeof M=="function"&&Qy(u,y,M,s),g.updater=kg,u.stateNode=g,g._reactInternals=u,O1(u,y,s,f),u=F1(null,u,y,!0,w,f)}else u.tag=0,dr(null,u,g,f),u=u.child;return u;case 16:g=u.elementType;t:{switch(s!==null&&(s.alternate=null,u.alternate=null,u.flags|=2),s=u.pendingProps,w=g._init,g=w(g._payload),u.type=g,w=u.tag=jO(g),s=Co(g,s),w){case 0:u=I1(null,u,g,s,f);break t;case 1:u=E2(null,u,g,s,f);break t;case 11:u=T2(null,u,g,s,f);break t;case 14:u=L2(null,u,g,Co(g.type,s),y,f);break t}throw Error(St(306,g,""))}return u;case 0:return y=u.type,g=u.pendingProps,g=u.elementType===y?g:Co(y,g),I1(s,u,y,g,f);case 1:return y=u.type,g=u.pendingProps,g=u.elementType===y?g:Co(y,g),E2(s,u,y,g,f);case 3:if(O2(u),y=u.updateQueue,s===null||y===null)throw Error(St(282));if(y=u.pendingProps,g=u.memoizedState,g=g!==null?g.element:null,MN(s,u),Uc(u,y,null,f),y=u.memoizedState.element,y===g)Jv(),u=Rs(s,u,f);else{if(g=u.stateNode,(w=g.hydrate)&&(fl=da(u.stateNode.containerInfo.firstChild),Fs=u,w=ls=!0),w){if(s=g.mutableSourceEagerHydrationData,s!=null)for(g=0;g<s.length;g+=2)w=s[g],w._workInProgressVersionPrimary=s[g+1],ga.push(w);for(f=NN(u,null,y,f),u.child=f;f;)f.flags=f.flags&-3|1024,f=f.sibling}else dr(s,u,y,f),Jv();u=u.child}return u;case 5:return S2(u),s===null&&j1(u),y=u.type,g=u.pendingProps,w=s!==null?s.memoizedProps:null,M=g.children,N1(y,g)?M=null:w!==null&&N1(y,w)&&(u.flags|=16),RN(s,u),dr(s,u,M,f),u.child;case 6:return s===null&&j1(u),null;case 13:return A2(s,u,f);case 4:return A1(u,u.stateNode.containerInfo),y=u.pendingProps,s===null?u.child=qy(u,null,y,f):dr(s,u,y,f),u.child;case 11:return y=u.type,g=u.pendingProps,g=u.elementType===y?g:Co(y,g),T2(s,u,y,g,f);case 7:return dr(s,u,u.pendingProps,f),u.child;case 8:return dr(s,u,u.pendingProps.children,f),u.child;case 12:return dr(s,u,u.pendingProps.children,f),u.child;case 10:t:{y=u.type._context,g=u.pendingProps,M=u.memoizedProps,w=g.value;var C=u.type._context;if(ki($y,C._currentValue),C._currentValue=w,M!==null)if(C=M.value,w=Qr(C,w)?0:(typeof y._calculateChangedBits=="function"?y._calculateChangedBits(C,w):1073741823)|0,w===0){if(M.children===g.children&&!yr.current){u=Rs(s,u,f);break t}}else for(C=u.child,C!==null&&(C.return=u);C!==null;){var A=C.dependencies;if(A!==null){M=C.child;for(var R=A.firstContext;R!==null;){if(R.context===y&&(R.observedBits&w)!==0){C.tag===1&&(R=gl(-1,f&-f),R.tag=2,ml(C,R)),C.lanes|=f,R=C.alternate,R!==null&&(R.lanes|=f),SN(C.return,f),A.lanes|=f;break}R=R.next}}else M=C.tag===10&&C.type===u.type?null:C.child;if(M!==null)M.return=C;else for(M=C;M!==null;){if(M===u){M=null;break}if(C=M.sibling,C!==null){C.return=M.return,M=C;break}M=M.return}C=M}dr(s,u,g.children,f),u=u.child}return u;case 9:return g=u.type,w=u.pendingProps,y=w.children,ya(u,f),g=to(g,w.unstable_observedBits),y=y(g),u.flags|=1,dr(s,u,y,f),u.child;case 14:return g=u.type,w=Co(g,u.pendingProps),w=Co(g.type,w),L2(s,u,g,w,y,f);case 15:return FN(s,u,u.type,u.pendingProps,y,f);case 17:return y=u.type,g=u.pendingProps,g=u.elementType===y?g:Co(y,g),s!==null&&(s.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,gr(y)?(s=!0,Ey(u)):s=!1,ya(u,f),PN(u,y,g),O1(u,y,g,f),F1(null,u,y,!0,s,f);case 19:return R2(s,u,f);case 23:return Zv(s,u,f);case 24:return Zv(s,u,f)}throw Error(St(156,u.tag))};function AO(s,u,f,y){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(s,u,f,y){return new AO(s,u,f,y)}function ew(s){return s=s.prototype,!(!s||!s.isReactComponent)}function jO(s){if(typeof s=="function")return ew(s)?1:0;if(s!=null){if(s=s.$$typeof,s===dg)return 11;if(s===yg)return 14}return 2}function Cl(s,u){var f=s.alternate;return f===null?(f=qr(s.tag,u,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=u,f.type=s.type,f.flags=0,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null),f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,u=s.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f}function Iy(s,u,f,y,g,w){var M=2;if(y=s,typeof s=="function")ew(s)&&(M=1);else if(typeof s=="string")M=5;else t:switch(s){case ul:return xa(f.children,g,w,u);case TC:M=8,g|=16;break;case mx:M=8,g|=1;break;case vc:return s=qr(12,f,u,g|8),s.elementType=vc,s.type=vc,s.lanes=w,s;case xc:return s=qr(13,f,u,g),s.type=xc,s.elementType=xc,s.lanes=w,s;case _y:return s=qr(19,f,u,g),s.elementType=_y,s.lanes=w,s;case kx:return iw(f,g,w,u);case u1:return s=qr(24,f,u,g),s.elementType=u1,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case vx:M=10;break t;case xx:M=9;break t;case dg:M=11;break t;case yg:M=14;break t;case wx:M=16,y=null;break t;case Sx:M=22;break t}throw Error(St(130,s==null?s:typeof s,""))}return u=qr(M,f,u,g),u.elementType=s,u.type=y,u.lanes=w,u}function xa(s,u,f,y){return s=qr(7,s,y,u),s.lanes=f,s}function iw(s,u,f,y){return s=qr(23,s,y,u),s.elementType=kx,s.lanes=f,s}function bv(s,u,f){return s=qr(6,s,null,u),s.lanes=f,s}function t1(s,u,f){return u=qr(4,s.children!==null?s.children:[],s.key,u),u.lanes=f,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}function DO(s,u,f){this.tag=u,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=f,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bv(0),this.expirationTimes=Bv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bv(0),this.mutableSourceEagerHydrationData=null}function IO(s,u,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pu,key:y==null?null:""+y,children:s,containerInfo:u,implementation:f}}function lg(s,u,f,y){var g=u.current,w=Nr(),M=vl(g);t:if(f){f=f._reactInternals;e:{if(Ru(f)!==f||f.tag!==1)throw Error(St(170));var C=f;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(gr(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(St(171))}if(f.tag===1){var A=f.type;if(gr(A)){f=dN(f,A,C);break t}}f=C}else f=kl;return u.context===null?u.context=f:u.pendingContext=f,u=gl(w,M),u.payload={element:s},y=y===void 0?null:y,y!==null&&(u.callback=y),ml(g,u),xl(g,M,w),M}function e1(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function W2(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<u?f:u}}function nw(s,u){W2(s,u),(s=s.alternate)&&W2(s,u)}function FO(){return null}function rw(s,u,f){var y=f!=null&&f.hydrationOptions!=null&&f.hydrationOptions.mutableSources||null;if(f=new DO(s,u,f!=null&&f.hydrate===!0),u=qr(3,null,null,u===2?7:u===1?3:0),f.current=u,u.stateNode=f,Gx(u),s[Ea]=f.current,hN(s.nodeType===8?s.parentNode:s),y)for(s=0;s<y.length;s++){u=y[s];var g=u._getVersion;g=g(u._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[u,g]:f.mutableSourceEagerHydrationData.push(u,g)}this._internalRoot=f}rw.prototype.render=function(s){lg(s,this._internalRoot,null,null)};rw.prototype.unmount=function(){var s=this._internalRoot,u=s.containerInfo;lg(null,s,null,function(){u[Ea]=null})};function Jc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function RO(s,u){if(u||(u=s?s.nodeType===9?s.documentElement:s.firstChild:null,u=!(!u||u.nodeType!==1||!u.hasAttribute("data-reactroot"))),!u)for(var f;f=s.lastChild;)s.removeChild(f);return new rw(s,0,u?{hydrate:!0}:void 0)}function Ng(s,u,f,y,g){var w=f._reactRootContainer;if(w){var M=w._internalRoot;if(typeof g=="function"){var C=g;g=function(){var R=e1(M);C.call(R)}}lg(u,M,s,g)}else{if(w=f._reactRootContainer=RO(f,y),M=w._internalRoot,typeof g=="function"){var A=g;g=function(){var R=e1(M);A.call(R)}}WN(function(){lg(u,M,s,g)})}return e1(M)}GC=function(s){if(s.tag===13){var u=Nr();xl(s,4,u),nw(s,4)}};Lx=function(s){if(s.tag===13){var u=Nr();xl(s,67108864,u),nw(s,67108864)}};YC=function(s){if(s.tag===13){var u=Nr(),f=vl(s);xl(s,f,u),nw(s,f)}};XC=function(s,u){return u()};v1=function(s,u,f){switch(u){case"input":if(a1(s,f),u=f.name,f.type==="radio"&&u!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var y=f[u];if(y!==s&&y.form===s.form){var g=Sg(y);if(!g)throw Error(St(90));EC(y),a1(y,g)}}}break;case"textarea":AC(s,f);break;case"select":u=f.value,u!=null&&fa(s,!!f.multiple,u,!1)}};Cx=XN;VC=function(s,u,f,y,g){var w=Zt;Zt|=4;try{return ju(98,s.bind(null,u,f,y,g))}finally{Zt=w,Zt===0&&(ja(),us())}};Nx=function(){(Zt&49)===0&&(MO(),Tl())};_C=function(s,u){var f=Zt;Zt|=2;try{return s(u)}finally{Zt=f,Zt===0&&(ja(),us())}};function qN(s,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jc(u))throw Error(St(200));return IO(s,u,null,f)}var BO={Events:[Hc,la,Sg,RC,BC,Tl,{current:!1}]},hc={findFiberByHostInstance:Nu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},VO={bundleType:hc.bundleType,version:hc.version,rendererPackageName:hc.rendererPackageName,rendererConfig:hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fu.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=zC(s),s===null?null:s.stateNode},findFiberByHostInstance:hc.findFiberByHostInstance||FO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var xy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xy.isDisabled&&xy.supportsFiber)try{Vx=xy.inject(VO),Ou=xy}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BO;io.createPortal=qN;io.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(St(188)):Error(St(268,Object.keys(s)));return s=zC(u),s=s===null?null:s.stateNode,s};io.flushSync=function(s,u){var f=Zt;if((f&48)!==0)return s(u);Zt|=1;try{if(s)return ju(99,s.bind(null,u))}finally{Zt=f,us()}};io.hydrate=function(s,u,f){if(!Jc(u))throw Error(St(200));return Ng(null,s,u,!0,f)};io.render=function(s,u,f){if(!Jc(u))throw Error(St(200));return Ng(null,s,u,!1,f)};io.unmountComponentAtNode=function(s){if(!Jc(s))throw Error(St(40));return s._reactRootContainer?(WN(function(){Ng(null,null,s,!1,function(){s._reactRootContainer=null,s[Ea]=null})}),!0):!1};io.unstable_batchedUpdates=XN;io.unstable_createPortal=function(s,u){return qN(s,u,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};io.unstable_renderSubtreeIntoContainer=function(s,u,f,y){if(!Jc(f))throw Error(St(200));if(s==null||s._reactInternals===void 0)throw Error(St(38));return Ng(s,u,f,!1,y)};io.version="17.0.2";function bN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bN)}catch(s){console.error(s)}}bN(),px.exports=io;var Fy=px.exports,Tg={exports:{}},Zc={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O=Me.exports,tT=60103;Zc.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var H2=Symbol.for;tT=H2("react.element"),Zc.Fragment=H2("react.fragment")}var UO=_O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zO=Object.prototype.hasOwnProperty,GO={key:!0,ref:!0,__self:!0,__source:!0};function eT(s,u,f){var y,g={},w=null,M=null;f!==void 0&&(w=""+f),u.key!==void 0&&(w=""+u.key),u.ref!==void 0&&(M=u.ref);for(y in u)zO.call(u,y)&&!GO.hasOwnProperty(y)&&(g[y]=u[y]);if(s&&s.defaultProps)for(y in u=s.defaultProps,u)g[y]===void 0&&(g[y]=u[y]);return{$$typeof:tT,type:s,key:w,ref:M,props:g,_owner:UO.current}}Zc.jsx=eT;Zc.jsxs=eT;Tg.exports=Zc;const Ee=Tg.exports.jsx,cl=Tg.exports.jsxs,YO=Tg.exports.Fragment,jn={separate:{type:"separate",separator:!0},cut:{type:"cut",label:"cut",icon:"pi pi-box"},copy:{type:"copy",label:"copy",icon:"pi pi-copy"},paste:{type:"paste",label:"paste node",icon:"pi pi-file"},delete:{type:"delete",label:"delete",icon:"pi pi-trash"},draw:{type:"draw",label:"start free draw",icon:"pi pi-palette"},select:{type:"select",label:"stop free draw",icon:"pi pi-pencil"},zoom:{type:"zoom",label:"zoom to fit",icon:"pi pi-window-minimize"},clear:{type:"clear",label:"clear canvas",icon:"pi pi-desktop"},download:{type:"download",label:"download diagram (as png)",icon:"pi pi-download"},load:{type:"load",label:"load diagram (from file)",icon:"pi pi-image"},store:{type:"store",label:"store diagram (to file)",icon:"pi pi-save"}},XO=s=>{const u={node:[jn.cut,jn.copy,jn.paste,jn.delete],link:[jn.delete],blank:[jn.paste,jn.separate,jn.draw,jn.select,jn.separate,jn.zoom,jn.clear,jn.download,jn.separate,jn.load,jn.store]},[f,y]=Me.exports.useState([]),[g,w]=Me.exports.useState(!1),[M,C]=Me.exports.useState([-1e3,-1e3]),A=(z,Y)=>{z==="hide"?(w(!1),C(Y)):(y(u[z]),w(!0),C(Y))},R=z=>{var Y,Z,lt,xt,W,B,U,F,J,D,rt;switch(z){case"separate":break;case"cut":(Y=s.instance)==null||Y.doCut();break;case"copy":(Z=s.instance)==null||Z.doCopy();break;case"paste":(lt=s.instance)==null||lt.doPaste();break;case"delete":(xt=s.instance)==null||xt.doDelete();break;case"draw":(W=s.instance)==null||W.doDrawMode();break;case"select":(B=s.instance)==null||B.doSelectMode();break;case"zoom":(U=s.instance)==null||U.doZoomToFit();break;case"clear":(F=s.instance)==null||F.doClear();break;case"download":(J=s.instance)==null||J.doDownload();break;case"load":(D=s.instance)==null||D.doLoad();break;case"store":(rt=s.instance)==null||rt.doStore();break}A("hide",[-1e3,-1e3])};return Me.exports.useEffect(()=>{s.onLoad(A)},[]),Ee("div",{style:{position:"absolute",zIndex:"1000",left:M[0]+5,top:M[1]+5,width:"200px",padding:"10px",border:"solid 2px #aaaaaa",borderRadius:"10px",backgroundColor:"#ffffff",display:g?"block":"none"},onContextMenu:z=>{z.preventDefault()},children:f.map((z,Y)=>z.separator?Ee("div",{style:{position:"relative",width:"calc(100% - 10px)",height:"1px",margin:"5px",backgroundColor:"#777777"}},Y):cl("div",{className:"custom-hover-highlight",style:{position:"relative",width:"100%",height:"30px",display:"flex",alignItems:"center",justifyContent:"flex-start"},onClick:()=>{R(z.type)},children:[Ee("i",{className:z.icon,style:{margin:"0 5px"}}),Ee("span",{style:{fontSize:"12px"},children:z.label})]},Y))})};var iT={exports:{}},nT={exports:{}};(function(s,u){(function(f,y){s.exports=y()})(ac,function(){var f=f||function(y,g){var w;if(typeof window!="undefined"&&window.crypto&&(w=window.crypto),typeof self!="undefined"&&self.crypto&&(w=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(w=globalThis.crypto),!w&&typeof window!="undefined"&&window.msCrypto&&(w=window.msCrypto),!w&&typeof ac!="undefined"&&ac.crypto&&(w=ac.crypto),!w&&typeof FL=="function")try{w=require("crypto")}catch{}var M=function(){if(w){if(typeof w.getRandomValues=="function")try{return w.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof w.randomBytes=="function")try{return w.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},C=Object.create||function(){function F(){}return function(J){var D;return F.prototype=J,D=new F,F.prototype=null,D}}(),A={},R=A.lib={},z=R.Base=function(){return{extend:function(F){var J=C(this);return F&&J.mixIn(F),(!J.hasOwnProperty("init")||this.init===J.init)&&(J.init=function(){J.$super.init.apply(this,arguments)}),J.init.prototype=J,J.$super=this,J},create:function(){var F=this.extend();return F.init.apply(F,arguments),F},init:function(){},mixIn:function(F){for(var J in F)F.hasOwnProperty(J)&&(this[J]=F[J]);F.hasOwnProperty("toString")&&(this.toString=F.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Y=R.WordArray=z.extend({init:function(F,J){F=this.words=F||[],J!=g?this.sigBytes=J:this.sigBytes=F.length*4},toString:function(F){return(F||lt).stringify(this)},concat:function(F){var J=this.words,D=F.words,rt=this.sigBytes,st=F.sigBytes;if(this.clamp(),rt%4)for(var wt=0;wt<st;wt++){var ct=D[wt>>>2]>>>24-wt%4*8&255;J[rt+wt>>>2]|=ct<<24-(rt+wt)%4*8}else for(var mt=0;mt<st;mt+=4)J[rt+mt>>>2]=D[mt>>>2];return this.sigBytes+=st,this},clamp:function(){var F=this.words,J=this.sigBytes;F[J>>>2]&=4294967295<<32-J%4*8,F.length=y.ceil(J/4)},clone:function(){var F=z.clone.call(this);return F.words=this.words.slice(0),F},random:function(F){for(var J=[],D=0;D<F;D+=4)J.push(M());return new Y.init(J,F)}}),Z=A.enc={},lt=Z.Hex={stringify:function(F){for(var J=F.words,D=F.sigBytes,rt=[],st=0;st<D;st++){var wt=J[st>>>2]>>>24-st%4*8&255;rt.push((wt>>>4).toString(16)),rt.push((wt&15).toString(16))}return rt.join("")},parse:function(F){for(var J=F.length,D=[],rt=0;rt<J;rt+=2)D[rt>>>3]|=parseInt(F.substr(rt,2),16)<<24-rt%8*4;return new Y.init(D,J/2)}},xt=Z.Latin1={stringify:function(F){for(var J=F.words,D=F.sigBytes,rt=[],st=0;st<D;st++){var wt=J[st>>>2]>>>24-st%4*8&255;rt.push(String.fromCharCode(wt))}return rt.join("")},parse:function(F){for(var J=F.length,D=[],rt=0;rt<J;rt++)D[rt>>>2]|=(F.charCodeAt(rt)&255)<<24-rt%4*8;return new Y.init(D,J)}},W=Z.Utf8={stringify:function(F){try{return decodeURIComponent(escape(xt.stringify(F)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(F){return xt.parse(unescape(encodeURIComponent(F)))}},B=R.BufferedBlockAlgorithm=z.extend({reset:function(){this._data=new Y.init,this._nDataBytes=0},_append:function(F){typeof F=="string"&&(F=W.parse(F)),this._data.concat(F),this._nDataBytes+=F.sigBytes},_process:function(F){var J,D=this._data,rt=D.words,st=D.sigBytes,wt=this.blockSize,ct=wt*4,mt=st/ct;F?mt=y.ceil(mt):mt=y.max((mt|0)-this._minBufferSize,0);var ke=mt*wt,zi=y.min(ke*4,st);if(ke){for(var Ue=0;Ue<ke;Ue+=wt)this._doProcessBlock(rt,Ue);J=rt.splice(0,ke),D.sigBytes-=zi}return new Y.init(J,zi)},clone:function(){var F=z.clone.call(this);return F._data=this._data.clone(),F},_minBufferSize:0});R.Hasher=B.extend({cfg:z.extend(),init:function(F){this.cfg=this.cfg.extend(F),this.reset()},reset:function(){B.reset.call(this),this._doReset()},update:function(F){return this._append(F),this._process(),this},finalize:function(F){F&&this._append(F);var J=this._doFinalize();return J},blockSize:16,_createHelper:function(F){return function(J,D){return new F.init(D).finalize(J)}},_createHmacHelper:function(F){return function(J,D){return new U.HMAC.init(F,D).finalize(J)}}});var U=A.algo={};return A}(Math);return f})})(nT);(function(s,u){(function(f,y){s.exports=y(nT.exports)})(ac,function(f){return function(y){var g=f,w=g.lib,M=w.WordArray,C=w.Hasher,A=g.algo,R=[],z=[];(function(){function lt(U){for(var F=y.sqrt(U),J=2;J<=F;J++)if(!(U%J))return!1;return!0}function xt(U){return(U-(U|0))*4294967296|0}for(var W=2,B=0;B<64;)lt(W)&&(B<8&&(R[B]=xt(y.pow(W,1/2))),z[B]=xt(y.pow(W,1/3)),B++),W++})();var Y=[],Z=A.SHA256=C.extend({_doReset:function(){this._hash=new M.init(R.slice(0))},_doProcessBlock:function(lt,xt){for(var W=this._hash.words,B=W[0],U=W[1],F=W[2],J=W[3],D=W[4],rt=W[5],st=W[6],wt=W[7],ct=0;ct<64;ct++){if(ct<16)Y[ct]=lt[xt+ct]|0;else{var mt=Y[ct-15],ke=(mt<<25|mt>>>7)^(mt<<14|mt>>>18)^mt>>>3,zi=Y[ct-2],Ue=(zi<<15|zi>>>17)^(zi<<13|zi>>>19)^zi>>>10;Y[ct]=ke+Y[ct-7]+Ue+Y[ct-16]}var Et=D&rt^~D&st,Ut=B&U^B&F^U&F,Gi=(B<<30|B>>>2)^(B<<19|B>>>13)^(B<<10|B>>>22),ii=(D<<26|D>>>6)^(D<<21|D>>>11)^(D<<7|D>>>25),hs=wt+ii+Et+z[ct]+Y[ct],Yi=Gi+Ut;wt=st,st=rt,rt=D,D=J+hs|0,J=F,F=U,U=B,B=hs+Yi|0}W[0]=W[0]+B|0,W[1]=W[1]+U|0,W[2]=W[2]+F|0,W[3]=W[3]+J|0,W[4]=W[4]+D|0,W[5]=W[5]+rt|0,W[6]=W[6]+st|0,W[7]=W[7]+wt|0},_doFinalize:function(){var lt=this._data,xt=lt.words,W=this._nDataBytes*8,B=lt.sigBytes*8;return xt[B>>>5]|=128<<24-B%32,xt[(B+64>>>9<<4)+14]=y.floor(W/4294967296),xt[(B+64>>>9<<4)+15]=W,lt.sigBytes=xt.length*4,this._process(),this._hash},clone:function(){var lt=C.clone.call(this);return lt._hash=this._hash.clone(),lt}});g.SHA256=C._createHelper(Z),g.HmacSHA256=C._createHmacHelper(Z)}(Math),f.SHA256})})(iT);var K2=iT.exports;(function(){var s;function u(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function f(t){var e=typeof Symbol!="undefined"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:u(t)}}function y(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var g=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},w;if(typeof Object.setPrototypeOf=="function")w=Object.setPrototypeOf;else{var M;t:{var C={a:!0},A={};try{A.__proto__=C,M=A.a;break t}catch{}M=!1}w=M?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var R=w;function z(t,e){if(t.prototype=g(e.prototype),t.prototype.constructor=t,R)R(t,e);else for(var i in e)if(i!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.oB=e.prototype}var Y=typeof global!="undefined"&&global!=null?global:self,Z=typeof Object.assign=="function"?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lt=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};function xt(t,e){if(e){var i=Y;t=t.split(".");for(var n=0;n<t.length-1;n++){var r=t[n];r in i||(i[r]={}),i=i[r]}t=t[t.length-1],n=i[t],e=e(n),e!=n&&e!=null&&lt(i,t,{writable:!0,value:e})}}xt("Object.assign",function(t){return t||Z}),xt("Array.prototype.fill",function(t){return t||function(e,i,n){var r=this.length||0;for(0>i&&(i=Math.max(0,r+i)),(n==null||n>r)&&(n=r),n=Number(n),0>n&&(n=Math.max(0,r+n)),i=Number(i||0);i<n;i++)this[i]=e;return this}});var W=typeof globalThis=="object"&&globalThis||typeof global=="object"&&global.global===global&&global||typeof self=="object"&&self.self===self&&self||{};W.requestAnimationFrame===void 0&&(W.setImmediate===void 0?W.requestAnimationFrame=function(t){W.setTimeout(t,0)}:W.requestAnimationFrame=W.setImmediate);function B(){}function U(t,e){var i=-1;return function(){var n=this,r=arguments;i!==-1&&W.clearTimeout(i),i=F(function(){i=-1,t.apply(n,r)},e)}}function F(t,e){return W.setTimeout(t,e)}function J(t){return W.document.createElement(t)}function D(t){throw Error(t)}function rt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),e!==void 0&&(t+="  to value: "+e),D(t)}function st(t,e,i,n){i=i===null?"*":typeof i=="string"?i:typeof i=="function"&&typeof i.className=="string"?i.className:"",n!==void 0&&(i+="."+n),D(i+" is not in the range "+e+": "+t)}function wt(t){W.console&&W.console.log(t)}function ct(t){return typeof t=="object"&&t!==null}function mt(t){return Array.isArray(t)||W.NodeList&&t instanceof W.NodeList||W.HTMLCollection&&t instanceof W.HTMLCollection}function ke(t){return Array.prototype.slice.call(t)}function zi(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):D("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)}function Ue(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):D("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Et(){var t=re.pop();return t===void 0?[]:t}function Ut(t){t.length=0,re.push(t)}function Gi(t){if(typeof t=="function"){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(e=e.substring(9,e.indexOf("(")).trim(),e!=="")return t._className=e}else if(ct(t)&&t.constructor)return Gi(t.constructor);return typeof t}function ii(t){var e=t;return ct(t)&&(t.text?e=t.text:t.name?e=t.name:t.key!==void 0?e=t.key:t.id!==void 0?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:t.Key!==void 0?e=t.Key:t.Id!==void 0?e=t.Id:t.ID!==void 0&&(e=t.ID))),e===void 0?"undefined":e===null?"null":e.toString()}function hs(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.aB;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Yi(t,e,i){Object.defineProperty(ee.prototype,t,{get:e,set:i})}function Bt(t){for(var e=[],i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(i&15)]=String.fromCharCode(i);t.length%2&&(t="0"+t),i=[];for(var n=0,r=0;r<t.length;r+=2)i[n++]=e[t.substr(r,2)];for(t=i.join(""),t=t===""?"0":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)n=(n+e[i]+119)%256,r=e[i],e[i]=e[n],e[n]=r;n=i=0;for(var o="",l=0;l<t.length;l++)i=(i+1)%256,n=(n+e[i])%256,r=e[i],e[i]=e[n],e[n]=r,o+=String.fromCharCode(t.charCodeAt(l)^e[(e[i]+e[n])%256]);return o}var Qc=W.navigator!==void 0&&0<W.navigator.userAgent.indexOf("Trident/7"),Nt=W.navigator!==void 0&&0<W.navigator.userAgent.indexOf("Edge/"),zt=W.navigator!==void 0&&W.navigator.platform!==void 0&&W.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null,re=[];Object.freeze([]),B.className="Util",B.Dx="32ab5ff3b26f42dc0ed90f21462913b5",B.adym="gojs.net",B.vfo="28e644fdb5",B.className="Util";function K(t,e,i){je(this),this.j=t,this.na=e,this.o=i}K.prototype.toString=function(){return"EnumValue."+this.na};function Oe(t,e){return e==null||e===""?null:t[e]}Y.Object.defineProperties(K.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.na}},value:{get:function(){return this.o}}}),K.className="EnumValue";function Lr(){this.Dw=[]}Lr.prototype.toString=function(){return this.Dw.join("")},Lr.prototype.add=function(t){t!==""&&this.Dw.push(t)},Lr.className="StringBuilder";function Je(){}Je.className="PropertyCollection";var Eo={cB:!1,hB:!1,eB:!1,gB:!1,mB:!1,kB:!1,Kx:!1,dB:null,trace:function(t){W.console&&W.console.log(t)},fB:function(t,e,i,n){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(n.left,n.top+20),t.lineTo(n.left,n.top),t.lineTo(n.left+20,n.top),t.moveTo(n.right,n.bottom-20),t.lineTo(n.right,n.bottom),t.lineTo(n.right-20,n.bottom),t.stroke(),t.fillText("DB: "+Math.round(n.x)+", "+Math.round(n.y)+", "+Math.round(n.width)+", "+Math.round(n.height),n.left,n.top-5)},bB:function(t){var e={},i;for(i in t){if(e.x=i,e.x!=="licenseKey"){var n=t[e.x];if(n.prototype!==void 0){e.im=Object.getOwnPropertyNames(n.prototype);for(var r={$j:0};r.$j<e.im.length;r={$j:r.$j},r.$j++){var o=Object.getOwnPropertyDescriptor(n.prototype,e.im[r.$j]);o.get!==void 0&&o.set===void 0&&Object.defineProperty(n.prototype,e.im[r.$j],{set:function(l,h){return function(){throw Error("Property "+l.im[h.$j]+" of "+l.x+" is read-only.")}}(e,r)})}}}e={im:e.im,x:e.x}}}};function Ae(){}Ae.prototype.reset=function(){},Ae.prototype.next=function(){return!1},Ae.prototype.qd=function(){return!1},Ae.prototype.first=function(){return null},Ae.prototype.any=function(){return!1},Ae.prototype.all=function(){return!0},Ae.prototype.each=function(){return this},Ae.prototype.map=function(){return this},Ae.prototype.filter=function(){return this},Ae.prototype.Td=function(){},Ae.prototype.toString=function(){return"EmptyIterator"},Y.Object.defineProperties(Ae.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),Ae.prototype.first=Ae.prototype.first,Ae.prototype.hasNext=Ae.prototype.qd,Ae.prototype.next=Ae.prototype.next,Ae.prototype.reset=Ae.prototype.reset;var Vn=null;Ae.className="EmptyIterator",Vn=new Ae;function Be(t){this.key=-1,this.value=t}Be.prototype.reset=function(){this.key=-1},Be.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},Be.prototype.qd=function(){return this.next()},Be.prototype.first=function(){return this.key=0,this.value},Be.prototype.any=function(t){return this.key=-1,t(this.value)},Be.prototype.all=function(t){return this.key=-1,t(this.value)},Be.prototype.each=function(t){return this.key=-1,t(this.value),this},Be.prototype.map=function(t){return new Be(t(this.value))},Be.prototype.filter=function(t){return t(this.value)?new Be(this.value):Vn},Be.prototype.Td=function(){this.value=null},Be.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Y.Object.defineProperties(Be.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Be.prototype.first=Be.prototype.first,Be.prototype.hasNext=Be.prototype.qd,Be.prototype.next=Be.prototype.next,Be.prototype.reset=Be.prototype.reset,Be.className="SingletonIterator";function Ie(t){this.rb=t,this.ef=null,t.Ja=null,this.ia=t.Da,this.Ra=-1}Ie.prototype.reset=function(){var t=this.rb;t.Ja=null,this.ia=t.Da,this.Ra=-1},Ie.prototype.next=function(){var t=this.rb;if(t.Da!==this.ia&&0>this.key)return!1;t=t.m;var e=t.length,i=++this.Ra,n=this.ef;if(n!==null)for(;i<e;){var r=t[i];if(n(r))return this.key=this.Ra=i,this.value=r,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.Td()}return!1},Ie.prototype.qd=function(){return this.next()},Ie.prototype.first=function(){var t=this.rb;this.ia=t.Da,this.Ra=0,t=t.m;var e=t.length,i=this.ef;if(i!==null){for(var n=0;n<e;){var r=t[n];if(i(r))return this.key=this.Ra=n,this.value=r;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Ie.prototype.any=function(t){var e=this.rb;e.Ja=null,this.Ra=-1,e=e.m;for(var i=e.length,n=this.ef,r=0;r<i;r++){var o=e[r];if((n===null||n(o))&&t(o))return!0}return!1},Ie.prototype.all=function(t){var e=this.rb;e.Ja=null,this.Ra=-1,e=e.m;for(var i=e.length,n=this.ef,r=0;r<i;r++){var o=e[r];if((n===null||n(o))&&!t(o))return!1}return!0},Ie.prototype.each=function(t){var e=this.rb;e.Ja=null,this.Ra=-1,e=e.m;for(var i=e.length,n=this.ef,r=0;r<i;r++){var o=e[r];(n===null||n(o))&&t(o)}return this},Ie.prototype.map=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;var i=[];e=e.m;for(var n=e.length,r=this.ef,o=0;o<n;o++){var l=e[o];(r===null||r(l))&&i.push(t(l))}return t=new it,t.m=i,t.lb(),t.iterator},Ie.prototype.filter=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;var i=[];e=e.m;for(var n=e.length,r=this.ef,o=0;o<n;o++){var l=e[o];(r===null||r(l))&&t(l)&&i.push(l)}return t=new it,t.m=i,t.lb(),t.iterator},Ie.prototype.Td=function(){this.key=-1,this.value=null,this.ia=-1,this.ef=null,this.rb.Ja=this},Ie.prototype.toString=function(){return"ListIterator@"+this.Ra+"/"+this.rb.count},Y.Object.defineProperties(Ie.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.ef},set:function(t){this.ef=t}},count:{get:function(){var t=this.ef;if(t!==null){for(var e=0,i=this.rb.m,n=i.length,r=0;r<n;r++)t(i[r])&&e++;return e}return this.rb.m.length}}}),Ie.prototype.first=Ie.prototype.first,Ie.prototype.hasNext=Ie.prototype.qd,Ie.prototype.next=Ie.prototype.next,Ie.prototype.reset=Ie.prototype.reset,Ie.className="ListIterator";function ui(t){this.rb=t,t.Sg=null,this.ia=t.Da,this.Ra=t.m.length}ui.prototype.reset=function(){var t=this.rb;t.Sg=null,this.ia=t.Da,this.Ra=t.m.length},ui.prototype.next=function(){var t=this.rb;if(t.Da!==this.ia&&0>this.key)return!1;var e=--this.Ra;return 0<=e?(this.key=e,this.value=t.m[e],!0):(this.Td(),!1)},ui.prototype.qd=function(){return this.next()},ui.prototype.first=function(){var t=this.rb;this.ia=t.Da;var e=t.m;return this.Ra=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},ui.prototype.any=function(t){var e=this.rb;e.Sg=null,e=e.m;var i=e.length;for(this.Ra=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},ui.prototype.all=function(t){var e=this.rb;e.Sg=null,e=e.m;var i=e.length;for(this.Ra=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},ui.prototype.each=function(t){var e=this.rb;e.Sg=null,e=e.m;var i=e.length;for(this.Ra=i,--i;0<=i;i--)t(e[i]);return this},ui.prototype.map=function(t){var e=this.rb;e.Sg=null;var i=[];e=e.m;var n=e.length;for(this.Ra=n,--n;0<=n;n--)i.push(t(e[n]));return t=new it,t.m=i,t.lb(),t.iterator},ui.prototype.filter=function(t){var e=this.rb;e.Sg=null;var i=[];e=e.m;var n=e.length;for(this.Ra=n,--n;0<=n;n--){var r=e[n];t(r)&&i.push(r)}return t=new it,t.m=i,t.lb(),t.iterator},ui.prototype.Td=function(){this.key=-1,this.value=null,this.ia=-1,this.rb.Sg=this},ui.prototype.toString=function(){return"ListIteratorBackwards("+this.Ra+"/"+this.rb.count+")"},Y.Object.defineProperties(ui.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.rb.m.length}}}),ui.prototype.first=ui.prototype.first,ui.prototype.hasNext=ui.prototype.qd,ui.prototype.next=ui.prototype.next,ui.prototype.reset=ui.prototype.reset,ui.className="ListIteratorBackwards";function it(t){je(this),this.v=!1,this.m=[],this.Da=0,this.Sg=this.Ja=null,typeof t=="string"&&D("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=it.prototype,s.lb=function(){var t=this.Da;t++,999999999<t&&(t=0),this.Da=t},s.freeze=function(){return this.v=!0,this},s.ea=function(){return this.v=!1,this},s.toString=function(){return"List()#"+Ce(this)},s.add=function(t){return t===null?this:(this.v&&rt(this,t),this.m.push(t),this.lb(),this)},s.push=function(t){this.add(t)},s.addAll=function(t){if(t===null)return this;this.v&&rt(this);var e=this.m;if(mt(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.lb(),this},s.clear=function(){this.v&&rt(this),this.m.length=0,this.lb()},s.contains=function(t){return t===null?!1:this.m.indexOf(t)!==-1},s.has=function(t){return this.contains(t)},s.indexOf=function(t){return t===null?-1:this.m.indexOf(t)},s.J=function(t){var e=this.m;return(0>t||t>=e.length)&&st(t,"0 <= i < length",it,"elt:i"),e[t]},s.get=function(t){return this.J(t)},s.Oc=function(t,e){var i=this.m;(0>t||t>=i.length)&&st(t,"0 <= i < length",it,"setElt:i"),this.v&&rt(this,t),i[t]=e},s.set=function(t,e){this.Oc(t,e)},s.first=function(){var t=this.m;return t.length===0?null:t[0]},s.$b=function(){var t=this.m,e=t.length;return 0<e?t[e-1]:null},s.pop=function(){this.v&&rt(this);var t=this.m;return 0<t.length?t.pop():null},it.prototype.any=function(t){for(var e=this.m,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},it.prototype.all=function(t){for(var e=this.m,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},it.prototype.each=function(t){for(var e=this.m,i=e.length,n=0;n<i;n++)t(e[n]);return this},it.prototype.map=function(t){for(var e=new it,i=[],n=this.m,r=n.length,o=0;o<r;o++)i.push(t(n[o]));return e.m=i,e.lb(),e},it.prototype.filter=function(t){for(var e=new it,i=[],n=this.m,r=n.length,o=0;o<r;o++){var l=n[o];t(l)&&i.push(l)}return e.m=i,e.lb(),e},s=it.prototype,s.wb=function(t,e){0>t&&st(t,">= 0",it,"insertAt:i"),this.v&&rt(this,t);var i=this.m;t>=i.length?i.push(e):i.splice(t,0,e),this.lb()},s.remove=function(t){if(t===null)return!1;this.v&&rt(this,t);var e=this.m;return t=e.indexOf(t),t===-1?!1:(t===e.length-1?e.pop():e.splice(t,1),this.lb(),!0)},s.delete=function(t){return this.remove(t)},s.eb=function(t){var e=this.m;(0>t||t>=e.length)&&st(t,"0 <= i < length",it,"removeAt:i"),this.v&&rt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.lb()},s.removeRange=function(t,e){var i=this.m,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this.v&&rt(this);for(var r=t,o=e+1;o<n;)i[r++]=i[o++];return i.length=n-(e-t+1),this.lb(),this},it.prototype.copy=function(){var t=new it,e=this.m;return 0<e.length&&(t.m=Array.prototype.slice.call(e)),t},s=it.prototype,s.ya=function(){for(var t=this.m,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},s.Qv=function(){for(var t=new Q,e=this.m,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},s.sort=function(t){return this.v&&rt(this),this.m.sort(t),this.lb(),this},s.Vi=function(t,e,i){var n=this.m,r=n.length;e===void 0&&(e=0),i===void 0&&(i=r),this.v&&rt(this);var o=i-e;if(1>=o)return this;if((0>e||e>=r-1)&&st(e,"0 <= from < length",it,"sortRange:from"),o===2)return i=n[e],r=n[e+1],0<t(i,r)&&(n[e]=r,n[e+1]=i,this.lb()),this;if(e===0)if(i>=r)n.sort(t);else for(e=n.slice(0,i),e.sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=r)for(i=n.slice(e),i.sort(t),t=e;t<r;t++)n[t]=i[t-e];else for(r=n.slice(e,i),r.sort(t),t=e;t<i;t++)n[t]=r[t-e];return this.lb(),this},s.reverse=function(){return this.v&&rt(this),this.m.reverse(),this.lb(),this},Y.Object.defineProperties(it.prototype,{_dataArray:{get:function(){return this.m}},count:{get:function(){return this.m.length}},size:{get:function(){return this.m.length}},length:{get:function(){return this.m.length}},iterator:{get:function(){if(0>=this.m.length)return Vn;var t=this.Ja;return t!==null?(t.reset(),t):new Ie(this)}},iteratorBackwards:{get:function(){if(0>=this.m.length)return Vn;var t=this.Sg;return t!==null?(t.reset(),t):new ui(this)}}}),it.prototype.reverse=it.prototype.reverse,it.prototype.sortRange=it.prototype.Vi,it.prototype.sort=it.prototype.sort,it.prototype.toSet=it.prototype.Qv,it.prototype.toArray=it.prototype.ya,it.prototype.removeRange=it.prototype.removeRange,it.prototype.removeAt=it.prototype.eb,it.prototype.delete=it.prototype.delete,it.prototype.remove=it.prototype.remove,it.prototype.insertAt=it.prototype.wb,it.prototype.pop=it.prototype.pop,it.prototype.last=it.prototype.$b,it.prototype.first=it.prototype.first,it.prototype.set=it.prototype.set,it.prototype.setElt=it.prototype.Oc,it.prototype.get=it.prototype.get,it.prototype.elt=it.prototype.J,it.prototype.indexOf=it.prototype.indexOf,it.prototype.has=it.prototype.has,it.prototype.contains=it.prototype.contains,it.prototype.clear=it.prototype.clear,it.prototype.addAll=it.prototype.addAll,it.prototype.push=it.prototype.push,it.prototype.add=it.prototype.add,it.prototype.thaw=it.prototype.ea,it.prototype.freeze=it.prototype.freeze,it.className="List";function hi(t){this.fg=t,t.Ja=null,this.ia=t.Da,this.ka=null}hi.prototype.reset=function(){var t=this.fg;t.Ja=null,this.ia=t.Da,this.ka=null},hi.prototype.next=function(){var t=this.fg;if(t.Da!==this.ia&&this.key===null)return!1;var e=this.ka;return e=e===null?t.ba:e.oa,e!==null?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Td(),!1)},hi.prototype.qd=function(){return this.next()},hi.prototype.first=function(){var t=this.fg;if(this.ia=t.Da,t=t.ba,t!==null){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},hi.prototype.any=function(t){var e=this.fg;for(this.ka=e.Ja=null,e=e.ba;e!==null;){if(t(e.value))return!0;e=e.oa}return!1},hi.prototype.all=function(t){var e=this.fg;for(this.ka=e.Ja=null,e=e.ba;e!==null;){if(!t(e.value))return!1;e=e.oa}return!0},hi.prototype.each=function(t){var e=this.fg;for(this.ka=e.Ja=null,e=e.ba;e!==null;)t(e.value),e=e.oa;return this},hi.prototype.map=function(t){var e=this.fg;e.Ja=null;var i=new it;for(e=e.ba;e!==null;)i.add(t(e.value)),e=e.oa;return i.iterator},hi.prototype.filter=function(t){var e=this.fg;e.Ja=null;var i=new it;for(e=e.ba;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.oa}return i.iterator},hi.prototype.Td=function(){this.value=this.key=null,this.ia=-1,this.fg.Ja=this},hi.prototype.toString=function(){return this.ka!==null?"SetIterator@"+this.ka.value:"SetIterator"},Y.Object.defineProperties(hi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fg.Ib}}}),hi.prototype.first=hi.prototype.first,hi.prototype.hasNext=hi.prototype.qd,hi.prototype.next=hi.prototype.next,hi.prototype.reset=hi.prototype.reset,hi.className="SetIterator";function Q(t){je(this),this.v=!1,this.Jb={},this.Ib=0,this.Ja=null,this.Da=0,this.$e=this.ba=null,typeof t=="string"&&D("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=Q.prototype,s.lb=function(){var t=this.Da;t++,999999999<t&&(t=0),this.Da=t},s.freeze=function(){return this.v=!0,this},s.ea=function(){return this.v=!1,this},s.toString=function(){return"Set()#"+Ce(this)},s.add=function(t){if(t===null)return this;this.v&&rt(this,t);var e=t;return ct(t)&&(e=Ll(t)),this.Jb[e]===void 0&&(this.Ib++,t=new Da(t,t),this.Jb[e]=t,e=this.$e,e===null?this.ba=t:(t.vl=e,e.oa=t),this.$e=t,this.lb()),this},s.addAll=function(t){if(t===null)return this;if(this.v&&rt(this),mt(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},s.contains=function(t){if(t===null)return!1;var e=t;return ct(t)&&(e=Ce(t),e===void 0)?!1:this.Jb[e]!==void 0},s.has=function(t){return this.contains(t)},s.oz=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},s.pz=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},s.first=function(){var t=this.ba;return t===null?null:t.value},Q.prototype.any=function(t){for(var e=this.ba;e!==null;){if(t(e.value))return!0;e=e.oa}return!1},Q.prototype.all=function(t){for(var e=this.ba;e!==null;){if(!t(e.value))return!1;e=e.oa}return!0},Q.prototype.each=function(t){for(var e=this.ba;e!==null;)t(e.value),e=e.oa;return this},Q.prototype.map=function(t){for(var e=new Q,i=this.ba;i!==null;)e.add(t(i.value)),i=i.oa;return e},Q.prototype.filter=function(t){for(var e=new Q,i=this.ba;i!==null;){var n=i.value;t(n)&&e.add(n),i=i.oa}return e},s=Q.prototype,s.remove=function(t){if(t===null)return!1;this.v&&rt(this,t);var e=t;if(ct(t)&&(e=Ce(t),e===void 0)||(t=this.Jb[e],t===void 0))return!1;var i=t.oa,n=t.vl;return i!==null&&(i.vl=n),n!==null&&(n.oa=i),this.ba===t&&(this.ba=i),this.$e===t&&(this.$e=n),delete this.Jb[e],this.Ib--,this.lb(),!0},s.delete=function(t){return this.remove(t)},s.oq=function(t){if(t===null)return this;if(this.v&&rt(this),mt(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},s.LA=function(t){if(t===null||this.count===0)return this;this.v&&rt(this);var e=new Q;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.oq(t),this},s.clear=function(){this.v&&rt(this),this.Jb={},this.Ib=0,this.Ja!==null&&this.Ja.reset(),this.$e=this.ba=null,this.lb()},Q.prototype.copy=function(){var t=new Q,e=this.Jb,i;for(i in e)t.add(e[i].value);return t},Q.prototype.ya=function(){var t=Array(this.Ib),e=this.Jb,i=0,n;for(n in e)t[i]=e[n].value,i++;return t},Q.prototype.Pv=function(){var t=new it,e=this.Jb,i;for(i in e)t.add(e[i].value);return t};function je(t){t.__gohashid=as++}function Ll(t){var e=t.__gohashid;return e===void 0&&(e=as++,t.__gohashid=e),e}function Ce(t){return t.__gohashid}Y.Object.defineProperties(Q.prototype,{count:{get:function(){return this.Ib}},size:{get:function(){return this.Ib}},iterator:{get:function(){if(0>=this.Ib)return Vn;var t=this.Ja;return t!==null?(t.reset(),t):new hi(this)}}}),Q.prototype.toList=Q.prototype.Pv,Q.prototype.toArray=Q.prototype.ya,Q.prototype.clear=Q.prototype.clear,Q.prototype.retainAll=Q.prototype.LA,Q.prototype.removeAll=Q.prototype.oq,Q.prototype.delete=Q.prototype.delete,Q.prototype.remove=Q.prototype.remove,Q.prototype.first=Q.prototype.first,Q.prototype.containsAny=Q.prototype.pz,Q.prototype.containsAll=Q.prototype.oz,Q.prototype.has=Q.prototype.has,Q.prototype.contains=Q.prototype.contains,Q.prototype.addAll=Q.prototype.addAll,Q.prototype.add=Q.prototype.add,Q.prototype.thaw=Q.prototype.ea,Q.prototype.freeze=Q.prototype.freeze;var as=1;Q.className="Set",Q.uniqueHash=je,Q.hashIdUnique=Ll,Q.hashId=Ce;function ni(t){this.ga=t,this.ia=t.Da,this.ka=null}ni.prototype.reset=function(){this.ia=this.ga.Da,this.ka=null},ni.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&this.key===null)return!1;var e=this.ka;return e=e===null?t.ba:e.oa,e!==null?(this.ka=e,this.value=this.key=t=e.key,!0):(this.Td(),!1)},ni.prototype.qd=function(){return this.next()},ni.prototype.first=function(){var t=this.ga;return this.ia=t.Da,t=t.ba,t!==null?(this.ka=t,this.value=this.key=t=t.key):null},ni.prototype.any=function(t){var e=this.ga;for(this.ka=null,e=e.ba;e!==null;){if(t(e.key))return!0;e=e.oa}return!1},ni.prototype.all=function(t){var e=this.ga;for(this.ka=null,e=e.ba;e!==null;){if(!t(e.key))return!1;e=e.oa}return!0},ni.prototype.each=function(t){var e=this.ga;for(this.ka=null,e=e.ba;e!==null;)t(e.key),e=e.oa;return this},ni.prototype.map=function(t){var e=this.ga;this.ka=null;var i=new it;for(e=e.ba;e!==null;)i.add(t(e.key)),e=e.oa;return i.iterator},ni.prototype.filter=function(t){var e=this.ga;this.ka=null;var i=new it;for(e=e.ba;e!==null;){var n=e.key;t(n)&&i.add(n),e=e.oa}return i.iterator},ni.prototype.Td=function(){this.value=this.key=null,this.ia=-1},ni.prototype.toString=function(){return this.ka!==null?"MapKeySetIterator@"+this.ka.value:"MapKeySetIterator"},Y.Object.defineProperties(ni.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Ib}}}),ni.prototype.first=ni.prototype.first,ni.prototype.hasNext=ni.prototype.qd,ni.prototype.next=ni.prototype.next,ni.prototype.reset=ni.prototype.reset,ni.className="MapKeySetIterator";function se(t){Q.call(this),je(this),this.v=!0,this.ga=t}z(se,Q),s=se.prototype,s.freeze=function(){return this},s.ea=function(){return this},s.toString=function(){return"MapKeySet("+this.ga.toString()+")"},s.add=function(){D("This Set is read-only: "+this.toString())},s.contains=function(t){return this.ga.contains(t)},s.has=function(t){return this.contains(t)},s.remove=function(){D("This Set is read-only: "+this.toString())},s.delete=function(t){return this.remove(t)},s.clear=function(){D("This Set is read-only: "+this.toString())},s.first=function(){var t=this.ga.ba;return t!==null?t.key:null},se.prototype.any=function(t){for(var e=this.ga.ba;e!==null;){if(t(e.key))return!0;e=e.oa}return!1},se.prototype.all=function(t){for(var e=this.ga.ba;e!==null;){if(!t(e.key))return!1;e=e.oa}return!0},se.prototype.each=function(t){for(var e=this.ga.ba;e!==null;)t(e.key),e=e.oa;return this},se.prototype.map=function(t){for(var e=new Q,i=this.ga.ba;i!==null;)e.add(t(i.key)),i=i.oa;return e},se.prototype.filter=function(t){for(var e=new Q,i=this.ga.ba;i!==null;){var n=i.key;t(n)&&e.add(n),i=i.oa}return e},se.prototype.copy=function(){return new se(this.ga)},se.prototype.Qv=function(){var t=new Q,e=this.ga.Jb,i;for(i in e)t.add(e[i].key);return t},se.prototype.ya=function(){var t=this.ga.Jb,e=Array(this.ga.Ib),i=0,n;for(n in t)e[i]=t[n].key,i++;return e},se.prototype.Pv=function(){var t=new it,e=this.ga.Jb,i;for(i in e)t.add(e[i].key);return t},Y.Object.defineProperties(se.prototype,{count:{get:function(){return this.ga.Ib}},size:{get:function(){return this.ga.Ib}},iterator:{get:function(){return 0>=this.ga.Ib?Vn:new ni(this.ga)}}}),se.prototype.toList=se.prototype.Pv,se.prototype.toArray=se.prototype.ya,se.prototype.toSet=se.prototype.Qv,se.prototype.first=se.prototype.first,se.prototype.clear=se.prototype.clear,se.prototype.delete=se.prototype.delete,se.prototype.remove=se.prototype.remove,se.prototype.has=se.prototype.has,se.prototype.contains=se.prototype.contains,se.prototype.add=se.prototype.add,se.prototype.thaw=se.prototype.ea,se.prototype.freeze=se.prototype.freeze,se.className="MapKeySet";function ai(t){this.ga=t,t.Ze=null,this.ia=t.Da,this.ka=null}ai.prototype.reset=function(){var t=this.ga;t.Ze=null,this.ia=t.Da,this.ka=null},ai.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&this.key===null)return!1;var e=this.ka;return e=e===null?t.ba:e.oa,e!==null?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Td(),!1)},ai.prototype.qd=function(){return this.next()},ai.prototype.first=function(){var t=this.ga;if(this.ia=t.Da,t=t.ba,t!==null){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},ai.prototype.any=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;e!==null;){if(t(e.value))return!0;e=e.oa}return!1},ai.prototype.all=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;e!==null;){if(!t(e.value))return!1;e=e.oa}return!0},ai.prototype.each=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;e!==null;)t(e.value),e=e.oa;return this},ai.prototype.map=function(t){var e=this.ga;this.ka=e.Ze=null;var i=new it;for(e=e.ba;e!==null;)i.add(t(e.value)),e=e.oa;return i.iterator},ai.prototype.filter=function(t){var e=this.ga;this.ka=e.Ze=null;var i=new it;for(e=e.ba;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.oa}return i.iterator},ai.prototype.Td=function(){this.value=this.key=null,this.ia=-1,this.ga.Ze=this},ai.prototype.toString=function(){return this.ka!==null?"MapValueSetIterator@"+this.ka.value:"MapValueSetIterator"},Y.Object.defineProperties(ai.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Ib}}}),ai.prototype.first=ai.prototype.first,ai.prototype.hasNext=ai.prototype.qd,ai.prototype.next=ai.prototype.next,ai.prototype.reset=ai.prototype.reset,ai.className="MapValueSetIterator";function Da(t,e){this.key=t,this.value=e,this.vl=this.oa=null}Da.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Da.className="KeyValuePair";function fi(t){this.ga=t,t.Ja=null,this.ia=t.Da,this.ka=null}fi.prototype.reset=function(){var t=this.ga;t.Ja=null,this.ia=t.Da,this.ka=null},fi.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&this.key===null)return!1;var e=this.ka;return e=e===null?t.ba:e.oa,e!==null?(this.ka=e,this.key=e.key,this.value=e.value,!0):(this.Td(),!1)},fi.prototype.qd=function(){return this.next()},fi.prototype.first=function(){var t=this.ga;return this.ia=t.Da,t=t.ba,t!==null?(this.ka=t,this.key=t.key,this.value=t.value,t):null},fi.prototype.any=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;e!==null;){if(t(e))return!0;e=e.oa}return!1},fi.prototype.all=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;e!==null;){if(!t(e))return!1;e=e.oa}return!0},fi.prototype.each=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;e!==null;)t(e),e=e.oa;return this},fi.prototype.map=function(t){var e=this.ga;this.ka=e.Ja=null;var i=new it;for(e=e.ba;e!==null;)i.add(t(e)),e=e.oa;return i.iterator},fi.prototype.filter=function(t){var e=this.ga;this.ka=e.Ja=null;var i=new it;for(e=e.ba;e!==null;)t(e)&&i.add(e),e=e.oa;return i.iterator},fi.prototype.Td=function(){this.value=this.key=null,this.ia=-1,this.ga.Ja=this},fi.prototype.toString=function(){return this.ka!==null?"MapIterator@"+this.ka:"MapIterator"},Y.Object.defineProperties(fi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Ib}}}),fi.prototype.first=fi.prototype.first,fi.prototype.hasNext=fi.prototype.qd,fi.prototype.next=fi.prototype.next,fi.prototype.reset=fi.prototype.reset,fi.className="MapIterator";function pt(t){je(this),this.v=!1,this.Jb={},this.Ib=0,this.Ze=this.Ja=null,this.Da=0,this.$e=this.ba=null,typeof t=="string"&&D("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=pt.prototype,s.lb=function(){var t=this.Da;t++,999999999<t&&(t=0),this.Da=t},s.freeze=function(){return this.v=!0,this},s.ea=function(){return this.v=!1,this},s.toString=function(){return"Map()#"+Ce(this)},s.add=function(t,e){this.v&&rt(this,t);var i=t;ct(t)&&(i=Ll(t));var n=this.Jb[i];return n===void 0?(this.Ib++,t=new Da(t,e),this.Jb[i]=t,i=this.$e,i===null?this.ba=t:(t.vl=i,i.oa=t),this.$e=t,this.lb()):n.value=e,this},s.set=function(t,e){return this.add(t,e)},s.addAll=function(t){if(t===null)return this;if(mt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof pt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},s.first=function(){return this.ba},pt.prototype.any=function(t){for(var e=this.ba;e!==null;){if(t(e))return!0;e=e.oa}return!1},pt.prototype.all=function(t){for(var e=this.ba;e!==null;){if(!t(e))return!1;e=e.oa}return!0},pt.prototype.each=function(t){for(var e=this.ba;e!==null;)t(e),e=e.oa;return this},pt.prototype.map=function(t){for(var e=new pt,i=this.ba;i!==null;)e.add(i.key,t(i)),i=i.oa;return e},pt.prototype.filter=function(t){for(var e=new pt,i=this.ba;i!==null;)t(i)&&e.add(i.key,i.value),i=i.oa;return e},s=pt.prototype,s.contains=function(t){var e=t;return ct(t)&&(e=Ce(t),e===void 0)?!1:this.Jb[e]!==void 0},s.has=function(t){return this.contains(t)},s.H=function(t){var e=t;return ct(t)&&(e=Ce(t),e===void 0)?null:(t=this.Jb[e],t===void 0?null:t.value)},s.get=function(t){return this.H(t)},s.remove=function(t){if(t===null)return!1;this.v&&rt(this,t);var e=t;if(ct(t)&&(e=Ce(t),e===void 0)||(t=this.Jb[e],t===void 0))return!1;var i=t.oa,n=t.vl;return i!==null&&(i.vl=n),n!==null&&(n.oa=i),this.ba===t&&(this.ba=i),this.$e===t&&(this.$e=n),delete this.Jb[e],this.Ib--,this.lb(),!0},s.delete=function(t){return this.remove(t)},s.clear=function(){this.v&&rt(this),this.Jb={},this.Ib=0,this.Ja!==null&&this.Ja.reset(),this.Ze!==null&&this.Ze.reset(),this.$e=this.ba=null,this.lb()},pt.prototype.copy=function(){var t=new pt,e=this.Jb,i;for(i in e){var n=e[i];t.add(n.key,n.value)}return t},pt.prototype.ya=function(){var t=this.Jb,e=Array(this.Ib),i=0,n;for(n in t){var r=t[n];e[i]=new Da(r.key,r.value),i++}return e},pt.prototype.If=function(){return new se(this)},Y.Object.defineProperties(pt.prototype,{count:{get:function(){return this.Ib}},size:{get:function(){return this.Ib}},iterator:{get:function(){if(0>=this.count)return Vn;var t=this.Ja;return t!==null?(t.reset(),t):new fi(this)}},iteratorKeys:{get:function(){return 0>=this.count?Vn:new ni(this)}},iteratorValues:{get:function(){if(0>=this.count)return Vn;var t=this.Ze;return t!==null?(t.reset(),t):new ai(this)}}}),pt.prototype.toKeySet=pt.prototype.If,pt.prototype.toArray=pt.prototype.ya,pt.prototype.clear=pt.prototype.clear,pt.prototype.delete=pt.prototype.delete,pt.prototype.remove=pt.prototype.remove,pt.prototype.get=pt.prototype.get,pt.prototype.getValue=pt.prototype.H,pt.prototype.has=pt.prototype.has,pt.prototype.contains=pt.prototype.contains,pt.prototype.first=pt.prototype.first,pt.prototype.addAll=pt.prototype.addAll,pt.prototype.set=pt.prototype.set,pt.prototype.add=pt.prototype.add,pt.prototype.thaw=pt.prototype.ea,pt.prototype.freeze=pt.prototype.freeze,pt.className="Map";function N(t,e){t===void 0?this.y=this.x=0:typeof t=="number"&&typeof e=="number"?(this.x=t,this.y=e):D("Invalid arguments to Point constructor: "+t+", "+e),this.v=!1}var Oo,cw,pw,dw,qc;N.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},N.prototype.h=function(t,e){return this.x=t,this.y=e,this},N.prototype.sg=function(t,e){return this.x=t,this.y=e,this},N.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},N.prototype.copy=function(){var t=new N;return t.x=this.x,t.y=this.y,t},s=N.prototype,s.ca=function(){return this.v=!0,Object.freeze(this),this},s.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this.v=!0,this},s.ea=function(){return Object.isFrozen(this)&&D("cannot thaw constant: "+this),this.v=!1,this};function yw(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new N(i,r)}return new N}function gw(t){return t.x.toString()+" "+t.y.toString()}s.toString=function(){return"Point("+this.x+","+this.y+")"},s.A=function(t){return t instanceof N?this.x===t.x&&this.y===t.y:!1},s.Fi=function(t,e){return this.x===t&&this.y===e},s.Ua=function(t){return j.w(this.x,t.x)&&j.w(this.y,t.y)},s.add=function(t){return this.x+=t.x,this.y+=t.y,this},s.ie=function(t){return this.x-=t.x,this.y-=t.y,this},s.offset=function(t,e){return this.x+=t,this.y+=e,this},N.prototype.rotate=function(t){if(t===0)return this;var e=this.x,i=this.y;if(e===0&&i===0)return this;if(360<=t?t-=360:0>t&&(t+=360),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},s=N.prototype,s.scale=function(t,e){return this.x*=t,this.y*=e,this},s.xf=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},s.pd=function(t,e){return t-=this.x,e-=this.y,t*t+e*e},s.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},s.Pa=function(t){return mw(t.x-this.x,t.y-this.y)},s.direction=function(t,e){return mw(t-this.x,e-this.y)};function mw(t,e){if(t===0)return 0<e?90:0>e?270:0;if(e===0)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}s.nz=function(t,e){return j.Vl(t.x,t.y,e.x,e.y,this.x,this.y)},s.BA=function(t,e,i,n){return j.Ih(t,e,i,n,this.x,this.y,this),this},s.CA=function(t,e){return j.Ih(t.x,t.y,e.x,e.y,this.x,this.y,this),this},s.QA=function(t,e,i,n){return j.Wp(this.x,this.y,t,e,i,n,this),this},s.RA=function(t,e){return j.Wp(this.x,this.y,t.x,t.y,e.width,e.height,this),this},s.Ti=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},s.Ui=function(t,e,i,n,r){return this.x=t+r.x*i+r.offsetX,this.y=e+r.y*n+r.offsetY,this},s.transform=function(t){return t.Aa(this),this};function ci(t,e){return e.Hd(t),t}function pi(t,e,i,n,r,o){var l=r-i,h=o-n,a=l*l+h*h;i-=t,n-=e;var c=-i*l-n*h;return 0>=c||c>=a?(l=r-t,h=o-e,Math.min(i*i+n*n,l*l+h*h)):(t=l*n-h*i,t*t/a)}function no(t,e,i,n){return t=i-t,e=n-e,t*t+e*e}function Eg(t,e,i,n){return t=i-t,e=n-e,t===0?0<e?90:0>e?270:0:e===0?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}s.u=function(){return isFinite(this.x)&&isFinite(this.y)},N.alloc=function(){var t=Og.pop();return t===void 0?new N:t},N.allocAt=function(t,e){var i=Og.pop();return i===void 0?new N(t,e):(i.x=t,i.y=e,i)},N.free=function(t){Og.push(t)},N.prototype.isReal=N.prototype.u,N.prototype.setSpot=N.prototype.Ui,N.prototype.setRectSpot=N.prototype.Ti,N.prototype.snapToGridPoint=N.prototype.RA,N.prototype.snapToGrid=N.prototype.QA,N.prototype.projectOntoLineSegmentPoint=N.prototype.CA,N.prototype.projectOntoLineSegment=N.prototype.BA,N.intersectingLineSegments=function(t,e,i,n,r,o,l,h){return j.bm(t,e,i,n,r,o,l,h)},N.prototype.compareWithLineSegmentPoint=N.prototype.nz,N.compareWithLineSegment=function(t,e,i,n,r,o){return j.Vl(t,e,i,n,r,o)},N.prototype.direction=N.prototype.direction,N.prototype.directionPoint=N.prototype.Pa,N.prototype.normalize=N.prototype.normalize,N.prototype.distanceSquared=N.prototype.pd,N.prototype.distanceSquaredPoint=N.prototype.xf,N.prototype.scale=N.prototype.scale,N.prototype.rotate=N.prototype.rotate,N.prototype.offset=N.prototype.offset,N.prototype.subtract=N.prototype.ie,N.prototype.add=N.prototype.add,N.prototype.equalsApprox=N.prototype.Ua,N.prototype.equalTo=N.prototype.Fi,N.prototype.equals=N.prototype.A,N.prototype.set=N.prototype.set,N.prototype.setTo=N.prototype.sg;var Og=[];N.className="Point",N.parse=yw,N.stringify=gw,N.distanceLineSegmentSquared=pi,N.distanceSquared=no,N.direction=Eg,N.Origin=Oo=new N(0,0).ca(),N.InfiniteTopLeft=cw=new N(-1/0,-1/0).ca(),N.InfiniteBottomRight=pw=new N(1/0,1/0).ca(),N.SixPoint=dw=new N(6,6).ca(),N.NoPoint=qc=new N(NaN,NaN).ca(),N.parse=yw,N.stringify=gw,N.distanceLineSegmentSquared=pi,N.distanceSquared=no,N.direction=Eg;function yt(t,e){t===void 0?this.height=this.width=0:typeof t=="number"&&(0<=t||isNaN(t))&&typeof e=="number"&&(0<=e||isNaN(e))?(this.width=t,this.height=e):D("Invalid arguments to Size constructor: "+t+", "+e),this.v=!1}var Vu,bc,Ag,El,vw,xw,jg;yt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},yt.prototype.h=function(t,e){return this.width=t,this.height=e,this},yt.prototype.sg=function(t,e){return this.width=t,this.height=e,this},yt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},yt.prototype.copy=function(){var t=new yt;return t.width=this.width,t.height=this.height,t},s=yt.prototype,s.ca=function(){return this.v=!0,Object.freeze(this),this},s.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this.v=!0,this},s.ea=function(){return Object.isFrozen(this)&&D("cannot thaw constant: "+this),this.v=!1,this};function ww(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new yt(i,r)}return new yt}function Sw(t){return t.width.toString()+" "+t.height.toString()}s.toString=function(){return"Size("+this.width+","+this.height+")"},s.A=function(t){return t instanceof yt?this.width===t.width&&this.height===t.height:!1},s.Fi=function(t,e){return this.width===t&&this.height===e},s.Ua=function(t){return j.w(this.width,t.width)&&j.w(this.height,t.height)},s.u=function(){return isFinite(this.width)&&isFinite(this.height)},yt.alloc=function(){var t=Mw.pop();return t===void 0?new yt:t},yt.free=function(t){Mw.push(t)},yt.prototype.isReal=yt.prototype.u,yt.prototype.equalsApprox=yt.prototype.Ua,yt.prototype.equalTo=yt.prototype.Fi,yt.prototype.equals=yt.prototype.A,yt.prototype.set=yt.prototype.set,yt.prototype.setTo=yt.prototype.sg;var Mw=[];yt.className="Size",yt.parse=ww,yt.stringify=Sw,yt.ZeroSize=Vu=new yt(0,0).ca(),yt.OneSize=bc=new yt(1,1).ca(),yt.SixSize=Ag=new yt(6,6).ca(),yt.EightSize=El=new yt(8,8).ca(),yt.TenSize=vw=new yt(10,10).ca(),yt.InfiniteSize=xw=new yt(1/0,1/0).ca(),yt.NoSize=jg=new yt(NaN,NaN).ca(),yt.parse=ww,yt.stringify=Sw;function _(t,e,i,n){t===void 0?this.height=this.width=this.y=this.x=0:typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&(0<=i||isNaN(i))&&typeof n=="number"&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):t instanceof N?(i=t.x,t=t.y,e instanceof N?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof yt?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):D("Incorrect second argument supplied to Rect constructor "+e)):D("Invalid arguments to Rect constructor: "+t+", "+e+", "+i+", "+n),this.v=!1}s=_.prototype,s.assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},s.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this};function ro(t,e,i){t.width=e,t.height=i}s.sg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},s.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},s.Pc=function(t){return this.x=t.x,this.y=t.y,this},s.PA=function(t){return this.width=t.width,this.height=t.height,this},_.prototype.copy=function(){var t=new _;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},s=_.prototype,s.ca=function(){return this.v=!0,Object.freeze(this),this},s.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this.v=!0,this},s.ea=function(){return Object.isFrozen(this)&&D("cannot thaw constant: "+this),this.v=!1,this};function kw(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;(n=t[e++])&&(r=parseFloat(n));for(var o=0;t[e]==="";)e++;(n=t[e++])&&(o=parseFloat(n));for(var l=0;t[e]==="";)e++;return(n=t[e++])&&(l=parseFloat(n)),new _(i,r,o,l)}return new _}function Pw(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}s.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},s.A=function(t){return t instanceof _?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},s.Fi=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},s.Ua=function(t){return j.w(this.x,t.x)&&j.w(this.y,t.y)&&j.w(this.width,t.width)&&j.w(this.height,t.height)};function Dg(t,e){return j.aa(t.x,e.x)&&j.aa(t.y,e.y)&&j.aa(t.width,e.width)&&j.aa(t.height,e.height)}s.$=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},s.Ge=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},s.contains=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},s.offset=function(t,e){return this.x+=t,this.y+=e,this},s.Jc=function(t,e){return tp(this,e,t,e,t)},s.Lp=function(t){return tp(this,t.top,t.right,t.bottom,t.left)},s.Nv=function(t){return tp(this,-t.top,-t.right,-t.bottom,-t.left)},s.eA=function(t,e,i,n){return tp(this,t,e,i,n)};function tp(t,e,i,n,r){var o=t.width;return i+r<=-o?(t.x+=o/2,t.width=0):(t.x-=r,t.width+=i+r),i=t.height,e+n<=-i?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}s.Zx=function(t){return Cw(this,t.x,t.y,t.width,t.height)},s.$u=function(t,e,i,n){return Cw(this,t,e,i,n)};function Cw(t,e,i,n,r){var o=Math.max(t.x,e),l=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+r),t.x=o,t.y=l,t.width=Math.max(0,e-o),t.height=Math.max(0,i-l),t}s.Lc=function(t){return this.av(t.x,t.y,t.width,t.height)},s.av=function(t,e,i,n){var r=this.width,o=this.x;return r!==1/0&&i!==1/0&&(r+=o,i+=t,isNaN(i)||isNaN(r)||o>i||t>r)?!1:(t=this.height,i=this.y,!(t!==1/0&&n!==1/0&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))};function Nw(t,e){var i=t.width,n=t.x,r=e.x-10;return n>e.width+10+10+r||r>i+n?!1:(i=t.height,t=t.y,n=e.y-10,!(t>e.height+10+10+n||n>i+t))}s.Oe=function(t){return Ve(this,t.x,t.y,0,0)},s.Qc=function(t){return Ve(this,t.x,t.y,t.width,t.height)},s.Tv=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),Ve(this,t,e,i,n)};function Ve(t,e,i,n,r){var o=Math.min(t.x,e),l=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+r),t.x=o,t.y=l,t.width=e-o,t.height=i-l,t}s.Ui=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this};function Qn(t,e,i,n,r,o,l,h){return l===void 0&&(l=0),h===void 0&&(h=0),t<=r&&r+l<=t+i&&e<=o&&o+h<=e+n}function Tw(t,e,i,n,r,o,l,h){return t>l+r||r>i+t?!1:!(e>h+o||o>n+e)}s.u=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},s.kA=function(){return this.width===0&&this.height===0},_.alloc=function(){var t=Ig.pop();return t===void 0?new _:t},_.allocAt=function(t,e,i,n){var r=Ig.pop();return r===void 0?new _(t,e,i,n):r.h(t,e,i,n)},_.free=function(t){Ig.push(t)},Y.Object.defineProperties(_.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new N(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new yt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new N(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),_.prototype.isEmpty=_.prototype.kA,_.prototype.isReal=_.prototype.u,_.intersectsLineSegment=function(t,e,i,n,r,o,l,h){return j.$x(t,e,i,n,r,o,l,h)},_.prototype.setSpot=_.prototype.Ui,_.prototype.union=_.prototype.Tv,_.prototype.unionRect=_.prototype.Qc,_.prototype.unionPoint=_.prototype.Oe,_.prototype.intersects=_.prototype.av,_.prototype.intersectsRect=_.prototype.Lc,_.prototype.intersect=_.prototype.$u,_.prototype.intersectRect=_.prototype.Zx,_.prototype.grow=_.prototype.eA,_.prototype.subtractMargin=_.prototype.Nv,_.prototype.addMargin=_.prototype.Lp,_.prototype.inflate=_.prototype.Jc,_.prototype.offset=_.prototype.offset,_.prototype.contains=_.prototype.contains,_.prototype.containsRect=_.prototype.Ge,_.prototype.containsPoint=_.prototype.$,_.prototype.equalsApprox=_.prototype.Ua,_.prototype.equalTo=_.prototype.Fi,_.prototype.equals=_.prototype.A,_.prototype.setSize=_.prototype.PA,_.prototype.setPoint=_.prototype.Pc,_.prototype.set=_.prototype.set,_.prototype.setTo=_.prototype.sg;var ep=null,Lw=null,Ig=[];_.className="Rect",_.parse=kw,_.stringify=Pw,_.contains=Qn,_.intersects=Tw,_.ZeroRect=ep=new _(0,0,0,0).ca(),_.NoRect=Lw=new _(NaN,NaN,NaN,NaN).ca(),_.parse=kw,_.stringify=Pw,_.contains=Qn,_.intersects=Tw;function Ft(t,e,i,n){t===void 0?this.left=this.bottom=this.right=this.top=0:e===void 0?this.left=this.bottom=this.right=this.top=t:i===void 0?(this.top=t,this.right=e,this.bottom=t,this.left=e):n!==void 0?(this.top=t,this.right=e,this.bottom=i,this.left=n):D("Invalid arguments to Margin constructor: "+t+", "+e+", "+i+", "+n),this.v=!1}Ft.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Ft.prototype.sg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},Ft.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Ft.prototype.copy=function(){var t=new Ft;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},s=Ft.prototype,s.ca=function(){return this.v=!0,Object.freeze(this),this},s.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this.v=!0,this},s.ea=function(){return Object.isFrozen(this)&&D("cannot thaw constant: "+this),this.v=!1,this};function Ew(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=NaN;t[e]==="";)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new Ft;for(var r=NaN;t[e]==="";)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new Ft(i);for(var o=NaN;t[e]==="";)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new Ft(i,r);for(var l=NaN;t[e]==="";)e++;return(n=t[e++])&&(l=parseFloat(n)),isNaN(l)?new Ft(i,r):new Ft(i,r,o,l)}return new Ft}function Ow(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}s.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},s.A=function(t){return t instanceof Ft?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},s.Fi=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},s.Ua=function(t){return j.w(this.top,t.top)&&j.w(this.right,t.right)&&j.w(this.bottom,t.bottom)&&j.w(this.left,t.left)},s.u=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Ft.alloc=function(){var t=jw.pop();return t===void 0?new Ft:t},Ft.free=function(t){jw.push(t)},Ft.prototype.isReal=Ft.prototype.u,Ft.prototype.equalsApprox=Ft.prototype.Ua,Ft.prototype.equalTo=Ft.prototype.Fi,Ft.prototype.equals=Ft.prototype.A,Ft.prototype.set=Ft.prototype.set,Ft.prototype.setTo=Ft.prototype.sg;var _u=null,Aw=null,jw=[];Ft.className="Margin",Ft.parse=Ew,Ft.stringify=Ow,Ft.ZeroMargin=_u=new Ft(0,0,0,0).ca(),Ft.TwoMargin=Aw=new Ft(2,2,2,2).ca(),Ft.parse=Ew,Ft.stringify=Ow;function at(t,e,i,n){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this.v=!1}var Ze,di,oo,Uu,Ia,_t,Fa,zu,Ol,Er,Gu,Yu,Xu,Wu,Fg,Rg,Bg,Vg,_g,Ug,zg,Gg,Yg,Xg,Wg,Pi,Dw,Iw,Hg,Fw,Mn,kn,Xi,Pn,Kg,$g;at.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},at.prototype.sg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},at.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},at.prototype.copy=function(){var t=new at;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},s=at.prototype,s.ca=function(){return this.v=!0,Object.freeze(this),this},s.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this.v=!0,this},s.ea=function(){return Object.isFrozen(this)&&D("cannot thaw constant: "+this),this.v=!1,this};function ln(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Jg(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return Ze;if(t==="TopLeft")return di;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return oo;if(t==="TopRight")return Uu;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return Ia;if(t==="Center")return _t;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return Fa;if(t==="BottomLeft")return zu;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return Ol;if(t==="BottomRight")return Er;if(t==="TopSide")return Gu;if(t==="LeftSide")return Yu;if(t==="RightSide")return Xu;if(t==="BottomSide")return Wu;if(t==="TopBottomSides")return Fg;if(t==="LeftRightSides")return Rg;if(t==="TopLeftSides")return Bg;if(t==="TopRightSides")return Vg;if(t==="BottomLeftSides")return _g;if(t==="BottomRightSides")return Ug;if(t==="NotTopSide")return zg;if(t==="NotLeftSide")return Gg;if(t==="NotRightSide")return Yg;if(t==="NotBottomSide")return Xg;if(t==="AllSides")return Wg;if(t==="Default")return Pi;t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n!==void 0&&0<n.length&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(r=parseFloat(n));for(var o=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(o=parseFloat(n));for(var l=0;t[e]==="";)e++;return n=t[e++],n!==void 0&&0<n.length&&(l=parseFloat(n)),new at(i,r,o,l)}return new at}function Rw(t){return t.hb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}s.toString=function(){return this.hb()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.A(Ze)?"None":this.A(di)?"TopLeft":this.A(oo)?"Top":this.A(Uu)?"TopRight":this.A(Ia)?"Left":this.A(_t)?"Center":this.A(Fa)?"Right":this.A(zu)?"BottomLeft":this.A(Ol)?"Bottom":this.A(Er)?"BottomRight":this.A(Gu)?"TopSide":this.A(Yu)?"LeftSide":this.A(Xu)?"RightSide":this.A(Wu)?"BottomSide":this.A(Fg)?"TopBottomSides":this.A(Rg)?"LeftRightSides":this.A(Bg)?"TopLeftSides":this.A(Vg)?"TopRightSides":this.A(_g)?"BottomLeftSides":this.A(Ug)?"BottomRightSides":this.A(zg)?"NotTopSide":this.A(Gg)?"NotLeftSide":this.A(Yg)?"NotRightSide":this.A(Xg)?"NotBottomSide":this.A(Wg)?"AllSides":this.A(Pi)?"Default":"None"},s.A=function(t){return t instanceof at?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},s.pv=function(){return new at(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},s.Df=function(t){if(!this.Nc())return!1;if(!t.Nc())if(t.A(Dw))t=Yu;else if(t.A(Iw))t=Xu;else if(t.A(Hg))t=Gu;else if(t.A(Fw))t=Wu;else return!1;return t=t.offsetY,(this.offsetY&t)===t},s.hb=function(){return!isNaN(this.x)&&!isNaN(this.y)},s.zc=function(){return isNaN(this.x)||isNaN(this.y)},s.Nc=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},s.Ds=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},s.Mb=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0},at.alloc=function(){var t=Bw.pop();return t===void 0?new at:t},at.free=function(t){Bw.push(t)},at.prototype.isDefault=at.prototype.Mb,at.prototype.isNone=at.prototype.Ds,at.prototype.isSide=at.prototype.Nc,at.prototype.isNoSpot=at.prototype.zc,at.prototype.isSpot=at.prototype.hb,at.prototype.includesSide=at.prototype.Df,at.prototype.opposite=at.prototype.pv,at.prototype.equals=at.prototype.A,at.prototype.set=at.prototype.set,at.prototype.setTo=at.prototype.sg;var Bw=[];at.className="Spot",at.parse=Jg,at.stringify=Rw,at.None=Ze=ln(new at(0,0,0,0),0).ca(),at.Default=Pi=ln(new at(0,0,-1,0),-1).ca(),at.TopLeft=di=new at(0,0,0,0).ca(),at.TopCenter=oo=new at(.5,0,0,0).ca(),at.TopRight=Uu=new at(1,0,0,0).ca(),at.LeftCenter=Ia=new at(0,.5,0,0).ca(),at.Center=_t=new at(.5,.5,0,0).ca(),at.RightCenter=Fa=new at(1,.5,0,0).ca(),at.BottomLeft=zu=new at(0,1,0,0).ca(),at.BottomCenter=Ol=new at(.5,1,0,0).ca(),at.BottomRight=Er=new at(1,1,0,0).ca(),at.MiddleTop=Mn=oo,at.MiddleLeft=kn=Ia,at.MiddleRight=Xi=Fa,at.MiddleBottom=Pn=Ol,at.Top=Hg=oo,at.Left=Dw=Ia,at.Right=Iw=Fa,at.Bottom=Fw=Ol,at.TopSide=Gu=ln(new at(0,0,1,1),1).ca(),at.LeftSide=Yu=ln(new at(0,0,1,2),1).ca(),at.RightSide=Xu=ln(new at(0,0,1,4),1).ca(),at.BottomSide=Wu=ln(new at(0,0,1,8),1).ca(),at.TopBottomSides=Fg=ln(new at(0,0,1,9),1).ca(),at.LeftRightSides=Rg=ln(new at(0,0,1,6),1).ca(),at.TopLeftSides=Bg=ln(new at(0,0,1,3),1).ca(),at.TopRightSides=Vg=ln(new at(0,0,1,5),1).ca(),at.BottomLeftSides=_g=ln(new at(0,0,1,10),1).ca(),at.BottomRightSides=Ug=ln(new at(0,0,1,12),1).ca(),at.NotTopSide=zg=ln(new at(0,0,1,14),1).ca(),at.NotLeftSide=Gg=ln(new at(0,0,1,13),1).ca(),at.NotRightSide=Yg=ln(new at(0,0,1,11),1).ca(),at.NotBottomSide=Xg=ln(new at(0,0,1,7),1).ca(),at.AllSides=Wg=ln(new at(0,0,1,15),1).ca(),Kg=new at(.156,.156).ca(),$g=new at(.844,.844).ca(),at.parse=Jg,at.stringify=Rw;function Mt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}Mt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Mt.prototype.setTransform=function(t,e,i,n,r,o){return this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},Mt.prototype.copy=function(){var t=new Mt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Mt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Mt.prototype.A=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},Mt.prototype.Bs=function(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1},Mt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Mt.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},Mt.prototype.lv=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,r=-t.m21*e,o=t.m11*e,l=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*r+this.m21*o,r=this.m12*r+this.m22*o,this.dx=this.m11*l+this.m21*t+this.dx,this.dy=this.m12*l+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},Mt.prototype.As=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},Mt.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;if(this.translate(e,i),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.m12*t+this.m22*n,o=this.m11*-n+this.m21*t,l=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=r,this.m21=o,this.m22=l,this.translate(-e,-i),this},s=Mt.prototype,s.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},s.scale=function(t,e){return e===void 0&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},s.Aa=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},s.Hd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},s.yx=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=1.25*t.x,n=1.2*t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},s.wq=function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,o=this.m11,l=this.m12,h=this.m21,a=this.m22,c=this.dx,p=this.dy,d=e*o+i*h+c,m=e*l+i*a+p,x=n*o+i*h+c,v=n*l+i*a+p;return i=e*o+r*h+c,e=e*l+r*a+p,o=n*o+r*h+c,n=n*l+r*a+p,r=Math.min(d,x),d=Math.max(d,x),x=Math.min(m,v),m=Math.max(m,v),r=Math.min(r,i),d=Math.max(d,i),x=Math.min(x,e),m=Math.max(m,e),r=Math.min(r,o),d=Math.max(d,o),x=Math.min(x,n),m=Math.max(m,n),t.h(r,x,d-r,m-x),t},Mt.alloc=function(){var t=Vw.pop();return t===void 0?new Mt:t},Mt.free=function(t){Vw.push(t)},Mt.prototype.transformRect=Mt.prototype.wq,Mt.prototype.transformPoint=Mt.prototype.Aa,Mt.prototype.scale=Mt.prototype.scale,Mt.prototype.translate=Mt.prototype.translate,Mt.prototype.rotate=Mt.prototype.rotate,Mt.prototype.invert=Mt.prototype.As,Mt.prototype.multiplyInverted=Mt.prototype.lv,Mt.prototype.multiply=Mt.prototype.multiply,Mt.prototype.reset=Mt.prototype.reset,Mt.prototype.isIdentity=Mt.prototype.Bs,Mt.prototype.equals=Mt.prototype.A,Mt.prototype.setTransform=Mt.prototype.setTransform,Mt.prototype.set=Mt.prototype.set;var Vw=[];Mt.className="Transform",Mt.xF="54a702f3e53909c447824c6706603faf4c";var j={ZA:"7da71ca0ad381e90",vg:(Math.sqrt(2)-1)/3*4,rw:null,sqrt:function(t){if(0>=t)return 0;var e=j.rw;if(e===null){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);j.rw=e}return 1>t?(i=1/t,2e3>=i?1/e[i|0]:Math.sqrt(t)):2e3>=t?e[t|0]:Math.sqrt(t)},w:function(t,e){return t-=e,.5>t&&-.5<t},aa:function(t,e){return t-=e,5e-8>t&&-5e-8<t},Nb:function(t,e,i,n,r,o,l){if(0>=r&&(r=1e-6),t<i)var h=t,a=i;else h=i,a=t;if(e<n)var c=e,p=n;else c=n,p=e;if(t===i)return c<=l&&l<=p&&t-r<=o&&o<=t+r;if(e===n)return h<=o&&o<=a&&e-r<=l&&l<=e+r;if(a+=r,h-=r,h<=o&&o<=a&&(p+=r,c-=r,c<=l&&l<=p))if(a-h>p-c)if(t-i>r||i-t>r){if(o=(n-e)/(i-t)*(o-t)+e,o-r<=l&&l<=o+r)return!0}else return!0;else if(e-n>r||n-e>r){if(l=(i-t)/(n-e)*(l-e)+t,l-r<=o&&o<=l+r)return!0}else return!0;return!1},hs:function(t,e,i,n,r,o,l,h,a,c,p,d){if(j.Nb(t,e,l,h,d,i,n)&&j.Nb(t,e,l,h,d,r,o))return j.Nb(t,e,l,h,d,c,p);var m=(t+i)/2,x=(e+n)/2,v=(i+r)/2,S=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(m+v)/2,i=(x+S)/2,v=(v+r)/2,S=(S+o)/2;var P=(n+v)/2,k=(i+S)/2;return j.hs(t,e,m,x,n,i,P,k,a,c,p,d)||j.hs(P,k,v,S,r,o,l,h,a,c,p,d)},iz:function(t,e,i,n,r,o,l,h,a){var c=(i+r)/2,p=(n+o)/2;return a.h((((t+i)/2+c)/2+(c+(r+l)/2)/2)/2,(((e+n)/2+p)/2+(p+(o+h)/2)/2)/2),a},hz:function(t,e,i,n,r,o,l,h){var a=(i+r)/2,c=(n+o)/2;return Eg(((t+i)/2+a)/2,((e+n)/2+c)/2,(a+(r+l)/2)/2,(c+(o+h)/2)/2)},Tl:function(t,e,i,n,r,o,l,h,a,c){if(j.Nb(t,e,l,h,a,i,n)&&j.Nb(t,e,l,h,a,r,o))Ve(c,t,e,0,0),Ve(c,l,h,0,0);else{var p=(t+i)/2,d=(e+n)/2,m=(i+r)/2,x=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(p+m)/2,i=(d+x)/2,m=(m+r)/2,x=(x+o)/2;var v=(n+m)/2,S=(i+x)/2;j.Tl(t,e,p,d,n,i,v,S,a,c),j.Tl(v,S,m,x,r,o,l,h,a,c)}return c},Fe:function(t,e,i,n,r,o,l,h,a,c){if(j.Nb(t,e,l,h,a,i,n)&&j.Nb(t,e,l,h,a,r,o))c.length===0&&(c.push(t),c.push(e)),c.push(l),c.push(h);else{var p=(t+i)/2,d=(e+n)/2,m=(i+r)/2,x=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(p+m)/2,i=(d+x)/2,m=(m+r)/2,x=(x+o)/2;var v=(n+m)/2,S=(i+x)/2;j.Fe(t,e,p,d,n,i,v,S,a,c),j.Fe(v,S,m,x,r,o,l,h,a,c)}return c},uv:function(t,e,i,n,r,o,l,h,a,c){if(j.Nb(t,e,r,o,c,i,n))return j.Nb(t,e,r,o,c,h,a);var p=(t+i)/2,d=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var m=(p+i)/2,x=(d+n)/2;return j.uv(t,e,p,d,m,x,l,h,a,c)||j.uv(m,x,i,n,r,o,l,h,a,c)},nB:function(t,e,i,n,r,o,l){return l.h(((t+i)/2+(i+r)/2)/2,((e+n)/2+(n+o)/2)/2),l},tv:function(t,e,i,n,r,o,l,h){if(j.Nb(t,e,r,o,l,i,n))Ve(h,t,e,0,0),Ve(h,r,o,0,0);else{var a=(t+i)/2,c=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var p=(a+i)/2,d=(c+n)/2;j.tv(t,e,a,c,p,d,l,h),j.tv(p,d,i,n,r,o,l,h)}return h},kq:function(t,e,i,n,r,o,l,h){if(j.Nb(t,e,r,o,l,i,n))h.length===0&&(h.push(t),h.push(e)),h.push(r),h.push(o);else{var a=(t+i)/2,c=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var p=(a+i)/2,d=(c+n)/2;j.kq(t,e,a,c,p,d,l,h),j.kq(p,d,i,n,r,o,l,h)}return h},Np:function(t,e,i,n,r,o,l,h,a,c,p,d,m,x){if(j.Nb(t,e,l,h,m,i,n)&&j.Nb(t,e,l,h,m,r,o))return!j.bm(t,e,l,h,a,c,p,d)||(m=(t-l)*(c-d)-(e-h)*(a-p),m===0)?!1:(x.h(((t*h-e*l)*(a-p)-(t-l)*(a*d-c*p))/m,((t*h-e*l)*(c-d)-(e-h)*(a*d-c*p))/m),!0);var v=(t+i)/2,S=(e+n)/2,P=(i+r)/2,k=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(v+P)/2,i=(S+k)/2,P=(P+r)/2,k=(k+o)/2;var L=(n+P)/2,T=(i+k)/2,O=1/0,E=!1,V=0,$=0;return j.Np(t,e,v,S,n,i,L,T,a,c,p,d,m,x)&&(t=(x.x-a)*(x.x-a)+(x.y-c)*(x.y-c),t<O&&(O=t,E=!0,V=x.x,$=x.y)),j.Np(L,T,P,k,r,o,l,h,a,c,p,d,m,x)&&(x.x-a)*(x.x-a)+(x.y-c)*(x.y-c)<O&&(E=!0,V=x.x,$=x.y),E&&(x.x=V,x.y=$),E},Op:function(t,e,i,n,r,o,l,h,a,c,p,d,m){var x=0;if(j.Nb(t,e,l,h,m,i,n)&&j.Nb(t,e,l,h,m,r,o)){if(m=(t-l)*(c-d)-(e-h)*(a-p),m===0)return x;var v=((t*h-e*l)*(a-p)-(t-l)*(a*d-c*p))/m,S=((t*h-e*l)*(c-d)-(e-h)*(a*d-c*p))/m;if(v>=p)return x;if((a>p?a-p:p-a)<(c>d?c-d:d-c)){if(e<h?(a=e,t=h):(a=h,t=e),S<a||S>t)return x}else if(t<l?(a=t,t=l):a=l,v<a||v>t)return x;0<m?x++:0>m&&x--}else{v=(t+i)/2,S=(e+n)/2;var P=(i+r)/2,k=(n+o)/2;r=(r+l)/2,o=(o+h)/2,n=(v+P)/2,i=(S+k)/2,P=(P+r)/2,k=(k+o)/2;var L=(n+P)/2,T=(i+k)/2;x+=j.Op(t,e,v,S,n,i,L,T,a,c,p,d,m),x+=j.Op(L,T,P,k,r,o,l,h,a,c,p,d,m)}return x},Ih:function(t,e,i,n,r,o,l){return j.aa(t,i)?(e<n?(i=e,e=n):i=n,o<i?(l.h(t,i),!1):o>e?(l.h(t,e),!1):(l.h(t,o),!0)):j.aa(e,n)?(t<i?(n=t,t=i):n=i,r<n?(l.h(n,e),!1):r>t?(l.h(t,e),!1):(l.h(r,e),!0)):(r=((t-r)*(t-i)+(e-o)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)),-5e-6>r?(l.h(t,e),!1):1.000005<r?(l.h(i,n),!1):(l.h(t+r*(i-t),e+r*(n-e)),!0))},Le:function(t,e,i,n,r,o,l,h,a){return j.w(t,i)&&j.w(e,n)?(a.h(t,e),!1):j.aa(r,l)?j.aa(t,i)?(j.Ih(t,e,i,n,r,o,a),!1):j.Ih(t,e,i,n,r,(n-e)/(i-t)*(r-t)+e,a):(h=(h-o)/(l-r),j.aa(t,i)?(i=h*(t-r)+o,e<n?(r=e,e=n):r=n,i<r?(a.h(t,r),!1):i>e?(a.h(t,e),!1):(a.h(t,i),!0)):(l=(n-e)/(i-t),j.aa(h,l)?(j.Ih(t,e,i,n,r,o,a),!1):(r=(l*t-h*r+o-e)/(l-h),j.aa(l,0)?(t<i?(n=t,t=i):n=i,r<n?(a.h(n,e),!1):r>t?(a.h(t,e),!1):(a.h(r,e),!0)):j.Ih(t,e,i,n,r,l*(r-t)+e,a))))},lB:function(t,e,i,n,r){return j.Le(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,r)},jB:function(t,e,i,n,r,o,l,h,a,c){function p(P,k){var L=(P-t)*(P-t)+(k-e)*(k-e);L<d&&(d=L,a.h(P,k))}var d=1/0;p(a.x,a.y);var m=0,x=0,v=0,S=0;if(r<l?(m=r,x=l):(m=l,x=r),o<h?(v=r,S=l):(v=l,S=r),m=(x-m)/2+c,c=(S-v)/2+c,r=(r+l)/2,o=(o+h)/2,m===0||c===0)return a;if(.5>(i>t?i-t:t-i)){if(m=1-(i-r)*(i-r)/(m*m),0>m)return a;m=Math.sqrt(m),n=-c*m+o,p(i,c*m+o),p(i,n)}else{if(i=(n-e)/(i-t),n=1/(m*m)+i*i/(c*c),h=2*i*(e-i*t)/(c*c)-2*i*o/(c*c)-2*r/(m*m),m=h*h-4*n*(2*i*t*o/(c*c)-2*e*o/(c*c)+o*o/(c*c)+r*r/(m*m)-1+(e-i*t)*(e-i*t)/(c*c)),0>m)return a;m=Math.sqrt(m),c=(-h+m)/(2*n),p(c,i*c-i*t+e),m=(-h-m)/(2*n),p(m,i*m-i*t+e)}return a},Cf:function(t,e,i,n,r,o,l,h,a){var c=1e21,p=t,d=e;if(j.Le(t,e,t,n,r,o,l,h,a)){var m=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o);m<c&&(c=m,p=a.x,d=a.y)}return j.Le(i,e,i,n,r,o,l,h,a)&&(m=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),m<c&&(c=m,p=a.x,d=a.y)),j.Le(t,e,i,e,r,o,l,h,a)&&(e=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),e<c&&(c=e,p=a.x,d=a.y)),j.Le(t,n,i,n,r,o,l,h,a)&&(t=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),t<c&&(c=t,p=a.x,d=a.y)),a.h(p,d),1e21>c},iB:function(t,e,i,n,r,o,l,h,a){return i=t-i,l=r-l,i===0||l===0?i===0?(e=(o-h)/l,h=t,r=e*h+(o-e*r)):(o=(e-n)/i,h=r,r=o*h+(e-o*t)):(n=(e-n)/i,h=(o-h)/l,t=e-n*t,h=(o-h*r-t)/(n-h),r=n*h+t),a.h(h,r),a},ys:function(t,e,i){return j.$x(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},$x:function(t,e,i,n,r,o,l,h){var a=t+i,c=e+n;return r===l?(o<h?(l=o,o=h):l=h,t<=r&&r<=a&&l<=c&&o>=e):o===h?(r<l?(h=r,r=l):h=l,e<=o&&o<=c&&h<=a&&r>=t):!!(Qn(t,e,i,n,r,o)||Qn(t,e,i,n,l,h)||j.bm(t,e,a,e,r,o,l,h)||j.bm(a,e,a,c,r,o,l,h)||j.bm(a,c,t,c,r,o,l,h)||j.bm(t,c,t,e,r,o,l,h))},bm:function(t,e,i,n,r,o,l,h){return 0>=j.Vl(t,e,i,n,r,o)*j.Vl(t,e,i,n,l,h)&&0>=j.Vl(r,o,l,h,t,e)*j.Vl(r,o,l,h,i,n)},Vl:function(t,e,i,n,r,o){return i-=t,n-=e,t=r-t,e=o-e,o=t*n-e*i,o===0&&(o=t*i+e*n,0<o&&(o=(t-i)*i+(e-n)*n,0>o&&(o=0))),o},iq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Fx:function(t,e,i,n,r,o){var l=Math.PI;o||(n*=l/180,r*=l/180);var h=n>r?-1:1;o=[];var a=l/2,c=n;if(n=Math.min(2*l,Math.abs(r-n)),1e-5>n)return a=c+h*Math.min(n,a),h=t+i*Math.cos(c),c=e+i*Math.sin(c),t+=i*Math.cos(a),e+=i*Math.sin(a),i=(h+t)/2,a=(c+e)/2,o.push([h,c,i,a,i,a,t,e]),o;for(;1e-5<n;)r=c+h*Math.min(n,a),o.push(j.rz(i,c,r,t,e)),n-=Math.abs(r-c),c=r;return o},rz:function(t,e,i,n,r){var o=(i-e)/2,l=t*Math.cos(o),h=t*Math.sin(o),a=-h,c=l*l+a*a,p=c+l*l+a*h;return c=4/3*(Math.sqrt(2*c*p)-p)/(l*h-a*l),h=l-c*a,l=a+c*l,a=-l,c=o+e,o=Math.cos(c),c=Math.sin(c),[n+t*Math.cos(e),r+t*Math.sin(e),n+h*o-l*c,r+h*c+l*o,n+h*o-a*c,r+h*c+a*o,n+t*Math.cos(i),r+t*Math.sin(i)]},Wp:function(t,e,i,n,r,o,l){i=Math.floor((t-i)/r)*r+i,n=Math.floor((e-n)/o)*o+n;var h=i;return i+r-t<r/2&&(h=i+r),t=n,n+o-e<o/2&&(t=n+o),l.h(h,t),l},Qx:function(t,e){var i=Math.max(t,e);t=Math.min(t,e);var n;do e=i%t,i=n=t,t=e;while(0<e);return n},xz:function(t,e,i,n){var r=0>i,o=0>n;if(t<e)var l=1,h=0;else l=0,h=1;var a=l===0?t:e,c=l===0?i:n;return(l===0?r:o)&&(c=-c),l=h,i=l===0?i:n,(l===0?r:o)&&(i=-i),j.yz(a,l===0?t:e,c,i,0,0)},yz:function(t,e,i,n,r,o){if(0<n)if(0<i){r=t*t,o=e*e,t*=i;var l=e*n,h=-o+l,a=-o+Math.sqrt(t*t+l*l);e=h;for(var c=0;9999999999>c&&(e=.5*(h+a),!(e===h||e===a));++c){var p=t/(e+r),d=l/(e+o);if(p=p*p+d*d-1,0<p)h=e;else if(0>p)a=e;else break}i=r*i/(e+r)-i,n=o*n/(e+o)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else n=t*t-e*e,o=t*i,o<n?(n=o/n,o=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+o*o)):i=Math.abs(i-t);return i},Qe:new Je,Gm:new Je,Jf:new Je,Kf:0,Hm:100};j.za=j.ZA;function tt(t){je(this),this.v=!1,t===void 0&&(t=tt.o),this.ha=t,this.sc=this.ic=this.bd=this.ad=0,this.gj=new it,this.$q=this.gj.Da,this.Mq=new _().freeze(),this.qa=!0,this.Om=this.xk=null,this.Pm=NaN,this.mf=di,this.nf=Er,this.$k=this.al=NaN,this.Of=he}tt.prototype.copy=function(){var t=new tt;t.ha=this.ha,t.ad=this.ad,t.bd=this.bd,t.ic=this.ic,t.sc=this.sc;for(var e=this.gj.m,i=e.length,n=t.gj,r=0;r<i;r++){var o=e[r].copy();n.add(o)}return t.$q=this.$q,t.Mq.assign(this.Mq),t.qa=this.qa,t.xk=this.xk,t.Om=this.Om,t.Pm=this.Pm,t.mf=this.mf.I(),t.nf=this.nf.I(),t.al=this.al,t.$k=this.$k,t.Of=this.Of,t},tt.prototype.ca=function(){return this.freeze(),Object.freeze(this),this},tt.prototype.freeze=function(){this.v=!0;var t=this.figures;t.freeze(),t=t.m;for(var e=t.length,i=0;i<e;i++)t[i].freeze();return this},tt.prototype.ea=function(){Object.isFrozen(this)&&D("cannot thaw constant: "+this),this.v=!1;var t=this.figures;t.ea(),t=t.m;for(var e=t.length,i=0;i<e;i++)t[i].ea();return this},tt.prototype.Ua=function(t){if(!(t instanceof tt))return!1;if(this.type!==t.type)return this.type===tt.j&&t.type===tt.o?_w(this,t):t.type===tt.j&&this.type===tt.o?_w(t,this):!1;if(this.type===tt.o){var e=this.figures.m;t=t.figures.m;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Ua(t[n]))return!1;return!0}return j.w(this.startX,t.startX)&&j.w(this.startY,t.startY)&&j.w(this.endX,t.endX)&&j.w(this.endY,t.endY)};function _w(t,e){return t.type!==tt.j||e.type!==tt.o?!1:!!(e.figures.count===1&&(e=e.figures.J(0),e.segments.count===1&&j.w(t.startX,e.startX)&&j.w(t.startY,e.startY)&&(e=e.segments.J(0),e.type===fe&&j.w(t.endX,e.endX)&&j.w(t.endY,e.endY))))}tt.wa=function(t){return t.toString()},tt.prototype.gb=function(t){t.classType===tt&&(this.type=t)},tt.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case tt.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case tt.D:var e=new _(this.startX,this.startY,0,0);return e.Tv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case tt.L:if(e=new _(this.startX,this.startY,0,0),e.Tv(this.endX,this.endY,0,0),0>t)return t=e.left.toString()+" "+(e.y+e.height/2).toString(),"M"+t+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+(e.right.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+(e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t))+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case tt.o:e="",i=this.figures.m;for(var n=i.length,r=0;r<n;r++){var o=i[r];0<r&&(e+=" x "),o.isFilled&&(e+="F "),e+=o.toString(t)}return e;default:return this.type.toString()}},tt.Ma=function(t){t=t.split(/[Xx]/);for(var e=t.length,i="",n=0;n<e;n++){var r=t[n];i=r.match(/[Ff]/)!==null?n===0?i+r:i+("X"+(r[0]===" "?"":" ")+r):i+((n===0?"":"X ")+"F"+(r[0]===" "?"":" ")+r)}return i},tt.parse=function(t,e){function i(){return S>=O-1?!0:c[S+1].match(E)!==null}function n(){return S++,c[S]}function r(G){var vt=parseFloat(n()),ft=parseFloat(n());P===P.toLowerCase()&&(vt=T.x+vt,ft=T.y+ft),G.h(vt,ft)}function o(){return r(T),T}function l(){return r(L),L}function h(){var G=k.toLowerCase();return G!=="c"&&G!=="s"&&G!=="q"&&G!=="t"?T:new N(2*T.x-L.x,2*T.y-L.y)}e===void 0&&(e=!1);var a=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm;t=t.replace(/,/gm," "),t=t.replace(a,"$1 $2"),t=t.replace(a,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2"),t=t.replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");var c=t.split(" ");for(t=0;t<c.length;t++){var p=c[t];if(p.match(/(\.[0-9]*)(\.)/gm)!==null){a=Et();for(var d="",m=!1,x=0;x<p.length;x++){var v=p[x];v!=="."||m?v==="."?(a.push(d),d="."):d+=v:(m=!0,d+=v)}for(a.push(d),c.splice(t,1),p=0;p<a.length;p++)c.splice(t+p,0,a[p]);t+=a.length-1,Ut(a)}}var S=-1,P="",k="";a=new N(0,0);var L=new N(0,0),T=new N(0,0),O=c.length;t=UM(null),d=p=!1,m=!0,x=null;for(var E=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(S>=O-1);)if(k=P,P=n(),P!=="")switch(P.toUpperCase()){case"X":m=!0,d=p=!1;break;case"M":for(x=o(),t.jc===null||m===!0?(Mh(t,x.x,x.y,p,!d),m=!1):t.moveTo(x.x,x.y),a.assign(T);!i();)x=o(),t.lineTo(x.x,x.y);break;case"L":for(;!i();)x=o(),t.lineTo(x.x,x.y);break;case"H":for(;!i();)T=new N((P===P.toLowerCase()?T.x:0)+parseFloat(n()),T.y),t.lineTo(T.x,T.y);break;case"V":for(;!i();)T=new N(T.x,(P===P.toLowerCase()?T.y:0)+parseFloat(n())),t.lineTo(T.x,T.y);break;case"C":for(;!i();){x=new N,r(x),v=l();var V=o();zo(t,x.x,x.y,v.x,v.y,V.x,V.y)}break;case"S":for(;!i();)x=h(),v=l(),V=o(),zo(t,x.x,x.y,v.x,v.y,V.x,V.y);break;case"Q":for(;!i();)x=l(),v=o(),Jp(t,x.x,x.y,v.x,v.y);break;case"T":for(;!i();)L=x=h(),v=o(),Jp(t,x.x,x.y,v.x,v.y);break;case"B":for(;!i();){x=parseFloat(n()),v=parseFloat(n()),V=parseFloat(n());var $=parseFloat(n()),b=parseFloat(n()),nt=b,et=!1;i()||(nt=parseFloat(n()),i()||(et=parseFloat(n())!==0)),P===P.toLowerCase()&&(V+=T.x,$+=T.y),t.arcTo(x,v,V,$,b,nt,et)}break;case"A":for(;!i();)x=Math.abs(parseFloat(n())),v=Math.abs(parseFloat(n())),V=parseFloat(n()),b=$=!1,et=nt=0,nt=n(),nt.length===1?($=!!parseFloat(nt),b=!!parseFloat(n()),nt=parseFloat(n())):nt.length===2?($=!!parseFloat(nt[0]),b=!!parseFloat(nt[1]),nt=parseFloat(n())):($=!!parseFloat(nt[0]),b=!!parseFloat(nt[1]),nt=parseFloat(nt.slice(2))),et=parseFloat(n()),P===P.toLowerCase()&&(nt=T.x+nt,et=T.y+et),T.h(nt,et),qT(t,x,v,V,$,b,nt,et);break;case"Z":QT(t),T.assign(a);break;case"F":for(x="",v=1;c[S+v];)if(c[S+v].match(/[Uu]/)!==null)v++;else if(c[S+v].match(E)===null)v++;else{x=c[S+v];break}x.match(/[Mm]/)?p=!0:0<t.jc.segments.length&&(t.jc.isFilled=!0);break;case"U":for(x="",v=1;c[S+v];)if(c[S+v].match(/[Ff]/)!==null)v++;else if(c[S+v].match(E)===null)v++;else{x=c[S+v];break}x.match(/[Mm]/)?d=!0:t.zm(!1)}if(a=t.ss,Zp=t,e)for(e=a.figures.iterator;e.next();)e.value.isFilled=!0;return a},tt.Ba=function(t,e){for(var i=t.length,n=N.alloc(),r=0;r<i;r++){var o=t[r];n.x=o[0],n.y=o[1],e.Aa(n),o[0]=n.x,o[1]=n.y,n.x=o[2],n.y=o[3],e.Aa(n),o[2]=n.x,o[3]=n.y,n.x=o[4],n.y=o[5],e.Aa(n),o[4]=n.x,o[5]=n.y,n.x=o[6],n.y=o[7],e.Aa(n),o[6]=n.x,o[7]=n.y}N.free(n)},tt.prototype.ev=function(){if(this.qa||this.$q!==this.figures.Da)return!0;for(var t=this.figures.m,e=t.length,i=0;i<e;i++)if(t[i].ev())return!0;return!1},tt.prototype.computeBounds=function(){this.qa=!1,this.Om=this.xk=null,this.Pm=NaN,this.$q=this.figures.Da;for(var t=this.figures.m,e=t.length,i=0;i<e;i++){var n=t[i];n.qa=!1;var r=n.segments;n.Or=r.Da,n=r.m,r=n.length;for(var o=0;o<r;o++){var l=n[o];l.qa=!1,l.Rd=null}}t=this.Mq,t.ea(),isNaN(this.al)||isNaN(this.$k)?t.h(0,0,0,0):t.h(0,0,this.al,this.$k),Uw(this,t,!1),Ve(t,0,0,0,0),t.freeze()},tt.prototype.Ex=function(){var t=new _;return Uw(this,t,!0),t};function Uw(t,e,i){switch(t.type){case tt.j:case tt.D:case tt.L:i?e.h(t.ad,t.bd,0,0):Ve(e,t.ad,t.bd,0,0),Ve(e,t.ic,t.sc,0,0);break;case tt.o:var n=t.figures;t=n.m,n=n.length;for(var r=0;r<n;r++){var o=t[r];i&&r===0?e.h(o.startX,o.startY,0,0):Ve(e,o.startX,o.startY,0,0);for(var l=o.segments.m,h=l.length,a=o.startX,c=o.startY,p=0;p<h;p++){var d=l[p];switch(d.type){case fe:case _n:a=d.endX,c=d.endY,Ve(e,a,c,0,0);break;case un:j.Tl(a,c,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,e),a=d.endX,c=d.endY;break;case vr:j.tv(a,c,d.point1X,d.point1Y,d.endX,d.endY,.5,e),a=d.endX,c=d.endY;break;case ye:case qn:var m=d.type===ye?so(d,o):Gs(d,o,a,c),x=m.length;if(x===0){a=d.type===ye?d.centerX:d.endX,c=d.type===ye?d.centerY:d.endY,Ve(e,a,c,0,0);break}d=null;for(var v=0;v<x;v++)d=m[v],j.Tl(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,e);d!==null&&(a=d[6],c=d[7]);break;default:D("Unknown Segment type: "+d.type)}}}break;default:D("Unknown Geometry type: "+t.type)}}tt.prototype.normalize=function(){this.v&&rt(this);var t=this.Ex();return this.offset(-t.x,-t.y),new N(-t.x,-t.y)},tt.prototype.offset=function(t,e){return this.v&&rt(this),this.transform(1,0,0,1,t,e),this},tt.prototype.scale=function(t,e){return this.v&&rt(this),this.transform(t,0,0,e,0,0),this},tt.prototype.rotate=function(t,e,i){this.v&&rt(this),e===void 0&&(e=0),i===void 0&&(i=0);var n=Mt.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Mt.free(n),this},s=tt.prototype,s.transform=function(t,e,i,n,r,o){switch(this.type){case tt.j:case tt.D:case tt.L:var l=this.ad,h=this.bd;this.ad=l*t+h*i+r,this.bd=l*e+h*n+o,l=this.ic,h=this.sc,this.ic=l*t+h*i+r,this.sc=l*e+h*n+o;break;case tt.o:for(var a=this.figures.m,c=a.length,p=0;p<c;p++){var d=a[p];l=d.startX,h=d.startY,d.startX=l*t+h*i+r,d.startY=l*e+h*n+o,d=d.segments.m;for(var m=d.length,x=0;x<m;x++){var v=d[x];switch(v.type){case fe:case _n:l=v.endX,h=v.endY,v.endX=l*t+h*i+r,v.endY=l*e+h*n+o;break;case un:l=v.point1X,h=v.point1Y,v.point1X=l*t+h*i+r,v.point1Y=l*e+h*n+o,l=v.point2X,h=v.point2Y,v.point2X=l*t+h*i+r,v.point2Y=l*e+h*n+o,l=v.endX,h=v.endY,v.endX=l*t+h*i+r,v.endY=l*e+h*n+o;break;case vr:l=v.point1X,h=v.point1Y,v.point1X=l*t+h*i+r,v.point1Y=l*e+h*n+o,l=v.endX,h=v.endY,v.endX=l*t+h*i+r,v.endY=l*e+h*n+o;break;case ye:l=v.centerX,h=v.centerY,v.centerX=l*t+h*i+r,v.centerY=l*e+h*n+o,e!==0&&(l=180*Math.atan2(e,t)/Math.PI,0>l&&(l+=360),v.startAngle+=l),0>t&&(v.startAngle=180-v.startAngle,v.sweepAngle=-v.sweepAngle),0>n&&(v.startAngle=-v.startAngle,v.sweepAngle=-v.sweepAngle),v.radiusX*=Math.sqrt(t*t+i*i),v.radiusY!==void 0&&(v.radiusY*=Math.sqrt(e*e+n*n));break;case qn:if(l=v.endX,h=v.endY,v.endX=l*t+h*i+r,v.endY=l*e+h*n+o,v.radiusX===0||v.radiusY===0)break;e!==0&&(l=180*Math.atan2(e,t)/Math.PI,0>l&&(l+=360),v.xAxisRotation+=l),0>t&&(v.xAxisRotation=180-v.xAxisRotation,v.isClockwiseArc=!v.isClockwiseArc),0>n&&(v.xAxisRotation=-v.xAxisRotation,v.isClockwiseArc=!v.isClockwiseArc),v.radiusX*=Math.sqrt(t*t+i*i),v.radiusY*=Math.sqrt(e*e+n*n);break;default:D("Unknown Segment type: "+v.type)}}}}return this.qa=!0,this},s.$=function(t,e){e===void 0&&(e=0);var i=this.ad,n=this.bd,r=this.ic,o=this.sc;switch(this.type){case tt.j:return j.Nb(i,n,r,o,e,t.x,t.y);case tt.D:var l=_.allocAt(Math.min(i,r)-e,Math.min(n,o)-e,Math.abs(r-i)+2*e,Math.abs(o-n)+2*e);return t=l.$(t),_.free(l),t;case tt.L:l=Math.min(i,r)-e;var h=Math.min(n,o)-e;return i=(Math.abs(r-i)+2*e)/2,e=(Math.abs(o-n)+2*e)/2,0>=i||0>=e?!1:(l=t.x-(l+i),h=t.y-(h+e),1>=l*l/(i*i)+h*h/(e*e));case tt.o:return Zg(this,t,e,!0,!1);default:return!1}};function Zg(t,e,i,n,r){var o=e.x;e=e.y;for(var l=t.bounds.x-20,h=0,a,c,p,d,m=t.figures.m,x=m.length,v=0;v<x;v++){var S=m[v];if(S.isFilled){if(n&&S.$(o,e,i))return!0;var P=S.segments;a=S.startX,c=S.startY;for(var k=a,L=c,T=P.m,O=0;O<=P.length;O++){var E=void 0;if(O!==P.length){E=T[O];var V=E.type;t=E.endX,d=E.endY}else V=fe,t=k,d=L;switch(V){case _n:if(k=ip(o,e,l,e,a,c,k,L),isNaN(k))return!0;h+=k,k=t,L=d;break;case fe:if(a=ip(o,e,l,e,a,c,t,d),isNaN(a))return!0;h+=a;break;case un:p=j.Op(a,c,E.point1X,E.point1Y,E.point2X,E.point2Y,t,d,l,e,o,e,.5),h+=p;break;case vr:p=j.Op(a,c,(a+2*E.point1X)/3,(c+2*E.point1Y)/3,(2*E.point1X+t)/3,(2*E.point1Y+d)/3,t,d,l,e,o,e,.5),h+=p;break;case ye:case qn:V=E.type===ye?so(E,S):Gs(E,S,a,c);var $=V.length;if($===0){if(a=ip(o,e,l,e,a,c,E.type===ye?E.centerX:E.endX,E.type===ye?E.centerY:E.endY),isNaN(a))return!0;h+=a;break}E=null;for(var b=0;b<$;b++){if(E=V[b],b===0){if(p=ip(o,e,l,e,a,c,E[0],E[1]),isNaN(p))return!0;h+=p}p=j.Op(E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],l,e,o,e,.5),h+=p}E!==null&&(t=E[6],d=E[7]);break;default:D("Unknown Segment type: "+E.type)}a=t,c=d}if(h!==0)return!0;h=0}else if(S.$(o,e,r?i:i+2))return!0}return h!==0}function ip(t,e,i,n,r,o,l,h){if(j.Nb(r,o,l,h,.05,t,e))return NaN;var a=(t-i)*(o-h);if(a===0)return 0;var c=((t*n-e*i)*(r-l)-(t-i)*(r*h-o*l))/a;if(e=(t*n-e*i)*(o-h)/a,c>=t)return 0;if((r>l?r-l:l-r)<(o>h?o-h:h-o)){if(o<h){if(e<o||e>h)return 0}else if(e<h||e>o)return 0}else if(r<l){if(c<r||c>l)return 0}else if(c<l||c>r)return 0;return 0<a?1:-1}function zw(t,e,i,n){t=t.figures.m;for(var r=t.length,o=0;o<r;o++)if(t[o].$(e,i,n))return!0;return!1}s.Tu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=new N),this.type===tt.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,l=0,h=0;h<r;h++){var a=n[h],c=a.length;for(t=0;t<c;t++){var p=a[t];if(l+p>=o)return n=o-l,n=p===0?0:n/p,i=i[h],h=i[2*t],r=i[2*t+1],e.h(h+(i[2*t+2]-h)*n,r+(i[2*t+3]-r)*n),e;l+=p}}return e},s.Rx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===tt.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,r=this.flattenedTotalLength*t,o=0,l=0;l<n;l++){var h=i[l],a=h.length;for(t=0;t<a;t++){var c=h[t];if(o+c>=r)return r=e[l],e=r[2*t],i=r[2*t+1],n=r[2*t+2],t=r[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;o+=c}}return NaN},s.Uu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=[]),e.length=3,this.type===tt.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,l=0,h=0;h<r;h++){var a=n[h],c=a.length;for(t=0;t<c;t++){var p=a[t];if(l+p>=o)return n=o-l,n=p===0?0:n/p,p=i[h],i=p[2*t],h=p[2*t+1],r=p[2*t+2],t=p[2*t+3],e[0]=i+(r-i)*n,e[1]=h+(t-h)*n,e[2]=1>Math.abs(r-i)&&1>Math.abs(t-h)?0:1>Math.abs(r-i)?0<=t-h?90:270:1>Math.abs(t-h)?0<=r-i?0:180:180*Math.atan2(t-h,r-i)/Math.PI,e;l+=p}}return e},s.Sx=function(t){if(this.type===tt.j){var e=this.startX,i=this.startY,n=this.endX,r=this.endY;if(e!==n||i!==r){var o=t.x;if(t=t.y,e===n){if(i<r){var l=i;n=r}else l=r,n=i;return t<=l?l===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-l)}if(i===r)return e<n?l=e:(l=n,n=e),o<=l?l===e?0:1:o>=n?n===e?0:1:Math.abs(o-e)/(n-l);l=(n-e)*(n-e)+(r-i)*(r-i);var h=N.alloc();return j.Ih(e,i,n,r,o,t,h),t=h.x,o=h.y,N.free(h),Math.sqrt(((t-e)*(t-e)+(o-i)*(o-i))/l)}}else if(this.type===tt.D){l=this.startX,h=this.startY;var a=this.endX;if(r=this.endY,l!==a||h!==r){e=a-l,i=r-h,o=2*e+2*i,n=t.x,t=t.y,n=Math.min(Math.max(n,l),a),t=Math.min(Math.max(t,h),r),l=Math.abs(n-l),a=Math.abs(n-a),h=Math.abs(t-h),r=Math.abs(t-r);var c=Math.min(l,a,h,r);if(c===h)return n/o;if(c===a)return(e+t)/o;if(c===r)return(2*e+i-n)/o;if(c===l)return(2*e+2*i-t)/o}}else{e=this.flattenedSegments,i=this.flattenedLengths,o=this.flattenedTotalLength,n=N.alloc(),r=1/0,h=l=0,a=e.length;for(var p=c=0,d=0;d<a;d++)for(var m=e[d],x=i[d],v=m.length,S=0;S<v;S+=2){var P=m[S],k=m[S+1];if(S!==0){j.Ih(c,p,P,k,t.x,t.y,n);var L=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);L<r&&(r=L,l=h,l+=Math.sqrt((n.x-c)*(n.x-c)+(n.y-p)*(n.y-p))),h+=x[(S-2)/2]}c=P,p=k}return N.free(n),t=l/o,0>t?0:1<t?1:t}return 0};function Gw(t){if(t.xk===null){var e=t.xk=[],i=t.Om=[],n=[],r=[];if(t.type===tt.j)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(r);else if(t.type===tt.D)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),i.push(r);else if(t.type===tt.L){var o=new Qe;o.startX=t.endX,o.startY=(t.startY+t.endY)/2;var l=new Vt(ye);if(l.startAngle=0,l.sweepAngle=360,l.centerX=(t.startX+t.endX)/2,l.centerY=(t.startY+t.endY)/2,l.radiusX=Math.abs(t.startX-t.endX)/2,l.radiusY=Math.abs(t.startY-t.endY)/2,o.add(l),t=so(l,o),r=t.length,r===0)n.push(l.centerX),n.push(l.centerY);else{l=o.startX,o=o.startY;for(var h=0;h<r;h++){var a=t[h];j.Fe(l,o,a[2],a[3],a[4],a[5],a[6],a[7],.5,n),l=a[6],o=a[7]}}e.push(n),i.push(Qg(n))}else for(t=t.figures.iterator;t.next();){r=t.value,n=[],n.push(r.startX),n.push(r.startY),l=r.startX,o=r.startY,h=l,a=o;for(var c=r.segments.m,p=c.length,d=0;d<p;d++){var m=c[d];switch(m.type){case _n:4<=n.length&&(e.push(n),i.push(Qg(n))),n=[],n.push(m.endX),n.push(m.endY),l=m.endX,o=m.endY,h=l,a=o;break;case fe:n.push(m.endX),n.push(m.endY),l=m.endX,o=m.endY;break;case un:j.Fe(l,o,m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY,.5,n),l=m.endX,o=m.endY;break;case vr:j.kq(l,o,m.point1X,m.point1Y,m.endX,m.endY,.5,n),l=m.endX,o=m.endY;break;case ye:var x=so(m,r),v=x.length;if(v===0){n.push(m.centerX),n.push(m.centerY),l=m.centerX,o=m.centerY;break}for(var S=0;S<v;S++){var P=x[S];j.Fe(l,o,P[2],P[3],P[4],P[5],P[6],P[7],.5,n),l=P[6],o=P[7]}break;case qn:if(x=Gs(m,r,l,o),v=x.length,S=m.endX,P=m.endY,v===0){n.push(S),n.push(P),l=S,o=P;break}for(S=0;S<v;S++)P=x[S],j.Fe(l,o,P[2],P[3],P[4],P[5],P[6],P[7],.5,n),l=P[6],o=P[7];break;default:D("Segment not of valid type: "+m.type)}m.isClosed&&(n.push(h),n.push(a))}4<=n.length&&(e.push(n),i.push(Qg(n)))}}}function Qg(t){for(var e=[],i=0,n=0,r=t.length,o=0;o<r;o+=2){var l=t[o],h=t[o+1];o!==0&&e.push(Math.sqrt(no(i,n,l,h))),i=l,n=h}return e}s.add=function(t){return this.gj.add(t),this},s.Am=function(t,e,i,n,r,o,l,h){return this.v&&rt(this),this.mf=new at(t,e,r,o).freeze(),this.nf=new at(i,n,l,h).freeze(),this},Y.Object.defineProperties(tt.prototype,{flattenedSegments:{get:function(){return Gw(this),this.xk}},flattenedLengths:{get:function(){return Gw(this),this.Om}},flattenedTotalLength:{get:function(){var t=this.Pm;if(isNaN(t)){if(this.type===tt.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===tt.D)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else{e=this.flattenedLengths;for(var i=e.length,n=t=0;n<i;n++)for(var r=e[n],o=r.length,l=0;l<o;l++)t+=r[l]}this.Pm=t}return t}},type:{get:function(){return this.ha},set:function(t){this.ha!==t&&(this.v&&rt(this,t),this.ha=t,this.qa=!0)}},startX:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.v&&rt(this,t),this.ad=t,this.qa=!0)}},startY:{get:function(){return this.bd},set:function(t){this.bd!==t&&(this.v&&rt(this,t),this.bd=t,this.qa=!0)}},endX:{get:function(){return this.ic},set:function(t){this.ic!==t&&(this.v&&rt(this,t),this.ic=t,this.qa=!0)}},endY:{get:function(){return this.sc},set:function(t){this.sc!==t&&(this.v&&rt(this,t),this.sc=t,this.qa=!0)}},figures:{get:function(){return this.gj},set:function(t){this.gj!==t&&(this.v&&rt(this,t),this.gj=t,this.qa=!0)}},spot1:{get:function(){return this.mf},set:function(t){this.v&&rt(this,t),this.mf=t.I()}},spot2:{get:function(){return this.nf},set:function(t){this.v&&rt(this,t),this.nf=t.I()}},defaultStretch:{get:function(){return this.Of},set:function(t){this.v&&rt(this,t),this.Of=t}},bounds:{get:function(){return this.ev()&&this.computeBounds(),this.Mq}}}),tt.prototype.setSpots=tt.prototype.Am,tt.prototype.add=tt.prototype.add,tt.prototype.getFractionForPoint=tt.prototype.Sx,tt.prototype.getPointAndAngleAlongPath=tt.prototype.Uu,tt.prototype.getAngleAlongPath=tt.prototype.Rx,tt.prototype.getPointAlongPath=tt.prototype.Tu,tt.prototype.containsPoint=tt.prototype.$,tt.prototype.transform=tt.prototype.transform,tt.prototype.rotate=tt.prototype.rotate,tt.prototype.scale=tt.prototype.scale,tt.prototype.offset=tt.prototype.offset,tt.prototype.normalize=tt.prototype.normalize,tt.prototype.computeBoundsWithoutOrigin=tt.prototype.Ex,tt.prototype.equalsApprox=tt.prototype.Ua,tt.className="Geometry",tt.j=new K(tt,"Line",0),tt.D=new K(tt,"Rectangle",1),tt.L=new K(tt,"Ellipse",2),tt.o=new K(tt,"Path",3),tt.Qb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",tt.className="Geometry",tt.stringify=tt.wa,tt.fillPath=tt.Ma,tt.parse=tt.parse,tt.Line=tt.j,tt.Rectangle=tt.D,tt.Ellipse=tt.L,tt.Path=tt.o;function Qe(t,e,i,n){je(this),this.Ew=null,this.v=!1,i===void 0&&(i=!0),this.jr=i,n===void 0&&(n=!0),this.pr=n,t!==void 0?this.ad=t:this.ad=0,e!==void 0?this.bd=e:this.bd=0,this.Cl=new it,this.Or=this.Cl.Da,this.qa=!0}Qe.prototype.copy=function(){var t=new Qe;t.jr=this.jr,t.pr=this.pr,t.ad=this.ad,t.bd=this.bd;for(var e=this.Cl.m,i=e.length,n=t.Cl,r=0;r<i;r++){var o=e[r].copy();n.add(o)}return t.Or=this.Or,t.qa=this.qa,t.Ew=this.Ew,t},s=Qe.prototype,s.Ua=function(t){if(!(t instanceof Qe&&j.w(this.startX,t.startX)&&j.w(this.startY,t.startY)))return!1;var e=this.segments.m;t=t.segments.m;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Ua(t[n]))return!1;return!0},s.toString=function(t){t===void 0&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),i=this.segments.m,n=i.length,r=0;r<n;r++)e+=" "+i[r].toString(t);return e},s.freeze=function(){this.v=!0;var t=this.segments;t.freeze();var e=t.m;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},s.ea=function(){this.v=!1;var t=this.segments;t.ea(),t=t.m;for(var e=t.length,i=0;i<e;i++)t[i].ea();return this},s.ev=function(){if(this.qa)return!0;var t=this.segments;if(this.Or!==t.Da)return!0;t=t.m;for(var e=t.length,i=0;i<e;i++)if(t[i].qa)return!0;return!1},s.add=function(t){return this.Cl.add(t),this},s.$=function(t,e,i){for(var n=this.startX,r=this.startY,o=n,l=r,h=this.segments.m,a=h.length,c=0;c<a;c++){var p=h[c];switch(p.type){case _n:o=p.endX,l=p.endY,n=p.endX,r=p.endY;break;case fe:if(j.Nb(n,r,p.endX,p.endY,i,t,e))return!0;n=p.endX,r=p.endY;break;case un:if(j.hs(n,r,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.5,t,e,i))return!0;n=p.endX,r=p.endY;break;case vr:if(j.uv(n,r,p.point1X,p.point1Y,p.endX,p.endY,.5,t,e,i))return!0;n=p.endX,r=p.endY;break;case ye:case qn:var d=p.type===ye?so(p,this):Gs(p,this,n,r),m=d.length,x=p.type===ye?p.centerX:p.endX,v=p.type===ye?p.centerY:p.endY;if(m===0){if(j.Nb(n,r,x,v,i,t,e))return!0;n=x,r=v;break}for(x=null,v=0;v<m;v++)if(x=d[v],v===0&&j.Nb(n,r,x[0],x[1],i,t,e)||j.hs(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],.5,t,e,i))return!0;x!==null&&(n=x[6],r=x[7]);break;default:D("Unknown Segment type: "+p.type)}if(p.isClosed&&(n!==o||r!==l)&&j.Nb(n,r,o,l,i,t,e))return!0}return!1},Y.Object.defineProperties(Qe.prototype,{isFilled:{get:function(){return this.jr},set:function(t){this.v&&rt(this,t),this.jr=t}},isShadowed:{get:function(){return this.pr},set:function(t){this.v&&rt(this,t),this.pr=t}},startX:{get:function(){return this.ad},set:function(t){this.v&&rt(this,t),this.ad=t,this.qa=!0}},startY:{get:function(){return this.bd},set:function(t){this.v&&rt(this,t),this.bd=t,this.qa=!0}},segments:{get:function(){return this.Cl},set:function(t){this.v&&rt(this,t),this.Cl=t,this.qa=!0}}}),Qe.prototype.add=Qe.prototype.add,Qe.prototype.equalsApprox=Qe.prototype.Ua,Qe.className="PathFigure";function Vt(t,e,i,n,r,o,l,h){je(this),this.v=!1,t===void 0&&(t=fe),this.ha=t,e!==void 0?this.ic=e:this.ic=0,i!==void 0?this.sc=i:this.sc=0,n===void 0&&(n=0),r===void 0&&(r=0),o===void 0&&(o=0),l===void 0&&(l=0),t===qn?(t=o%360,0>t&&(t+=360),this.De=t,this.pi=0,this.ri=Math.max(n,0),this.fh=Math.max(r,0),this.hl=typeof l=="boolean"?l:typeof l=="number"?!!l:!1,this.Dk=!!h):(this.De=n,this.pi=r,t===ye&&(o=Math.max(o,0)),this.ri=o,typeof l=="number"?(t===ye&&(l=Math.max(l,0)),this.fh=l):this.fh=0,this.Dk=this.hl=!1),this.mj=!1,this.qa=!0,this.Rd=null}Vt.prototype.copy=function(){var t=new Vt;return t.ha=this.ha,t.ic=this.ic,t.sc=this.sc,t.De=this.De,t.pi=this.pi,t.ri=this.ri,t.fh=this.fh,t.hl=this.hl,t.Dk=this.Dk,t.mj=this.mj,t.qa=this.qa,t},s=Vt.prototype,s.Ua=function(t){if(!(t instanceof Vt)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case _n:case fe:return j.w(this.endX,t.endX)&&j.w(this.endY,t.endY);case un:return j.w(this.endX,t.endX)&&j.w(this.endY,t.endY)&&j.w(this.point1X,t.point1X)&&j.w(this.point1Y,t.point1Y)&&j.w(this.point2X,t.point2X)&&j.w(this.point2Y,t.point2Y);case vr:return j.w(this.endX,t.endX)&&j.w(this.endY,t.endY)&&j.w(this.point1X,t.point1X)&&j.w(this.point1Y,t.point1Y);case ye:return j.w(this.startAngle,t.startAngle)&&j.w(this.sweepAngle,t.sweepAngle)&&j.w(this.centerX,t.centerX)&&j.w(this.centerY,t.centerY)&&j.w(this.radiusX,t.radiusX)&&j.w(this.radiusY,t.radiusY);case qn:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&j.w(this.xAxisRotation,t.xAxisRotation)&&j.w(this.endX,t.endX)&&j.w(this.endY,t.endY)&&j.w(this.radiusX,t.radiusX)&&j.w(this.radiusY,t.radiusY);default:return!1}},s.gb=function(t){t.classType===Vt&&(this.type=t)},s.toString=function(t){switch(t===void 0&&(t=-1),this.type){case _n:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case fe:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case un:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case vr:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case ye:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case qn:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.mj?"z":"")},s.freeze=function(){return this.v=!0,this},s.ea=function(){return this.v=!1,this},s.close=function(){return this.mj=!0,this};function so(t,e){if(t.Rd!==null&&e.qa===!1)return t.Rd;var i=t.radiusX,n=t.radiusY;if(n===void 0&&(n=i),i===0||n===0)return t.Rd=[],t.Rd;e=t.De;var r=t.pi,o=j.Fx(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var l=Mt.alloc();l.reset(),i<n?l.scale(1,n/i):l.scale(i/n,1),tt.Ba(o,l),Mt.free(l)}for(i=o.length,n=0;n<i;n++)l=o[n],l[0]+=e,l[1]+=r,l[2]+=e,l[3]+=r,l[4]+=e,l[5]+=r,l[6]+=e,l[7]+=r;return t.Rd=o,t.Rd}function Gs(t,e,i,n){function r(S,P,k,L){return(S*L<P*k?-1:1)*Math.acos((S*k+P*L)/(Math.sqrt(S*S+P*P)*Math.sqrt(k*k+L*L)))}if(t.Rd!==null&&e.qa===!1)return t.Rd;if(t.radiusX===0||t.radiusY===0)return t.Rd=[],t.Rd;e=t.ri;var o=t.fh;e===0&&(e=1e-4),o===0&&(o=1e-4);var l=Math.PI/180*t.De,h=t.hl,a=t.Dk,c=t.ic,p=t.sc,d=Math.cos(l),m=Math.sin(l),x=d*(i-c)/2+m*(n-p)/2;l=-m*(i-c)/2+d*(n-p)/2;var v=x*x/(e*e)+l*l/(o*o);return 1<v&&(e*=Math.sqrt(v),o*=Math.sqrt(v)),v=(h===a?-1:1)*Math.sqrt((e*e*o*o-e*e*l*l-o*o*x*x)/(e*e*l*l+o*o*x*x)),isNaN(v)&&(v=0),h=v*e*l/o,v=v*-o*x/e,isNaN(h)&&(h=0),isNaN(v)&&(v=0),i=(i+c)/2+d*h-m*v,n=(n+p)/2+m*h+d*v,p=r(1,0,(x-h)/e,(l-v)/o),d=(x-h)/e,c=(l-v)/o,x=(-x-h)/e,h=(-l-v)/o,l=r(d,c,x,h),x=(d*x+c*h)/(Math.sqrt(d*d+c*c)*Math.sqrt(x*x+h*h)),-1>=x?l=Math.PI:1<=x&&(l=0),!a&&0<l&&(l-=2*Math.PI),a&&0>l&&(l+=2*Math.PI),a=e>o?1:e/o,x=e>o?o/e:1,e=j.Fx(0,0,e>o?e:o,p,p+l,!0),o=Mt.alloc(),o.reset(),o.translate(i,n),o.rotate(t.De,0,0),o.scale(a,x),tt.Ba(e,o),Mt.free(o),t.Rd=e,t.Rd}Y.Object.defineProperties(Vt.prototype,{isClosed:{get:function(){return this.mj},set:function(t){this.mj!==t&&(this.mj=t,this.qa=!0)}},type:{get:function(){return this.ha},set:function(t){this.v&&rt(this,t),this.ha=t,this.qa=!0}},endX:{get:function(){return this.ic},set:function(t){this.v&&rt(this,t),this.ic=t,this.qa=!0}},endY:{get:function(){return this.sc},set:function(t){this.v&&rt(this,t),this.sc=t,this.qa=!0}},point1X:{get:function(){return this.De},set:function(t){this.v&&rt(this,t),this.De=t,this.qa=!0}},point1Y:{get:function(){return this.pi},set:function(t){this.v&&rt(this,t),this.pi=t,this.qa=!0}},point2X:{get:function(){return this.ri},set:function(t){this.v&&rt(this,t),this.ri=t,this.qa=!0}},point2Y:{get:function(){return this.fh},set:function(t){this.v&&rt(this,t),this.fh=t,this.qa=!0}},centerX:{get:function(){return this.De},set:function(t){this.v&&rt(this,t),this.De=t,this.qa=!0}},centerY:{get:function(){return this.pi},set:function(t){this.v&&rt(this,t),this.pi=t,this.qa=!0}},radiusX:{get:function(){return this.ri},set:function(t){0>t&&st(t,">= zero",Vt,"radiusX"),this.v&&rt(this,t),this.ri=t,this.qa=!0}},radiusY:{get:function(){return this.fh},set:function(t){0>t&&st(t,">= zero",Vt,"radiusY"),this.v&&rt(this,t),this.fh=t,this.qa=!0}},startAngle:{get:function(){return this.ic},set:function(t){this.ic!==t&&(this.v&&rt(this,t),t%=360,0>t&&(t+=360),this.ic=t,this.qa=!0)}},sweepAngle:{get:function(){return this.sc},set:function(t){this.v&&rt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.sc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.Dk},set:function(t){this.v&&rt(this,t),this.Dk=t,this.qa=!0}},isLargeArc:{get:function(){return this.hl},set:function(t){this.v&&rt(this,t),this.hl=t,this.qa=!0}},xAxisRotation:{get:function(){return this.De},set:function(t){t%=360,0>t&&(t+=360),this.v&&rt(this,t),this.De=t,this.qa=!0}}}),Vt.prototype.equalsApprox=Vt.prototype.Ua;var _n=new K(Vt,"Move",0),fe=new K(Vt,"Line",1),un=new K(Vt,"Bezier",2),vr=new K(Vt,"QuadraticBezier",3),ye=new K(Vt,"Arc",4),qn=new K(Vt,"SvgArc",4);Vt.className="PathSegment",Vt.Move=_n,Vt.Line=fe,Vt.Bezier=un,Vt.QuadraticBezier=vr,Vt.Arc=ye,Vt.SvgArc=qn;function hn(){this.C=null,this.ou=new N(0,0).freeze(),this.yt=new N(0,0).freeze(),this.Fq=this.yr=0,this.Gq=1,this.di="",this.ds=this.Uq=!1,this.Sq=this.Iq=0,this.xg=this.gr=this.mr=!1,this.Yq=null,this.bs=0,this.od=this.$r=null}hn.prototype.copy=function(){var t=new hn;return this.clone(t)},hn.prototype.clone=function(t){return t.C=this.C,t.ou.assign(this.viewPoint),t.yt.assign(this.documentPoint),t.yr=this.yr,t.Fq=this.Fq,t.Gq=this.Gq,t.di=this.di,t.Uq=this.Uq,t.ds=this.ds,t.Iq=this.Iq,t.Sq=this.Sq,t.mr=this.mr,t.gr=this.gr,t.xg=this.xg,t.Yq=this.Yq,t.bs=this.bs,t.$r=this.$r,t.od=this.od,t},hn.prototype.toString=function(){var t="^";return this.modifiers!==0&&(t+="M:"+this.modifiers),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.clickCount!==0&&(t+="C:"+this.clickCount),this.delta!==0&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),this.documentPoint!==null&&(t+="@"+this.documentPoint.toString()),t},hn.prototype.Zp=function(t,e){var i=this.diagram;return i===null||OS(i,this.event,t,e),e},hn.prototype.Zz=function(t,e){var i=this.diagram;return i===null||(OS(i,this.event,t,e),e.assign(i.Xs(e))),e},Y.Object.defineProperties(hn.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},viewPoint:{get:function(){return this.ou},set:function(t){this.ou.assign(t)}},documentPoint:{get:function(){return this.yt},set:function(t){this.yt.assign(t)}},modifiers:{get:function(){return this.yr},set:function(t){this.yr=t}},button:{get:function(){return this.Fq},set:function(t){if(this.Fq=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Gq},set:function(t){this.Gq=t}},key:{get:function(){return this.di},set:function(t){this.di=t}},down:{get:function(){return this.Uq},set:function(t){this.Uq=t}},up:{get:function(){return this.ds},set:function(t){this.ds=t}},clickCount:{get:function(){return this.Iq},set:function(t){this.Iq=t}},delta:{get:function(){return this.Sq},set:function(t){this.Sq=t}},isMultiTouch:{get:function(){return this.mr},set:function(t){this.mr=t}},handled:{get:function(){return this.gr},set:function(t){this.gr=t}},bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},event:{get:function(){return this.Yq},set:function(t){this.Yq=t}},isTouchEvent:{get:function(){var t=W.TouchEvent,e=this.event;return t&&e instanceof t?!0:(t=W.PointerEvent)&&e instanceof t&&(e.pointerType==="touch"||e.pointerType==="pen")}},timestamp:{get:function(){return this.bs},set:function(t){this.bs=t}},targetDiagram:{get:function(){return this.$r},set:function(t){this.$r=t}},targetObject:{get:function(){return this.od},set:function(t){this.od=t}},control:{get:function(){return(this.modifiers&1)!==0},set:function(t){this.modifiers=t?this.modifiers|1:this.modifiers&-2}},shift:{get:function(){return(this.modifiers&4)!==0},set:function(t){this.modifiers=t?this.modifiers|4:this.modifiers&-5}},alt:{get:function(){return(this.modifiers&2)!==0},set:function(t){this.modifiers=t?this.modifiers|2:this.modifiers&-3}},meta:{get:function(){return(this.modifiers&8)!==0},set:function(t){this.modifiers=t?this.modifiers|8:this.modifiers&-9}},left:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},set:function(t){this.buttons=t?this.buttons|1:this.buttons&-2}},right:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},set:function(t){this.buttons=t?this.buttons|2:this.buttons&-3}},middle:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},set:function(t){this.buttons=t?this.buttons|4:this.buttons&-5}}}),hn.prototype.getMultiTouchDocumentPoint=hn.prototype.Zz,hn.prototype.getMultiTouchViewPoint=hn.prototype.Zp,hn.className="InputEvent";function Al(){this.C=null,this.na="",this.Gr=this.Wr=null}Al.prototype.copy=function(){var t=new Al;return t.C=this.C,t.na=this.na,t.Wr=this.Wr,t.Gr=this.Gr,t},Al.prototype.toString=function(){var t="*"+this.name;return this.subject!==null&&(t+=":"+this.subject.toString()),this.parameter!==null&&(t+="("+this.parameter.toString()+")"),t},Y.Object.defineProperties(Al.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},name:{get:function(){return this.na},set:function(t){this.na=t}},subject:{get:function(){return this.Wr},set:function(t){this.Wr=t}},parameter:{get:function(){return this.Gr},set:function(t){this.Gr=t}}}),Al.className="DiagramEvent";function te(){this.Vm=qt,this.ff=this.xr="",this.Ao=this.Bo=this.Go=this.Ho=this.Fo=this.C=this.Wb=null}te.prototype.clear=function(){this.Ao=this.Bo=this.Go=this.Ho=this.Fo=this.C=this.Wb=null},te.prototype.copy=function(){var t=new te;t.Vm=this.Vm,t.xr=this.xr,t.ff=this.ff,t.Wb=this.Wb,t.C=this.C,t.Fo=this.Fo;var e=this.Ho;return t.Ho=ct(e)&&typeof e.I=="function"?e.I():e,e=this.Go,t.Go=ct(e)&&typeof e.I=="function"?e.I():e,e=this.Bo,t.Bo=ct(e)&&typeof e.I=="function"?e.I():e,e=this.Ao,t.Ao=ct(e)&&typeof e.I=="function"?e.I():e,t},te.prototype.gb=function(t){t.classType===te&&(this.change=t)},te.prototype.toString=function(){var t="";return t=this.change===bn?t+"* ":this.change===qt?t+(this.model!==null?"!m":"!d"):t+((this.model!==null?"!m":"!d")+this.change),this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===bn?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=ii(this.object)),this.oldValue!==null&&(t+="  old: "+ii(this.oldValue)),this.oldParam!==null&&(t+=" "+this.oldParam),this.newValue!==null&&(t+="  new: "+ii(this.newValue)),this.newParam!==null&&(t+=" "+this.newParam)),t},te.prototype.H=function(t){return t?this.oldValue:this.newValue},te.prototype.aA=function(t){return t?this.oldParam:this.newParam},te.prototype.canUndo=function(){return this.model!==null||this.diagram!==null},te.prototype.undo=function(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.changeState(this,!0))},te.prototype.canRedo=function(){return this.model!==null||this.diagram!==null},te.prototype.redo=function(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.changeState(this,!1))},Y.Object.defineProperties(te.prototype,{model:{get:function(){return this.Wb},set:function(t){this.Wb=t}},diagram:{get:function(){return this.C},set:function(t){this.C=t}},change:{get:function(){return this.Vm},set:function(t){this.Vm=t}},modelChange:{get:function(){return this.xr},set:function(t){this.xr=t}},propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},isTransactionFinished:{get:function(){return this.Vm===bn&&(this.ff==="CommittedTransaction"||this.ff==="FinishedUndo"||this.ff==="FinishedRedo")}},object:{get:function(){return this.Fo},set:function(t){this.Fo=t}},oldValue:{get:function(){return this.Ho},set:function(t){this.Ho=t}},oldParam:{get:function(){return this.Go},set:function(t){this.Go=t}},newValue:{get:function(){return this.Bo},set:function(t){this.Bo=t}},newParam:{get:function(){return this.Ao},set:function(t){this.Ao=t}}}),te.prototype.redo=te.prototype.redo,te.prototype.canRedo=te.prototype.canRedo,te.prototype.undo=te.prototype.undo,te.prototype.canUndo=te.prototype.canUndo,te.prototype.getParam=te.prototype.aA,te.prototype.getValue=te.prototype.H,te.prototype.clear=te.prototype.clear;var bn=new K(te,"Transaction",-1),qt=new K(te,"Property",0),ve=new K(te,"Insert",1),Ne=new K(te,"Remove",2);te.className="ChangedEvent",te.Transaction=bn,te.Property=qt,te.Insert=ve,te.Remove=Ne;function _e(){this.o=new it().freeze(),this.na="",this.j=!1}_e.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(t!==void 0&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.J(i);n!==null&&(e+=`
  `+n.toString())}}return e},_e.prototype.clear=function(){var t=this.changes;t.ea();for(var e=t.count-1;0<=e;e--){var i=t.J(e);i!==null&&i.clear()}t.clear(),t.freeze()},_e.prototype.canUndo=function(){return this.isComplete},_e.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.J(t);e!==null&&e.undo()}},_e.prototype.canRedo=function(){return this.isComplete},_e.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.J(e);i!==null&&i.redo()}},_e.prototype.Ms=function(){if(this.isComplete){var t=this.changes;t.ea();for(var e=new pt,i=0;i<t.count;i++){var n=t.J(i);if(n!==null&&n.change===qt&&n.object){var r=e.get(n.object);r||(r=new pt,e.set(n.object,r));var o=r.get(n.propertyName);o===null?r.set(n.propertyName,-1):(0<o&&t.Oc(o,null),r.set(n.propertyName,i))}}for(i=e=0;i<t.count;i++)n=t.J(i),n!==null&&(i>e&&t.Oc(e,n),e++);for(;t.length>e;)t.pop();t.freeze()}},Y.Object.defineProperties(_e.prototype,{changes:{get:function(){return this.o}},name:{get:function(){return this.na},set:function(t){this.na=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),_e.prototype.optimize=_e.prototype.Ms,_e.prototype.redo=_e.prototype.redo,_e.prototype.canRedo=_e.prototype.canRedo,_e.prototype.undo=_e.prototype.undo,_e.prototype.canUndo=_e.prototype.canUndo,_e.prototype.clear=_e.prototype.clear,_e.className="Transaction";function le(){this.Rt=new Q,this.vd=!1,this.D=new it().freeze(),this.se=-1,this.o=999,this.ue=!1,this.Qq=null,this.xi=0,this.j=!1,this.ze=new it().freeze(),this.ql=new it,this.Ft=!0,this.It=this.kr=this.Lt=this.Kt=!1}le.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.nestedTransactionNames.J(n);if(e+="]",t!==void 0&&0<t)for(i=this.history.count,n=0;n<i;n++)e+=`
 `+this.history.J(n).toString(t-1);return e},le.prototype.clear=function(){var t=this.history;t.ea();for(var e=t.count-1;0<=e;e--){var i=t.J(e);i!==null&&i.clear()}t.clear(),this.se=-1,t.freeze(),this.ue=!1,this.Qq=null,this.xi=0,this.ze.ea(),this.ze.clear(),this.ze.freeze(),this.ql.clear(),this.It=this.kr=this.Lt=this.Kt=!1},le.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},s=le.prototype,s.ux=function(t){this.Rt.add(t)},s.py=function(t){this.Rt.remove(t)},s.xa=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.isUndoingRedoing)return!1;this.Ft===!0&&(this.Ft=!1,this.xi++,this.isInternalTransaction||this.Db("StartingFirstTransaction",t,this.currentTransaction),0<this.xi&&this.xi--),this.isEnabled&&(this.ze.ea(),this.ze.add(t),this.ze.freeze(),this.currentTransaction===null?this.ql.add(0):this.ql.add(this.currentTransaction.changes.count)),this.xi++;var e=this.transactionLevel===1;return e&&(this.isInternalTransaction||this.Db("StartedTransaction",t,this.currentTransaction)),e},s.Xa=function(t){return t===void 0&&(t=""),Yw(this,!0,t)},s.Hf=function(){return Yw(this,!1,"")};function Yw(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&wt("Ending transaction without having started a transaction: "+i);var n=t.transactionLevel===1,r=t.currentTransaction;n&&e&&(t.isInternalTransaction||t.Db("CommittingTransaction",i,r));var o=0;if(0<t.transactionLevel&&(t.xi--,t.isEnabled)){var l=t.ze.count;0<l&&(i===""&&(i=t.ze.J(0)),t.ze.ea(),t.ze.eb(l-1),t.ze.freeze()),l=t.ql.count,0<l&&(o=t.ql.J(l-1),t.ql.eb(l-1))}if(n){if(e){if(t.kr=!1,r===null&&i!==""&&(r=t.currentTransaction),t.isEnabled&&r!==null){for(r.isComplete||(r.isComplete=!0,r.name=i),e=t.history,e.ea(),n=e.count-1;n>t.historyIndex;n--)o=e.J(n),o!==null&&o.clear(),e.eb(n),t.kr=!0;n=t.maxHistoryLength,0<=n&&(n===0?e.clear():e.count>=n&&(o=e.J(0),o!==null&&o.clear(),e.eb(0),t.se--)),n===0||e.count!==0&&e.get(e.count-1)===r||(e.add(r),t.se++),e.freeze()}t.isInternalTransaction||t.Db("CommittedTransaction",i,r)}else{t.ue=!0;try{t.isEnabled&&r!==null&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Db("RolledBackTransaction",i,r),t.ue=!1}r!==null&&r.clear()}return t.Qq=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&r!==null){for(t=o,i=r.changes,r=i.count-1;r>=t;r--)e=i.J(r),e!==null&&e.undo(),i.ea(),i.eb(r);i.freeze()}return!1}le.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!!(t!==null&&t.canUndo())},le.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.ue=!0,this.Db("StartingUndo","Undo",t),this.se--,t.undo()}catch(e){wt("undo error: "+e.toString())}finally{this.Db("FinishedUndo","Undo",t),this.ue=!1}}},le.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!!(t!==null&&t.canRedo())},le.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.ue=!0,this.Db("StartingRedo","Redo",t),this.se++,t.redo()}catch(e){wt("redo error: "+e.toString())}finally{this.Db("FinishedRedo","Redo",t),this.ue=!1}}},le.prototype.Db=function(t,e,i){i===void 0&&(i=null);var n=new te;for(n.change=bn,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)e=t.value,n.model=e,e.js(n)},le.prototype.Yu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;e===null&&(this.Qq=e=new _e);var i=t.copy();e=e.changes,e.ea(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ft&&(t=t.diagram,t!==null&&t.Oi===!1||wt("Change not within a transaction: "+i.toString()))}},le.prototype.skipsEvent=function(t){if(t===null||0>t.change.value)return!0;if(t=t.object,t===null)return!1;if(t.layer!==void 0){if(t=t.layer,t!==null&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},Y.Object.defineProperties(le.prototype,{models:{get:function(){return this.Rt.iterator}},isEnabled:{get:function(){return this.vd},set:function(t){this.vd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.J(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.J(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.ue}},history:{get:function(){return this.D}},maxHistoryLength:{get:function(){return this.o},set:function(t){this.o=t}},historyIndex:{get:function(){return this.se}},currentTransaction:{get:function(){return this.Qq}},transactionLevel:{get:function(){return this.xi}},isInTransaction:{get:function(){return 0<this.xi}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.ze}},isPendingClear:{get:function(){return this.Kt},set:function(t){this.Kt=t}},isPendingUnmodified:{get:function(){return this.Lt},set:function(t){this.Lt=t}},isInternalTransaction:{get:function(){return this.It},set:function(t){this.It=t}},isJustDiscarded:{get:function(){return this.kr}}}),le.prototype.handleChanged=le.prototype.Yu,le.prototype.redo=le.prototype.redo,le.prototype.undo=le.prototype.undo,le.prototype.canUndo=le.prototype.canUndo,le.prototype.rollbackTransaction=le.prototype.Hf,le.prototype.commitTransaction=le.prototype.Xa,le.prototype.startTransaction=le.prototype.xa,le.prototype.removeModel=le.prototype.py,le.prototype.addModel=le.prototype.ux,le.prototype.clear=le.prototype.clear,le.className="UndoManager";function jt(){je(this),this.C=ih,this.na="",this.vd=!0,this.Qb=!1,this.sk=null,this.Wy=new hn,this.fs=-1}jt.prototype.toString=function(){return this.name!==""?this.name+" Tool":Gi(this.constructor)},jt.prototype.updateAdornments=function(){},jt.prototype.canStart=function(){return this.isEnabled},jt.prototype.doStart=function(){},jt.prototype.doActivate=function(){this.isActive=!0},jt.prototype.doDeactivate=function(){this.isActive=!1},jt.prototype.doStop=function(){},jt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},jt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},jt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},jt.prototype.doMouseMove=function(){},jt.prototype.doMouseUp=function(){this.stopTool()},jt.prototype.doMouseWheel=function(){},jt.prototype.canStartMultiTouch=function(){return!0},jt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.Zp(0,N.allocAt(NaN,NaN)),n=e.Zp(1,N.allocAt(NaN,NaN));if(i.u()&&n.u()&&(this.doCancel(),t.am("hasGestureZoom"))){t.Xw=t.scale;var r=n.x-i.x,o=n.y-i.y;t.gx=Math.sqrt(r*r+o*o),e.bubbles=!1}N.free(i),N.free(n)},jt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.Zp(0,N.allocAt(NaN,NaN)),n=e.Zp(1,N.allocAt(NaN,NaN));if(i.u()&&n.u()&&(this.doCancel(),t.am("hasGestureZoom"))){var r=n.x-i.x,o=n.y-i.y;o=Math.sqrt(r*r+o*o)/t.gx,r=new N((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),o*=t.Xw;var l=t.commandHandler;if(o!==t.scale&&l.canResetZoom(o)){var h=t.zoomPoint;t.zoomPoint=r,l.resetZoom(o),t.zoomPoint=h}e.bubbles=!1}N.free(i),N.free(n)},jt.prototype.doKeyDown=function(){this.diagram.lastInput.key==="Esc"&&this.doCancel()},jt.prototype.doKeyUp=function(){},jt.prototype.xa=function(t){return t===void 0&&(t=this.name),this.transactionResult=null,this.diagram.xa(t)},jt.prototype.stopTransaction=function(){var t=this.diagram;return this.transactionResult===null?t.Hf():t.Xa(this.transactionResult)},jt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.Zl(e.documentPoint,!1);if(i!==null){if(zt?e.meta:e.control){for(t.S("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!e.isSelected),t.S("ChangedSelection",t.selection)}else if(e.shift){if(!i.isSelected){for(t.S("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!0),t.S("ChangedSelection",t.selection)}}else if(!i.isSelected){for(e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&t.select(e)}}else!e.left||(zt?e.meta:e.control)||e.shift||t.clearSelection()}},jt.prototype.standardMouseClick=function(t,e){t===void 0&&(t=null),e===void 0&&(e=function(r){return!r.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.Zb(n.documentPoint,t,e),n.targetObject=t,wT(t,n,i),n.handled};function wT(t,e,i){if(e.handled=!1,t===null||t.Ef()){var n=0;e.left?n=e.clickCount===1?1:e.clickCount===2?2:1:e.right&&e.clickCount===1&&(n=3);var r="ObjectSingleClicked";if(t!==null){switch(n){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}n!==0&&i.S(r,t)}else{switch(n){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}n!==0&&i.S(r)}if(t!==null)for(;t!==null;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(i!==null&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}t!==null&&t(e)}}}jt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(t.animationManager.tb!==!0){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.$(e.documentPoint)?t.Zb(e.documentPoint,null,null):null;e.targetObject=n;var r=!1;if(n!==t.Jk){var o=t.Jk,l=o;for(t.Jk=n,this.doCurrentObjectChanged(o,n),e.handled=!1;o!==null;){var h=o.mouseLeave;if(h!==null&&(n===o||n!==null&&n.rg(o)||(h(e,o,n),r=!0,e.handled)))break;o=o.panel}for(o=l,e.handled=!1;n!==null&&(l=n.mouseEnter,!(l!==null&&(o===n||o!==null&&o.rg(n)||(l(e,n,o),r=!0,e.handled))));)n=n.panel;n=t.Jk}if(n!==null){for(o=n,l="";o!==null&&(l=o.cursor,l==="");)o=o.panel;for(t.currentCursor=l,e.handled=!1,o=n;o!==null&&(n=o.mouseOver,!(n!==null&&(n(e,o),r=!0,e.handled)));)o=o.panel}else t.currentCursor="",n=t.mouseOver,n!==null&&(n(e),r=!0);r&&t.Fb(),t.skipsUndoManager=i}},jt.prototype.doCurrentObjectChanged=function(){},jt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(i!==0&&t.documentBounds.u()){var n=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(n!==null&&(r===Ra&&!e.shift||r===Hu&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===Ra&&e.shift||r===Hu&&!e.control){n=t.position.copy();var o=0<i?i:-i,l=e.event,h=l.deltaMode;if(r=l.deltaX,l=l.deltaY,(Qc||Nt)&&(h=1,0<r&&(r=3),0>r&&(r=-3),0<l&&(l=3),0>l&&(l=-3)),h===void 0||r===void 0||l===void 0||r===0&&l===0||e.shift)!e.shift&&t.allowVerticalScroll?(o=3*o*t.scrollVerticalLineChange,0<i?t.scroll("pixel","up",o):t.scroll("pixel","down",o)):e.shift&&t.allowHorizontalScroll&&(o=3*o*t.scrollHorizontalLineChange,0<i?t.scroll("pixel","left",o):t.scroll("pixel","right",o));else{switch(h){case 0:i="pixel";break;case 1:i="line";break;case 2:i="page";break;default:i="pixel"}r!==0&&t.allowHorizontalScroll&&(r*=t.scrollHorizontalLineChange/16,0<r?t.scroll(i,"left",-r):t.scroll(i,"right",r)),l!==0&&t.allowVerticalScroll&&(l*=t.scrollVerticalLineChange/16,0<l?t.scroll(i,"up",-l):t.scroll(i,"down",l))}t.position.A(n)||(e.bubbles=!1)}}},jt.prototype.standardWaitAfter=function(t,e){e===void 0&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.Wy);this.fs=F(function(){i.doWaitAfter(n)},t)},jt.prototype.cancelWaitAfter=function(){this.fs!==-1&&W.clearTimeout(this.fs),this.fs=-1},jt.prototype.doWaitAfter=function(){},jt.prototype.findToolHandleAt=function(t,e){return t=this.diagram.Zb(t,function(i){for(;i!==null&&!(i.panel instanceof Tt);)i=i.panel;return i}),t===null?null:t.part.category===e?t:null},jt.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;t===void 0&&(t=i.firstInput.viewPoint),e===void 0&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,r=n.width;return n=n.height,i.firstInput.isTouchEvent&&(r+=6,n+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>n},Y.Object.defineProperties(jt.prototype,{diagram:{get:function(){return this.C},set:function(t){t instanceof I&&(this.C=t)}},name:{get:function(){return this.na},set:function(t){this.na=t}},isEnabled:{get:function(){return this.vd},set:function(t){this.vd=t}},isActive:{get:function(){return this.Qb},set:function(t){this.Qb=t}},transactionResult:{get:function(){return this.sk},set:function(t){this.sk=t}}}),jt.prototype.startTransaction=jt.prototype.xa,jt.className="Tool";function ee(){jt.call(this),this.name="ToolManager",this.Gb=new it,this.Rb=new it,this.rc=new it,this.L=this.wa=850,this.o=new yt(2,2).ca(),this.Ma=5e3,this.Ba=Hu,this.D=Ww,this.Pq=this.j=null,this.Jj=-1}z(ee,jt),ee.prototype.initializeStandardTools=function(){},ee.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Tt&&this.Pq===t){var i=e.adornedObject;(t!==null?i.part===t:i===null)?this.showToolTip(e,i):this.hideToolTip()}},ee.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===np&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===qg){e.bubbles=!0;return}if(this.gestureBehavior===np)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.J(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===Hu?this.mouseWheelBehavior=Ra:this.mouseWheelBehavior===Ra&&(this.mouseWheelBehavior=Hu)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},ee.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===qg){e.bubbles=!0;return}if(this.gestureBehavior===np)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var r=this.mouseMoveTools.J(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove());return}}Xw(this,t),t=e.event,t===null||t.type!=="pointermove"&&t.cancelable||(e.bubbles=!0)};function Xw(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}ee.prototype.doCurrentObjectChanged=function(t,e){t=this.currentToolTip,t===null||e!==null&&t instanceof Tt&&(e===t||e.rg(t))||this.hideToolTip()},ee.prototype.doWaitAfter=function(t){var e=this.diagram;e.Ca&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&(t=t.copy(),t.button=2,t.buttons=2,e.lastInput=t,e.ju=!0,e.doMouseUp()))},ee.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;e.targetObject===null&&(e.targetObject=t.Zb(e.documentPoint,null,null));var i=e.targetObject;if(i!==null)for(e.handled=!1;i!==null&&(t=this.isActive?i.mouseHold:i.mouseHover,!(t!==null&&(t(e,i),e.handled)));)i=i.panel;else i=this.isActive?t.mouseHold:t.mouseHover,i!==null&&i(e)},ee.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(e.targetObject===null&&(e.targetObject=t.Zb(e.documentPoint,null,null)),e=e.targetObject,e!==null){if(t=this.currentToolTip,!(t instanceof Tt)||e!==t&&!e.rg(t)){for(;e!==null;){if(t=e.toolTip,t!==null){this.showToolTip(t,e);return}e=e.panel}this.hideToolTip()}}else e=t.toolTip,e!==null?this.showToolTip(e,null):this.hideToolTip()},ee.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Tt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Ta(),this.positionToolTip(t,e)}else t instanceof jo&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,this.Jj!==-1&&(W.clearTimeout(this.Jj),this.Jj=-1),t=this.toolTipDuration,0<t&&t!==1/0){var r=this;this.Jj=F(function(){r.hideToolTip()},t)}},ee.prototype.positionToolTip=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y=i.y+20/e.scale+n.height>r.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<r.y&&(i.y=r.y),t.position=i}},ee.prototype.hideToolTip=function(){this.Jj!==-1&&(W.clearTimeout(this.Jj),this.Jj=-1);var t=this.diagram,e=this.currentToolTip;e!==null&&(e instanceof Tt?(t.remove(e),this.Pq!==null&&this.Pq.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof jo&&e.hide!==null&&e.hide(t,this),this.currentToolTip=null)},ee.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.J(i);if(n.diagram=this.diagram,n.canStart()){t.doFocus(),t.currentTool=n,t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp());return}}t.doFocus(),this.doDeactivate()},ee.prototype.doMouseWheel=function(){this.standardMouseWheel()},ee.prototype.doKeyDown=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()},ee.prototype.doKeyUp=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()},ee.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.J(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if(n=this.mouseMoveTools.J(i),n.name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if(n=this.mouseUpTools.J(i),n.name===t)return n;return null},ee.prototype.replaceTool=function(t,e){e!==null&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.J(n);if(r.name===t)return e!==null?this.mouseDownTools.Oc(n,e):this.mouseDownTools.eb(n),r}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if(r=this.mouseMoveTools.J(n),r.name===t)return e!==null?this.mouseMoveTools.Oc(n,e):this.mouseMoveTools.eb(n),r;for(i=this.mouseUpTools.length,n=0;n<i;n++)if(r=this.mouseUpTools.J(n),r.name===t)return e!==null?this.mouseUpTools.Oc(n,e):this.mouseUpTools.eb(n),r;return null},ee.prototype.Za=function(t,e,i){e!==null&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):e!==null&&i.add(e)},Y.Object.defineProperties(ee.prototype,{mouseWheelBehavior:{get:function(){return this.Ba},set:function(t){this.Ba=t}},gestureBehavior:{get:function(){return this.D},set:function(t){this.D=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.Pq=t!==null&&t instanceof Tt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Gb}},mouseMoveTools:{get:function(){return this.Rb}},mouseUpTools:{get:function(){return this.rc}},hoverDelay:{get:function(){return this.wa},set:function(t){this.wa=t}},holdDelay:{get:function(){return this.L},set:function(t){this.L=t}},dragSize:{get:function(){return this.o},set:function(t){this.o=t.I()}},toolTipDuration:{get:function(){return this.Ma},set:function(t){this.Ma=t}}}),ee.prototype.replaceStandardTool=ee.prototype.Za;var Hu=new K(ee,"WheelScroll",0),Ra=new K(ee,"WheelZoom",1),ST=new K(ee,"WheelNone",2),Ww=new K(ee,"GestureZoom",3),np=new K(ee,"GestureCancel",4),qg=new K(ee,"GestureNone",5);ee.className="ToolManager",ee.WheelScroll=Hu,ee.WheelZoom=Ra,ee.WheelNone=ST,ee.GestureZoom=Ww,ee.GestureCancel=np,ee.GestureNone=qg;function ie(){jt.call(this),this.name="Dragging",this.D=this.Rb=!0,this.o=this.Ma=this.wa=this.cg=null,this.rn=this.rc=!1,this.Il=new N(NaN,NaN),this.Ur=new N,this.Gb=!0,this.Pk=100,this.Jg=[],this.ke=new Q().freeze(),this.Ba=new uh,this.co=null,this.L="copy",this.Nd="",this.Od="no-drop"}z(ie,jt),ie.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Pk)?!1:this.findDraggablePart()!==null},ie.prototype.findDraggablePart=function(){var t=this.diagram;if(t=t.Zl(t.firstInput.documentPoint,!1),t===null)return null;for(;t!==null&&!t.canSelect();)t=t.containingGroup;return t!==null&&(t.canMove()||t.canCopy())?t:null},ie.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.Zl(t.firstInput.documentPoint,!1);if(e!==null){for(;e!==null&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,this.currentPart===null||this.currentPart.isSelected||(t.S("ChangingSelection",t.selection),e=t.lastInput,(zt?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.S("ChangedSelection",t.selection))}}},ie.prototype.doActivate=function(){var t=this.diagram;this.co=null,this.currentPart===null&&this.standardMouseSelect();var e=this.currentPart;e!==null&&(e.canMove()||e.canCopy())&&(t.zu(!0),ze=null,this.isActive=!0,this.Il.set(t.position),bg(this,t.selection),this.Jg.length=0,t.animationManager.qc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.Vs=!0,t.Ie("temporaryPixelRatio")===!0&&30<t.xx&&Ya(t),gp(t,this.draggedParts),this.xa("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.rn=!1,ze=this,Ys=this.diagram,this.doSimulatedDragOut()))};function bg(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.bk()&&e.count===1&&e.first()instanceof H?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Oj(),t.cg=i.toolManager.findTool("Relinking"),t.cg===null&&(t.cg=new Cn,t.cg.diagram=i)):(t.draggedLink=null,t.cg=null))}}ie.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},ie.prototype.Ad=function(t){return t===void 0?new ds(Oo):this.isGridSnapEnabled?new ds(new N(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new ds(t.copy())},ie.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.zu(!1),t.tg(),tm(this),Ka(t,this.draggedParts),this.draggedParts=this.currentPart=this.co=null,this.rn=this.isDragOutStarted=!1,0<Dl.count){for(var e=Dl,i=e.length,n=0;n<i;n++){var r=e.J(n);Kw(r),fs(r),tm(r),r.diagram.tg()}e.clear()}Kw(this),this.Il.h(NaN,NaN),Ys!==null&&(Ys.currentCursor=""),ze=Ys=null,fs(this),t.isMouseCaptured=!1,t.currentCursor="",t.Vs=!1,this.stopTransaction(),dp(t,!0)},ie.prototype.stopTransaction=function(){var t=this.diagram,e=jt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Ms(),e};function tm(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,$w(t,e.lastInput,null),e.skipsUndoManager=i,t.Jg.length=0}function Hw(){var t=ze;fs(t),im(t);var e=t.diagram;t.Il.u()&&(e.position=t.Il),e.tg()}ie.prototype.doCancel=function(){fs(this),im(this);var t=this.diagram;this.Il.u()&&(t.position=this.Il),this.stopTool()},ie.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(e.key==="Esc"?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},ie.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()};function em(t,e){if(t.copiedParts===null){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&t.draggedParts!==null){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?n.currentTransaction!==null&&0<n.currentTransaction.changes.count&&(i.undoManager.Hf(),i.xa("Drag")):im(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.If():i.selection,e=i.Tj(e,i,!0),i=new pt,n=t.draggedParts.iterator;n.next();){var r=n.key;if(r.Mc()&&r.canCopy()){var o=e.H(r);o!==null&&(o.location=r.location,o.Ta(),i.add(o,t.Ad(o.location)))}}for(e=e.iterator;e.next();)n=e.value,n instanceof H&&n.canCopy()&&i.add(n,t.Ad());t.copiedParts=i,bg(t,i.If()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,Xo(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}function fs(t){var e=t.diagram;if(t.copiedParts!==null){if(e.Ps(t.copiedParts.If(),!1),t.copiedParts=null,t.draggedParts!==null)for(var i=t.draggedParts.iterator;i.next();)i.key instanceof H&&(i.value.point=new N(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Kw(t){if(t.draggedLink!==null){if(t.dragsLink&&t.cg!==null){var e=t.cg;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.cg=null}}function jl(t,e,i){var n=t.diagram,r=t.startPoint,o=N.alloc();o.assign(n.lastInput.documentPoint),t.moveParts(e,o.ie(r),i),N.free(o),n.Ie("temporaryPixelRatio")===!0&&n.si===null&&30<n.xx&&(Ya(n),n.nq())}ie.prototype.moveParts=function(t,e,i){i===void 0&&(i=!1);var n=this.diagram;n!==null&&Cm(n,t,e,this.dragOptions,i)};function im(t){if(t.draggedParts!==null){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Mc()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if(n=i.key,n instanceof H&&n.suspendsRouting){var r=i.value.point;t.draggedParts.add(n,t.Ad()),Xo(n,-r.x,-r.y)}e.gd()}}function nm(t,e){var i=t.diagram;t.dragsLink&&(t.draggedLink!==null&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Qw(t,!1));var n=t.findDragOverObject(e),r=i.lastInput;r.targetObject=n,t.doUpdateCursor(n,!1);var o=i.skipsUndoManager,l=!1;try{if(i.skipsUndoManager=!0,l=$w(t,r,n),!t.isActive&&ze===null)return;var h=n!==null?n.part:null;if(h===null||i.handlesDragDropForTopLevelParts&&h.isTopLevel&&!(h instanceof dt)){var a=i.mouseDragOver;a!==null&&(a(r),l=!0)}if(!t.isActive&&ze===null||(t.doDragOver(e,n),!t.isActive&&ze===null))return}finally{i.skipsUndoManager=o,l&&i.gd()}t.co=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.ms(r.viewPoint)}ie.prototype.findDragOverObject=function(t){var e=this;return vm(this.diagram,t,null,function(i){return i===null?i=!0:(i=i.part,i=!!(i===null||i instanceof Tt||i.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(i)||e.copiedParts&&e.copiedParts.contains(i))),!i})},ie.prototype.doUpdateCursor=function(t,e){var i=this.diagram;(e||this.co!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?i.currentCursor=this.copyCursor:this.mayMove()?i.currentCursor=this.moveCursor:this.mayDragOut()&&(i.currentCursor=this.nodropCursor))};function $w(t,e,i){var n=!1,r=t.Jg.length,o=0<r?t.Jg[0]:null;if(i===o)return!1;e.handled=!1;for(var l=0;l<r;l++){var h=t.Jg[l],a=h.mouseDragLeave;if(a!==null&&(a(e,h,i),n=!0,e.handled))break}if(t.Jg.length=0,!t.isActive&&ze===null||i===null)return n;for(e.handled=!1,r=i;r!==null;)t.Jg.push(r),r=Jw(r);for(r=t.Jg.length,i=0;i<r&&(l=t.Jg[i],h=l.mouseDragEnter,h===null||(h(e,l,o),n=!0,!e.handled));i++);return n}function Jw(t){var e=t.panel;return e!==null?e:t instanceof ut&&!(t instanceof dt)&&(t=t.containingGroup,t!==null&&t.handlesDragDropForMembers)?t:null}function Zw(t,e,i){var n=t.cg;if(n===null)return null;var r=t.diagram.pg(e,n.portGravity,function(c){return n.findValidLinkablePort(c,i)});t=N.alloc();var o=1/0,l=null;for(r=r.iterator;r.next();){var h=r.value;if(h.part!==null){var a=h.da(_t,t);a=e.xf(a),a<o&&(l=h,o=a)}}return N.free(t),l}function Qw(t,e){var i=t.draggedLink;if(i!==null&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var r=t.cg;if(r!==null){var o=null,l=null;i.fromNode===null&&(o=Zw(t,i.i(0),!1),o!==null&&(l=o.part));var h=null,a=null;i.toNode===null&&(h=Zw(t,i.i(i.pointsCount-1),!0),h!==null&&(a=h.part)),r.isValidLink(l,o,a,h)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=l,o!==null&&(i.fromPortId=o.portId),i.toNode=a,h!==null&&(i.toPortId=h.portId),i.fromPort!==n.ky&&n.S("LinkRelinked",i,n.ky),i.toPort!==n.ly&&n.S("LinkRelinked",i,n.ly)):rS(r,l,o,a,h):rS(r,null,null,null,null)}}}}ie.prototype.doDragOver=function(){};function qw(t,e){var i=t.diagram;t.dragsLink&&Qw(t,!0),tm(t);var n=t.findDragOverObject(e),r=i.lastInput;if(r.targetObject=n,n!==null){r.handled=!1;for(var o=n;o!==null;){var l=o.mouseDrop;if(l!==null&&(l(r,o),r.handled))break;MT(t,r,o),o=Jw(o)}}else o=i.mouseDrop,o!==null&&o(r);if(t.isActive||ze!==null){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)o=r.key,o instanceof q&&o.linksConnected.each(function(h){h.suspendsRouting=!1});if(t.doDropOnto(e,n),t.isActive||ze!==null){for(t=_.alloc(),e=i.selection.iterator;e.next();)n=e.value,n instanceof q&&kT(i,n,t);_.free(t)}}}function MT(t,e,i){t=t.diagram,i=i.part,!t.handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof dt||(i=t.mouseDrop,i!==null&&i(e))}function kT(t,e,i){var n=!1;if(e.getAvoidableRect(i),t.viewportBounds.Ge(i)&&(n=!0),t=t.Qu(i,function(r){return r.part},function(r){return r instanceof H},!0,function(r){return r instanceof H},n),t.count!==0)for(t=t.iterator;t.next();)i=t.value,!i.Jd(e)&&i.isAvoiding&&i.Va()}ie.prototype.doDropOnto=function(){},ie.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||this.currentPart===null||this.draggedParts===null||(this.mayCopy()?(em(this,!1),gp(t,this.copiedParts),jl(this,this.copiedParts,!1),Ka(t,this.copiedParts)):this.mayMove()?(fs(this),jl(this,this.draggedParts,!0)):this.mayDragOut()?(em(this,!1),jl(this,this.copiedParts,!1)):fs(this),nm(this,t.lastInput.documentPoint))}},ie.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&this.copiedParts!==null?(fs(this),em(this,!0),gp(t,this.copiedParts),jl(this,this.copiedParts,!1),Ka(t,this.copiedParts),this.copiedParts!==null&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0}))):(e=!0,fs(this),this.mayMove()&&(jl(this,this.draggedParts,!0),nm(this,t.lastInput.documentPoint))),this.rn=!0,qw(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.If():this.draggedParts.If();this.copiedParts=null,e&&PT(this),t.Qa(),Ka(t,this.draggedParts),this.transactionResult=i?"Copy":"Move",t.S(i?"SelectionCopied":"SelectionMoved",n)}this.stopTool(),i&&t.S("ChangedSelection",t.selection)}}},ie.prototype.simulatedMouseMove=function(t,e,i){if(ze===null)return!1;var n=ze.diagram;i instanceof I||(i=null);var r=Ys;return i!==r&&(r!==null&&r!==n&&(r.tg(),ze.isDragOutStarted=!1,r=r.toolManager.findTool("Dragging"),r!==null&&r.doSimulatedDragLeave()),Ys=i,i!==null&&i!==n&&(Hw(),r=i.toolManager.findTool("Dragging"),r!==null&&(Dl.contains(r)||Dl.add(r),r.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),i===null||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert?!1:(n=i.toolManager.findTool("Dragging"),n!==null&&(t!==null&&(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.vq(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),!0)},ie.prototype.simulatedMouseUp=function(t,e,i){if(ze===null)return!1;var n=Ys,r=ze.diagram;if(i===null)return ze.doCancel(),!0;if(i!==n){var o=n.toolManager.findTool("Dragging");if(n!==null&&n!==r&&o!==null)return n.tg(),ze.isDragOutStarted=!1,o.doSimulatedDragLeave(),!1;Ys=i,n=i.toolManager.findTool("Dragging"),n!==null&&(Hw(),Dl.contains(n)||Dl.add(n),n.doSimulatedDragEnter())}return i!==this.diagram?(t!==null?(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):e===null&&(e=new N),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.vq(e),i.lastInput.down=!1,i.lastInput.up=!0,t=i.toolManager.findTool("Dragging"),t!==null&&t.doSimulatedDrop(),t=ze,t!==null&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0):!1};function PT(t){if(t.draggedParts!==null)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof q&&(i=i.containingGroup,i===null||i.placeholder===null||t.draggedParts.contains(i)||i.placeholder.s())}}ie.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(zt?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},ie.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},ie.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())},ie.prototype.computeBorder=function(t,e,i){return this.rn||this.draggedParts===null||this.draggedParts.contains(t)?null:i.assign(e)},ie.prototype.Yz=function(){return ze},ie.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;var e=ze;return!(e===null||e.diagram.model.dataFormat!==t.model.dataFormat)},ie.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.qc(),cs(t),t.animationManager.qc(),t=ze,t!==null&&(t.diagram.Vs=!1),this.doUpdateCursor(null,!0)}},ie.prototype.doSimulatedDragLeave=function(){var t=ze;t!==null&&t.doSimulatedDragOut(),this.doCancel()},ie.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.Tm=!0;var e=ze;if(e!==null&&e.draggedParts!==null){if(!this.mayDragIn())return;bw(this,e.draggedParts.If(),!1,t.firstInput),jl(this,this.copiedParts,!1),nm(this,t.lastInput.documentPoint)}t.animationManager.Tm=!1},ie.prototype.doSimulatedDrop=function(){var t=this.diagram,e=ze;if(e!==null){var i=e.diagram;if(e.rn=!0,fs(this),!this.mayDragIn())return;t.animationManager.Tm=!0,t.S("ChangingSelection",t.selection),this.xa("Drop"),bw(this,e.draggedParts.If(),!0,t.lastInput),jl(this,this.copiedParts,!1),this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(n){n.isSelected=!0})),qw(this,t.lastInput.documentPoint),t.Qa(),e=t.selection,this.copiedParts!==null?this.transactionResult="ExternalCopy":e=new Q,this.copiedParts=null,t.doFocus(),t.S("ExternalObjectsDropped",e,i),this.stopTransaction(),t.S("ChangedSelection",t.selection)}t.animationManager.Tm=!1};function bw(t,e,i,n){if(t.copiedParts===null){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!i,r.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=r.Tj(e,r,!0);var o=_.alloc();r=n=1/0;for(var l=-1/0,h=-1/0,a=e.iterator;a.next();){var c=a.value;if(c.isVisible()){var p=c.location;c=p.x,p=p.y,isNaN(c)||isNaN(p)||(c<n&&(n=c),p<r&&(r=p),c>l&&(l=c),p>h&&(h=p))}}for(n===1/0?o.h(0,0,0,0):o.h(n,r,l-n,h-r),n=o.x+o.width/2,r=o.y+o.height/2,_.free(o),o=t.Ur,l=new pt,h=N.alloc(),a=e.iterator;a.next();)c=a.value,c instanceof H&&c.canCopy()&&(p=i.H(c),p!==null&&(p.points=c.points,Xo(p,o.x-n,o.y-r),p.suspendsRouting=!0,l.add(p,t.Ad())));for(e=e.iterator;e.next();)c=e.value,c.Mc()&&c.canCopy()&&(a=i.H(c),a!==null&&(c=c.location,h.h(o.x-(n-c.x),o.y-(r-c.y)),a.location=h,a.Ta(),l.add(a,t.Ad(h))));N.free(h),t.copiedParts=l,bg(t,l.If()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,Xo(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}ie.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Vs=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.co=null},ie.prototype.computeMove=function(t,e,i,n){return i=this.diagram,i!==null?i.computeMove(t,e,this.dragOptions,n):new N},Y.Object.defineProperties(ie.prototype,{isCopyEnabled:{get:function(){return this.Rb},set:function(t){this.Rb=t}},copiesEffectiveCollection:{get:function(){return this.D},set:function(t){this.D=t}},dragOptions:{get:function(){return this.Ba},set:function(t){this.Ba=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Gb},set:function(t){this.Gb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.A(t)||(t=t.I(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.L},set:function(t){this.L=t}},moveCursor:{get:function(){return this.Nd},set:function(t){this.Nd=t}},nodropCursor:{get:function(){return this.Od},set:function(t){this.Od=t}},currentPart:{get:function(){return this.wa},set:function(t){this.wa=t}},copiedParts:{get:function(){return this.o},set:function(t){this.o=t}},draggedParts:{get:function(){return this.Ma},set:function(t){this.Ma=t}},draggingParts:{get:function(){return this.copiedParts!==null?this.copiedParts.If():this.draggedParts!==null?this.draggedParts.If():this.ke}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.rc},set:function(t){this.rc=t}},startPoint:{get:function(){return this.Ur},set:function(t){this.Ur.A(t)||this.Ur.assign(t)}},delay:{get:function(){return this.Pk},set:function(t){this.Pk=t}}}),ie.prototype.getDraggingSource=ie.prototype.Yz;var Dl=null,ze=null,Ys=null;ie.className="DraggingTool",Dl=new it,Yi("draggingTool",function(){return this.findTool("Dragging")},function(t){this.Za("Dragging",t,this.mouseMoveTools)}),ee.prototype.doCancel=function(){ze!==null&&ze.doCancel(),jt.prototype.doCancel.call(this)};function qe(){jt.call(this),this.Od=100,this.Ba=!1,this.Th="pointer";var t=new H,e=new gt;e.isPanelMain=!0,e.stroke="blue",t.add(e),e=new gt,e.toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.$i=t,t=new q,e=new gt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=bc,t.add(e),t.selectable=!1,t.layerName="Tool",this.Zi=t,this.j=e,t=new q,e=new gt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=bc,t.add(e),t.selectable=!1,t.layerName="Tool",this.rk=t,this.o=e,this.Nd=this.rc=this.Gb=this.Ma=this.Rb=null,this.wa=!0,this.Im=new pt,this.ke=this.ii=this.Yi=null}z(qe,jt),qe.prototype.doStop=function(){this.diagram.tg(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},qe.prototype.copyPortProperties=function(t,e,i,n,r){if(t!==null&&e!==null&&i!==null&&n!==null){var o=e.Af(),l=yt.alloc();l.width=e.naturalBounds.width*o,l.height=e.naturalBounds.height*o,n.desiredSize=l,yt.free(l),r?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=_t,o=N.alloc(),i.location=e.da(_t,o),N.free(o),n.angle=e.Ki(),this.portTargeted!==null&&this.portTargeted(t,e,i,n,r)}},qe.prototype.setNoTargetPortProperties=function(t,e,i){e!==null&&(e.desiredSize=bc,e.fromSpot=Ze,e.toSpot=Ze),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,e,i)},qe.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},qe.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof q){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.ms(t.lastInput.viewPoint)}},qe.prototype.findValidLinkablePort=function(t,e){if(t===null)return null;var i=t.part;if(!(i instanceof q))return null;for(;t!==null;){var n=e?t.toLinkable:t.fromLinkable;if(n===!0&&(t.portId!==null||t instanceof q)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(n===!1)break;t=t.panel}return null},qe.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var r=this,o=e.pg(i,n,function(d){return r.findValidLinkablePort(d,t)},null,!0);for(n=1/0,e=null,o=o.iterator;o.next();){var l=o.value,h=l.part;if(h instanceof q){var a=l.da(_t,N.alloc()),c=i.x-a.x,p=i.y-a.y;N.free(a),a=c*c+p*p,a<n&&(c=this.validPortsCache.H(l),c!==null?c&&(e=l,n=a):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,h,l)||!t&&this.isValidLink(h,l,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(l,!0),e=l,n=a):this.validPortsCache.add(l,!1))}}return e!==null&&(i=e.part,i instanceof q&&(i.layer===null||i.layer.allowLink))?e:null},qe.prototype.isValidFrom=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.fromLinkable!==!0))return!1;var i=e.fromMaxLinks;if(1/0>i){if(this.originalLink!==null&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(e=e.portId,e===null&&(e=""),t.Vp(e).count>=i)return!1}return!0},qe.prototype.isValidTo=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.toLinkable!==!0))return!1;var i=e.toMaxLinks;if(1/0>i){if(this.originalLink!==null&&t===this.originalToNode&&e===this.originalToPort)return!0;if(e=e.portId,e===null&&(e=""),t.Gd(e).count>=i)return!1}return!0},qe.prototype.isInSameNode=function(t,e){return t===null||e===null?!1:t===e?!0:(t=t.part,e=e.part,t!==null&&t===e)},qe.prototype.isLinked=function(t,e){if(t===null||e===null)return!1;var i=t.part;if(!(i instanceof q))return!1;t=t.portId,t===null&&(t="");var n=e.part;if(!(n instanceof q))return!1;for(e=e.portId,e===null&&(e=""),e=n.Gd(e);e.next();)if(n=e.value,n.fromNode===i&&n.fromPortId===t)return!0;return!1},qe.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(e===null||n===null||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||i!==null&&this.isLabelDependentOnLink(i,this.originalLink))||t!==null&&i!==null&&(t.data===null&&i.data!==null||t.data!==null&&i.data===null)||!this.isValidCycle(t,i,this.originalLink))return!1;if(t!==null){var r=t.linkValidation;if(r!==null&&!r(t,e,i,n,this.originalLink))return!1}return i!==null&&(r=i.linkValidation,r!==null&&!r(t,e,i,n,this.originalLink))?!1:(r=this.linkValidation,r!==null?r(t,e,i,n,this.originalLink):!0)},qe.prototype.isLabelDependentOnLink=function(t,e){if(t===null)return!1;var i=t.labeledLink;if(i===null)return!1;if(i===e)return!0;var n=new Q;return n.add(t),rm(this,i,e,n)};function rm(t,e,i,n){if(e===i)return!0;var r=e.fromNode;return r!==null&&r.isLinkLabel&&(n.add(r),rm(t,r.labeledLink,i,n))?!0:(e=e.toNode,!!(e!==null&&e.isLinkLabel&&(n.add(e),rm(t,e.labeledLink,i,n))))}qe.prototype.isValidCycle=function(t,e,i){if(i===void 0&&(i=null),t===null||e===null)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==Bm){if(n===$S){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var r=n.value;if(r!==i&&r.isTreeLink&&r.toNode===e)return!1}return!Ba(this,t,e,i,!0)}if(n===JS){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if(r=n.value,r!==i&&r.isTreeLink&&r.fromNode===t)return!1;return!Ba(this,t,e,i,!0)}if(n===WS)return t===e?t=!0:(n=new Q,n.add(e),t=tS(this,n,t,e,i)),!t;if(n===HS)return!Ba(this,t,e,i,!1);if(n===KS)return t===e?t=!0:(n=new Q,n.add(e),t=eS(this,n,t,e,i)),!t}return!0};function Ba(t,e,i,n,r){if(e===i)return!0;if(e===null||i===null)return!1;for(var o=e.linksConnected;o.next();){var l=o.value;if(l!==n&&(!r||l.isTreeLink)&&l.toNode===e&&(l=l.fromNode,l!==e&&Ba(t,l,i,n,r)))return!0}return!1}function tS(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var l=o.value;if(l!==r&&l.toNode===i&&(l=l.fromNode,l!==i&&tS(t,e,l,n,r)))return!0}return!1}function eS(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var l=o.value;if(l!==r){var h=l.fromNode;if(l=l.toNode,h=h===i?l:h,h!==i&&eS(t,e,h,n,r))return!0}}return!1}Y.Object.defineProperties(qe.prototype,{portGravity:{get:function(){return this.Od},set:function(t){0<=t&&(this.Od=t)}},isUnconnectedLinkValid:{get:function(){return this.Ba},set:function(t){this.Ba=t}},linkingCursor:{get:function(){return this.Th},set:function(t){this.Th=t}},temporaryLink:{get:function(){return this.$i},set:function(t){this.$i=t}},temporaryFromNode:{get:function(){return this.Zi},set:function(t){(this.Zi=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(this.j!==null){var e=this.j.panel;if(e!==null){var i=e.T.indexOf(this.j);e.eb(i),e.wb(i,t)}}this.j=t}},temporaryToNode:{get:function(){return this.rk},set:function(t){(this.rk=t)&&(this.o=t.port)}},temporaryToPort:{get:function(){return this.o},set:function(t){if(this.o!==null){var e=this.o.panel;if(e!==null){var i=e.T.indexOf(this.o);e.eb(i),e.wb(i,t)}}this.o=t}},originalLink:{get:function(){return this.Rb},set:function(t){this.Rb=t}},originalFromNode:{get:function(){return this.Ma},set:function(t){this.Ma=t}},originalFromPort:{get:function(){return this.Gb},set:function(t){this.Gb=t}},originalToNode:{get:function(){return this.rc},set:function(t){this.rc=t}},originalToPort:{get:function(){return this.Nd},set:function(t){this.Nd=t}},isForwards:{get:function(){return this.wa},set:function(t){this.wa=t}},validPortsCache:{get:function(){return this.Im}},targetPort:{get:function(){return this.Yi},set:function(t){this.Yi=t}},linkValidation:{get:function(){return this.ii},set:function(t){this.ii=t}},portTargeted:{get:function(){return this.ke},set:function(t){this.ke=t}}}),qe.className="LinkingBaseTool";function Di(){qe.call(this),this.name="Linking",this.L={},this.D=null,this.K=rp,this.Bc=null}z(Di,qe),Di.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Cs()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null},Di.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(e===null&&(e=t.Zb(t.firstInput.documentPoint,null,null)),e===null||(t=e.part,!(t instanceof q)))return null;var i=this.direction;if(i===rp||i===iS){var n=this.findValidLinkablePort(e,!1);if(n!==null||this.startObject===t&&(n=t.port,this.findValidLinkablePort(n,!1)))return this.isForwards=!0,n}return(i===rp||i===nS)&&(e=this.findValidLinkablePort(e,!0),e!==null||this.startObject===t&&(e=t.port,this.findValidLinkablePort(e,!0)))?(this.isForwards=!1,e):null},Di.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();e===null?this.stopTool():(this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(this.temporaryToNode===null||this.temporaryToNode.location.u()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,e=this.originalFromPort.part,e instanceof q&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(this.temporaryFromNode===null||this.temporaryFromNode.location.u()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,e=this.originalToPort.part,e instanceof q&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Va(),t.add(this.temporaryLink)),this.isActive=!0)},Di.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Di.prototype.doStop=function(){qe.prototype.doStop.call(this),this.startObject=null},Di.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,i=null,n=null,r=null,o=null;try{var l=this.targetPort=this.findTargetPort(this.isForwards);if(l!==null){var h=l.part;h instanceof q&&(this.isForwards?(this.originalFromNode!==null&&(e=this.originalFromNode,i=this.originalFromPort),n=h,r=l):(e=h,i=l,this.originalToNode!==null&&(n=this.originalToNode,r=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(n=this.originalToNode,r=this.originalToPort);e!==null||n!==null?(o=this.insertLink(e,i,n,r),o!==null?(l===null&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),o.isSelected=!0),this.transactionResult=this.name,t.S("LinkDrawn",o)):this.doNoLink(e,i,n,r)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),o&&t.allowSelect&&t.S("ChangedSelection",t.selection)}}},Di.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof H)return t.isTreeLink;var e=this.diagram;return e===null?!0:(t=e.partManager.getLinkCategoryForData(t),e=e.partManager.findLinkTemplateForCategory(t),e!==null?e.isTreeLink:!0)},Di.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},Di.prototype.doNoLink=function(){},Y.Object.defineProperties(Di.prototype,{archetypeLinkData:{get:function(){return this.L},set:function(t){this.L=t}},archetypeLabelNodeData:{get:function(){return this.D},set:function(t){this.D=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Bc},set:function(t){this.Bc=t}}});var rp=new K(Di,"Either",0),iS=new K(Di,"ForwardsOnly",0),nS=new K(Di,"BackwardsOnly",0);Di.className="LinkingTool",Di.Either=rp,Di.ForwardsOnly=iS,Di.BackwardsOnly=nS;function Cn(){qe.call(this),this.name="Relinking";var t=new gt;t.figure="Diamond",t.desiredSize=El,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.L=t,t=new gt,t.figure="Diamond",t.desiredSize=El,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Bc=t,this.D=null,this.$w=new _}z(Cn,qe),Cn.prototype.updateAdornments=function(t){if(t!==null&&t instanceof H){var e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;n!==null&&t.canRelinkFrom()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.Ff()&&(i=t.Wj(e),i===null&&(i=this.makeAdornment(n,!1),t.xh(e,i)))}i===null&&t.Gf(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly&&(n=t.selectionObject,n!==null&&t.canRelinkTo()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.Ff()&&(i=t.Wj(e),i===null?(i=this.makeAdornment(n,!0),t.xh(e,i)):i.s())),i===null&&t.Gf(e)}},Cn.prototype.makeAdornment=function(t,e){var i=new Tt;return i.type=X.Link,e=e?this.toHandleArchetype:this.fromHandleArchetype,e!==null&&i.add(e.copy()),i.adornedObject=t,i},Cn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Cs()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),e!==null},Cn.prototype.doActivate=function(){var t=this.diagram;if(this.originalLink===null){var e=this.handle;if(e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),e===null)return;var i=e.part;if(!(i instanceof Tt&&i.adornedPart instanceof H))return;this.handle=e,this.isForwards=i===null||i.category==="RelinkTo",this.originalLink=i.adornedPart}this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.$w.set(this.originalLink.actualBounds),this.originalLink!==null&&0<this.originalLink.pointsCount&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=Vu),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.i(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=Vu),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Va(),t.add(this.temporaryLink)),this.isActive=!0},Cn.prototype.copyLinkProperties=function(t,e){if(t!==null&&e!==null){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;(i===Ch||i===Wo)&&(i=Ti),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},Cn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Cn.prototype.doStop=function(){qe.prototype.doStop.call(this),this.handle=null},Cn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,r=this.originalToPort,o=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){var l=this.targetPort.part;l instanceof q&&(this.isForwards?(n=l,r=this.targetPort):(e=l,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=n=null:i=e=null:o=null;o!==null?(this.reconnectLink(o,this.isForwards?n:e,this.isForwards?r:i,this.isForwards),this.targetPort===null&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint,o.Va()),this.transactionResult=this.name,t.S("LinkRelinked",o,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.eq(this.$w)}finally{this.stopTool()}}},Cn.prototype.reconnectLink=function(t,e,i,n){return i=i!==null&&i.portId!==null?i.portId:"",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},Cn.prototype.doNoRelink=function(){};function rS(t,e,i,n,r){e!==null?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),n!==null?(t.copyPortProperties(n,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}Y.Object.defineProperties(Cn.prototype,{fromHandleArchetype:{get:function(){return this.L},set:function(t){this.L=t}},toHandleArchetype:{get:function(){return this.Bc},set:function(t){this.Bc=t}},handle:{get:function(){return this.D},set:function(t){if(t!==null&&!(t.part instanceof Tt))throw Error("new handle is not in an Adornment: "+t);this.D=t}}}),Cn.className="RelinkingTool",Yi("linkingTool",function(){return this.findTool("Linking")},function(t){this.Za("Linking",t,this.mouseMoveTools)}),Yi("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.Za("Relinking",t,this.mouseDownTools)});function xe(){jt.call(this),this.name="LinkReshaping";var t=new gt;t.figure="Rectangle",t.desiredSize=Ag,t.fill="lightblue",t.stroke="dodgerblue",this.o=t,t=new gt,t.figure="Diamond",t.desiredSize=El,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.D=t,this.L=3,this.ot=this.j=null,this.ax=new N,this.Fr=new it}z(xe,jt),xe.prototype.Vu=function(t){return t&&t.Jr&&t.Jr.value!==0?t.Jr:om},xe.prototype.ym=function(t,e){t.Jr=e},xe.prototype.updateAdornments=function(t){if(t!==null&&t instanceof H){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;i!==null&&t.canReshape()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.Ff()&&(e=t.Wj(this.name),e===null||e.Ww!==t.pointsCount||e.qx!==t.resegmentable)&&(e=this.makeAdornment(i),e!==null&&(e.Ww=t.pointsCount,e.qx=t.resegmentable,t.xh(this.name,e)))}e===null&&t.Gf(this.name)}},xe.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,r=null;if(e.points!==null&&1<i){r=new Tt,r.type=X.Link,i=e.firstPickIndex;var o=e.lastPickIndex,l=n?1:0;if(e.resegmentable&&e.computeCurve()!==tn)for(var h=i+l;h<o-l;h++){var a=this.makeResegmentHandle(t,h);a!==null&&(a.segmentIndex=h,a.segmentFraction=.5,a.fromMaxLinks=999,r.add(a))}for(l=i+1;l<o;l++)if(h=this.makeHandle(t,l),h!==null){if(h.segmentIndex=l,l!==i)if(l===i+1&&n){a=e.i(i);var c=e.i(i+1);j.w(a.x,c.x)&&j.w(a.y,c.y)&&(c=e.i(i-1)),j.w(a.x,c.x)?(this.ym(h,Ju),h.cursor="n-resize"):j.w(a.y,c.y)&&(this.ym(h,$u),h.cursor="w-resize")}else l===o-1&&n?(a=e.i(o-1),c=e.i(o),j.w(a.x,c.x)&&j.w(a.y,c.y)&&(a=e.i(o+1)),j.w(a.x,c.x)?(this.ym(h,Ju),h.cursor="n-resize"):j.w(a.y,c.y)&&(this.ym(h,$u),h.cursor="w-resize")):l!==o&&(this.ym(h,sm),h.cursor="move");r.add(h)}r.adornedObject=t}return r},xe.prototype.makeHandle=function(){var t=this.handleArchetype;return t===null?null:t.copy()},xe.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return t===null?null:t.copy()},xe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowReshape&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},xe.prototype.doActivate=function(){var t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null){var e=this.handle.part.adornedPart;if(e instanceof H){if(this.ot=e,t.isMouseCaptured=!0,this.xa(this.name),e.resegmentable&&this.handle.fromMaxLinks===999){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.wb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.wb(this.handle.segmentIndex+1,n),e.points=i,e.Lb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.ax=e.i(this.handle.segmentIndex),this.Fr=e.points.copy(),this.isActive=!0}}},xe.prototype.doDeactivate=function(){this.stopTransaction(),this.ot=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},xe.prototype.doCancel=function(){var t=this.adornedLink;t!==null&&(t.points=this.Fr),this.stopTool()},xe.prototype.getResegmentingPoint=function(){return this.handle.da(_t)},xe.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},xe.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),e=this.adornedLink,e!==null&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),r=e.i(i),o=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var l=e.i(i-2);if(Math.abs(n.x-r.x)<this.resegmentingDistance&&Math.abs(n.y-r.y)<this.resegmentingDistance&&(Ku(this,l,n,r,o,!0)||Ku(this,l,n,r,o,!1))){var h=e.points.copy();Ku(this,l,n,r,o,!0)?(h.Oc(i-2,new N(l.x,(o.y+l.y)/2)),h.Oc(i+1,new N(o.x,(o.y+l.y)/2))):(h.Oc(i-2,new N((o.x+l.x)/2,l.y)),h.Oc(i+1,new N((o.x+l.x)/2,o.y))),h.eb(i),h.eb(i-1),e.points=h,e.Lb()}else l=e.i(i+2),Math.abs(r.x-o.x)<this.resegmentingDistance&&Math.abs(r.y-o.y)<this.resegmentingDistance&&(Ku(this,n,r,o,l,!0)||Ku(this,n,r,o,l,!1))&&(h=e.points.copy(),Ku(this,n,r,o,l,!0)?(h.Oc(i-1,new N(n.x,(n.y+l.y)/2)),h.Oc(i+2,new N(l.x,(n.y+l.y)/2))):(h.Oc(i-1,new N((n.x+l.x)/2,n.y)),h.Oc(i+2,new N((n.x+l.x)/2,l.y))),h.eb(i+1),h.eb(i),e.points=h,e.Lb())}}else l=N.alloc(),j.Ih(n.x,n.y,o.x,o.y,r.x,r.y,l)&&l.xf(r)<this.resegmentingDistance*this.resegmentingDistance&&(n=e.points.copy(),n.eb(i),e.points=n,e.Lb()),N.free(l)}t.Qa(),this.transactionResult=this.name,t.S("LinkReshaped",this.adornedLink,this.Fr)}this.stopTool()};function Ku(t,e,i,n,r,o){return o?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-r.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-r.x)<t.resegmentingDistance}xe.prototype.reshape=function(t){var e=this.adornedLink;e.Lh();var i=this.handle.segmentIndex,n=this.Vu(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===Ju?(e.M(i,e.i(i-1).x,t.y),e.M(i+1,e.i(i+2).x,t.y)):n===$u&&(e.M(i,t.x,e.i(i-1).y),e.M(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===Ju?(e.M(i-1,e.i(i-2).x,t.y),e.M(i,e.i(i+1).x,t.y)):n===$u&&(e.M(i-1,t.x,e.i(i-2).y),e.M(i,t.x,e.i(i+1).y));else{n=i;var r=e.i(n),o=e.i(n-1),l=e.i(n+1);j.w(o.x,r.x)&&j.w(r.y,l.y)?(j.w(o.x,e.i(n-2).x)&&!j.w(o.y,e.i(n-2).y)?(e.l(n,t.x,o.y),i++,n++):e.M(n-1,t.x,o.y),j.w(l.y,e.i(n+2).y)&&!j.w(l.x,e.i(n+2).x)?e.l(n+1,l.x,t.y):e.M(n+1,l.x,t.y)):j.w(o.y,r.y)&&j.w(r.x,l.x)?(j.w(o.y,e.i(n-2).y)&&!j.w(o.x,e.i(n-2).x)?(e.l(n,o.x,t.y),i++,n++):e.M(n-1,o.x,t.y),j.w(l.x,e.i(n+2).x)&&!j.w(l.y,e.i(n+2).y)?e.l(n+1,t.x,l.y):e.M(n+1,t.x,l.y)):j.w(o.x,r.x)&&j.w(r.x,l.x)?(j.w(o.x,e.i(n-2).x)&&!j.w(o.y,e.i(n-2).y)?(e.l(n,t.x,o.y),i++,n++):e.M(n-1,t.x,o.y),j.w(l.x,e.i(n+2).x)&&!j.w(l.y,e.i(n+2).y)?e.l(n+1,t.x,l.y):e.M(n+1,t.x,l.y)):j.w(o.y,r.y)&&j.w(r.y,l.y)&&(j.w(o.y,e.i(n-2).y)&&!j.w(o.x,e.i(n-2).x)?(e.l(n,o.x,t.y),i++,n++):e.M(n-1,o.x,t.y),j.w(l.y,e.i(n+2).y)&&!j.w(l.x,e.i(n+2).x)?e.l(n+1,l.x,t.y):e.M(n+1,l.x,t.y)),e.M(i,t.x,t.y)}else e.M(i,t.x,t.y),n=e.fromNode,r=e.fromPort,n!==null&&(o=n.findVisibleNode(),o!==null&&o!==n&&(n=o,r=n.port)),i===1&&e.computeSpot(!0,r).zc()&&(o=r.da(_t,N.alloc()),n=e.getLinkPointFromPoint(n,r,o,t,!0,N.alloc()),e.M(0,n.x,n.y),N.free(o),N.free(n)),n=e.toNode,r=e.toPort,n!==null&&(o=n.findVisibleNode(),o!==null&&o!==n&&(n=o,r=n.port)),i===e.pointsCount-2&&e.computeSpot(!1,r).zc()&&(i=r.da(_t,N.alloc()),t=e.getLinkPointFromPoint(n,r,i,t,!1,N.alloc()),e.M(e.pointsCount-1,t.x,t.y),N.free(i),N.free(t));e.vf()},xe.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Vu(this.handle)){case sm:return t;case Ju:return new N(e.i(i).x,t.y);case $u:return new N(t.x,e.i(i).y);default:case om:return e.i(i)}},Y.Object.defineProperties(xe.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},midHandleArchetype:{get:function(){return this.D},set:function(t){this.D=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Tt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.ot}},resegmentingDistance:{get:function(){return this.L},set:function(t){this.L=t}},originalPoint:{get:function(){return this.ax}},originalPoints:{get:function(){return this.Fr}}}),xe.prototype.setReshapingBehavior=xe.prototype.ym,xe.prototype.getReshapingBehavior=xe.prototype.Vu;var om=new K(xe,"None",0),$u=new K(xe,"Horizontal",1),Ju=new K(xe,"Vertical",2),sm=new K(xe,"All",3);xe.className="LinkReshapingTool",xe.None=om,xe.Horizontal=$u,xe.Vertical=Ju,xe.All=sm,Yi("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.Za("LinkReshaping",t,this.mouseDownTools)});function Ci(){jt.call(this),this.name="Resizing",this.Zf=new yt(1,1).freeze(),this.Yf=new yt(9999,9999).freeze(),this.yg=new yt(NaN,NaN).freeze(),this.D=!1,this.L=!0,this.le=null;var t=new gt;t.alignmentFocus=_t,t.figure="Rectangle",t.desiredSize=Ag,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.Er=new N,this.Zw=new yt,this.Io=new N,this.Dt=new yt(0,0),this.Ct=new yt(1/0,1/0),this.Bt=new yt(1,1)}z(Ci,jt),Ci.prototype.updateAdornments=function(t){if(!(t===null||t instanceof H)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.Wj(this.name);if(e!==null&&t.canResize()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff()&&((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null)){e=e.Ki(),gs(t)&&this.updateResizeHandles(i,e),t.xh(this.name,i);return}}t.Gf(this.name)}},Ci.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(e===null){e=new Tt,e.type=X.Spot,e.locationSpot=_t;var i=new mi;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,di)),e.add(this.makeHandle(t,Uu)),e.add(this.makeHandle(t,Er)),e.add(this.makeHandle(t,zu)),e.add(this.makeHandle(t,Mn)),e.add(this.makeHandle(t,Xi)),e.add(this.makeHandle(t,Pn)),e.add(this.makeHandle(t,kn))}else if(Ln(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},Ci.prototype.makeHandle=function(t,e){return t=this.handleArchetype,t===null?null:(t=t.copy(),t.alignment=e,t)},Ci.prototype.updateResizeHandles=function(t,e){if(t!==null){if(!t.alignment.Mb()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;if(i.zc()&&(i=_t),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else if(1<=i.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof X)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)}},Ci.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowResize&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},Ci.prototype.doActivate=function(){var t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.qc(),this.xa(this.name),this.Er.set(this.adornedObject.da(this.handle.alignment.pv())),this.Io.set(this.adornedObject.part.location),this.Zw.set(this.adornedObject.desiredSize),this.Bt=this.computeCellSize(),this.Dt=this.computeMinSize(),this.Ct=this.computeMaxSize(),this.isActive=!0))},Ci.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.le=this.handle=null,this.isActive=t.isMouseCaptured=!1},Ci.prototype.doCancel=function(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},Ci.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Dt,i=this.Ct,n=this.Bt,r=this.adornedObject.us(t.lastInput.documentPoint,N.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),t.gd(),N.free(r)}},Ci.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Dt,i=this.Ct,n=this.Bt,r=this.adornedObject.us(t.lastInput.documentPoint,N.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),N.free(r),t.Qa(),this.transactionResult=this.name,t.S("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},Ci.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(i!==null){if(i.desiredSize=t.size,t=i.part,t.Ta(),i=i.da(this.handle.alignment.pv()),t instanceof dt){var n=new it;if(n.add(t),!this.dragsMembers&&t.placeholder===null){var r=new uh;r.dragsMembers=!1}e.moveParts(n,this.oppositePoint.copy().ie(i),!0,r)}else t.location=t.location.copy().ie(i).add(this.oppositePoint);e.gd()}},Ci.prototype.computeResize=function(t,e,i,n,r,o){e.zc()&&(e=_t);var l=this.adornedObject.naturalBounds,h=l.x,a=l.y,c=l.x+l.width,p=l.y+l.height,d=1;if(!o){d=l.width;var m=l.height;0>=d&&(d=1),0>=m&&(m=1),d=m/d}return m=N.alloc(),j.Wp(t.x,t.y,h,a,r.width,r.height,m),t=l.copy(),0>=e.x?0>=e.y?(t.x=Math.max(m.x,c-n.width),t.x=Math.min(t.x,c-i.width),t.width=Math.max(c-t.x,i.width),t.y=Math.max(m.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=Math.max(p-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=c-t.width,t.y=p-t.height)):1<=e.y?(t.x=Math.max(m.x,c-n.width),t.x=Math.min(t.x,c-i.width),t.width=Math.max(c-t.x,i.width),t.height=Math.max(Math.min(m.y-a,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=c-t.width)):(t.x=Math.max(m.x,c-n.width),t.x=Math.min(t.x,c-i.width),t.width=c-t.x,o||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=a+.5*(p-a-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(m.x-h,n.width),i.width),t.y=Math.max(m.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=Math.max(p-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.y=p-t.height)):1<=e.y?(t.width=Math.max(Math.min(m.x-h,n.width),i.width),t.height=Math.max(Math.min(m.y-a,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width))):(t.width=Math.max(Math.min(m.x-h,n.width),i.width),o||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=a+.5*(p-a-t.height))):0>=e.y?(t.y=Math.max(m.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=p-t.y,o||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=h+.5*(c-h-t.width))):1<=e.y&&(t.height=Math.max(Math.min(m.y-a,n.height),i.height),o||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=h+.5*(c-h-t.width))),N.free(m),t},Ci.prototype.computeReshape=function(){var t=ce;return this.adornedObject instanceof gt&&(t=f0(this.adornedObject)),!(t===xr||this.diagram.lastInput.shift)},Ci.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},Ci.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},Ci.prototype.computeCellSize=function(){var t=new yt(NaN,NaN),e=this.adornedObject.part;return e!==null&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(e=e.grid,e!==null&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},Y.Object.defineProperties(Ci.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Tt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.le},set:function(t){if(t!==null&&t.part instanceof Tt)throw Error("new handle must not be in an Adornment: "+t);this.le=t}},minSize:{get:function(){return this.Zf},set:function(t){if(!this.Zf.A(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.Zf.h(e,t)}}},maxSize:{get:function(){return this.Yf},set:function(t){if(!this.Yf.A(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Yf.h(e,t)}}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.A(t)||this.yg.assign(t)}},isGridSnapEnabled:{get:function(){return this.D},set:function(t){this.D=t}},dragsMembers:{get:function(){return this.L},set:function(t){this.L=t}},oppositePoint:{get:function(){return this.Er},set:function(t){this.Er.A(t)||this.Er.assign(t)}},originalDesiredSize:{get:function(){return this.Zw}},originalLocation:{get:function(){return this.Io}}}),Ci.className="ResizingTool",Yi("resizingTool",function(){return this.findTool("Resizing")},function(t){this.Za("Resizing",t,this.mouseDownTools)});function an(){jt.call(this),this.name="Rotating",this.Ba=45,this.wa=2,this.Io=new N,this.le=null;var t=new gt;t.figure="Ellipse",t.desiredSize=El,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.Yw=0,this.Kr=new N(NaN,NaN),this.D=0,this.L=50}z(an,jt),an.prototype.updateAdornments=function(t){if(t!==null){if(t.Hh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(e=t.rotateObject,e!==null&&t.canRotate()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff())){var i=t.Wj(this.name);if((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null){i.angle=e.Ki(),i.placeholder===null&&(i.location=this.computeAdornmentLocation(e)),t.xh(this.name,i);return}}t.Gf(this.name)}},an.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(e===null){e=new Tt,e.type=X.Position,e.locationSpot=_t;var i=this.handleArchetype;i!==null&&e.add(i.copy())}else if(Ln(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},an.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowRotate&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},an.prototype.doActivate=function(){var t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.xa(this.name),this.Yw=this.adornedObject.angle,this.Kr=this.computeRotationPoint(this.adornedObject),this.Io=this.adornedObject.part.location.copy(),this.isActive=!0)},an.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.hb()?t.da(e.rotationSpot):t===e||t===i?i.da(e.locationSpot):t.da(_t)},an.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.u()||(e=this.computeRotationPoint(t)),e=t.us(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return i===0?e.x=t.naturalBounds.width+n:i===45?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):i===90?e.y=t.naturalBounds.height+n:i===135?(e.x=-n,e.y=t.naturalBounds.height+n):i===180?e.x=-n:i===225?(e.x=-n,e.y=-n):i===270?e.y=-n:i===315&&(e.x=t.naturalBounds.width+n,e.y=-n),t.da(e)},an.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.le=this.handle=null,this.Kr=new N(NaN,NaN),this.isActive=t.isMouseCaptured=!1},an.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},an.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},an.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Qa(),this.transactionResult=this.name,t.S("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},an.prototype.rotate=function(t){var e=this.adornedObject;if(e!==null){e.angle=t,e=e.part,e.Ta();var i=e.locationObject,n=e.rotateObject;(i===n||i.rg(n))&&(i=this.Io.copy(),e.location=i.ie(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.gd()}},an.prototype.computeRotate=function(t){t=this.rotationPoint.Pa(t)-this.handleAngle;var e=this.adornedObject.panel;e!==null&&(t-=e.Ki()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},Y.Object.defineProperties(an.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Tt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.le},set:function(t){if(t!==null&&t.part instanceof Tt)throw Error("new handle must not be in an Adornment: "+t);this.le=t}},snapAngleMultiple:{get:function(){return this.Ba},set:function(t){this.Ba=t}},snapAngleEpsilon:{get:function(){return this.wa},set:function(t){this.wa=t}},originalAngle:{get:function(){return this.Yw}},rotationPoint:{get:function(){return this.Kr},set:function(t){this.Kr=t.copy()}},handleAngle:{get:function(){return this.D},set:function(t){this.D=t}},handleDistance:{get:function(){return this.L},set:function(t){this.L=t}}}),an.className="RotatingTool",Yi("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.Za("Rotating",t,this.mouseDownTools)});function Zu(){jt.call(this),this.name="ClickSelecting"}z(Zu,jt),Zu.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Zu.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Zu.className="ClickSelectingTool";function Ao(){jt.call(this),this.name="Action",this.tk=null}z(Ao,jt),Ao.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.Zb(e.documentPoint,function(n){for(;n.panel!==null&&!n.isActionable;)n=n.panel;return n});return i!==null&&i.isActionable?(this.tk=i,t.Jk=t.Zb(e.documentPoint,null,null),!0):!1},Ao.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.tk;e!==null&&(t.targetObject=e,e.actionDown!==null&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Ao.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.tk;e!==null&&(t.targetObject=e,e.actionMove!==null&&e.actionMove(t,e))}},Ao.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.tk;if(e===null)return;t.targetObject=e,e.actionUp!==null&&e.actionUp(t,e),this.standardMouseClick(function(i){for(;i.panel!==null&&(!i.isActionable||i!==e);)i=i.panel;return i},function(i){return i===e})}this.stopTool()},Ao.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.tk;e!==null&&(t.targetObject=e,e.actionCancel!==null&&e.actionCancel(t,e),this.stopTool())},Ao.prototype.doStop=function(){this.tk=null},Ao.className="ActionTool";function Xs(){jt.call(this),this.name="ClickCreating",this.bj=null,this.o=!0,this.j=!1,this.Lw=new N(0,0)}z(Xs,jt),Xs.prototype.canStart=function(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.Lw=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.Lw))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.Zl(t.lastInput.documentPoint,!0)!==null)},Xs.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},Xs.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(i===null)return null;var n=null;try{if(e.S("ChangingSelection",e.selection),this.xa(this.name),i instanceof ut)i.Mc()&&(Ln(i),n=i.copy(),n!==null&&e.add(n));else if(i!==null){var r=e.model.copyNodeData(i);ct(r)&&(e.model.sf(r),n=e.yc(r))}if(n!==null){var o=N.allocAt(t.x,t.y);this.isGridSnapEnabled&&Tm(this.diagram,n,t,o),n.location=o,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),N.free(o)}e.Qa(),this.transactionResult=this.name,e.S("PartCreated",n)}finally{this.stopTransaction(),e.S("ChangedSelection",e.selection)}return n},Y.Object.defineProperties(Xs.prototype,{archetypeNodeData:{get:function(){return this.bj},set:function(t){this.bj=t}},isDoubleClick:{get:function(){return this.o},set:function(t){this.o=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),Xs.className="ClickCreatingTool";function Or(){jt.call(this),this.name="DragSelecting",this.Pk=175,this.o=!1;var t=new ut;t.layerName="Tool",t.selectable=!1;var e=new gt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}z(Or,jt),Or.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||t.Zl(e.documentPoint,!0)!==null))},Or.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Or.prototype.doDeactivate=function(){var t=this.diagram;t.tg(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Or.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&this.box!==null){var e=this.computeBoxBounds(),i=this.box.Ya("SHAPE");i===null&&(i=this.box.pb());var n=yt.alloc().h(e.width,e.height);i.desiredSize=n,this.box.wm(e.x,e.y,!1),yt.free(n),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.ms(t.lastInput.viewPoint)}},Or.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.S("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Or.prototype.computeBoxBounds=function(){var t=this.diagram;return new _(t.firstInput.documentPoint,t.lastInput.documentPoint)},Or.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.Px(t,this.isPartialInclusion),zt?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)e=t.value,e.isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0);else{for(i=new it,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0)}},Y.Object.defineProperties(Or.prototype,{delay:{get:function(){return this.Pk},set:function(t){this.Pk=t}},isPartialInclusion:{get:function(){return this.o},set:function(t){this.o=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),Or.className="DragSelectingTool";function Ar(){jt.call(this),this.name="Panning",this.Vt=new N,this.Vy=new N,this.xg=!1;var t=this;this.hx=function(){var e=t.diagram;e!==null&&e.removeEventListener(W.document,"scroll",t.hx,!1),t.stopTool()}}z(Ar,jt),Ar.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Ar.prototype.doActivate=function(){var t=this.diagram;this.xg?(t.lastInput.bubbles=!0,t.addEventListener(W.document,"scroll",this.hx,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Vt.assign(t.position)),this.isActive=!0},Ar.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Ar.prototype.doCancel=function(){var t=this.diagram;t.position=this.Vt,t.isMouseCaptured=!1,this.stopTool()},Ar.prototype.doMouseMove=function(){this.move()},Ar.prototype.doMouseUp=function(){this.move(),this.stopTool()},Ar.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.xg)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,r=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.Vy.h(r,i)}},Y.Object.defineProperties(Ar.prototype,{bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},originalPosition:{get:function(){return this.Vt}}}),Ar.className="PanningTool",Yi("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.Za("ClickCreating",t,this.mouseUpTools)}),Yi("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.Za("ClickSelecting",t,this.mouseUpTools)}),Yi("panningTool",function(){return this.findTool("Panning")},function(t){this.Za("Panning",t,this.mouseMoveTools)}),Yi("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.Za("DragSelecting",t,this.mouseMoveTools)}),Yi("actionTool",function(){return this.findTool("Action")},function(t){this.Za("Action",t,this.mouseDownTools)});function jo(){this.L=this.D=this.j=this.o=null}Y.Object.defineProperties(jo.prototype,{mainElement:{get:function(){return this.D},set:function(t){this.D=t}},show:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.L},set:function(t){this.L=t}}}),jo.className="HTMLInfo";function tr(t,e,i){this.text=t,this.Cx=e,this.visible=i}tr.className="ContextMenuButtonInfo";function Ji(){jt.call(this),this.name="ContextMenu",this.o=this.ut=this.j=null,this.Uw=new N,this.vt=null,this.Jt=!1;var t=this;this.mu=function(){t.stopTool()}}z(Ji,jt);function CT(t){var e=new jo;e.show=function(r,o,l){l.showDefaultContextMenu()},e.hide=function(r,o){o.hideDefaultContextMenu()},Qu=e,t.mu=function(){t.stopTool()},e=J("div");var i=J("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var n=J("style");W.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".goCXul { list-style: none; }",0),n.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),n=t.diagram,n!==null&&(n.addEventListener(e,"contextmenu",lm,!1),n.addEventListener(e,"selectstart",lm,!1),n.addEventListener(i,"contextmenu",lm,!1)),e.className="goCXforeground",i.className="goCXbackground",W.document.body&&(W.document.body.appendChild(e),W.document.body.appendChild(i)),_a=e,Va=i,um=!0}function lm(t){return t.preventDefault(),!1}Ji.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)},Ji.prototype.doStart=function(){this.Uw.set(this.diagram.firstInput.documentPoint)},Ji.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},Ji.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.lastInput,n=null;if(t instanceof I||(t instanceof ht?n=t:n=e.Zb(i.documentPoint,null,function(r){return!r.layer.isTemporary})),n!==null){for(t=n;t!==null;){if(t.contextMenu!==null)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(e.contextMenu!==null)return e;return null},Ji.prototype.doActivate=function(){},Ji.prototype.doMouseDown=function(){if(jt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Tt){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&oS(this)},Ji.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Tt){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}oS(this)};function oS(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(i!==null){if(!(i instanceof jo)){var n=e.Zb(e.lastInput.documentPoint,null,null);n!==null&&n.rg(i)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(sS(t,!0),t.isActive||t.stopTool())}function sS(t,e,i){if(i===void 0&&(i=null),!t.Jt&&(t.Jt=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Jt=!1,!e)){if(t.isActive=!0,e=Qu,i===null&&(i=t.findObjectWithContextMenu()),i!==null){var n=i.contextMenu;n!==null?(t.currentObject=i instanceof ht?i:null,t.showContextMenu(n,t.currentObject)):e!==null&&t.showContextMenu(e,t.currentObject)}else e!==null&&t.showContextMenu(e,null);t.currentContextMenu instanceof Tt&&!t.currentContextMenu.visible&&t.stopTool()}}Ji.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},Ji.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Tt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Ta(),this.positionContextMenu(t,e)}else t instanceof jo&&t.show(e,i,this);this.currentContextMenu=t},Ji.prototype.positionContextMenu=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y+n.height>r.bottom&&(i.y-=n.height+5/e.scale),i.y<r.y&&(i.y=r.y),t.position=i}},Ji.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;e!==null&&(e instanceof Tt?(t.remove(e),this.ut!==null&&this.ut.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof jo&&(e.hide!==null?e.hide(t,this):e.mainElement!==null&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())};function NT(t){var e=new it;return e.add(new tr("Copy",function(i){i.commandHandler.copySelection()},function(i){return i.commandHandler.canCopySelection()})),e.add(new tr("Cut",function(i){i.commandHandler.cutSelection()},function(i){return i.commandHandler.canCutSelection()})),e.add(new tr("Delete",function(i){i.commandHandler.deleteSelection()},function(i){return i.commandHandler.canDeleteSelection()})),e.add(new tr("Paste",function(i){i.commandHandler.pasteSelection(t.mouseDownPoint)},function(i){return i.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new tr("Select All",function(i){i.commandHandler.selectAll()},function(i){return i.commandHandler.canSelectAll()})),e.add(new tr("Undo",function(i){i.commandHandler.undo()},function(i){return i.commandHandler.canUndo()})),e.add(new tr("Redo",function(i){i.commandHandler.redo()},function(i){return i.commandHandler.canRedo()})),e.add(new tr("Scroll To Part",function(i){i.commandHandler.scrollToPart()},function(i){return i.commandHandler.canScrollToPart()})),e.add(new tr("Zoom To Fit",function(i){i.commandHandler.zoomToFit()},function(i){return i.commandHandler.canZoomToFit()})),e.add(new tr("Reset Zoom",function(i){i.commandHandler.resetZoom()},function(i){return i.commandHandler.canResetZoom()})),e.add(new tr("Group Selection",function(i){i.commandHandler.groupSelection()},function(i){return i.commandHandler.canGroupSelection()})),e.add(new tr("Ungroup Selection",function(i){i.commandHandler.ungroupSelection()},function(i){return i.commandHandler.canUngroupSelection()})),e.add(new tr("Edit Text",function(i){i.commandHandler.editTextBlock()},function(i){return i.commandHandler.canEditTextBlock()})),e}Ji.prototype.showDefaultContextMenu=function(){var t=this.diagram;this.vt===null&&(this.vt=NT(this)),_a.innerHTML="",Va.addEventListener("pointerdown",this.mu,!1);var e=this,i=J("ul");i.className="goCXul",_a.appendChild(i),i.innerHTML="";for(var n=this.vt.iterator;n.next();){var r=n.value,o=r.visible;if(typeof r.Cx=="function"&&(typeof o!="function"||o(t))){o=J("li"),o.className="goCXli";var l=J("a");l.className="goCXa",l.href="#",l.Jy=r.Cx,l.addEventListener("pointerdown",function(h){return this.Jy(t),e.stopTool(),h.preventDefault(),!1},!1),l.textContent=r.text,o.appendChild(l),i.appendChild(o)}}_a.style.display="block",Va.style.display="block"},Ji.prototype.hideDefaultContextMenu=function(){if(this.currentContextMenu!==null&&this.currentContextMenu===Qu){_a.style.display="none",Va.style.display="none";var t=this.diagram;t!==null&&t.removeEventListener(Va,"pointerdown",this.mu,!1),this.currentContextMenu=null}},Y.Object.defineProperties(Ji.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.ut=t instanceof Tt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return um===!1&&Qu===null&&Un&&CT(this),Qu},set:function(t){t===null&&(um=!0),Qu=t}},currentObject:{get:function(){return this.o},set:function(t){this.o=t}},mouseDownPoint:{get:function(){return this.Uw}}});var Qu=null,um=!1,Va=null,_a=null;Ji.className="ContextMenuTool",Yi("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.Za("ContextMenu",t,this.mouseUpTools)});function Jt(){jt.call(this),this.name="TextEditing",this.qh=new Yt,this.Ba=null,this.wa=am,this.ui=null,this.ia=Ua,this.D=1,this.L=!0,this.o=null,this.j=new jo,this.wt=null,TT(this,this.j)}z(Jt,jt);function TT(t,e){if(Un){var i=J("textarea");t.wt=i,i.addEventListener("input",function(){if(t.textBlock!==null){var n=t.iy(this.value);this.style.width=20+n.measuredBounds.width*this.SA+"px",this.rows=n.lineCount}},!1),i.addEventListener("keydown",function(n){if(t.textBlock!==null){var r=n.key;r==="Enter"?(t.textBlock.isMultiline===!1&&n.preventDefault(),t.acceptText(sp)):r==="Tab"?(t.acceptText(hm),n.preventDefault()):r==="Escape"&&(t.doCancel(),t.diagram!==null&&t.diagram.doFocus())}},!1),i.addEventListener("focus",function(){if(t.currentTextEditor!==null&&t.state!==Ua){var n=t.wt;t.ia===za&&(t.ia=lp),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),i.addEventListener("blur",function(){if(t.currentTextEditor!==null&&t.state!==Ua){var n=t.wt;typeof n.focus=="function"&&n.focus(),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(n,r,o){if(n instanceof Yt&&o instanceof Jt)if(o.state===Ga)i.style.border="3px solid red",i.focus();else{var l=n.da(_t),h=r.position,a=r.scale,c=n.Af()*a;c<o.minimumEditorScale&&(c=o.minimumEditorScale);var p=n.naturalBounds.width*c+6,d=n.naturalBounds.height*c+2,m=(l.x-h.x)*a;l=(l.y-h.y)*a,h=n.verticalAlignment,a=(n.lineHeight+n.spacingAbove+n.spacingBelow)*n.lineCount*c,d=h.y*d-h.y*a+h.offsetY-(.5*d-.5*a)-a/2,i.value=n.text,r.div.style.font=n.font,i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*c+"%",i.style.lineHeight="normal",i.style.width=p+"px",i.style.left=(m-p/2|0)-1+"px",i.style.top=(l+d|0)-1+"px",i.style.textAlign=n.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=n.lineCount,i.SA=c,i.className="goTXarea",r.div.appendChild(i),i.focus(),o.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(n){n.div.removeChild(i)}}}Jt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||t.isReadOnly||Il&&Il!==this&&(Il.acceptText(op),Il&&Il!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Zb(t.lastInput.documentPoint);return e!==null&&e instanceof Yt&&e.editable&&e.part.canEdit()?(e=e.part,!(e===null||this.starting===am&&!e.isSelected||this.starting===hS&&2>t.lastInput.clickCount)):!1},Jt.prototype.doStart=function(){Il=this,this.textBlock!==null&&this.doActivate()},Jt.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(t!==null){var e=this.textBlock;if(e===null&&(e=t.Zb(t.lastInput.documentPoint)),e!==null&&e instanceof Yt&&(this.textBlock=e,e.part!==null)){t.animationManager.qc(),this.isActive=!0,this.ia=za;var i=this.defaultTextEditor;e.textEditor!==null&&(i=e.textEditor),this.qh=this.textBlock.copy();var n=new _(this.textBlock.da(di),this.textBlock.da(Er));t.Fv(n),i.show(e,t,this),this.currentTextEditor=i}}}},Jt.prototype.doCancel=function(){this.stopTool()},Jt.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},Jt.prototype.doMouseDown=function(){this.isActive&&this.acceptText(op)},Jt.prototype.acceptText=function(t){switch(t){case op:this.ia===cm?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.ia===za||this.ia===Ga||this.ia===lp)&&(this.ia=fm,lS(this));break;case uS:case sp:case hm:(sp!==t||this.textBlock.isMultiline!==!0)&&(this.ia===za||this.ia===Ga||this.ia===lp)&&(this.ia=fm,lS(this))}};function lS(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(e!==null&&n!==null){var r=e.text,o="";n.valueFunction!==null&&(o=n.valueFunction()),t.isValidText(e,r,o)?(t.xa(t.name),t.ia=cm,t.transactionResult=t.name,e.text=o,t.doSuccess(r,o),i!==null&&i.S("TextEdited",e,r),t.stopTransaction(),t.stopTool(),i!==null&&i.doFocus()):(t.ia=Ga,t.doError(r,o))}}Jt.prototype.doError=function(t,e){var i=this.textBlock;i.errorFunction!==null&&i.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(i,this.diagram,this)},Jt.prototype.doSuccess=function(t,e){var i=this.textBlock;i.textEdited!==null&&i.textEdited(i,t,e)},Jt.prototype.doDeactivate=function(){var t=this.diagram;t!==null&&(this.ia=Ua,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},Jt.prototype.doStop=function(){Il=null},Jt.prototype.isValidText=function(t,e,i){var n=this.textValidation;return n!==null&&!n(t,e,i)?!1:(n=t.textValidation,!!(n===null||n(t,e,i)))},Jt.prototype.iy=function(t){var e=this.qh;return e.text=t,e.measure(this.textBlock.ei,1/0),e},Y.Object.defineProperties(Jt.prototype,{textBlock:{get:function(){return this.Ba},set:function(t){this.Ba=t}},currentTextEditor:{get:function(){return this.o},set:function(t){this.o=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.wa},set:function(t){this.wa=t}},textValidation:{get:function(){return this.ui},set:function(t){this.ui=t}},minimumEditorScale:{get:function(){return this.D},set:function(t){this.D=t}},selectsTextOnActivate:{get:function(){return this.L},set:function(t){this.L=t}},state:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}}}),Jt.prototype.measureTemporaryTextBlock=Jt.prototype.iy;var uS=new K(Jt,"LostFocus",0),op=new K(Jt,"MouseDown",1),hm=new K(Jt,"Tab",2),sp=new K(Jt,"Enter",3),LT=new K(Jt,"SingleClick",0),am=new K(Jt,"SingleClickSelected",1),hS=new K(Jt,"DoubleClick",2),Ua=new K(Jt,"StateNone",0),za=new K(Jt,"StateActive",1),lp=new K(Jt,"StateEditing",2),fm=new K(Jt,"StateValidating",3),Ga=new K(Jt,"StateInvalid",4),cm=new K(Jt,"StateValidated",5),Il=null;Jt.className="TextEditingTool",Jt.LostFocus=uS,Jt.MouseDown=op,Jt.Tab=hm,Jt.Enter=sp,Jt.SingleClick=LT,Jt.SingleClickSelected=am,Jt.DoubleClick=hS,Jt.StateNone=Ua,Jt.StateActive=za,Jt.StateEditing=lp,Jt.StateValidating=fm,Jt.StateInvalid=Ga,Jt.StateValidated=cm,Yi("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.Za("TextEditing",t,this.mouseUpTools)});function fn(t){ap||(pS(),ap=!0),this.C=ih,this.Xk=this.tb=this.qr=this.kc=!1,this.nx=!0,this.Yk=fp,this.Tm=!1,this.$h=this.vd=!0,this.Kg=600,this.Bw=this.lx=!1,this.Se=new Q,this.Sd=new ri,this.Sd.Pd=this,this.aj=new Q,this.iu=new Q,this.cs=new Q,this.yl=new Q,t&&Object.assign(this,t)}fn.prototype.Ne=function(t){this.C=t},fn.prototype.canStart=function(){return!0};function Do(t,e){t.vd&&t.canStart(e)&&(t.Se.add(e),t.defaultAnimation.isAnimating&&t.qc(),yi(t.C),t.tb=!0)}function pm(t){if(t.vd&&t.tb){var e=t.Sd,i=t.C,n=t.Se.contains("Model");n&&(t.Xk=!0,t.Yk===fp?(e.isViewportUnconstrained=!0,e.mc.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):t.Yk===yS&&e.mc.clear(),t.nx=!!(t.Yk===dS&&i.au.A(i.ja)),i.S("InitialAnimationStarting",t)),n&&!t.$h||e.mc.count===0?(t.Se.clear(),t.tb=!1,e.mc.clear(),cp(e,i),t.Xk=!1,i.N()):(t.Se.clear(),i.jg=!1,n=e.mc.get(i),i.autoScale!==cn&&n!==null&&(delete n.start.scale,delete n.end.scale),W.requestAnimationFrame(function(){t.tb===!1||e.kc||(i.Ie("temporaryPixelRatio")&&Ya(i),gm(i),t.tb=!1,e.start(),qu(t),i.Qa(),mS(e,0),cs(i,!0),bu(t),i.S("AnimationStarting",t))}))}}function aS(t,e,i,n){t.isTicking||e instanceof H&&(e.fromNode!==null||e.toNode!==null)||t.Sd.add(e,"position",i,n,!1)}s=fn.prototype,s.Ls=function(t){return this.Sd.Ls(t)},s.cv=function(t){return this.Sd.cv(t)};function ET(t,e){function i(){if(0<r.cs.count&&(n.addAll(r.cs),r.cs.clear(),r.kc=!0),r.kc!==!1&&n.count!==0){r.iu.addAll(n);for(var o=r.iu.iterator;o.next();){var l=o.value;if(l.kc!==!1){t:if(0<l.Pl.count)var h=!0;else{for(h=l.mc.iterator;h.next();){var a=h.key;if(a instanceof ht&&a.diagram!==null||a instanceof I){h=!0;break t}}h=!1}h?gS(l,!1):l.el=!0}}r.iu.clear(),qu(r),cs(r.C),bu(r),W.requestAnimationFrame(i)}}var n=t.aj,r=t;t.kc?t.cs.add(e):(t.kc=!0,n.add(e),W.requestAnimationFrame(function(){i()}))}function OT(t){for(t=t.aj.iterator;t.next();)t.value.el=!1}function qu(t){if(!t.qr){var e=t.C;t.lx=e.skipsUndoManager,t.Bw=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.qr=!0}}function bu(t){var e=t.C;e.skipsUndoManager=t.lx,e.skipsModelSourceBindings=t.Bw,t.qr=!1}s.qc=function(t){var e=this.Sd;if(this.tb===!0&&(this.Xk=this.tb=!1,this.Se.clear(),0<e.mc.count&&this.C.Fb()),this.kc){if(e.Xl(!0),e.mc.clear(),cp(e,null),t===!0)for(t=this.aj.ya(),e=0;e<t.length;e++)t[e].Xl(!0)}else e.mc.clear(),cp(e,this.C)},s.Xl=function(t){t===this.defaultAnimation&&this.defaultAnimation.mc.clear(),this.aj.remove(t),this.aj.count===0&&(this.kc=!1,this.C.Fb()),t===this.defaultAnimation&&(this.defaultAnimation.mc.clear(),this.C.S("AnimationFinished",this))},s.Mj=function(t,e){this.tb&&(this.Se.contains("Expand Tree")||this.Se.contains("Expand SubGraph"))&&(this.Sd.Mj(t,e),cS(this,t))},s.Kj=function(t,e){this.tb&&(this.Se.contains("Collapse Tree")||this.Se.contains("Collapse SubGraph"))&&(this.Sd.Kj(t,e),dm(this.Sd,e,"position",e.position,e.position),cS(this,t))};function fS(t,e,i){t.tb&&!e.A(i)&&(t.C.Oi||(e=i.copy()),dm(t.Sd,t.C,"position",e,i))}function cS(t,e){for(e=e.findLinksConnected();e.next();){var i=e.value;i.gf=i.points.copy(),t.yl.add(i)}}function up(t,e,i,n,r){t===null&&(t=[0,0,0,0]),e===null&&(e=[0,0,0,0]);var o=t[0],l=t[1],h=t[2];t=t[3];var a=e[0],c=e[1],p=e[2];return e=e[3],h===0||h===100?(o=a,l=c):(p===0||p===100)&&(a=o,c=l),180<Math.abs(a-o)&&(a>o?o+=360:a+=360),o=r(i,o,a-o,n)%360,l=r(i,l,c-l,n),h=r(i,h,p-h,n),i=r(i,t,e-t,n),"hsla("+o+", "+l+"%, "+h+"%, "+i+")"}function pS(){function t(i,n,r,o,l,h){i.position=new N(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h))}var e=new pt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(i,n,r,o,l,h){l<h?i.wm(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h),!1):i.position=new N(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h))}),e.add("location",function(i,n,r,o,l,h){l<h?i.wm(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h),!0):i.location=new N(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h))}),e.add("position:placeholder",function(i,n,r,o,l,h){l<h?i.wm(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h),!1):i.position=new N(o(l,n.x,r.x-n.x,h),o(l,n.y,r.y-n.y,h))}),e.add("position:nodeCollapse",function(i,n,r,o,l,h){var a=i.actualBounds,c=r.actualBounds;r=c.x+c.width/2-a.width/2,a=c.y+c.height/2-a.height/2,l<h?i.wm(o(l,n.x,r-n.x,h),o(l,n.y,a-n.y,h),!1):i.position=new N(o(l,n.x,r-n.x,h),o(l,n.y,a-n.y,h))}),e.add("desiredSize",function(i,n,r,o,l,h){i.desiredSize=new _(o(l,n.width,r.width-n.width,h),o(l,n.height,r.height-n.height,h))}),e.add("width",function(i,n,r,o,l,h){i.width=o(l,n,r-n,h)}),e.add("height",function(i,n,r,o,l,h){i.height=o(l,n,r-n,h)}),e.add("fill",function(i,n,r,o,l,h){i.fill=up(n,r,l,h,o)}),e.add("stroke",function(i,n,r,o,l,h){i.stroke=up(n,r,l,h,o)}),e.add("strokeWidth",function(i,n,r,o,l,h){i.strokeWidth=o(l,n,r-n,h)}),e.add("strokeDashOffset",function(i,n,r,o,l,h){i.strokeDashOffset=o(l,n,r-n,h)}),e.add("background",function(i,n,r,o,l,h){i.background=up(n,r,l,h,o)}),e.add("areaBackground",function(i,n,r,o,l,h){i.areaBackground=up(n,r,l,h,o)}),e.add("opacity",function(i,n,r,o,l,h){i.opacity=o(l,n,r-n,h)}),e.add("scale",function(i,n,r,o,l,h){i.scale=o(l,n,r-n,h)}),e.add("angle",function(i,n,r,o,l,h){i.angle=o(l,n,r-n,h)}),hp=e}Y.Object.defineProperties(fn.prototype,{animationReasons:{get:function(){return this.Se}},isEnabled:{get:function(){return this.vd},set:function(t){(this.vd=t)&&this.aj.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Kg},set:function(t){1>t&&st(t,">= 1",fn,"duration"),this.Kg=t}},isAnimating:{get:function(){return this.kc}},isTicking:{get:function(){return this.qr}},isInitial:{get:function(){return this.$h},set:function(t){this.$h=t}},defaultAnimation:{get:function(){return this.Sd}},activeAnimations:{get:function(){return this.aj}},initialAnimationStyle:{get:function(){return this.Yk},set:function(t){this.Yk=t}}}),fn.prototype.stopAnimation=fn.prototype.qc;var hp=null,ap=!1,fp=new K(fn,"Default",1),dS=new K(fn,"AnimateLocations",2),yS=new K(fn,"None",3);fn.className="AnimationManager",fn.defineAnimationEffect=function(t,e){ap||(pS(),ap=!0),hp.add(t,e)},fn.Default=fp,fn.AnimateLocations=dS,fn.None=yS;function ri(t){this.nu=this.kx=this.Pd=this.C=null,this.el=this.kc=this.j=!1,this.xn=this.Cd=0,this.Oq=this.At=vS,this.dl=this.Xo=!1,this.$t=1,this.Yt=0,this.ud=this.Kg=NaN,this.Fw=0,this.yn=null,this.o=Oo,this.mc=new pt,this.Tt=new pt,this.Pl=new Q,this.Ut=new Q,this.Cw=Ks,t&&Object.assign(this,t)}ri.prototype.suspend=function(){this.el=!0},ri.prototype.advanceTo=function(t,e){e&&(this.el=!1),this.Xo&&t>=this.ud&&(this.dl=!0,t-=this.ud),this.Fw=t,gS(this,!0),qu(this.Pd),cs(this.C),bu(this.Pd),this.C.redraw()};function cp(t,e){if(t.Tt.clear(),t.dl=!1,t.Yt=0,t.ud=NaN,0<t.Pl.count&&t.Pl.clear(),0<t.Ut.count&&t.Ut.clear(),e!==null)for(t=e.links;t.next();)t.value.gf=null}s=ri.prototype,s.start=function(){if(this.mc.count===0||this.kc)return this;for(var t=this.C,e=this.mc.iterator;e.next();){var i=e.value.end,n=e.key;if(i["position:placeholder"]){var r=n.findVisibleNode();if(r instanceof dt&&r.placeholder!==null){var o=r.placeholder;r=o.da(di),o=o.padding,r.x+=o.left,r.y+=o.top,i["position:placeholder"]=r}}t===null&&(n instanceof I?t=n:n instanceof ht&&(t=n.diagram))}if(t!==null)this.C=t,this.Pd=t.animationManager;else return this;return e=this.Pd,e.isEnabled===!1?this:(this.ud=isNaN(this.Kg)?e.duration:this.Kg,this.Oq=this.At,e.Xk&&e.Yk===fp&&this===e.defaultAnimation&&(this.Oq=xS,this.ud=isNaN(this.Kg)?e.duration===600?900:e.duration:this.Kg),this.Cw=t.scrollMode,this.isViewportUnconstrained&&(t.Gj=Vm),qu(e),this.Pl.each(function(l){l.data=null,t.add(l)}),bu(e),this.kc=!0,this.Cd=+new Date,this.xn=this.Cd+this.ud,ET(e,this),this)},s.dz=function(t,e){return t.Mc()?(this.Pl.add(t),this.C=e,this):this},s.add=function(t,e,i,n,r){if(e==="position"&&i.A(n))return this;if(this.C===null&&(t instanceof I?this.C=t:t instanceof ht&&t.diagram!==null&&(this.C=t.diagram)),t instanceof ut){if(!t.isAnimated)return this;e==="position"&&(e="position:part")}return dm(this,t,e,i,n,r),this};function dm(t,e,i,n,r,o){var l=t.mc;if(e instanceof I&&i==="position"&&(i="position:diagram"),(i==="fill"||i==="stroke"||i==="background"||i==="areaBackground")&&(co(n),$m(),n=[qi.j,qi.D,qi.o,qi.L],co(r),$m(),r=[qi.j,qi.D,qi.o,qi.L]),l.contains(e)){var h=l.H(e),a=h.start,c=h.end;a[i]===void 0&&(a[i]=th(n)),c[i]=th(r)}else a={},c={},a[i]=th(n),c[i]=th(r),h=a.position,e instanceof ht&&h instanceof N&&!h.u()&&e.diagram.animationManager.Se.contains("Expand SubGraph")&&h.assign(c.position),h=new wS(a,c,o),l.add(e,h);l=a[i],l instanceof N&&!l.u()&&l.assign(t.o),o&&i.indexOf("position:")===0&&e instanceof ut?h.Lu.location=th(e.location):o&&(h.Lu[i]=th(n))}function th(t){return t instanceof N||t instanceof yt?t.copy():t}s.Ls=function(t){return this.kc?(t=this.mc.H(t),t!==null&&t.yv):!1},s.cv=function(t){return this.kc?(t=this.mc.H(t),t!==null&&(t.start.position||t.start.location)):!1};function gS(t,e){if(!t.el||e){var i=t.Pd;if(t.kc!==!1){var n=+new Date,r=n>t.xn?t.ud:n-t.Cd;e&&(r=t.Fw,r<t.ud?(t.Cd=+new Date-r,t.xn=t.Cd+t.ud):r=t.ud),qu(i),mS(t,r),cs(t.C,!0),bu(i),n>t.xn&&(t.Xo&&!t.dl?(t.Cd=+new Date,t.xn=t.Cd+t.ud,t.dl=!0):t.Xl(!1))}}}function mS(t,e){for(var i=t.ud,n=t.mc.iterator,r=t.dl;n.next();){var o=n.key;if(!(o instanceof ht&&o.diagram===null)){var l=n.value,h=r?l.end:l.start;l=r?l.start:l.end;var a=hp,c;for(c in l)c==="position"&&(l["position:placeholder"]||l["position:nodeCollapse"])||a.get(c)===null||a.get(c)(o,h[c],l[c],t.Oq,e,i,t)}}}s.stop=function(){return this.kc?(this.Xl(!0),this):this},s.Xl=function(t){if(this.nu!==null&&this.nu.ep.remove(this.kx),this.kc){var e=this.C,i=this.Pd;this.el=this.kc=i.Xk=!1,qu(i);for(var n=this.mc,r=this.Pl.iterator;r.next();)e.remove(r.value);for(r=this.Ut.iterator;r.next();)r.value.s();r=this.Xo,n=n.iterator;for(var o=hp;n.next();){var l=n.key,h=n.value,a=r?h.end:h.start,c=r?h.start:h.end,p=h.Lu,d;for(d in c)if(o.get(d)!==null){var m=d;!h.Du||m!=="position:nodeCollapse"&&m!=="position:placeholder"||(m="position"),o.get(m)(l,a[d],p[d]!==void 0?p[d]:h.Du?a[d]:c[d],this.Oq,this.ud,this.ud,this)}h.Du&&p.location!==void 0&&l instanceof ut&&(l.location=p.location),h.yv&&l instanceof ut&&l.Ob(!1)}if(e.Gs.clear(),dp(e,!1),e.Qa(),e.N(),cs(e,!0),i.defaultAnimation===this){for(d=i.yl.iterator;d.next();)r=d.value,r.gf!==null&&(r.points=r.gf,r.gf=null);i.yl.clear()}this.isViewportUnconstrained&&(e.scrollMode=this.Cw),bu(i),this.Yt++,!t&&this.$t>this.Yt?(this.dl=!1,this.start()):(this.yn&&this.yn(this),cp(this,null),i.Xl(this),e.Fb())}},s.Mj=function(t,e){var i=e.actualBounds,n=null;if(e instanceof dt&&(n=e.placeholder),n!==null?(i=n.da(di),n=n.padding,i.x+=n.left,i.y+=n.top,this.add(t,"position",i,t.position,!1)):this.add(t,"position",new N(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof dt)for(t=t.memberParts;t.next();)n=t.value,n instanceof q&&this.Mj(n,e)},s.Kj=function(t,e){if(t.isVisible()){var i=null;if(e instanceof dt&&(i=e.placeholder),i!==null?this.add(t,"position:placeholder",t.position,i,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),i=this.mc,i.contains(t)&&(i.H(t).yv=!0),t instanceof dt)for(t=t.memberParts;t.next();)i=t.value,i instanceof q&&this.Kj(i,e)}},s.bA=function(t){var e=this.Tt.get(t);return e===null&&(e={},this.Tt.add(t,e)),e},Y.Object.defineProperties(ri.prototype,{duration:{get:function(){return this.Kg},set:function(t){1>t&&st(t,">= 1",ri,"duration"),this.Kg=t}},reversible:{get:function(){return this.Xo},set:function(t){this.Xo=t}},runCount:{get:function(){return this.$t},set:function(t){0<t?this.$t=t:D("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.yn},set:function(t){this.yn!==t&&(this.yn=t)}},easing:{get:function(){return this.At},set:function(t){this.At=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.kc}}}),ri.prototype.getTemporaryState=ri.prototype.bA,ri.prototype.stop=ri.prototype.stop,ri.prototype.add=ri.prototype.add,ri.prototype.addTemporaryPart=ri.prototype.dz;function vS(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function xS(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}ri.className="Animation",ri.EaseLinear=function(t,e,i,n){return i*t/n+e},ri.EaseInOutQuad=vS,ri.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},ri.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},ri.EaseInExpo=function(t,e,i,n){return t===0?e:i*Math.pow(2,10*(t/n-1))+e},ri.EaseOutExpo=xS;function wS(t,e,i){this.start=t,this.end=e,this.Lu={},this.Du=i,this.yv=!1}wS.className="AnimationState";function jr(t,e,i){this.od=null,this.ff=t,this.vp=i||SS,this.yk=null,e!==void 0&&(this.yk=e,i===void 0&&(this.vp=ym))}jr.prototype.copy=function(){var t=new jr(this.ff);t.vp=this.vp;var e=this.yk;if(e!==null){var i={};e.duration!==void 0&&(i.duration=e.duration),e.finished!==void 0&&(i.finished=e.finished),e.easing!==void 0&&(i.easing=e.easing),t.yk=i}return t};function AT(t,e){t=t.yk,t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}Y.Object.defineProperties(jr.prototype,{propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},animationSettings:{get:function(){return this.yk},set:function(t){this.yk=t}},startCondition:{get:function(){return this.vp},set:function(t){this.vp=t}}});var SS=new K(jr,"Default",1),ym=new K(jr,"Immediate",2),MS=new K(jr,"Bundled",3);jr.className="AnimationTrigger",jr.Default=SS,jr.Immediate=ym,jr.Bundled=MS;function oi(t){je(this),this.C=null,this.Ha=new it,this.na="",this.mb=1,this.o=!1,this.j=this.oi=this.Bc=this.Nd=this.rc=this.Rb=this.Gb=this.Ma=this.Qb=this.Ba=this.ke=this.wa=this.Od=this.L=this.D=!0,this.Jo=[],t&&Object.assign(this,t)}s=oi.prototype,s.clear=function(){this.Ha.clear(),this.Jo.length=0},s.Ne=function(t){this.C=t},s.toString=function(t){t===void 0&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,r=0,o=0,l=0,h=this.Ha.iterator;h.next();){var a=h.value;a instanceof dt?r++:a instanceof q?n++:a instanceof H?o++:a instanceof Tt?l++:i++}if(h="",0<i&&(h+=i+" Parts "),0<n&&(h+=n+" Nodes "),0<r&&(h+=r+" Groups "),0<o&&(h+=o+" Links "),0<l&&(h+=l+" Adornments "),1<t)for(t=this.Ha.iterator;t.next();)i=t.value,h+=`
    `+i.toString(),n=i.data,n!==null&&Ce(n)&&(h+=" #"+Ce(n)),i instanceof q?h+=" "+ii(n):i instanceof H&&(h+=" "+ii(i.fromNode)+" "+ii(i.toNode));return e+" "+this.Ha.count+": "+h},s.Zb=function(t,e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),this.oi===!1)return null;var n=!1;this.diagram!==null&&this.diagram.viewportBounds.$(t)&&(n=!0);for(var r=N.alloc(),o=this.Ha.m,l=o.length;l--;){var h=o[l];if((n!==!0||gs(h)!==!1)&&h.isVisible()&&(r.assign(t),ci(r,h.fe),h=h.Zb(r,e,i),h!==null&&(e!==null&&(h=e(h)),h!==null&&(i===null||i(h)))))return N.free(r),h}return N.free(r),null},s.Hi=function(t,e,i,n){if(e===void 0&&(e=null),i===void 0&&(i=null),n instanceof it||n instanceof Q||(n=new Q),this.oi===!1)return n;var r=!1;this.diagram!==null&&this.diagram.viewportBounds.$(t)&&(r=!0);for(var o=N.alloc(),l=this.Ha.m,h=l.length;h--;){var a=l[h];if((r!==!0||gs(a)!==!1)&&a.isVisible()){o.assign(t),ci(o,a.fe);var c=a;a.Hi(o,e,i,n)&&(e!==null&&(c=e(c)),c===null||i!==null&&!i(c)||n.add(c))}}return N.free(o),n},s.zf=function(t,e,i,n,r){if(e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof it||r instanceof Q||(r=new Q),this.oi===!1)return r;var o=!1;this.diagram!==null&&this.diagram.viewportBounds.Ge(t)&&(o=!0);for(var l=this.Ha.m,h=l.length;h--;){var a=l[h];if((o!==!0||gs(a)!==!1)&&a.isVisible()){var c=a;a.zf(t,e,i,n,r)&&(e!==null&&(c=e(c)),c===null||i!==null&&!i(c)||r.add(c))}}return r},s.Qu=function(t,e,i,n,r,o,l){if(this.oi===!1)return r;for(var h=this.Ha.m,a=h.length;a--;){var c=h[a];if((l!==!0||gs(c)!==!1)&&o(c)&&c.isVisible()){var p=c;c.zf(t,e,i,n,r)&&(e!==null&&(p=e(p)),p===null||i!==null&&!i(p)||r.add(p))}}return r},s.pg=function(t,e,i,n,r,o){if(i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof it||r instanceof Q)&&(o=r),r=!0),o instanceof it||o instanceof Q||(o=new Q),this.oi===!1)return o;var l=!1;this.diagram!==null&&this.diagram.viewportBounds.$(t)&&(l=!0);for(var h=N.alloc(),a=N.alloc(),c=this.Ha.m,p=c.length;p--;){var d=c[p];if((l!==!0||gs(d)!==!1)&&d.isVisible()){h.assign(t),ci(h,d.fe),a.h(t.x+e,t.y),ci(a,d.fe);var m=d;d.pg(h,a,i,n,r,o)&&(i!==null&&(m=i(m)),m===null||n!==null&&!n(m)||o.add(m))}}return N.free(h),N.free(a),o},s.Md=function(t,e){if(this.visible){var i=this.Ha.m,n=i.length;if(n!==0){t=Et();for(var r=Et(),o=0;o<n;o++){var l=i[o];if(l.Sw=o,l instanceof H){if(l.td===!1)continue}else if(l instanceof Tt&&l.adornedPart!==null)continue;var h=l.actualBounds;l.isVisible()&&Nw(h,e)?(l.Md(!0),t.push(l)):(l.Md(!1),l.adornments!==null&&0<l.adornments.count&&r.push(l))}for(e=0;e<t.length;e++)for(i=t[e],v0(i),i=i.adornments;i.next();)n=i.value,n.measure(1/0,1/0),n.arrange(),n.Md(!0);for(e=0;e<r.length;e++)v0(r[e]);Ut(t),Ut(r)}}};function eh(t,e){var i=1;return t.mb!==1&&(i=e.globalAlpha,e.globalAlpha=i*t.mb),i}s.oc=function(t,e,i){if(this.visible&&this.mb!==0&&(i===void 0&&(i=!0),i||!this.isTemporary)){i=this.Ha.m;var n=i.length;if(n!==0){var r=eh(this,t),o=this.Jo;o.length=0;for(var l=e.scale,h=_.alloc(),a=0;a<n;a++)this.Di(t,i[a],e,o,l,h,!0);_.free(h),t.globalAlpha=r}}},s.Di=function(t,e,i,n,r,o,l){if(!l||gs(e)){if(n!==null&&e instanceof H&&(e.isOrthogonal&&n.push(e),e.td===!1))return;for(l=!1,n=e.containingGroup;n!==null;)l?n.$a!==null&&o.Zx(n.$a):n.$a!==null&&(l=!0,o.assign(n.$a)),n=n.containingGroup;var h=e.actualBounds;if(n=!1,l&&e.isVisible()){if(!o.Lc(h))return;n=!o.Ge(h)}n&&(t.save(),t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip()),h.width*r>i.wr||h.height*r>i.wr?e.oc(t,i):(r=e.actualBounds,o=e.naturalBounds,r.width===0||r.height===0||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(i=e.transform,e.areaBackground!==null&&(Qi(e,t,e.areaBackground,!0,!0,o,r),t.fillRect(r.x,r.y,r.width,r.height)),e.areaBackground===null&&e.background===null&&(Qi(e,t,"rgba(0,0,0,0.3)",!0,!1,o,r),t.fillRect(r.x,r.y,r.width,r.height)),e.background!==null&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),Qi(e,t,e.background,!0,!1,o,r),t.fillRect(0,0,o.width/2,o.height/2),i.Bs()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))))),n&&(t.restore(),t.Hc(!0))}},s.g=function(t,e,i,n,r){var o=this.diagram;o!==null&&o.Wa(qt,t,this,e,i,n,r)},s.Ni=function(t,e,i){var n=this.Ha;if(e.fi=this,t>=n.count)t=n.count;else if(n.J(t)===e)return-1;return n.wb(t,e),e.bq(i),n=this.diagram,n!==null&&(i?n.N():n.Ni(e)),pp(this,t,e),t},s.ec=function(t,e,i){if(!i&&e.layer!==this&&e.layer!==null)return e.layer.ec(t,e,i);var n=this.Ha;if(0>t||t>=n.length){if(t=n.indexOf(e),0>t)return-1}else if(n.J(t)!==e&&(t=n.indexOf(e),0>t))return-1;return e.cq(i),n.eb(t),n=this.diagram,n!==null&&(i?n.N():n.ec(e)),e.fi=null,t};function pp(t,e,i){if(e=jT(t,e,i),i instanceof dt&&i!==null&&isNaN(i.zOrder)){if(i.memberParts.count!==0){for(var n=-1,r=t.Ha.m,o=r.length,l=0;l<o;l++){var h=r[l];if(h===i&&(e=l,0<=n)||0>n&&h.containingGroup===i&&(n=l,0<=e))break}!(0>n)&&n<e&&(r=t.Ha,r.eb(e),r.wb(n,i))}i=i.containingGroup,i!==null&&pp(t,-1,i)}}function jT(t,e,i){var n=i.zOrder;if(isNaN(n))return e;t=t.Ha;var r=t.count;if(1>=r)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var o=e-1,l=NaN;0<=o&&(l=t.J(o).zOrder,!!isNaN(l));)o--;for(var h=e+1,a=NaN;h<r&&(a=t.J(h).zOrder,!!isNaN(a));)h++;if(!isNaN(l)&&l>n)for(;;){if(o===-1||l<=n){if(o++,o===e)break;return t.eb(e),t.wb(o,i),o}for(l=NaN;0<=--o&&(l=t.J(o).zOrder,isNaN(l)););}else if(!isNaN(a)&&a<n)for(;;){if(h===r||a>=n){if(h--,h===e)break;return t.eb(e),t.wb(h,i),h}for(a=NaN;++h<r&&(a=t.J(h).zOrder,isNaN(a)););}return e}Y.Object.defineProperties(oi.prototype,{parts:{get:function(){return this.Ha.iterator}},partsBackwards:{get:function(){return this.Ha.iteratorBackwards}},diagram:{get:function(){return this.C}},name:{get:function(){return this.na},set:function(t){var e=this.na;if(e!==t){var i=this.diagram;if(i!==null)for(e===""&&D("Cannot rename default Layer to: "+t),i=i.layers;i.next();)i.value.name===t&&D("Layer.name is already present in this diagram: "+t);for(this.na=t,this.g("name",e,t),t=this.Ha.iterator;t.next();)t.value.layerName=this.na}}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&st(t,"0 <= value <= 1",oi,"opacity"),this.mb=t,this.g("opacity",e,t),t=this.diagram,t!==null&&t.N())}},isTemporary:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&((this.o=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.Bc},set:function(t){var e=this.Bc;if(e!==t){for(this.Bc=t,this.g("visible",e,t),e=this.Ha.iterator;e.next();)e.value.Ob(t);t=this.diagram,t!==null&&t.N()}}},pickable:{get:function(){return this.oi},set:function(t){var e=this.oi;e!==t&&(this.oi=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.diagram!==null&&this.diagram.Qa())}},allowCopy:{get:function(){return this.D},set:function(t){var e=this.D;e!==t&&(this.D=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.L},set:function(t){var e=this.L;e!==t&&(this.L=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(this.Od=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&(this.wa=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ke},set:function(t){var e=this.ke;e!==t&&(this.ke=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ba},set:function(t){var e=this.Ba;e!==t&&(this.Ba=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Qb},set:function(t){var e=this.Qb;e!==t&&(this.Qb=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(this.Ma=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(this.Gb=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Rb},set:function(t){var e=this.Rb;e!==t&&(this.Rb=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.rc},set:function(t){var e=this.rc;e!==t&&(this.rc=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.g("allowSelect",e,t))}}}),oi.prototype.findObjectsNear=oi.prototype.pg,oi.prototype.findObjectsIn=oi.prototype.zf,oi.prototype.findObjectsAt=oi.prototype.Hi,oi.prototype.findObjectAt=oi.prototype.Zb,oi.className="Layer";function I(t,e){if(QS||(XT(),QS=!0),je(this),ih=this,this.qb=!0,this.Ga=null,this.ta=this.ua=0,this.Ca=null,Un){var i=this,n=function(){i.removeEventListener(W.document,"DOMContentLoaded",n,!1),i.setRTL()};W.document.body!==null?this.setRTL():i.addEventListener(W.document,"DOMContentLoaded",n,!1)}this.xl=null,vp.add("Model",Dt);var r=this;return this.mw=function(o){var l=r.partManager;if(o.model===l.diagram.model&&l.diagram.Z){l.diagram.Z=!1;try{var h=o.change;o.modelChange===""&&h===qt&&l.updateDataBindings(o.object,o.propertyName)}finally{l.diagram.Z=!0}}},this.nw=function(o){r.partManager.doModelChanged(o)},this.du=this.fu=null,PS(this),this.model=$0(),this.kh=!0,TS(this),this.layout=new Lt,this.kh=!1,this.lk=this.mk=this.kk=this.jk=this.xA=this.gk=this.Zv=null,this.nq=function(){},this.preventDefault=null,this.Tn=!1,this.Zh=new qS,t!==void 0&&(typeof t=="string"||W.Element&&t instanceof Element?Gm(this,t):e=t),this.qb=!1,e&&this.xm(e),this}var kS,ih;function PS(t){t.Pd=new fn,t.Pd.Ne(t),t.ub=17,t.bx=!1,t.Vn=!1,t.Zt="default",t.Oa=new it,t.Qy=new pt,t.sy(),t.qy(),t.mb=1,t.ja=new N(NaN,NaN).freeze(),t.au=new N(NaN,NaN),t.sa=1,t.Rq=1,t.Zu=new N(NaN,NaN).freeze(),t.fv=NaN,t.sv=1e-4,t.ov=100,t.vb=new Mt,t.et=new N(NaN,NaN).freeze(),t.Fu=new _(NaN,NaN,NaN,NaN).freeze(),t.Fj=new Ft(0,0,0,0).freeze(),t.Gj=Ks,t.at=!1,t.cw=null,t.dw=null,t.Ph=cn,t.Gk=Pi,t.Qg=cn,t.hr=Pi,t.Xu=di,t.gv=di,t.Vc=!0,t.Qn=!1,t.te=new Q,t.Xh=new pt,t.qn=!0,t.Bq=250,t.zk=-1,t.Dq=new Ft(16,16,16,16).freeze(),t.jg=!1,t.Qk=!1,t.zn=!0,t.br=new hn,t.br.diagram=t,t.gh=new hn,t.gh.diagram=t,t.rj=new hn,t.rj.diagram=t,t.zg=null,t.df=null,t.ju=!1,GT(t),t.wi=new Q,t.hv=!0,t.bt=Rl,t.jw=!1,t.dt=Bm,t.Ys="auto",t.Zi="auto",t.Ag=null,t.Ig=null,t.Cg=null,t.ah=null,t.Zg=null,t.Yg=null,t.vv=null,t.Wg=null,t.Su=!1,t.Xg=null,t.$g=null,t.uh=null,t.Dg=null,t.St=!1,t.Wt={},t.ul=[null,null],t.kh=!1,t.pw=!1,t.hu=!1,t.xt=!1,t.lw=!0,t.Wc=!1,t.nj=!1,t.px=!0,t.se=-2,t.eh=new pt,t.Oo=new it,t.Rg=!1,t.vd=!0,t.rk=!0,t.D=!0,t.L=!0,t.sk=!1,t.Im=!0,t.Od=!0,t.wa=!0,t.ke=!0,t.jt=!0,t.Ba=!0,t.Qb=!0,t.Ma=!0,t.Gb=!0,t.Rb=!0,t.rc=!0,t.Nd=!0,t.kt=!0,t.nt=!0,t.kw=!1,t.cl=!1,t.Mn=!0,t.Nn=!0,t.it=!0,t.mt=!0,t.Zs=16,t.$s=16,t.Nr=!1,t.cu=!1,t.gu=0,t.eu=0,t.nb=new Ft(5).freeze(),t.ex=new Q().freeze(),t.rv=999999999,t.Nw=new Q().freeze(),t.jj=!0,t.kj=!0,t.lj=!0,t.Ye=!1,t.Sf=!1,t.Oh=!0,t.Uf=!1,t.Gy=new Q,t.Ow=new Q,t.Zc=null,t.Xw=1,t.gx=0,t.dd={scale:1,position:new N,bounds:new _,zx:new yt,jy:new yt,by:!1},t.ox=new _(NaN,NaN,NaN,NaN).freeze(),t.Fp=new yt(NaN,NaN).freeze(),t.Tq=new _(NaN,NaN,NaN,NaN).freeze(),t.iv=!1,t.j=new pt;var e=new q,i=new Yt;i.bind(new ae("text","",ii)),e.add(i),t.My=e,t.j.add("",e),e=new q,i=new Yt,i.stroke="brown",i.bind(new ae("text","",ii)),e.add(i),t.j.add("Comment",e),e=new q,e.selectable=!1,e.avoidable=!1,i=new gt,i.figure="Ellipse",i.fill="black",i.stroke=null,i.desiredSize=new yt(3,3).ca(),e.add(i),t.j.add("LinkLabel",e),t.Bc=new pt,e=new dt,e.selectionObjectName="GROUPPANEL",e.type=X.Vertical,i=new Yt,i.font="bold 12pt sans-serif",i.bind(new ae("text","",ii)),e.add(i),i=new X(X.Auto),i.name="GROUPPANEL";var n=new gt;n.figure="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),n=new mi,n.padding=new Ft(5,5,5,5).ca(),i.add(n),e.add(i),t.Ky=e,t.Bc.add("",e),t.o=new pt,e=new H,i=new gt,i.isPanelMain=!0,e.add(i),i=new gt,i.toArrow="Standard",i.fill="black",i.stroke=null,i.strokeWidth=0,e.add(i),t.Ly=e,t.o.add("",e),e=new H,i=new gt,i.isPanelMain=!0,i.stroke="brown",e.add(i),t.o.add("Comment",e),e=new Tt,e.type=X.Auto,i=new gt,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),i=new mi,i.margin=new Ft(1.5,1.5,1.5,1.5).ca(),e.add(i),t.Dv=e,t.Ku=e,e=new Tt,e.type=X.Link,i=new gt,i.isPanelMain=!0,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),t.mv=e,t.Yd=null,t.fr=!1,t.Jk=null,t.partManager=new Dt,t.toolManager=new ee,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.ru=null,t.on=new uh,t.Sv=null,t.Yv=null,t.Yr=!1,t.commandHandler=NS(),t.Zr=!1,t.dr=null,t.er=qc,t.mx=!1,t.dc=1,t.si=null,t.wr=1,t.zr=0,t.Vw=[0,0,0,0,0],t.Ar=0,t.rr=1,t.Qw=0,t.Rw=new N,t.Xy=500,t.Cq=new N,t.Mt=!1}I.prototype.clear=function(){this.animationManager.qc(),this.model.clear(),oh=null,$a="",CS(this,!1),this.Oo.clear(),Sh(),this.eh.clear(),this.Qa(),this.Ta(),this.N()};function CS(t,e){t.animationManager.qc(!0),t.ex=new Q().freeze(),t.Nw=new Q().freeze();var i=t.skipsUndoManager,n=t.Wb!==null&&t.Wb!==void 0;n&&(t.skipsUndoManager=!0);var r=null;t.Yd!==null&&(r=t.Yd.part,r!==null&&t.remove(r));var o=[],l=t.Oa.length;if(e){for(e=0;e<l;e++)for(var h=t.Oa.m[e].parts;h.next();){var a=h.value;a!==r&&a.data===null&&o.push(a)}for(e=0;e<o.length;e++)t.remove(o[e])}for(e=0;e<l;e++)t.Oa.m[e].clear();return t.partManager.clear(),t.te.clear(),t.Xh.clear(),t.wi.clear(),t.Jk=null,t.Oo.clear(),Sh(),t.eh.clear(),re=[],r!==null&&(t.add(r),t.partManager.parts.remove(r)),n&&(t.skipsUndoManager=i),o}function NS(){return null}I.prototype.reset=function(){this.clear(),this.qb=!0,PS(this),Ro(this),this.kh=!0,TS(this),this.layout=new Lt,this.kh=!1,this.model=$0(),this.model.undoManager=new le,this.qb=this.Tn=!1,this.N()},I.prototype.setRTL=function(t){t=t===void 0?this.div:t,t===null&&(t=W.document.body);var e=J("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var i="reverse";0<e.scrollLeft?i="default":(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),t.removeChild(e),this.Zt=i},I.prototype.setScrollWidth=function(t){t=t===void 0?this.div:t,t===null&&(t=W.document.body);var e=0;if(Un){var i=XS;e=kS,i===null&&(i=XS=J("p"),i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",e=kS=J("div"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(i)),e.style.overflow="hidden",t.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",i=i.offsetWidth,n===i&&(i=e.clientWidth),t.removeChild(e),e=n-i,e!==0||zt||(e=11)}this.ub=e,this.bx=!0},I.prototype.gb=function(t){t.classType===I&&(this.autoScale=t)},I.prototype.toString=function(t){t===void 0&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.Oa.iterator;i.next();)e+=`
  `+i.value.toString(t-1);return e},I.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})},I.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,{capture:n})};function DT(t){var e=t.Ca.La;e instanceof HTMLCanvasElement&&(t.addEventListener(e,"pointerdown",t.jk,!1),t.addEventListener(e,"pointermove",t.kk,!1),t.addEventListener(e,"pointerup",t.mk,!1),t.addEventListener(e,"pointerout",t.lk,!1),t.addEventListener(e,"pointerenter",t.zz,!1),t.addEventListener(e,"pointerleave",t.Az,!1),t.addEventListener(e,"wheel",t.gk,!1),t.addEventListener(e,"keydown",t.nA,!1),t.addEventListener(e,"keyup",t.oA,!1),t.addEventListener(e,"blur",t.kz,!1),t.addEventListener(e,"focus",t.lz,!1),t.addEventListener(e,"selectstart",function(i){return i.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(i){return i.preventDefault(),!1},!1),t.addEventListener(W,"resize",t.Zv,!1),zt&&t.addEventListener(e,"touchstart",function(i){i.preventDefault()},!1))}function Ya(t){30<t.zr&&(t.si=1)}function dp(t,e){t.si!==null&&(t.si=null,e&&t.nq(),Eo&&Eo.Kx||(t.zr=0,t.Vw=[0,0,0,0,0],t.Ar=0))}I.prototype.computePixelRatio=function(){return this.si!==null?this.si:W.devicePixelRatio||1},I.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},I.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},I.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},I.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},I.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},I.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},I.prototype.doFocus=function(){this.focus()},I.prototype.focus=function(){if(this.Ca)if(this.scrollsPageOnFocus)this.Ca.focus();else{var t=W.scrollX||W.pageXOffset,e=W.scrollY||W.pageYOffset;this.Ca.focus(),W.scrollTo(t,e)}},I.prototype.lz=function(){this.C.S("GainedFocus")},I.prototype.kz=function(){this.C.S("LostFocus")};function gm(t){if(t.Ca!==null){var e=t.Ga;if(e!==null&&e.clientWidth!==0&&e.clientHeight!==0){t.bx||t.setScrollWidth();var i=t.Sf?t.ub:0,n=t.Ye?t.ub:0,r=t.dc;t.dc=t.computePixelRatio(),t.dc!==r&&(t.Qn=!0,t.Fb()),(e.clientWidth!==t.ua+i||e.clientHeight!==t.ta+n)&&(t.kj=!0,t.Vc=!0,e=t.layout,e!==null&&e.isViewportSized&&t.autoScale===cn&&(t.Qk=!0,e.B()),t.Wc||t.Fb())}}}function TS(t){var e=new oi;e.name="Background",t.Sl(e),e=new oi,e.name="",t.Sl(e),e=new oi,e.name="Foreground",t.Sl(e),e=new oi,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.Sl(e),e=new oi,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.Sl(e),e=new oi,e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.tx(e,t.Xj("Background"))}function LS(t){var e=new X(X.Grid);e.name="GRID";var i=new gt;return i.figure="LineH",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),i=new gt,i.figure="LineH",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),i=new gt,i.figure="LineH",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),i=new gt,i.figure="LineV",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),i=new gt,i.figure="LineV",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),i=new gt,i.figure="LineV",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),i=new ut,i.add(e),i.layerName="Grid",i.zOrder=0,i.isInDocumentBounds=!1,i.isAnimated=!1,i.pickable=!1,i.locationObjectName="GRID",t.add(i),t.partManager.parts.remove(i),e.visible=!1,e}function IT(){this.C.cu?this.C.cu=!1:this.C.isEnabled?this.C.Gx(this):km(this.C)}function FT(t){this.C.isEnabled?(this.C.gu=t.target.scrollTop,this.C.eu=t.target.scrollLeft):km(this.C)}I.prototype.Gx=function(t){if(this.Ca!==null){var e=this.fu,i=this.du;this.Nr=!0;var n=this.documentBounds,r=this.viewportBounds,o=this.Fj,l=n.x-o.left,h=n.y-o.top,a=n.width+o.left+o.right,c=n.height+o.top+o.bottom,p=n.right+o.right;o=n.bottom+o.bottom;var d=r.x;n=r.y;var m=r.width,x=r.height,v=r.right,S=r.bottom;r=this.scale;var P=t.scrollLeft;if(this.Vn)switch(this.Zt){case"negative":P=P+t.scrollWidth-t.clientWidth;break;case"reverse":P=t.scrollWidth-P-t.clientWidth}var k=P;m<a||x<c?(P=N.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.eu!==k&&(P.x=k/r+l,this.eu=k),this.allowVerticalScroll&&this.gu!==t.scrollTop&&(P.y=t.scrollTop/r+h,this.gu=t.scrollTop),this.position=P,N.free(P),this.kj=this.Nr=!1):(P=N.alloc(),t.Sy&&this.allowHorizontalScroll&&(l<d&&(this.position=P.h(k+l,this.position.y)),p>v&&(this.position=P.h(-(e.scrollWidth-this.ua)+k-this.ua/r+p,this.position.y))),t.Ty&&this.allowVerticalScroll&&(h<n&&(this.position=P.h(this.position.x,t.scrollTop+h)),o>S&&(this.position=P.h(this.position.x,-(e.scrollHeight-this.ta)+t.scrollTop-this.ta/r+o))),N.free(P),Hs(this),this.kj=this.Nr=!1,n=this.documentBounds,r=this.viewportBounds,p=n.right,v=r.right,o=n.bottom,S=r.bottom,l=n.x,d=r.x,h=n.y,n=r.y,m>=a&&l>=d&&p<=v&&(i.style.width="1px"),x>=c&&h>=n&&o<=S&&(i.style.height="1px"))}},I.prototype.computeBounds=function(t){return t===void 0&&(t=new _),yi(this),ES(this,t)};function ES(t,e){if(t.fixedBounds.u())return e.assign(t.fixedBounds),e.Lp(t.nb),e;for(var i=!0,n=t.Oa.m,r=n.length,o=0;o<r;o++){var l=n[o];if(l.visible&&l.isInDocumentBounds){l=l.Ha.m;for(var h=l.length,a=0;a<h;a++){var c=l[a];c.isInDocumentBounds&&c.isVisible()&&(c=c.actualBounds,c.u()&&(i?(i=!1,e.assign(c)):e.Qc(c)))}}}return i&&e.h(0,0,0,0),e.Lp(t.nb),e}I.prototype.computePartsBounds=function(t,e){e===void 0&&(e=!1);var i=null;if(mt(t))for(var n=0;n<t.length;n++){var r=t[n];!e&&r instanceof H||(r.Ta(),i===null?i=r.actualBounds.copy():i.Qc(r.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof H||(n.Ta(),i===null?i=n.actualBounds.copy():i.Qc(n.actualBounds));return i===null?new _(NaN,NaN,0,0):i};function er(t,e){if((e||t.Uf)&&!t.qb&&t.Ca!==null&&t.documentBounds.u()){if(e){var i=t.initialPosition;if(i.u()){t.position=i;return}i=N.alloc(),i.Ti(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=_.allocAt(0,0,n.width,n.height);var r=N.alloc();r.Ti(n,t.initialViewportSpot),r.h(i.x-r.x,i.y-r.y),t.position=r,_.free(n),N.free(r),N.free(i)}t.qb=!0,i=t.Ph,e&&t.Qg!==cn&&(i=t.Qg);var o=i!==cn?nh(t,i):t.scale;i=t.ja.x,n=t.ja.y,r=t.ua/o;var l=t.ta/o,h=t.Gk,a=t.hr;e&&!h.hb()&&(a.hb()||a.Mb())&&(h=a.Mb()?_t:a),mm(t,t.documentBounds,r,l,h,e),e=t.scale,t.scale=o,t.qb=!1,ps(t),rh(t,!0,!1),o=t.viewportBounds,j.w(o.x,i)&&j.w(o.y,n)&&j.w(o.width,r)&&j.w(o.height,l)||t.onViewportBoundsChanged(new _(i,n,r,l),o,e,!1)}}function nh(t,e){var i=t.Rq;if(t.Ca===null)return i;t.Ta();var n=t.documentBounds;if(!n.u())return i;var r=n.width;n=n.height;var o=t.ua+(t.Sf?t.ub:0),l=t.ta+(t.Ye?t.ub:0),h=o/r,a=l/n;return e===sh?(e=Math.min(a,h),e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===xp?(e=a>h?(l-t.ub)/n:(o-t.ub)/r,e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}I.prototype.zoomToFit=function(){var t=this.Gj;this.Gj=Ks,this.scale=nh(this,sh),t!==Ks&&(er(this,!1),mm(this,this.documentBounds,this.ua/this.sa,this.ta/this.sa,this.Gk,!1)),this.Gj=t},s=I.prototype,s.$A=function(t,e){e===void 0&&(e=sh);var i=t.width,n=t.height;if(!(i===0||n===0||isNaN(i)&&isNaN(n))){var r=1;if(e===sh||e===xp)if(isNaN(i))r=this.viewportBounds.height*this.scale/n;else if(isNaN(n))r=this.viewportBounds.width*this.scale/i;else{r=this.ua;var o=this.ta;r=e===xp?o/n>r/i?(o-(this.Ye?this.ub:0))/n:(r-(this.Sf?this.ub:0))/i:Math.min(o/n,r/i)}this.scale=r,this.position=new N(t.x,t.y)}},s.ez=function(t,e){this.Ta();var i=this.documentBounds,n=this.viewportBounds;this.position=new N(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},s.Xz=function(t){if(t instanceof ht){this.dr=t;var e=N.alloc();this.er=this.vq(t.da(di,e)),N.free(e)}else this.dr=null,this.er=qc};function mm(t,e,i,n,r,o){var l=N.allocAt(t.ja.x,t.ja.y),h=l.x,a=l.y;if(t.dr!==null){var c=N.alloc();c=t.dr.da(di,c),h=c.x-t.er.x/t.scale,a=c.y-t.er.y/t.scale,r=Ze,N.free(c)}(o||t.scrollMode===Ks)&&(r.hb()&&(i>e.width&&(h=e.x+(r.x*e.width+r.offsetX)-(r.x*i-r.offsetX)),n>e.height&&(a=e.y+(r.y*e.height+r.offsetY)-(r.y*n-r.offsetY))),r=t.Fj,o=i-e.width,i<e.width+r.left+r.right?(h=Math.min(h+i/2,e.right+Math.max(o,r.right)-i/2),h=Math.max(h,e.left-Math.max(o,r.left)+i/2),h-=i/2):h>e.left?h=e.left:h<e.right-i&&(h=e.right-i),i=n-e.height,n<e.height+r.top+r.bottom?(a=Math.min(a+n/2,e.bottom+Math.max(i,r.bottom)-n/2),a=Math.max(a,e.top-Math.max(i,r.top)+n/2),a-=n/2):a>e.top?a=e.top:a<e.bottom-n&&(a=e.bottom-n)),l.x=isFinite(h)?h:-t.nb.left,l.y=isFinite(a)?a:-t.nb.top,t.positionComputation!==null&&(e=t.positionComputation(t,l),l.x=e.x,l.y=e.y),fS(t.Pd,t.ja,l),t.ja.h(l.x,l.y),Ro(t),N.free(l)}s.Zl=function(t,e){if(e===void 0&&(e=!0),e){if(t=vm(this,t,function(i){return i.part},function(i){return i.canSelect()}),t instanceof ut)return t}else if(t=vm(this,t,function(i){return i.part}),t instanceof ut)return t;return null},s.Zb=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null),yi(this);for(var n=this.Oa.iteratorBackwards;n.next();){var r=n.value;if(r.visible&&(r=r.Zb(t,e,i),r!==null))return r}return null};function vm(t,e,i,n){for(i===void 0&&(i=null),n===void 0&&(n=null),yi(t),t=t.Oa.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&(r=r.Zb(e,i,n),r!==null))return r}return null}s.Kz=function(t,e,i){return e===void 0&&(e=!0),RT(this,t,function(n){return n.part},e?function(n){return n instanceof ut&&n.canSelect()}:null,i)};function RT(t,e,i,n,r){for(i===void 0&&(i=null),n===void 0&&(n=null),r instanceof it||r instanceof Q||(r=new Q),yi(t),t=t.Oa.iteratorBackwards;t.next();){var o=t.value;o.visible&&!o.isTemporary&&o.Hi(e,i,n,r)}return r}s.Hi=function(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n instanceof it||n instanceof Q||(n=new Q),yi(this);for(var r=this.Oa.iteratorBackwards;r.next();){var o=r.value;o.visible&&o.Hi(t,e,i,n)}return n},s.Px=function(t,e,i,n){return e===void 0&&(e=!1),i===void 0&&(i=!0),BT(this,t,function(r){return r instanceof ut&&(!i||r.canSelect())},e,n)},s.zf=function(t,e,i,n,r){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof it||r instanceof Q||(r=new Q),yi(this);for(var o=this.Oa.iteratorBackwards;o.next();){var l=o.value;l.visible&&l.zf(t,e,i,n,r)}return r},s.Qu=function(t,e,i,n,r,o){var l=new Q;yi(this);for(var h=this.Oa.iteratorBackwards;h.next();){var a=h.value;a.visible&&a.Qu(t,e,i,n,l,r,o)}return l};function BT(t,e,i,n,r){var o=null;for(i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof it||r instanceof Q||(r=new Q),yi(t),t=t.Oa.iteratorBackwards;t.next();){var l=t.value;l.visible&&!l.isTemporary&&l.zf(e,o,i,n,r)}return r}s.Lz=function(t,e,i,n,r){return i===void 0&&(i=!0),n===void 0&&(n=!0),VT(this,t,e,function(o){return o instanceof ut&&(!n||o.canSelect())},i,r)},s.pg=function(t,e,i,n,r,o){i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof it||r instanceof Q)&&(o=r),r=!0),o instanceof it||o instanceof Q||(o=new Q),yi(this);for(var l=this.Oa.iteratorBackwards;l.next();){var h=l.value;h.visible&&h.pg(t,e,i,n,r,o)}return o};function VT(t,e,i,n,r,o){var l=null;for(n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof it||r instanceof Q)&&(o=r),r=!0),o instanceof it||o instanceof Q||(o=new Q),yi(t),t=t.Oa.iteratorBackwards;t.next();){var h=t.value;h.visible&&!h.isTemporary&&h.pg(e,i,l,n,r,o)}return o}I.prototype.acceptEvent=function(t){return Fl(this,t,t instanceof MouseEvent)};function Fl(t,e,i){var n=t.gh;return t.gh=t.rj,t.rj=n,n.diagram=t,n.event=e,i?Xa(t,e,n):(n.viewPoint=t.gh.viewPoint,n.documentPoint=t.gh.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,e.buttons!==void 0&&(n.buttons=e.buttons),zt&&e.button===0&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=xm(e,e.target),n.targetObject=null,n}function xm(t,e){return e===null?null:(e=e.C)?e:((e=t.path)||typeof t.composedPath!="function"||(e=t.composedPath()),e&&e[0]&&e[0].C?e[0].C:null)}function wm(t,e,i,n,r,o){var l=t.gh;return t.gh=t.rj,t.rj=l,l.diagram=t,l.clickCount=1,t=l.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),l.modifiers=t,l.event=e,l.timestamp=e.timeStamp,l.button=e.button,l.buttons=e.buttons,zt&&e.button===0&&e.ctrlKey&&(l.button=2),l.down=i,l.up=n,l.handled=!1,l.bubbles=r,l.isMultiTouch=o,l}function Ws(t,e){return t.bubbles?!0:(e.stopPropagation!==void 0&&e.stopPropagation(),e.cancelable!==!1&&e.preventDefault(),e.cancelBubble=!0,!1)}I.prototype.nA=function(t){var e=this.C;if(!this.C.isEnabled)return!1;var i=Fl(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return e.doKeyDown(),Ws(i,t)},I.prototype.oA=function(t){var e=this.C;if(!e.isEnabled)return!1;var i=Fl(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return e.doKeyUp(),Ws(i,t)},I.prototype.zz=function(t){var e=this.C;if(!e.isEnabled)return!1;var i=Fl(e,t,!0);return e.mouseEnter!==null&&e.mouseEnter(i),Ws(i,t)},I.prototype.Az=function(t){var e=this.C;if(!e.isEnabled)return!1;var i=Fl(e,t,!0);return e.mouseLeave!==null&&e.mouseLeave(i),Ws(i,t)},I.prototype.getMouse=function(t){var e=this.Ca;if(e===null)return new N(0,0);var i=e.getBoundingClientRect();return e=t.clientX-this.ua/i.width*i.left,t=t.clientY-this.ta/i.height*i.top,this.vb!==null?ci(new N(e,t),this.vb):new N(e,t)};function Xa(t,e,i){var n=t.Ca,r=t.ua,o=t.ta,l=0,h=0;n!==null&&(n=n.getBoundingClientRect(),l=e.clientX-r/n.width*n.left,h=e.clientY-o/n.height*n.top),i.viewPoint.h(l,h),t.vb!==null?(e=N.allocAt(l,h),t.vb.Hd(e),i.documentPoint.assign(e),N.free(e)):i.documentPoint.h(l,h)}function OS(t,e,i,n){if(e.targetTouches!==void 0){if(2>e.targetTouches.length)return;e=e.targetTouches[i]}else if(t.ul[0]!==null)e=t.ul[i];else return;i=t.Ca,i!==null&&(i=i.getBoundingClientRect(),n.h(e.clientX-t.ua/i.width*i.left,e.clientY-t.ta/i.height*i.top))}I.prototype.Qa=function(){this.jj||(this.jj=!0,this.Fb(!0))};function _T(t){t.Wc||yi(t),t.Ta()}I.prototype.redraw=function(){this.qb||this.Wc||(this.N(),ps(this),this.gd())},s=I.prototype,s.mA=function(){return this.jg},s.uz=function(t){t===void 0&&(t=null);var e=this.animationManager,i=e.isEnabled;e.qc(),e.isEnabled=!1,cs(this),this.Uf=!1,this.au=new N(NaN,NaN),e.isEnabled=i,this.Wc=!0;var n=this;t!==null&&F(function(){n.Wc=!1,Do(e,"Model"),t(n)},1)},s.Fb=function(t){if(t===void 0&&(t=!1),this.jg!==!0&&!(this.qb||t===!1&&this.Wc)){this.jg=!0;var e=this;W.requestAnimationFrame(function(){e.jg&&e.gd()})}},s.gd=function(){(!this.zn||this.jg)&&(this.zn&&(this.zn=!1),cs(this))};function rh(t,e,i){t.animationManager.defaultAnimation.isAnimating||t.qb||!t.kj||km(t)||(e&&yi(t),i&&er(t,!1))}function cs(t,e){if(!t.Wc&&(t.jg=!1,t.Ga!==null||t.Fp.u())){t.Wc=!0;var i=t.animationManager,n=t.Oo;if(!i.isAnimating&&n.length!==0){for(var r=n.m,o=r.length,l=0;l<o;l++){var h=r[l];pn(h,!1),h.s()}n.clear()}n=t.Ow,0<n.count&&(n.each(function(a){a.Xv()}),n.clear()),r=n=!1,i.defaultAnimation.isAnimating&&(r=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.tb||gm(t),rh(t,!1,!0),t.Yd!==null&&(t.Yd.visible&&!t.fr&&(Fo(t),t.fr=!0),!t.Yd.visible&&t.fr&&(t.fr=!1)),yi(t),o=!1,(!t.Uf||t.Oh)&&(t.Uf?jm(t,!t.Qk):(t.xa("Initial Layout"),i.isEnabled===!1&&i.qc(),jm(t,!1)),o=!0),t.Qk=!1,yi(t),t.hu||_T(t),rh(t,!0,!1),l=!1,o?(i=_.alloc(),i.assign(t.viewportBounds),t.Uf||(l=t.Uf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,UT(t)),t.S("LayoutCompleted"),i.A(t.viewportBounds)||rh(t,!0,!1),_.free(i)):i.Xk&&i.nx&&(t.Qg!==cn?t.scale=nh(t,t.Qg):t.Ph!==cn?t.scale=nh(t,t.Ph):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),er(t,!0)),yi(t),o&&l&&t.Xa("Initial Layout"),t.Au(),e||t.oc(t.Vb),r&&(t.skipsUndoManager=n),t.Wc=!1}}function UT(t){var e=t.sa;if(t.Qg!==cn)t.scale=nh(t,t.Qg);else if(t.Ph!==cn)t.scale=nh(t,t.Ph);else{var i=t.initialScale;isFinite(i)&&0<i&&(t.scale=i)}t.sa!==e&&(ps(t),rh(t,!0,!1)),er(t,!0),e=t.Oa.m,t.Md(e,e.length,t,t.viewportBounds),t.S("InitialLayoutCompleted"),t.au.assign(t.ja),Fo(t)}function yi(t){if(t.te.count!==0&&(t.Wc||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var i=t.te.iterator;if(i===null||t.te.count===0)break;t.te=new Q,t.Xv(i,t.te)}t.nodes.each(function(n){n instanceof dt&&(n.R&65536)!==0&&(n.R=n.R^65536)})}}s.Xv=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Mc()||i instanceof dt||(i.Ri()?(i.measure(1/0,1/0),i.arrange()):e.add(i))}for(t.reset();t.next();)i=t.value,i instanceof dt&&i.isVisible()&&Sm(this,i);for(t.reset();t.next();)i=t.value,i instanceof H&&i.isVisible()&&(i.Ri()?(i.measure(1/0,1/0),i.arrange()):e.add(i));for(t.reset();t.next();)i=t.value,i instanceof Tt&&i.isVisible()&&(i.Ri()?(i.measure(1/0,1/0),i.arrange()):e.add(i))};function Sm(t,e){for(var i=Et(),n=Et(),r=e.memberParts;r.next();){var o=r.value;o.isVisible()&&(o instanceof dt?(ho(o)||Nn(o)||Yo(o))&&Sm(t,o):o instanceof H?o.fromNode===e||o.toNode===e?n.push(o):i.push(o):(o.measure(1/0,1/0),o.arrange()))}for(t=i.length,r=0;r<t;r++)o=i[r],o.measure(1/0,1/0),o.arrange();for(Ut(i),e.measure(1/0,1/0),e.arrange(),t=n.length,e=0;e<t;e++)i=n[e],i.measure(1/0,1/0),i.arrange();Ut(n)}s.Md=function(t,e,i,n){if(this.lj||this.animationManager.isAnimating)for(var r=0;r<e;r++)t[r].Md(i,n)},s.oc=function(t,e){if(this.Ga!==null){this.Ca===null&&D("No canvas specified");var i=this.animationManager;if(!i.tb&&(!i.isAnimating||i.isTicking)){var n=new Date;if(Ha(this),this.Ga.style.opacity!=="0"){var r=t!==this.Vb,o=this.Oa.m,l=o.length,h=this;if(this.Md(o,l,h,h.viewportBounds),r)t.Hc(!0),Hs(this);else if(!this.Vc&&e===void 0&&!i.isAnimating)return;l=this.ja;var a=this.sa,c=Math.round(l.x*a)/a,p=Math.round(l.y*a)/a;for(i=this.vb,i.reset(),a!==1&&i.scale(a),l.x===0&&l.y===0||i.translate(-c,-p),a=this.dc,t.setTransform(a,0,0,a,0,0),t.clearRect(0,0,this.ua,this.ta),this.mb!==1&&(t.globalAlpha=this.mb),Mm(this,t),c=e!==void 0?function(d){if(d.visible&&d.mb!==0){var m=d.Ha.m,x=m.length;if(x!==0){var v=eh(d,t),S=d.Jo;S.length=0;for(var P=h.scale,k=_.alloc(),L=0;L<x;L++){var T=m[L];e.contains(T)||d.Di(t,T,h,S,P,k,!0)}_.free(k),t.globalAlpha=v}}}:function(d){d.oc(t,h)},l=o.length,p=0;p<l;p++)t.setTransform(a,0,0,a,0,0),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),c(o[p]);if(o=!1,this.Zh?Ja(this.Zh,this)&&(o=this.zt()):o=!0,o&&(Mt.prototype.Hd=Mt.prototype.yx),r?(this.Vb.Hc(!0),Hs(this)):this.Vc=this.lj=!1,o=+new Date-+n,r=Eo&&Eo.Kx,n=this.Vw,r||this.si===null){for(n[this.Ar]=o,this.Ar=(this.Ar+1)%n.length,i=o=0;i<n.length;i++)o+=n[i];this.zr=o/n.length}if(this.mb!==1&&(t.globalAlpha=1),r)for(t.setTransform(1,0,0,1,0,0),r=0;r<n.length;r++)t.fillText(n[r].toString(),20,150+ +(20*r))}}}};function yp(t,e,i,n,r,o,l,h,a,c){if(t.Ga!==null){t.Ca===null&&D("No canvas specified"),l===void 0&&(l=null),h===void 0&&(h=null),a===void 0&&(a=!1),c===void 0&&(c=!1),Ha(t),t.Vb.Hc(!0),Hs(t),t.nj=!0;var p=t.sa;t.sa=r;var d=t.Oa.m,m=d.length;try{var x=new _(o.x,o.y,n.width/r,n.height/r),v=x.copy();v.Lp(i),Fo(t,v),yi(t),t.Md(d,m,t,x),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),h!==null&&h!==""&&(e.fillStyle=h,e.fillRect(0,0,n.width,n.height));var S=t.dc;e.scale(S,S);var P=Mt.alloc();P.reset(),P.translate(i.left,i.top),P.scale(r),o.x===0&&o.y===0||P.translate(-o.x,-o.y),e.setTransform(P.m11,P.m12,P.m21,P.m22,P.dx,P.dy),Mt.free(P),Mm(t,e),e.globalAlpha=t.mb;var k=t.Xj("Grid");if(l){var L=new Q,T=l.iterator;for(T.reset();T.next();){var O=T.value;O instanceof ut&&(c||O.layer!==k)&&L.add(O)}for(c=0;c<m;c++){var E=d[c];k=e;var V=t;if(E.visible&&E.mb!==0&&(a||!E.isTemporary)){var $=E.Ha.m,b=$.length;if(b!==0){var nt=eh(E,k),et=E.Jo;et.length=0;var G=V.scale,vt=_.alloc();for(i=0;i<b;i++){var ft=$[i];L.contains(ft)&&E.Di(k,ft,V,et,G,vt,!1)}_.free(vt),k.globalAlpha=nt}}}}else for(L=0;L<m;L++)V=d[L],V===k?c&&V.oc(e,t,!0):V.oc(e,t,a);t.nj=!1,t.Zh&&Ja(t.Zh,t)&&t.zt()}finally{t.sa=p,t.Vb.Hc(!0),Hs(t),t.Md(d,m,t,t.viewportBounds),Fo(t)}}}s.Ie=function(t){return this.hh[t]},s.wy=function(t,e){t==="minDrawingLength"&&(this.wr=e),this.hh[t]=e,this.redraw()},s.sy=function(){this.hh=new Je,this.hh.drawShadows=!0,this.hh.textGreeking=!0,this.hh.viewportOptimizations=!(zt||Qc),this.hh.temporaryPixelRatio=!0,this.hh.pictureRatioOptimization=!0,this.wr=this.hh.minDrawingLength=1};function Mm(t,e){t=t.hh,t!==null&&(t.imageSmoothingEnabled!==void 0&&e.vy(!!t.imageSmoothingEnabled),t=t.defaultFont,t!=null&&(e.font=t))}s.am=function(t){return this.Pn[t]},s.OA=function(t,e){this.Pn[t]=e},s.qy=function(){this.Pn=new Je,this.Pn.extraTouchArea=10,this.Pn.extraTouchThreshold=10,this.Pn.hasGestureZoom=!0},s.set=function(t){return Object.assign(this,t),this},s.wu=function(t){return this.xm(t)},s.xm=function(t){return Wa(this,t),this};function Wa(t,e){var i=t instanceof X,n=t instanceof I,r;for(r in e){r===""&&D("Setting properties requires non-empty property names");var o=t,l=r;if(i||n){var h=r.indexOf(".");if(0<h){var a=r.substring(0,h);i?o=t.Ya(a):(o=t[a],o==null&&(o=t.toolManager[a])),ct(o)?l=r.substr(h+1):D("Unable to find object named: "+a+" in "+t.toString()+" when trying to set property: "+r)}}if(l[0]!=="_"&&!hs(o,l))if(n&&l==="ModelChanged"){t.vx(e[l]);continue}else if(n&&l==="Changed"){t.yh(e[l]);continue}else if(n&&hs(t.toolManager,l))o=t.toolManager;else if(n&&VS(t,l)){t.Lj(l,e[l]);continue}else if(t instanceof ot&&l==="Changed"){t.yh(e[l]);continue}else D('Trying to set undefined property "'+l+'" on object: '+o.toString());o[l]=e[r],l[0]==="_"&&o instanceof ht&&o.sx(l)}}s.Au=function(){if(this.undoManager.transactionLevel===0&&this.Xh.count!==0){for(;0<this.Xh.count;){var t=this.Xh;for(this.Xh=new pt,t=t.iterator;t.next();){var e=t.key;e.eq(t.value),e.fc(!1)}}this.N()}},s.N=function(t){if(t===void 0)this.Vc=!0,this.Fb();else{var e=this.viewportBounds;t.u()&&e.Lc(t)&&(this.Vc=!0,this.Fb())}this.S("InvalidateDraw")},I.prototype.invalidateViewport=function(t,e){if(this.Vc!==!0){this.Vc=!0;var i=this.Ie("temporaryPixelRatio")===!0;if(this.Ie("viewportOptimizations")===!0&&this.scrollMode!==Vm&&this.Fj.Fi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,r=Math.max(t.x,e.x),o=Math.max(t.y,e.y);if(n=_.allocAt(r,o,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-r)*n,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-o)*n),!this.Zr&&0<n.width&&0<n.height){if(!(this.Wc||(this.jg=!1,this.Ga===null||(this.Wc=!0,this.Au(),this.documentBounds.u()||(r=_.alloc(),Am(this,this.computeBounds(r)),_.free(r)),r=this.Ca,r===null||r instanceof ao)))){var l=this.dc;o=this.ua*l;var h=this.ta*l,a=this.scale*l,c=Math.round(Math.round(e.x*a)-Math.round(t.x*a));e=Math.round(Math.round(e.y*a)-Math.round(t.y*a)),a=this.Iw,t=this.Ny,a.width!==o&&(a.width=o),a.height!==h&&(a.height=h),t.clearRect(0,0,o,h),a=190*l;var p=70*l,d=Math.max(c,0),m=Math.max(e,0),x=Math.floor(o-d),v=Math.floor(h-m);t.drawImage(r.La,d,m,x,v,0,0,x,v),Ja(this.Zh,this)&&t.clearRect(0,0,a,p),r=Et(),t=Et(),v=Math.abs(c),x=Math.abs(e);var S=d===0?0:o-v;d=N.allocAt(S,0),v=N.allocAt(v+S,h),t.push(new _(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y)));var P=this.vb;if(P.reset(),P.scale(l,l),this.sa!==1&&P.scale(this.sa),l=this.ja,(l.x!==0||l.y!==0)&&isFinite(l.x)&&isFinite(l.y)&&P.translate(-l.x,-l.y),ci(d,P),ci(v,P),r.push(new _(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),S=m===0?0:h-x,d.h(0,S),v.h(o,x+S),t.push(new _(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),ci(d,P),ci(v,P),r.push(new _(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),Ja(this.Zh,this)&&(o=0<c?0:-c,h=0<e?0:-e,d.h(o,h),v.h(a+o,p+h),t.push(new _(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),ci(d,P),ci(v,P),r.push(new _(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y)))),N.free(d),N.free(v),rh(this,!1,!0),this.Ga===null&&D("No div specified"),this.Ca===null&&D("No canvas specified"),!this.animationManager.tb&&(o=this.Vb,this.Vc)){for(Ha(this),h=this.dc,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,this.ua*h,this.ta*h),o.drawImage(this.Iw.La,0<c?0:Math.round(-c),0<e?0:Math.round(-e)),c=this.ja,l=this.sa,a=Math.round(c.x*l)/l,p=Math.round(c.y*l)/l,e=this.vb,e.reset(),l!==1&&e.scale(l),c.x===0&&c.y===0||e.translate(-a,-p),o.save(),o.beginPath(),c=t.length,l=0;l<c;l++)a=t[l],a.width!==0&&a.height!==0&&o.rect(Math.floor(a.x),Math.floor(a.y),Math.ceil(a.width),Math.ceil(a.height));for(o.clip(),o.setTransform(1,0,0,1,0,0),o.scale(h,h),o.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),e=this.Oa.m,c=e.length,this.Md(e,c,this,this.viewportBounds),Mm(this,o),o.globalAlpha=this.mb,h=0;h<c;h++)if(l=e[h],a=r,l.visible&&l.mb!==0){p=eh(l,o),m=l.Jo,m.length=0,d=this.scale,x=_.alloc(),v=l.Ha.m,P=v.length,S=a.length;for(var k=0;k<P;k++){var L=v[k],T=Xl(L,L.actualBounds);t:{for(var O=2/d,E=4/d,V=0;V<S;V++){var $=a[V];if($.width!==0&&$.height!==0&&T.av($.x-O,$.y-O,$.width+E,$.height+E)){T=!0;break t}}T=!1}T&&l.Di(o,L,this,m,d,x,!0)}_.free(x),o.globalAlpha=p}o.restore(),o.Hc(!0),this.Zh&&Ja(this.Zh,this)&&this.zt(),this.Vc=this.lj=!1,this.nq()}Ut(r),Ut(t),this.Wc=!1}}else this.gd();_.free(n),i&&(Ya(this),this.gd(),dp(this,!0))}else i?(Ya(this),this.gd(),dp(this,!0)):this.gd()}};function ps(t){t.kj===!1&&(t.kj=!0)}function Hs(t){t.lj===!1&&(t.lj=!0)}function Ha(t){t.Qn!==!1&&(t.Qn=!1,AS(t,t.ua,t.ta))}function AS(t,e,i){Ro(t);var n=t.dc;t.Ca.resize(e*n,i*n,e,i)&&(t.Vc=!0,t.Vb.Hc(!0))}function km(t){var e=t.Ca;if(e===null||t.Fp.u())return!0;var i=t.ua,n=t.ta,r=t.viewportBounds;if(!t.viewportBounds.u())return!0;var o=r.x,l=r.y,h=r.width,a=r.height,c=t.fu,p=t.du,d=t.Ga,m=!1,x=t.Sf?t.ub:0,v=t.Ye?t.ub:0,S=d.clientWidth||i+x,P=d.clientHeight||n+v;if((S!==i+x||P!==n+v)&&(t.Sf=!1,t.Ye=!1,v=x=0,t.ua=S,t.ta=P,m=t.Qn=!0,Ro(t)),!(m||t.Sf||t.Ye||t.Mn||t.Nn))return!0;t.kj=!1;var k=t.documentBounds,L=0,T=0,O=0,E=0;d=r.width;var V=r.height,$=t.Fj;t.contentAlignment.hb()?(k.width>d&&(L=$.left,T=$.right),k.height>V&&(O=$.top,E=$.bottom)):(L=$.left,T=$.right,O=$.top,E=$.bottom),$=k.width+L+T;var b=k.height+O+E;L=k.x-L;var nt=r.x;T=k.right+T;var et=r.right+x;O=k.y-O;var G=r.y;k=k.bottom+E,E=r.bottom+v;var vt="1px",ft="1px";if(r=t.scale,S=$>S/r,P=b>P/r,t.scrollMode===Ks&&(S||P)&&(S&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(S=1,L+1<nt&&(S=Math.max((nt-L)*r+t.ua,S)),T>et+1&&(S=Math.max((T-et)*r+t.ua,S)),d+x+1<$&&(S=Math.max(($-d)*r+t.ua,S)),vt=S.toString()+"px"),P&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(S=1,O+1<G&&(S=Math.max((G-O)*r+t.ta,S)),k>E+1&&(S=Math.max((k-E)*r+t.ta,S)),V+v+1<b&&(S=Math.max((b-V)*r+t.ta,S)),ft=S.toString()+"px")),S=vt!=="1px",P=ft!=="1px",S&&P||!S&&!P||(P&&(et-=t.ub),S&&(E-=t.ub),$<d+x||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(x=1,L+1<nt&&(x=Math.max((nt-L)*r+t.ua,x)),T>et+1&&(x=Math.max((T-et)*r+t.ua,x)),d+1<$&&(x=Math.max(($-d)*r+t.ua,x)),vt=x.toString()+"px"),S=vt!=="1px",x=t.ta,S!==t.Ye&&(x=S?t.ta-t.ub:t.ta+t.ub),b<V+v||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(v=1,O+1<G&&(v=Math.max((G-O)*r+x,v)),k>E+1&&(v=Math.max((k-E)*r+x,v)),V+1<b&&(v=Math.max((b-V)*r+x,v)),ft=v.toString()+"px"),P=ft!=="1px"),t.Nr&&S===t.Ye&&P===t.Sf)return i===t.ua&&n===t.ta||t.gd(),!1;if(S!==t.Ye&&(vt==="1px"?t.ta=t.ta+t.ub:t.ta=Math.max(t.ta-t.ub,1),m=!0),t.Ye=S,p.style.width=vt,P!==t.Sf&&(ft==="1px"?t.ua=t.ua+t.ub:t.ua=Math.max(t.ua-t.ub,1),m=!0,t.Vn&&(v=N.alloc(),P?(e.style.left=t.ub+"px",t.position=v.h(t.ja.x+t.ub/t.scale,t.ja.y)):(e.style.left="0px",t.position=v.h(t.ja.x-t.ub/t.scale,t.ja.y)),N.free(v))),m&&Ro(t),t.Sf=P,p.style.height=ft,t.cu=!0,m&&(t.Qn=!0),e=c.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(d+1<$?e=(t.position.x-L)*r:L+1<nt?e=c.scrollWidth-c.clientWidth:T>et+1&&(e=t.position.x*r)),t.Vn)switch(t.Zt){case"negative":e=-(c.scrollWidth-e-c.clientWidth);break;case"reverse":e=c.scrollWidth-e-c.clientWidth}return c.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(V+1<b?c.scrollTop=(t.position.y-O)*r:O+1<G?c.scrollTop=c.scrollHeight-c.clientHeight:k>E+1&&(c.scrollTop=t.position.y*r)),S=t.ua,P=t.ta,c.style.width=S+(t.Sf?t.ub:0)+"px",c.style.height=P+(t.Ye?t.ub:0)+"px",i!==S||n!==P||t.animationManager.tb?(i=_.allocAt(o,l,h,a),t.onViewportBoundsChanged(i,t.viewportBounds,r,m),_.free(i),!1):!0}s=I.prototype,s.add=function(t){var e=t.diagram;if(e!==this&&(e!==null&&D("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),e=this.Xj(t.layerName),e===null&&(e=this.Xj("")),e===null&&D('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var i=e.Ni(99999999,t,t.diagram===this);0<=i&&this.Wa(ve,"parts",e,null,t,null,i),e.isTemporary||this.Qa(),t.B(1),i=t.layerChanged,i!==null&&i(t,null,e)}},s.Ni=function(t){this.partManager.Ni(t);var e=this;qs(t,function(i){FS(e,i)}),(t instanceof Tt||t instanceof dt&&t.placeholder!==null)&&t.s(),t.data!==null&&qs(t,function(i){W0(e.partManager,i)}),Nn(t)!==!0&&Yo(t)!==!0||this.te.add(t),HM(t,!0,this),$M(t)?(t.actualBounds.u()&&this.N(Xl(t,t.actualBounds)),this.Qa()):t.isVisible()&&t.actualBounds.u()&&this.N(Xl(t,t.actualBounds)),this.Fb()},s.ec=function(t){t.Oj(),this.partManager.ec(t);var e=this;t.data!==null&&qs(t,function(i){H0(e.partManager,i,e)}),this.te.remove(t),$M(t)?(t.actualBounds.u()&&this.N(Xl(t,t.actualBounds)),this.Qa()):t.isVisible()&&t.actualBounds.u()&&this.N(Xl(t,t.actualBounds)),this.Fb()},s.remove=function(t){Pm(this,t,!0)};function Pm(t,e,i){var n=e.layer;n!==null&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.B(2),i&&e.Uj(),i=n.ec(-1,e,!1),0<=i&&t.Wa(Ne,"parts",n,e,null,i,null),t=e.layerChanged,t!==null&&t(e,n,null))}s.Ps=function(t,e){if(e===void 0&&(e=!1),mt(t))for(var i=t.length,n=0;n<i;n++){var r=t[n];e&&!r.canDelete()||this.remove(r)}else for(i=new Q,i.addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},s.Tj=function(t,e,i){return i===void 0&&(i=!1),this.partManager.Tj(t,e,i)},I.prototype.moveParts=function(t,e,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=Nm(this)),this.toolManager!==null){var r=new pt;if(t!==null)if(mt(t))for(var o=0;o<t.length;o++)Io(this,r,t[o],i,n);else for(t=t.iterator;t.next();)Io(this,r,t.value,i,n);else{for(t=this.parts;t.next();)Io(this,r,t.value,i,n);for(t=this.nodes;t.next();)Io(this,r,t.value,i,n);for(t=this.links;t.next();)Io(this,r,t.value,i,n)}Cm(this,r,e,n,i)}};function Io(t,e,i,n,r,o){if(!e.contains(i)&&(o===void 0&&(o=!1),!n||o||i.canMove()||i.canCopy()))if(r===void 0&&(r=Nm(t)),i instanceof q){if(e.add(i,t.Ad(r,i,i.location)),i instanceof dt&&(i.placeholder!==null||r.dragsMembers))for(o=i.memberParts;o.next();)Io(t,e,o.value,n,r,r.groupsAlwaysMove);for(o=i.linksConnected;o.next();){var l=o.value;if(!e.contains(l)){var h=l.fromNode,a=l.toNode;h!==null&&e.contains(h)&&a!==null&&e.contains(a)&&Io(t,e,l,n,r)}}if(r.dragsTree)for(i=i.Ru();i.next();)Io(t,e,i.value,n,r)}else if(i instanceof H)for(e.add(i,t.Ad(r,i)),i=i.labelNodes;i.next();)Io(t,e,i.value,n,r);else i instanceof Tt||e.add(i,t.Ad(r,i,i.location))}function Cm(t,e,i,n,r){if(e!==null&&e.count!==0){var o=N.alloc(),l=N.alloc();l.assign(i),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),(i=t.Yr)||gp(t,e);for(var h=Et(),a=Et(),c=e.iterator,p=N.alloc();c.next();){var d=c.key,m=c.value;if(d.Mc()){var x=jS(t,d,e);x!==null?h.push(new tM(d,m,x)):(!r||d.canMove())&&(x=m.point,o.assign(x),t.computeMove(d,o.add(l),n,p),d.location=p,m.shifted===void 0&&(m.shifted=new N),m.shifted.assign(p.ie(x)))}else c.key instanceof H&&a.push(c.ka)}for(N.free(p),r=h.length,c=0;c<r;c++)d=h[c],o.assign(d.info.point),d.Wu.shifted===void 0&&(d.Wu.shifted=new N),d.node.location=o.add(d.Wu.shifted);for(r=N.alloc(),c=N.alloc(),d=a.length,m=0;m<d;m++){var v=a[m];if(x=v.key,x instanceof H)if(x.suspendsRouting){x.gf=null,p=x.fromNode;var S=x.toNode;if(t.draggedLink!==null&&n.dragsLink)if(S=v.value.point,x.dragComputation===null)e.add(x,t.Ad(n,x,l)),Xo(x,l.x-S.x,l.y-S.y);else{v=N.allocAt(0,0),(p=x.i(0))&&p.u()&&v.assign(p);var P=p=N.alloc().assign(v).add(l);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&(P=N.alloc(),Tm(t,x,p,P,n)),p.assign(x.dragComputation(x,p,P)).ie(v),e.add(x,t.Ad(n,x,p)),Xo(x,p.x-S.x,p.y-S.y),N.free(v),N.free(p),P!==p&&N.free(P)}else p!==null&&(r.assign(p.location),P=e.H(p),P!==null&&r.ie(P.point)),S!==null&&(c.assign(S.location),P=e.H(S),P!==null&&c.ie(P.point)),p!==null&&S!==null?r.Ua(c)?(p=v.value.point,S=o,S.assign(r),S.ie(p),e.add(x,t.Ad(n,x,r)),Xo(x,S.x,S.y)):(x.suspendsRouting=!1,x.Va()):(v=v.value.point,p=p!==null?r:S!==null?c:l,e.add(x,t.Ad(n,x,p)),Xo(x,p.x-v.x,p.y-v.y))}else(x.fromNode===null||x.toNode===null)&&(p=v.value.point,e.add(x,t.Ad(n,x,l)),Xo(x,l.x-p.x,l.y-p.y))}N.free(o),N.free(l),N.free(r),N.free(c),Ut(h),Ut(a),i||(yi(t),Ka(t,e))}}I.prototype.computeMove=function(t,e,i,n){if(n===void 0&&(n=new N),n.assign(e),t===null)return n;var r=e,o=i.isGridSnapEnabled;o&&(i.isGridSnapRealtime||this.lastInput.up)&&(r=N.alloc(),Tm(this,t,e,r,i)),i=t.dragComputation!==null?t.dragComputation(t,e,r):r;var l=t.minLocation,h=l.x;isNaN(h)&&(h=o?Math.round(1e3*t.location.x)/1e3:t.location.x),l=l.y,isNaN(l)&&(l=o?Math.round(1e3*t.location.y)/1e3:t.location.y);var a=t.maxLocation,c=a.x;return isNaN(c)&&(c=o?Math.round(1e3*t.location.x)/1e3:t.location.x),a=a.y,isNaN(a)&&(a=o?Math.round(1e3*t.location.y)/1e3:t.location.y),n.h(Math.max(h,Math.min(i.x,c)),Math.max(l,Math.min(i.y,a))),r!==e&&N.free(r),n};function Nm(t){var e=t.toolManager.findTool("Dragging");return e!==null?e.dragOptions:t.on}function Tm(t,e,i,n,r){if(r===void 0&&(r=Nm(t)),n.assign(i),e!==null){var o=t.grid;e=r.gridSnapCellSize,t=e.width,e=e.height;var l=r.gridSnapOrigin,h=l.x;if(l=l.y,r=r.gridSnapCellSpot,o!==null){var a=o.gridCellSize;isNaN(t)&&(t=a.width),isNaN(e)&&(e=a.height),o=o.gridOrigin,isNaN(h)&&(h=o.x),isNaN(l)&&(l=o.y)}o=N.allocAt(0,0),o.Ui(0,0,t,e,r),j.Wp(i.x,i.y,h+o.x,l+o.y,t,e,n),N.free(o)}}function gp(t,e){if(e!==null)for(t.Yr=!0,t=e.iterator;t.next();)e=t.key,e instanceof H&&(e.suspendsRouting=!0)}function Ka(t,e){if(e!==null){for(e=e.iterator;e.next();){var i=e.key;i instanceof H&&(i.suspendsRouting=!1,O0(i)&&i.Va())}t.Yr=!1}}function jS(t,e,i){return e=e.containingGroup,e!==null&&(t=jS(t,e,i),t!==null||(t=i.H(e),t!==null))?t:null}s=I.prototype,s.Ad=function(t,e,i){if(i===void 0)return new ds(Oo);var n=t.isGridSnapEnabled;return t.groupsSnapMembers||e.containingGroup===null||(n=!1),n?new ds(new N(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3)):new ds(i.copy())};function Lm(t,e,i){if(e.diagram!==null&&e.diagram!==t&&D("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),i===null?e.diagram!==null&&D("Cannot add an existing Layer to this Diagram again: "+e):(i.diagram!==t&&D("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),e===i&&D("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,t=t.Oa,i=t.count;for(var n=0;n<i;n++)t.J(n).name===e&&D("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}s.Sl=function(t){Lm(this,t,null),t.Ne(this);var e=this.Oa,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.J(i).isTemporary;)i--;return e.wb(i+1,t),this.Wb!==null&&this.Wa(ve,"layers",this,null,t,null,i+1),this.N(),this.Qa(),this},s.tx=function(t,e){Lm(this,t,e),t.Ne(this);var i=this.Oa,n=i.indexOf(t);0<=n&&(i.remove(t),this.Wb!==null&&this.Wa(Ne,"layers",this,t,null,n,null));var r=i.count,o;for(o=0;o<r;o++)if(i.J(o)===e){i.wb(o,t);break}return this.Wb!==null&&this.Wa(ve,"layers",this,null,t,null,o),this.N(),0>n&&this.Qa(),this},s.Zy=function(t,e){Lm(this,t,e),t.Ne(this);var i=this.Oa,n=i.indexOf(t);0<=n&&(i.remove(t),this.Wb!==null&&this.Wa(Ne,"layers",this,t,null,n,null));var r=i.count,o;for(o=0;o<r;o++)if(i.J(o)===e){i.wb(o+1,t);break}return this.Wb!==null&&this.Wa(ve,"layers",this,null,t,null,o+1),this.N(),0>n&&this.Qa(),this},s.GA=function(t){if(t.diagram!==this&&D("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),t.name!==""){var e=this.Oa,i=e.indexOf(t);if(e.remove(t)){for(e=t.Ha.copy().iterator;e.next();){var n=e.value,r=n.layerName;r!==t.name?n.layerName=r:n.layerName=""}this.Wb!==null&&this.Wa(Ne,"layers",this,t,null,i,null),this.N(),this.Qa()}}},s.Xj=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},s.vx=function(t){return this.df===null&&(this.df=new it),this.df.add(t),this.model.yh(t),this},s.IA=function(t){this.df!==null&&(this.df.remove(t),this.df.count===0&&(this.df=null)),this.model.pk(t)},s.yh=function(t){return this.zg===null&&(this.zg=new it),this.zg.add(t),this},s.pk=function(t){this.zg!==null&&(this.zg.remove(t),this.zg.count===0&&(this.zg=null))},s.js=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Yu(t),t.change!==bn&&(this.isModified=!0),this.zg!==null)for(var e=this.zg,i=e.length,n=0;n<i;n++)e.J(n)(t)},s.Wa=function(t,e,i,n,r,o,l){o===void 0&&(o=null),l===void 0&&(l=null);var h=new te;h.diagram=this,h.change=t,h.propertyName=e,h.object=i,h.oldValue=n,h.oldParam=o,h.newValue=r,h.newParam=l,this.js(h)},s.g=function(t,e,i,n,r){this.Wa(qt,t,this,e,i,n,r)},I.prototype.changeState=function(t,e){if(t!==null&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===qt){var r=t.object;if(Ht(r,t.propertyName,t.H(e)),r instanceof ht){var o=r.part;o!==null&&o.Lb()}this.isModified=!0}else if(n===ve){var l=t.object,h=t.newParam,a=t.newValue;if(l instanceof X)if(typeof h=="number"&&a instanceof ht){e?l.ec(h):l.wb(h,a);var c=l.part;c!==null&&c.Lb()}else typeof h=="number"&&a instanceof we&&(a.isRow?vM(l,h,e?void 0:a):xM(l,h,e?void 0:a));else if(l instanceof oi){var p=t.oldParam===!0;typeof h=="number"&&a instanceof ut&&(e?(a.isSelected=!1,a.isHighlighted=!1,a.Lb(),l.ec(p?h:-1,a,p)):l.Ni(h,a,p))}else l instanceof I?typeof h=="number"&&a instanceof oi&&(e?this.Oa.eb(h):(a.Ne(this),this.Oa.wb(h,a))):D("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(n===Ne){var d=t.object,m=t.oldParam,x=t.oldValue;if(d instanceof X)typeof m=="number"&&x instanceof ht?e?d.wb(m,x):d.ec(m):typeof m=="number"&&x instanceof we&&(x.isRow?vM(d,m,e?x:void 0):xM(d,m,e?x:void 0));else if(d instanceof oi){var v=t.newParam===!0;typeof m=="number"&&x instanceof ut&&(e?0>d.Ha.indexOf(x)&&d.Ni(m,x,v):(x.isSelected=!1,x.isHighlighted=!1,x.Lb(),d.ec(v?m:-1,x,v)))}else d instanceof I?typeof m=="number"&&x instanceof oi&&(e?(x.Ne(this),this.Oa.wb(m,x)):this.Oa.eb(m)):D("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else n!==bn&&D("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=i}}},I.prototype.xa=function(t){return this.undoManager.xa(t)},I.prototype.Xa=function(t){return this.undoManager.Xa(t)},I.prototype.Hf=function(){return this.undoManager.Hf()},I.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.xa(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.Xa(e):this.undoManager.Hf(),this.skipsUndoManager=i}},I.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},I.prototype.yq=function(){this.partManager.yq()};function DS(t,e,i){var n=t.animationManager;if(t.qb||t.Wc)t.sa=i,Ro(t),n.tb&&n.Sd.add(n.C,"scale",e,t.sa);else if(t.Ca===null)t.sa=i,Ro(t);else{t.qb=!0;var r=t.viewportBounds.copy(),o=t.ua,l=t.ta;r.width=t.ua/e,r.height=t.ta/e;var h=t.zoomPoint.x,a=t.zoomPoint.y,c=t.contentAlignment;isNaN(h)&&(c.Nc()?c.Df(Yu)?h=0:c.Df(Xu)&&(h=o-1):h=c.hb()?c.x*(o-1):o/2),isNaN(a)&&(c.Nc()?c.Df(Gu)?a=0:c.Df(Wu)&&(a=l-1):a=c.hb()?c.y*(l-1):l/2),t.scaleComputation===null||t.animationManager.defaultAnimation.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),o=N.allocAt(t.ja.x+h/e-h/i,t.ja.y+a/e-a/i),t.position=o,N.free(o),t.sa=i,Ro(t),t.onViewportBoundsChanged(r,t.viewportBounds,e,!1),t.qb=!1,er(t,!1),n.tb&&n.Sd.add(n.C,"scale",e,t.sa),t.N(),ps(t)}}I.prototype.onViewportBoundsChanged=function(t,e,i,n){if(!t.A(e)){n===void 0&&(n=!1),n||ps(this),Hs(this);var r=this.layout;r===null||!r.isViewportSized||this.autoScale!==cn||n||t.width===e.width&&t.height===e.height||r.B(),r=this.currentTool,this.cl===!0&&r instanceof ee&&(this.lastInput.documentPoint=this.Xs(this.lastInput.viewPoint),Xw(r,this)),this.qb||this.invalidateViewport(t,e),Fo(this),this.dd.scale=i,this.dd.position.x=t.x,this.dd.position.y=t.y,this.dd.bounds.assign(t),this.dd.zx.width=Math.round(t.width*i),this.dd.zx.height=Math.round(t.height*i),this.dd.jy.width=this.ua,this.dd.jy.height=this.ta,this.dd.by=n,this.S("ViewportBoundsChanged",this.dd,t),this.isVirtualized&&this.links.each(function(o){o.isAvoiding&&o.actualBounds.Lc(e)&&o.Va()})}};function Fo(t,e){var i=t.Yd;if(i!==null&&i.visible){for(var n=yt.alloc(),r=1,o=1,l=i.T.m,h=l.length,a=0;a<h;a++){var c=l[a],p=Math.abs(c.interval);2>p||(i0(c.figure)?o=o*p/j.Qx(o,p):r=r*p/j.Qx(r,p))}if(l=i.gridCellSize,n.h(o*l.width,r*l.height),e!==void 0)r=e.width,o=e.height,t=e.x,l=e.y;else{if(e=_.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.u()){_.free(e);return}r=e.width,o=e.height,t=e.x,l=e.y,_.free(e)}i.width=r+2*n.width,i.height=o+2*n.height,e=N.alloc(),j.Wp(t,l,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),yt.free(n),i.part.location=e,N.free(e)}}I.prototype.clearSelection=function(t){t===void 0&&(t=!1);var e=this.selection;if(e.count!==0){t||this.S("ChangingSelection",e);for(var i=e.ya(),n=i.length,r=0;r<n;r++)i[r].isSelected=!1;e.ea(),e.clear(),e.freeze(),t||this.S("ChangedSelection",e)}},I.prototype.select=function(t){t!==null&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.S("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.S("ChangedSelection",this.selection))},I.prototype.NA=function(t){if(this.S("ChangingSelection",this.selection),this.clearSelection(!0),mt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof ut||D("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}else for(t=t.iterator;t.next();)e=t.value,e instanceof ut||D("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.S("ChangedSelection",this.selection)},I.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.ya(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ea(),t.clear(),t.freeze()}},s=I.prototype,s.gA=function(t){t!==null&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},s.hA=function(t){t=new Q().addAll(t);for(var e=this.highlighteds.copy().oq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)e=t.value,e instanceof ut||D("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},s.scroll=function(t,e,i){i===void 0&&(i=1);var n=e==="up"||e==="down",r=0;if(t==="pixel")r=i;else if(t==="line")r=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(t==="page")t=n?this.viewportBounds.height:this.viewportBounds.width,t*=this.scale,t!==0&&(r=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(t==="document"){r=this.documentBounds,i=this.viewportBounds,n=N.alloc(),e==="up"?this.position=n.h(i.x,r.y):e==="left"?this.position=n.h(r.x,i.y):e==="down"?this.position=n.h(i.x,r.bottom-i.height):e==="right"&&(this.position=n.h(r.right-i.width,i.y)),N.free(n);return}D("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,i=this.position.copy(),e==="up"?i.y=this.position.y-r:e==="down"?i.y=this.position.y+r:e==="left"?i.x=this.position.x-r:e==="right"?i.x=this.position.x+r:D("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=i},s.Fv=function(t){var e=this.viewportBounds;e.Ge(t)||(t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},s.ks=function(t){var e=this.viewportBounds;t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t},s.vq=function(t){var e=this.vb;e.reset(),this.sa!==1&&e.scale(this.sa);var i=this.ja;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.vb)},s.WA=function(t){var e=this.vb,i=t.x,n=t.y,r=i+t.width,o=n+t.height,l=e.m11,h=e.m12,a=e.m21,c=e.m22,p=e.dx,d=e.dy,m=i*l+n*a+p;e=i*h+n*c+d;var x=r*l+n*a+p;return t=r*h+n*c+d,n=i*l+o*a+p,i=i*h+o*c+d,l=r*l+o*a+p,r=r*h+o*c+d,o=Math.min(m,x),m=Math.max(m,x),x=Math.min(e,t),e=Math.max(e,t),o=Math.min(o,n),m=Math.max(m,n),x=Math.min(x,i),e=Math.max(e,i),o=Math.min(o,l),m=Math.max(m,l),x=Math.min(x,r),e=Math.max(e,r),new _(o,x,m-o,e-x)},s.Xs=function(t){var e=this.vb;e.reset(),this.sa!==1&&e.scale(this.sa);var i=this.ja;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),ci(t.copy(),this.vb)};function IS(t){var e=t.isModified;t.px!==e&&(t.px=e,t.S("Modified"))}function zT(t){return t=vp.get(t),t!==null?new t:new Dt}I.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===bn&&n[0]==="S")if(n==="StartingFirstTransaction"){var r=this;t=this.toolManager,t.mouseDownTools.each(function(a){a.diagram=r}),t.mouseMoveTools.each(function(a){a.diagram=r}),t.mouseUpTools.each(function(a){a.diagram=r}),this.Wc||this.Uf||(this.Qk=!0,this.zn&&(this.jg=!0))}else n==="StartingUndo"||n==="StartingRedo"?(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.qc(),this.S("ChangingSelection",this.selection)):n==="StartedTransaction"&&(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.qc());else if(this.Z){this.Z=!1;try{if(t.modelChange===""&&i===bn){(n==="FinishedUndo"||n==="FinishedRedo")&&(this.S("ChangedSelection",this.selection),yi(this));var o=this.animationManager;n==="RolledBackTransaction"&&o.qc(),this.Qk=!0,this.gd(),this.undoManager.transactionLevel!==0&&this.undoManager.transactionLevel!==1||pm(o),n==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.se=Math.min(this.se,this.undoManager.historyIndex-1)),n!=="CommittedTransaction"&&n!=="RolledBackTransaction"||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var l=t.isTransactionFinished;if(l&&(IS(this),this.Gs.clear(),OT(this.animationManager)),!this.St&&l&&this.lastInput.targetDiagram){this.St=!0;var h=this;F(function(){h.currentTool.standardMouseOver(),h.St=!1},10)}}}finally{this.Z=!0}}}};function FS(t,e){e=e.T.m;for(var i=e.length,n=0;n<i;n++)Em(t,e[n])}function Em(t,e){if(e instanceof Ii){var i=e.element;if(i!==null&&i instanceof HTMLImageElement){i.Hg instanceof Q&&i.Hg.add(t);var n=e.Lg;if(n!==null&&n.lr===!0&&e.diagram!==null&&e.diagram.Oo.add(e),i.En)if(i=i.getAttribute("src")||"",n=t.eh.H(i),n===null)n=[],n.push(e),t.eh.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function Om(t,e){if(e instanceof Ii){var i=e.element;if(i!==null&&i instanceof HTMLImageElement&&(i.Hg instanceof Q&&i.Hg.remove(t),RM(i),i.En)){i=i.getAttribute("src")||"";var n=t.eh.H(i);if(n!==null){for(var r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1),n.length===0&&(t.eh.remove(i),Sh(i));break}}}}}I.prototype.Ld=function(){this.partManager.Ld()},I.prototype.Kj=function(t,e){this.Pd.Kj(t,e)},I.prototype.Mj=function(t,e){this.Pd.Mj(t,e)},I.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},I.prototype.Eb=function(t){return this.partManager.Eb(t)},I.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},s=I.prototype,s.yc=function(t){return this.partManager.yc(t)},s.Gi=function(t){return this.partManager.Gi(t)},s.xc=function(t){return this.partManager.xc(t)},s.qs=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.qs.apply(this.partManager,e instanceof Array?e:y(f(e)))},s.ps=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ps.apply(this.partManager,e instanceof Array?e:y(f(e)))};function Ro(t){var e=t.ja,i=t.sa;t.ox.h(e.x,e.y,Math.max(t.ua,0)/i,Math.max(t.ta,0)/i)}function Am(t,e){t.jj=!1;var i=t.Tq;i.A(e)||(i=i.copy(),t.Tq.assign(e),er(t,!1),t.S("DocumentBoundsChanged",void 0,i),ps(t))}s.Ta=function(){if(this.jj){var t=_.alloc();Am(this,this.computeBounds(t)),_.free(t)}},s.Qz=function(){for(var t=new Q,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)i=e.value,i.isTopLevel&&t.add(i);return t.iterator},s.Pz=function(){return this.wi.iterator},s.qA=function(t){yi(this),t&&mp(this,!0),this.Wc?jm(this,!1):(this.Qk=!0,cs(this))};function mp(t,e){for(var i=t.wi.iterator;i.next();)RS(t,i.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.B())}function RS(t,e,i){if(e!==null){for(var n=e.pl.iterator;n.next();)RS(t,n.value,i);e.layout!==null&&(i?e.layout.isValidLayout=!1:e.layout.B())}}function jm(t,e){if(t.Oh&&!t.xt){var i=t.Z;t.Z=!0;var n=t.undoManager.transactionLevel,r=t.layout,o=t.animationManager;try{n===0&&(t.undoManager.isInternalTransaction=!0,t.xa("Layout")),1>=n&&!o.defaultAnimation.isAnimating&&!o.tb&&(e||Do(o,"Layout")),t.Oh=!1;for(var l=t.wi.iterator;l.next();)BS(t,l.value,e,n);r.isValidLayout||(!e||r.isRealtime||r.isRealtime===null||n===0?(r.doLayout(t),yi(t),r.isValidLayout=!0):t.Oh=!0)}finally{e=t.undoManager.isInternalTransaction,n===0&&(t.Xa("Layout"),t.undoManager.isInternalTransaction=!1),!e||n!==0&&n!==1||pm(o),t.Z=i}}}function BS(t,e,i,n){if(e!==null){for(var r=e.pl.iterator;r.next();)BS(t,r.value,i,n);r=e.layout,r===null||r.isValidLayout||(!i||r.isRealtime||n===0?(e.Jh=!e.location.u(),r.doLayout(e),e.B(32),Sm(t,e),r.isValidLayout=!0):t.Oh=!0)}}s.Wz=function(){for(var t=new it,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&i.Ii()===null&&t.add(i)}return t.iterator};function GT(t){function e(r){var o=r.toLowerCase(),l=new it;i.add(r,l),i.add(o,l),n.add(r,r),n.add(o,r)}var i=new pt,n=new pt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Hw=i,t.Gw=n}function VS(t,e){var i=t.Gw.H(e);return i!==null?i:t.Gw.H(e.toLowerCase())}function Dm(t,e){var i=t.Hw.H(e);if(i!==null||(i=t.Hw.H(e.toLowerCase()),i!==null))return i;D("Unknown DiagramEvent name: "+e)}s.Lj=function(t,e){return t=Dm(this,t),t!==null&&t.add(e),this},s.km=function(t,e){t=Dm(this,t),t!==null&&t.remove(e)},s.S=function(t,e,i){var n=Dm(this,t),r=new Al;if(r.diagram=this,t=VS(this,t),t!==null&&(r.name=t),e!==void 0&&(r.subject=e),i!==void 0&&(r.parameter=i),e=n.length,e===1)n.J(0)(r);else if(e!==0)for(n=n.ya(),i=0;i<e;i++)(0,n[i])(r)};function _S(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e===t.toolManager.findTool("Dragging")?!t.Yr||e.isComplexRoutingRealtime:!0}s.dk=function(t,e){return Im(this,!1,null,e||null).dk(t.x,t.y,t.width,t.height)},I.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.jj?ES(this,t):t.assign(this.documentBounds)};function Im(t,e,i,n){if(t.Zc===null&&(t.Zc=new Pf),t.Zc.zs||t.Zc.group!==i||t.Zc.yy!==n){if(i!==null&&(i=US(t,i)),i===null){e=_.alloc(),t.computeOccupiedArea(e),e.Jc(100,100),t.Zc.initialize(e);for(var r=t.nodes;r.next();){var o=r.value,l=o.layer;l!==null&&l.visible&&!l.isTemporary&&Fm(t,o,n,e)}_.free(e)}else{for(0<i.memberParts.count&&(e=t.computePartsBounds(i.memberParts,!1),e.Jc(20,20),t.Zc.initialize(e)),e=_.alloc(),r=i.memberParts;r.next();)o=r.value,o instanceof q&&Fm(t,o,n,e);_.free(e)}t.Zc.group=i,t.Zc.yy=n,t.Zc.zs=!1}else e&&pk(t.Zc);return t.Zc}function US(t,e){return e.avoidable&&!e.isLinkLabel?e:e.containingGroup!==null?US(t,e.containingGroup):null}function Fm(t,e,i,n){if(e!==i&&e.isVisible()){if(e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(n),t=t.Zc;var r=e.x,o=e.y;if(Nh(t,r,o))for(i=(o-t.zd)/t.hc|0,n=Math.min((r+e.width-t.yd)/t.gc|0,t.yi),e=Math.min((o+e.height-t.zd)/t.hc|0,t.zi),r=(r-t.yd)/t.gc|0;r<=n;r++)if(o=t.Tb[r],o.fill)o.fill(Ho,i,e+1);else for(var l=i;l<=e;l++)o[l]=Ho}else if(e instanceof dt)for(e=e.memberParts;e.next();)r=e.value,r instanceof q&&Fm(t,r,i,n)}}function Rm(t,e){t.Zc===null||t.Zc.zs||e!==void 0&&(!e.avoidable||e.isLinkLabel)||(t.Zc.zs=!0)}I.prototype.ms=function(t){this.Cq.assign(t),this.computeAutoScrollPosition(this.Cq).Ua(this.position)?this.tg():zS(this)};function zS(t){t.zk===-1&&(t.zk=F(function(){if(t.zk!==-1&&(t.tg(),t.lastInput.event!==null)){var e=t.computeAutoScrollPosition(t.Cq);e.Ua(t.position)||(t.position=e,t.lastInput.documentPoint=t.Xs(t.Cq),t.doMouseMove(),t.jj=!0,e=_.alloc(),t.computeBounds(e),e.Qc(t.documentBounds),Am(t,e),_.free(e),t.Vc=!0,t.gd(),zS(t))}},t.Bq))}I.prototype.tg=function(){this.zk!==-1&&(W.clearTimeout(this.zk),this.zk=-1)},I.prototype.computeAutoScrollPosition=function(t){var e=this.position,i=this.Dq;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return e;var n=this.viewportBounds,r=this.scale;n=_.allocAt(0,0,n.width*r,n.height*r);var o=N.allocAt(0,0);if(t.x>=n.x&&t.x<n.x+i.left&&this.allowHorizontalScroll){var l=Math.max(this.scrollHorizontalLineChange,1);l|=0,o.x-=l,t.x<n.x+i.left/2&&(o.x-=l),t.x<n.x+i.left/4&&(o.x-=4*l)}else t.x<=n.x+n.width&&t.x>n.x+n.width-i.right&&this.allowHorizontalScroll&&(l=Math.max(this.scrollHorizontalLineChange,1),l|=0,o.x+=l,t.x>n.x+n.width-i.right/2&&(o.x+=l),t.x>n.x+n.width-i.right/4&&(o.x+=4*l));return t.y>=n.y&&t.y<n.y+i.top&&this.allowVerticalScroll?(l=Math.max(this.scrollVerticalLineChange,1),l|=0,o.y-=l,t.y<n.y+i.top/2&&(o.y-=l),t.y<n.y+i.top/4&&(o.y-=4*l)):t.y<=n.y+n.height&&t.y>n.y+n.height-i.bottom&&this.allowVerticalScroll&&(l=Math.max(this.scrollVerticalLineChange,1),l|=0,o.y+=l,t.y>n.y+n.height-i.bottom/2&&(o.y+=l),t.y>n.y+n.height-i.bottom/4&&(o.y+=4*l)),o.Ua(Oo)||(e=new N(e.x+o.x/r,e.y+o.y/r)),_.free(n),N.free(o),e},s=I.prototype,s.Is=function(){return null},s.kv=function(){return null},s.cz=function(t,e){this.Qy.add(t,e)},s.zu=function(t){(this.mx=t)||this.nodes.each(function(e){e instanceof dt&&(e.Zq=null)})};function GS(t,e,i){function n(){var p=+new Date;for(o=!0,l.reset();l.next();)if(!l.value[0].kl){o=!1;break}o||p-c>a?e(i,r,h):W.requestAnimationFrame(n)}for(var r=i.callback,o=!0,l=t.eh.iterator;l.next();)if(!l.value[0].kl){o=!1;break}if(typeof r!="function"||o)return e(i,r,t);var h=t,a=i.callbackTimeout||300,c=+new Date;return W.requestAnimationFrame(function(){n()}),null}s.sA=function(t){return Un?(t===void 0&&(t={}),t.returnType="Image",this.gy(t)):null},s.gy=function(t){return t===void 0&&(t={}),GS(this,this.tA,t)},s.tA=function(t,e,i){var n=YS(i,t,"canvas",null);if(n===null)return null;i=n.Y.canvas;var r=null;if(i!==null)switch(r=t.returnType,r===void 0?r="string":r=r.toLowerCase(),r){case lh+"data":r=n.getImageData(0,0,i.width,i.height);break;case lh:n=(t.document||document).createElement("img"),n.src=i.toDataURL(t.type,t.details),r=n;break;case"blob":return typeof e!="function"&&D('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),typeof i.toBlob=="function"?(i.toBlob(e,t.type,t.details),"toBlob"):typeof i.msToBlob=="function"?(e(i.msToBlob()),"msToBlob"):(e(null),null);default:r=i.toDataURL(t.type,t.details)}return typeof e=="function"?(e(r),null):r};function YS(t,e,i,n){if(t.animationManager.qc(),t.gd(),t.Ca===null)return null;typeof e!="object"&&D("properties argument must be an Object.");var r=e.size||null,o=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(o="NaN");var l=e.maxSize;e.maxSize===void 0&&(l=i==="SVG"?new yt(1/0,1/0):new yt(2e3,2e3));var h=e.position||null,a=e.parts||null,c=e.padding===void 0?1:e.padding,p=e.background||null,d=e.omitTemporary;d===void 0&&(d=!0);var m=e.document||document,x=e.elementFinished||null,v=e.showTemporary;v===void 0&&(v=!d),e=e.showGrid,e===void 0&&(e=v),r!==null&&isNaN(r.width)&&isNaN(r.height)&&(r=null),typeof c=="number"?c=new Ft(c):c instanceof Ft||D("MakeImage padding must be a Margin or a number."),c.left=Math.max(c.left,0),c.right=Math.max(c.right,0),c.top=Math.max(c.top,0),c.bottom=Math.max(c.bottom,0),t.Vb.Hc(!0),d=new Tn(null,m);var S=d.context;if(!(r||o||a||h))return d.width=t.ua+Math.ceil(c.left+c.right),d.height=t.ta+Math.ceil(c.top+c.bottom),i==="SVG"?n===null?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=m,n.Tp=x,yp(t,n.context,c,new yt(d.width,d.height),t.sa,t.ja,a,p,v,e),n.context):(t.qn=!1,yp(t,S,c,new yt(d.width,d.height),t.sa,t.ja,a,p,v,e),t.qn=!0,d.context);var P=t.Rq,k=t.documentBounds.copy();if(k.Nv(t.nb),v)for(var L=t.Oa.m,T=L.length,O=0;O<T;O++){var E=L[O];if(E.visible&&E.isTemporary){E=E.Ha.m;for(var V=E.length,$=0;$<V;$++){var b=E[$];b.isInDocumentBounds&&b.isVisible()&&(b=b.actualBounds,b.u()&&k.Qc(b))}}}if(L=new N(k.x,k.y),a!==null){for(T=new _(0,0,0,0),O=!0,E=a.iterator,E.reset();E.next();)V=E.value,V instanceof ut&&($=V.layer,$!==null&&!$.visible||$!==null&&!v&&$.isTemporary||!V.isVisible()||(V=V.actualBounds,V.u()&&(O?(O=!1,T.assign(V)):T.Qc(V))));k.width=T.width,k.height=T.height,L.x=T.x,L.y=T.y}return h!==null&&h.u()&&(L=h,o||(o=P)),T=h=0,c!==null&&(h=c.left+c.right,T=c.top+c.bottom),O=E=0,r!==null&&(E=r.width,O=r.height,isFinite(E)&&(E=Math.max(0,E-h)),isFinite(O)&&(O=Math.max(0,O-T))),r!==null&&o!==null?(o==="NaN"&&(o=P),r.u()?(r=E,k=O):isNaN(O)?(r=E,k=k.height*o):(r=k.width*o,k=O)):r!==null?r.u()?(o=Math.min(E/k.width,O/k.height),r=E,k=O):isNaN(O)?(o=E/k.width,r=E,k=k.height*o):(o=O/k.height,r=k.width*o,k=O):o!==null?o==="NaN"&&l.u()?(o=Math.min((l.width-h)/k.width,(l.height-T)/k.height),o>P?(o=P,r=k.width,k=k.height):(r=l.width,k=l.height)):(r=k.width*o,k=k.height*o):(o=P,r=k.width,k=k.height),c!==null?(r+=h,k+=T):c=new Ft(0),l!==null&&(P=l.width,l=l.height,isNaN(P)&&(P=2e3),isNaN(l)&&(l=2e3),isFinite(P)&&(r=Math.min(r,P)),isFinite(l)&&(k=Math.min(k,l))),d.width=Math.ceil(r),d.height=Math.ceil(k),i==="SVG"?n===null?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=m,n.Tp=x,yp(t,n.context,c,new yt(Math.ceil(r),Math.ceil(k)),o,L,a,p,v,e),n.context):(t.qn=!1,yp(t,S,c,new yt(Math.ceil(r),Math.ceil(k)),o,L,a,p,v,e),t.qn=!0,d.context)}Y.Object.defineProperties(I.prototype,{div:{get:function(){return this.Ga},set:function(t){if(this.Ga!==t){var e=this.Ga;e!==null?(e.C=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",this.Ca!==null&&(e=this.Ca.La,this.removeEventListener(e,"pointermove",this.kk,!1),this.removeEventListener(e,"pointerdown",this.jk,!1),this.removeEventListener(e,"pointerup",this.mk,!1),this.removeEventListener(e,"pointerout",this.lk,!1),this.Ca.Ix()),this.xl&&(this.xl.disconnect(),this.xl=null),e=this.toolManager,e!==null&&(e.mouseDownTools.each(function(i){i.cancelWaitAfter()}),e.mouseMoveTools.each(function(i){i.cancelWaitAfter()}),e.mouseUpTools.each(function(i){i.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Ca=null,this.removeEventListener(W,"resize",this.Zv,!1),this.removeEventListener(W,"wheel",this.gk,!0),ih===this&&(ih=null)):this.Uf=!1,this.Ga=null,t!==null&&((e=t.C)&&(e.div=null),Gm(this,t),this.redraw())}}},xx:{get:function(){return this.zr}},Oi:{get:function(){return this.Uf}},draggedLink:{get:function(){return this.ru},set:function(t){this.ru!==t&&(this.ru=t,t!==null&&(this.Sv=t.fromPort,this.Yv=t.toPort))}},ky:{get:function(){return this.Sv},set:function(t){this.Sv=t}},ly:{get:function(){return this.Yv},set:function(t){this.Yv=t}},animationManager:{get:function(){return this.Pd}},undoManager:{get:function(){return this.Wb.undoManager}},skipsUndoManager:{get:function(){return this.kh},set:function(t){this.kh=t,this.Wb.skipsUndoManager=t}},delaysLayout:{get:function(){return this.xt},set:function(t){this.xt=t}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&st(t,"0 <= value <= 1",I,"opacity"),this.mb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.dt},set:function(t){var e=this.dt;e!==t&&(this.dt=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Oa.iterator}},isModelReadOnly:{get:function(){var t=this.Wb;return t===null?!1:t.isReadOnly},set:function(t){var e=this.Wb;e!==null&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Rg},set:function(t){var e=this.Rg;e!==t&&(this.Rg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.vd},set:function(t){var e=this.vd;e!==t&&(this.vd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.rk},set:function(t){var e=this.rk;e!==t&&(this.rk=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.D},set:function(t){var e=this.D;e!==t&&(this.D=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.L},set:function(t){var e=this.L;e!==t&&(this.L=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.sk},set:function(t){var e=this.sk;e!==t&&(this.sk=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.Im},set:function(t){var e=this.Im;e!==t&&(this.Im=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(this.Od=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&(this.wa=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ke},set:function(t){var e=this.ke;e!==t&&(this.ke=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.jt},set:function(t){var e=this.jt;e!==t&&(this.jt=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ba},set:function(t){var e=this.Ba;e!==t&&(this.Ba=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Qb},set:function(t){var e=this.Qb;e!==t&&(this.Qb=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(this.Ma=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(this.Gb=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Rb},set:function(t){var e=this.Rb;e!==t&&(this.Rb=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.rc},set:function(t){var e=this.rc;e!==t&&(this.rc=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.kt},set:function(t){var e=this.kt;e!==t&&(this.kt=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.nt},set:function(t){var e=this.nt;e!==t&&(this.nt=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.Nn},set:function(t){var e=this.Nn;e!==t&&(this.Nn=t,ps(this),this.N(),this.g("hasVerticalScrollbar",e,t),er(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Mn},set:function(t){var e=this.Mn;e!==t&&(this.Mn=t,ps(this),this.N(),this.g("hasHorizontalScrollbar",e,t),er(this,!1))}},allowHorizontalScroll:{get:function(){return this.it},set:function(t){var e=this.it;e!==t&&(this.it=t,this.g("allowHorizontalScroll",e,t),er(this,!1))}},allowVerticalScroll:{get:function(){return this.mt},set:function(t){var e=this.mt;e!==t&&(this.mt=t,this.g("allowVerticalScroll",e,t),er(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(0>t&&st(t,">= 0",I,"scrollHorizontalLineChange"),this.Zs=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(0>t&&st(t,">= 0",I,"scrollVerticalLineChange"),this.$s=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.rj},set:function(t){this.rj=t}},previousInput:{get:function(){return this.gh},set:function(t){this.gh=t}},firstInput:{get:function(){return this.br},set:function(t){this.br=t}},currentCursor:{get:function(){return this.Ys},set:function(t){if(t===""&&(t=this.Zi),this.Ys!==t){var e=this.Ca,i=this.Ga;if(e!==null&&i!==null){this.Ys=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor="-webkit-"+t,i.style.cursor="-webkit-"+t,e.style.cursor===n&&(e.style.cursor="-moz-"+t,i.style.cursor="-moz-"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Zi},set:function(t){t===""&&(t="auto");var e=this.Zi;e!==t&&(this.Zi=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.Ag},set:function(t){var e=this.Ag;e!==t&&(this.Ag=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Ig},set:function(t){var e=this.Ig;e!==t&&(this.Ig=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Cg},set:function(t){var e=this.Cg;e!==t&&(this.Cg=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.ah},set:function(t){var e=this.ah;e!==t&&(this.ah=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Zg},set:function(t){var e=this.Zg;e!==t&&(this.Zg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Yg},set:function(t){var e=this.Yg;e!==t&&(this.Yg=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.vv},set:function(t){var e=this.vv;e!==t&&(this.vv=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Wg},set:function(t){var e=this.Wg;e!==t&&(this.Wg=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.Su},set:function(t){var e=this.Su;e!==t&&(this.Su=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Xg},set:function(t){var e=this.Xg;e!==t&&(this.Xg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.$g},set:function(t){var e=this.$g;e!==t&&(this.$g=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&(this.uh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.gw},set:function(t){this.gw!==t&&(this.gw=t,t.Ne(this))}},toolManager:{get:function(){return this.qw},set:function(t){this.qw!==t&&(this.qw=t,t.diagram=this)}},defaultTool:{get:function(){return this.iw},set:function(t){var e=this.iw;e!==t&&(this.iw=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.hw},set:function(t){var e=this.hw;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),t===null&&(t=this.defaultTool),t!==null&&(this.hw=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.ex}},maxSelectionCount:{get:function(){return this.rv},set:function(t){var e=this.rv;if(e!==t)if(0<=t&&!isNaN(t)){if(this.rv=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&(t=this.selection.count-t,0<t)){this.S("ChangingSelection",this.selection),e=this.selection.ya();for(var i=0;i<t;i++)e[i].isSelected=!1;this.S("ChangedSelection",this.selection)}}else st(t,">= 0",I,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.Dv},set:function(t){var e=this.Dv;e!==t&&(this.Dv=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.Ku},set:function(t){var e=this.Ku;e!==t&&(this.Ku=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.mv},set:function(t){var e=this.mv;e!==t&&(this.mv=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Nw}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?t.currentTransaction!==null?!0:this.Tn&&this.se!==t.historyIndex:this.Tn},set:function(t){if(this.Tn!==t){this.Tn=t;var e=this.undoManager;!t&&e.isEnabled&&(this.se=e.historyIndex),t||IS(this)}}},model:{get:function(){return this.Wb},set:function(t){var e=this.Wb;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&D("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.qc(!0);var i=CS(this,!0);this.Uf=!1,this.zn=!0,this.se=-2,this.jg=!1;var n=this.qb;this.qb=!0,Do(this.animationManager,"Model"),e&&(this.df!==null&&this.df.each(function(o){e.pk(o)}),e.pk(this.nw)),this.Wb=t,this.partManager=zT(this.Wb.type);for(var r=0;r<i.length;r++)this.add(i[r]);t.yh(this.mw),this.partManager.addAllModeledParts(),t.pk(this.mw),t.yh(this.nw),this.df!==null&&this.df.each(function(o){t.yh(o)}),this.qb=n,this.Qa(),this.qb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},Z:{get:function(){return this.lw},set:function(t){this.lw=t}},Gs:{get:function(){return this.Gy}},skipsModelSourceBindings:{get:function(){return this.pw},set:function(t){this.pw=t}},Vs:{get:function(){return this.hu},set:function(t){this.hu=t}},nodeTemplate:{get:function(){return this.j.H("")},set:function(t){var e=this.j.H("");e!==t&&(this.j.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},nodeTemplateMap:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},groupTemplate:{get:function(){return this.Bc.H("")},set:function(t){var e=this.Bc.H("");e!==t&&(this.Bc.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},groupTemplateMap:{get:function(){return this.Bc},set:function(t){var e=this.Bc;e!==t&&(this.Bc=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},linkTemplate:{get:function(){return this.o.H("")},set:function(t){var e=this.o.H("");e!==t&&(this.o.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},linkTemplateMap:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(this.o=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},isMouseCaptured:{get:function(){return this.kw},set:function(t){var e=this.Ca;e!==null&&(e=e.La,e instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.kk,!1),this.removeEventListener(e,"pointerdown",this.jk,!1),this.removeEventListener(e,"pointerup",this.mk,!1),this.removeEventListener(e,"pointerout",this.lk,!1),this.addEventListener(W,"pointermove",this.kk,!0),this.addEventListener(W,"pointerdown",this.jk,!0),this.addEventListener(W,"pointerup",this.mk,!0),this.addEventListener(W,"pointerout",this.lk,!0),this.removeEventListener(e,"wheel",this.gk,!1),this.addEventListener(W,"wheel",this.gk,!0),this.addEventListener(W,"selectstart",this.preventDefault,!1)):(this.removeEventListener(W,"pointermove",this.kk,!0),this.removeEventListener(W,"pointerdown",this.jk,!0),this.removeEventListener(W,"pointerup",this.mk,!0),this.removeEventListener(W,"pointerout",this.lk,!0),this.addEventListener(e,"pointermove",this.kk,!1),this.addEventListener(e,"pointerdown",this.jk,!1),this.addEventListener(e,"pointerup",this.mk,!1),this.addEventListener(e,"pointerout",this.lk,!1),this.removeEventListener(W,"wheel",this.gk,!0),this.removeEventListener(W,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.gk,!1)),this.kw=t))}},position:{get:function(){return this.ja},set:function(t){var e=N.alloc().assign(this.ja);if(!e.A(t)){var i=this.viewportBounds.copy();this.ja.assign(t),fS(this.animationManager,e,this.ja),this.qb||this.Ca===null&&!this.Fp.u()?Ro(this):(this.qb=!0,t=this.scale,mm(this,this.Tq,this.ua/t,this.ta/t,this.Gk,!1),this.qb=!1),this.qb||this.onViewportBoundsChanged(i,this.viewportBounds,this.sa,!1)}N.free(e)}},initialPosition:{get:function(){return this.Zu},set:function(t){this.Zu.A(t)||(this.Zu=t.I())}},initialScale:{get:function(){return this.fv},set:function(t){this.fv!==t&&(this.fv=t)}},grid:{get:function(){return this.Yd===null&&(this.Yd=LS(this)),this.Yd},set:function(t){var e=this.Yd;if(e!==t){e===null&&(e=this.Yd=LS(this)),t.type!==X.Grid&&D("Diagram.grid must be a Panel of type Panel.Grid");var i=e.panel;i!==null&&i.remove(e),this.Yd=t,t.name="GRID",i!==null&&i.add(t),Fo(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.ox}},viewSize:{get:function(){return this.Fp},set:function(t){var e=this.viewSize;e.A(t)||(this.Fp=t=t.I(),this.ta=this.ua=0,t.u()?(this.ua=t.width,this.ta=t.height):this.Ga!==null&&(this.ua=this.Ga.clientWidth||1,this.ta=this.Ga.clientHeight||1),Ro(this),this.Qa(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.Fu},set:function(t){var e=this.Fu;e.A(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||D("fixedBounds width/height must not be Infinity"),this.Fu=t=t.I(),this.Qa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.Fj},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.Fj;e.A(t)||(this.Fj=t=t.I(),this.g("scrollMargin",e,t),this.nq())}},scrollMode:{get:function(){return this.Gj},set:function(t){var e=this.Gj;e!==t&&(this.Gj=t,t===Ks&&er(this,!1),this.g("scrollMode",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(this.at=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.cw},set:function(t){var e=this.cw;e!==t&&(this.cw=t,er(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.dw},set:function(t){var e=this.dw;e!==t&&(this.dw=t,DS(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Tq}},isVirtualized:{get:function(){return this.iv},set:function(t){var e=this.iv;e!==t&&(this.iv=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.sa},set:function(t){var e=this.sa;e!==t&&DS(this,e,t)}},defaultScale:{get:function(){return this.Rq},set:function(t){this.Rq=t}},autoScale:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g("autoScale",e,t),t!==cn&&er(this,!1))}},initialAutoScale:{get:function(){return this.Qg},set:function(t){var e=this.Qg;e!==t&&(this.Qg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.gv},set:function(t){var e=this.gv;e!==t&&(t.hb()||D("initialViewportSpot must be a specific Spot: "+t),this.gv=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.Xu},set:function(t){var e=this.Xu;e!==t&&(t.hb()||D("initialViewportSpot must be a specific Spot: "+t),this.Xu=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.sv},set:function(t){var e=this.sv;e!==t&&(0<t?(this.sv=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):st(t,"> 0",I,"minScale"))}},maxScale:{get:function(){return this.ov},set:function(t){var e=this.ov;e!==t&&(0<t?(this.ov=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):st(t,"> 0",I,"maxScale"))}},zoomPoint:{get:function(){return this.et},set:function(t){this.et.A(t)||(this.et=t=t.I())}},contentAlignment:{get:function(){return this.Gk},set:function(t){var e=this.Gk;e.A(t)||(this.Gk=t=t.I(),this.g("contentAlignment",e,t),er(this,!1))}},initialContentAlignment:{get:function(){return this.hr},set:function(t){var e=this.hr;e.A(t)||(this.hr=t=t.I(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.nb},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.Qa(),this.g("padding",e,t))}},partManager:{get:function(){return this.ow},set:function(t){var e=this.ow;e!==t&&(t.diagram!==null&&D("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Ne(null),this.ow=t,t.Ne(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(this.Dc=t,t.diagram=this,t.group=null,this.Oh=!0,this.g("layout",e,t),this.Fb())}},isTreePathToChildren:{get:function(){return this.hv},set:function(t){var e=this.hv;if(e!==t&&(this.hv=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)df(t.value)}},treeCollapsePolicy:{get:function(){return this.bt},set:function(t){var e=this.bt;e!==t&&(t!==Rl&&t!==_m&&t!==Um&&D("Unknown Diagram.treeCollapsePolicy: "+t),this.bt=t,this.g("treeCollapsePolicy",e,t))}},Ke:{get:function(){return this.jw},set:function(t){this.jw=t}},autoScrollInterval:{get:function(){return this.Bq},set:function(t){var e=this.Bq;e!==t&&(this.Bq=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.Dq},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.Dq;e.A(t)||(this.Dq=t=t.I(),this.Qa(),this.g("autoScrollRegion",e,t))}}}),Y.Object.defineProperties(I,{licenseKey:{get:function(){return zm.$b()},set:function(t){zm.add(t)}},version:{get:function(){return YT}}}),I.prototype.makeImageData=I.prototype.gy,I.prototype.makeImage=I.prototype.sA,I.prototype.cacheGroupExternalLinks=I.prototype.zu,I.prototype.addRenderer=I.prototype.cz,I.prototype.makeSVG=I.prototype.kv,I.prototype.makeSvg=I.prototype.Is,I.prototype.stopAutoScroll=I.prototype.tg,I.prototype.doAutoScroll=I.prototype.ms,I.prototype.isUnoccupied=I.prototype.dk,I.prototype.raiseDiagramEvent=I.prototype.S,I.prototype.removeDiagramListener=I.prototype.km,I.prototype.addDiagramListener=I.prototype.Lj,I.prototype.findTreeRoots=I.prototype.Wz,I.prototype.layoutDiagram=I.prototype.qA,I.prototype.findTopLevelGroups=I.prototype.Pz,I.prototype.findTopLevelNodesAndLinks=I.prototype.Qz,I.prototype.ensureBounds=I.prototype.Ta,I.prototype.findLinksByExample=I.prototype.ps,I.prototype.findNodesByExample=I.prototype.qs,I.prototype.findLinkForData=I.prototype.xc,I.prototype.findNodeForData=I.prototype.Gi,I.prototype.findPartForData=I.prototype.yc,I.prototype.findLinkForKey=I.prototype.findLinkForKey,I.prototype.findNodeForKey=I.prototype.Eb,I.prototype.findPartForKey=I.prototype.findPartForKey,I.prototype.rebuildParts=I.prototype.Ld,I.prototype.transformViewToDoc=I.prototype.Xs,I.prototype.transformRectDocToView=I.prototype.WA,I.prototype.transformDocToView=I.prototype.vq,I.prototype.centerRect=I.prototype.ks,I.prototype.scrollToRect=I.prototype.Fv,I.prototype.scroll=I.prototype.scroll,I.prototype.highlightCollection=I.prototype.hA,I.prototype.highlight=I.prototype.gA,I.prototype.selectCollection=I.prototype.NA,I.prototype.select=I.prototype.select,I.prototype.updateAllRelationshipsFromData=I.prototype.yq,I.prototype.updateAllTargetBindings=I.prototype.updateAllTargetBindings,I.prototype.commit=I.prototype.commit,I.prototype.rollbackTransaction=I.prototype.Hf,I.prototype.commitTransaction=I.prototype.Xa,I.prototype.startTransaction=I.prototype.xa,I.prototype.raiseChanged=I.prototype.g,I.prototype.raiseChangedEvent=I.prototype.Wa,I.prototype.removeChangedListener=I.prototype.pk,I.prototype.addChangedListener=I.prototype.yh,I.prototype.removeModelChangedListener=I.prototype.IA,I.prototype.addModelChangedListener=I.prototype.vx,I.prototype.findLayer=I.prototype.Xj,I.prototype.removeLayer=I.prototype.GA,I.prototype.addLayerAfter=I.prototype.Zy,I.prototype.addLayerBefore=I.prototype.tx,I.prototype.addLayer=I.prototype.Sl,I.prototype.moveParts=I.prototype.moveParts,I.prototype.copyParts=I.prototype.Tj,I.prototype.removeParts=I.prototype.Ps,I.prototype.remove=I.prototype.remove,I.prototype.add=I.prototype.add,I.prototype.clearDelayedGeometries=I.prototype.Au,I.prototype.setProperties=I.prototype.xm,I.prototype.attach=I.prototype.wu,I.prototype.set=I.prototype.set,I.prototype.resetInputOptions=I.prototype.qy,I.prototype.setInputOption=I.prototype.OA,I.prototype.getInputOption=I.prototype.am,I.prototype.resetRenderingHints=I.prototype.sy,I.prototype.setRenderingHint=I.prototype.wy,I.prototype.getRenderingHint=I.prototype.Ie,I.prototype.maybeUpdate=I.prototype.gd,I.prototype.requestUpdate=I.prototype.Fb,I.prototype.delayInitialization=I.prototype.uz,I.prototype.isUpdateRequested=I.prototype.mA,I.prototype.invalidateDocumentBounds=I.prototype.Qa,I.prototype.findObjectsNear=I.prototype.pg,I.prototype.findPartsNear=I.prototype.Lz,I.prototype.findObjectsIn=I.prototype.zf,I.prototype.findPartsIn=I.prototype.Px,I.prototype.findObjectsAt=I.prototype.Hi,I.prototype.findPartsAt=I.prototype.Kz,I.prototype.findObjectAt=I.prototype.Zb,I.prototype.findPartAt=I.prototype.Zl,I.prototype.focusObject=I.prototype.Xz,I.prototype.alignDocument=I.prototype.ez,I.prototype.zoomToRect=I.prototype.$A,I.prototype.zoomToFit=I.prototype.zoomToFit,I.prototype.diagramScroll=I.prototype.Gx,I.prototype.focus=I.prototype.focus;var vp=new pt,XS=null,Un=W.document!==void 0,oh=null,$a="",cn=new K(I,"None",0),sh=new K(I,"Uniform",1),xp=new K(I,"UniformToFill",2),Bm=new K(I,"CycleAll",10),WS=new K(I,"CycleNotDirected",11),HS=new K(I,"CycleNotDirectedFast",12),KS=new K(I,"CycleNotUndirected",13),$S=new K(I,"CycleDestinationTree",14),JS=new K(I,"CycleSourceTree",15),Ks=new K(I,"DocumentScroll",1),Vm=new K(I,"InfiniteScroll",2),Rl=new K(I,"TreeParentCollapsed",21),_m=new K(I,"AllParentsCollapsed",22),Um=new K(I,"AnyParentsCollapsed",23),zm=new it,YT="2.2.6",lh="image",ZS=null,QS=!1;function XT(){if(Un){var t=W.document.createElement("canvas"),e=t.getContext("2d"),i=Bt("7ca11abfd022028846");e[i]=Bt("398c3597c01238");for(var n=["5da73c80a36455d6038e4972187c3cae51fd22",B.Dx+"4ae6247590da4bb21c324ba3a84e385776",Mt.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",j.za],r=1;5>r;r++)Bt(n[r-1]);for(e[i]=Bt("39f046ebb36e4b"),i=1;5>i;i++)Bt(n[i-1]);(n.length!==4||n[0][0]!=="5"||n[3][0]!=="7")&&(Mt.prototype.Hd=Mt.prototype.yx),ZS=t}}I.className="Diagram",I.fromDiv=function(t){var e=t;return typeof t=="string"&&(e=W.document.getElementById(t)),e instanceof HTMLDivElement&&e.C instanceof I?e.C:null},I.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},I.useDOM=function(t){Un=t?W.document!==void 0:!1},I.isUsingDOM=function(){return Un},I.None=cn,I.Uniform=sh,I.UniformToFill=xp,I.CycleAll=Bm,I.CycleNotDirected=WS,I.CycleNotDirectedFast=HS,I.CycleNotUndirected=KS,I.CycleDestinationTree=$S,I.CycleSourceTree=JS,I.DocumentScroll=Ks,I.InfiniteScroll=Vm,I.TreeParentCollapsed=Rl,I.AllParentsCollapsed=_m,I.AnyParentsCollapsed=Um;function qS(){this.Uy=null,this.j="zz@orderNum",this._tk==="63ad05bbe23a1786468a4c741b6d2"?this.kd=this.j=!0:this.kd=null}function Ja(t,e){if(e.Vb.setTransform(e.dc,0,0,e.dc,0,0),e.Vb.Ed(),t.kd===null)t:{e="f";var i=W[Bt("76a715b2f73f148a")][Bt("72ba13b5")];if(t.kd=!0,Un){var n=I[Bt("76a115b6ed251eaf4692")];if(n)for(var r=zm.iterator;r.next()&&(n=r.value,n=Bt(n).split(Bt("39e9")),!(6>n.length));){var o=Bt(n[1]).split(".");if(n[4]!=="7da71ca0")break;var l=Bt(B[Bt("6cae19")]).split(".");if(o[0]>l[0]||o[0]===l[0]&&o[1]>=l[1]){var h=W[Bt("74a900bae4370f8b51")][Bt("6fbb13a1c2311e8a57")].toLowerCase();if(l=h[Bt("73a612b6fb191d")](Bt("3aad1ab6e022098b4dc4")),o=Bt(n[2]),-1<l&&(h=h[Bt("73a612b6fb191d")](o.toLowerCase()+"/"),t.kd=!(-1<h&&h<l),!t.kd))break;for(l=i[Bt("76ad18b4f73e")],h=i[Bt("73a612b6fb191d")](Bt("35e7"))+2;h<l;h++)e+=i[h];if(l=e[Bt("73a612b6fb191d")](o),0>l&&o!==Bt("7da71ca0ad381e90")&&(l=e[Bt("73a612b6fb191d")](Bt("76a715b2ef3e149757"))),0>l&&(l=e[Bt("73a612b6fb191d")](Bt("76a715b2ef3e149757"))),0>l&&(l=i[Bt("73a612b6fb191d")](Bt("7baa19a6f76c1988428554"))),t.kd=!(0<=l&&l<e[Bt("73a612b6fb191d")](Bt("35"))||e[Bt("73a612b6fb191d")](Bt("35"))===-1),!t.kd||i[Bt("73a612b6fb191d")](Bt("7fb002b6ed25128b4da25b2e"))&&i[Bt("73a612b6fb191d")](Bt("75ba1beee63a1e875799507d"))&&(t.kd=!(-1<i[Bt("73a612b6fb191d")](o)),!t.kd))break;if(o[0]==="#"){l=W.document.createElement("div");for(var a=n[0].replace(/[A-Za-z]/g,"");4>a.length;)a+="9";if(h=a,a=a.substr(a.length-4),n="",n+=["gsh","gsf"][parseInt(a.substr(0,1),10)%2],n+=["Header","Background","Display","Feedback"][parseInt(a.substr(0,1),10)%4],l[Bt("79a417a0f0181a8946")]=n,W.document[Bt("78a712aa")]){W.document[Bt("78a712aa")][Bt("7bb806b6ed32388c4a875b")](l),a=W.getComputedStyle(l).getPropertyValue(Bt("78a704b7e62456904c9b12701b6532a8"));var c=W.getComputedStyle(l).getPropertyValue(Bt("75b817b0ea2202"));if(W.document[Bt("78a712aa")][Bt("68ad1bbcf533388c4a875b")](l),a){if(l=W[Bt("77a902b0eb1b1e804a8a")],c==="0."+parseInt(h,10)%100||a.indexOf(parseInt(o[1]+o[2],16))!==-1&&a.indexOf(parseInt(o[3]+o[4],16))!==-1){t.kd=!1;break}else if(l&&l(Bt("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(n="."+n,o=0;o<document.styleSheets.length;o++){l=document.styleSheets[o].rules||document.styleSheets[o].cssRules;for(var p in l)if(n===l[p].selectorText){t.kd=!1;break t}}}}else t.kd=null,t.kd=!1}}}else{for(p=i[Bt("76ad18b4f73e")],r=i[Bt("73a612b6fb191d")](Bt("35e7"))+2;r<p;r++)e+=i[r];i=e[Bt("73a612b6fb191d")](Bt("7da71ca0ad381e90")),t.kd=!(0<=i&&i<e[Bt("73a612b6fb191d")](Bt("35")))}}}return 0<t.kd&&t!==t.Uy}function Gm(t,e){if(Un){if(e!=null||D("Diagram setup requires an argument DIV."),t.Ga!==null&&D("Diagram has already completed setup."),typeof e=="string"?t.Ga=W.document.getElementById(e):e instanceof HTMLDivElement?t.Ga=e:D("No DIV or DIV id supplied: "+e),t.Ga===null&&D("Invalid DIV id; could not get element with id: "+e),t.Ga.C!==void 0&&D("Invalid div id; div already has a Diagram associated with it."),!t.xl&&W.ResizeObserver){var i=U(function(){t.Fb()},250);t.xl=new W.ResizeObserver(function(){i()}),t.xl.observe(t.Ga)}W.getComputedStyle(t.Ga,null).position==="static"&&(t.Ga.style.position="relative"),e=5;var n="rgba(2"+e+"5, 255, 255, 0)";e--,t.Ga.style["-webkit-tap-highlight-color"]=n,t.Ga.innerHTML="",t.Ga.C=t,t.Ga.goDiagram=t,t.Ga.go=W.go;var r=t.Zr?new ao(t):new Tn(t);if(r.style!==void 0&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px",W.getComputedStyle(t.Ga,null).getPropertyValue("direction")==="rtl"&&(t.Vn=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none",r.style.touchAction="none"),t.Ca=r,t.Vb=r.context,n=t.Vb,t.dc=t.computePixelRatio(),t.viewSize.u()||(t.ua=t.Ga.clientWidth||1,t.ta=t.Ga.clientHeight||1),AS(t,t.ua,t.ta),t.Ga.insertBefore(r.La,t.Ga.firstChild),r=new Tn(null),r.width=1,r.height=1,t.Iw=r,t.Ny=r.context,Un){r=J("div");var o=J("div");r.style.position="absolute",r.style.overflow="auto",r.style.width=t.ua+"px",r.style.height=t.ta+"px",r.style.zIndex="1",o.style.position="absolute",o.style.width="1px",o.style.height="1px",t.Ga.appendChild(r),r.appendChild(o),r.onscroll=IT,r.addEventListener("pointerdown",FT),r.C=t,r.Sy=!0,r.Ty=!0,t.fu=r,t.du=o}t.nq=U(function(){t.si=null,t.N()},300),t.Zv=U(function(){gm(t)},250),t.preventDefault=function(l){return l.preventDefault(),!1},t.gk=function(l){if(t.isEnabled){var h=Fl(t,l,!0);h.bubbles=!0;var a=0,c=0;h.delta=0,l.deltaX!==void 0?(l.deltaX!==0&&(a=0<l.deltaX?1:-1),l.deltaY!==0&&(c=0<l.deltaY?1:-1),h.delta=Math.abs(l.deltaX)>Math.abs(l.deltaY)?-a:-c):l.wheelDeltaX!==void 0?(l.wheelDeltaX!==0&&(a=0<l.wheelDeltaX?-1:1),l.wheelDeltaY!==0&&(c=0<l.wheelDeltaY?-1:1),h.delta=Math.abs(l.wheelDeltaX)>Math.abs(l.wheelDeltaY)?-a:-c):l.wheelDelta!==void 0&&l.wheelDelta!==0&&(h.delta=0<l.wheelDelta?1:-1),t.doMouseWheel(),Ws(h,l)}},t.xA=function(l){t.isEnabled&&(t.cl=!1,Fl(t,l,!0),l=t.currentTool,l.cancelWaitAfter(),l.standardMouseOver())},t.jk=function(l){if(t.isEnabled){t.cl=!0;var h=t.Wt;h[l.pointerId]===void 0&&(h[l.pointerId]=l),h=t.ul;var a=!1;if(h[0]!==null&&h[0].pointerId===l.pointerId)h[0]=l;else if(h[1]!==null&&h[1].pointerId===l.pointerId)h[1]=l,a=!0;else if(h[0]===null)h[0]=l;else if(h[1]===null)h[1]=l,a=!0;else{l.preventDefault();return}(h=l.pointerType==="touch"||l.pointerType==="pen")&&(t.ju=!1,t.Mt=!0);var c=a;a=wm(t,l,!0,!1,!0,c),Xa(t,l,a),a.targetDiagram=xm(l,l.target),a.targetObject=null,c||a.clone(t.br),c=t.Rw,h=h?25:10,l.timeStamp-t.Qw<t.Xy&&!(Math.abs(c.x-l.screenX)>h||Math.abs(c.y-l.screenY)>h)?t.rr++:t.rr=1,a.clickCount=t.rr,t.Qw=l.timeStamp,t.Rw.sg(l.screenX,l.screenY),t.doMouseDown(),l.button===1?l.preventDefault():Ws(a,l)}},t.kk=function(l){if(t.isEnabled){t.cl=!0;var h=t.ul;if(h[0]!==null&&h[0].pointerId===l.pointerId)h[0]=l;else{if(h[1]!==null&&h[1].pointerId===l.pointerId){h[1]=l;return}if(h[0]===null)h[0]=l;else return}if(h[0].pointerId===l.pointerId){h=wm(t,l,!1,!1,!1,h[1]!==null);var a=W.document.elementFromPoint(l.clientX,l.clientY);a!==null&&a.shadowRoot!==void 0&&a.shadowRoot!==null&&(a=a.shadowRoot.elementFromPoint(l.clientX,l.clientY));var c=t,p=l;a&&a.C&&(p=l,c=a.C),h.targetDiagram=c,Xa(t,p,h),h.targetObject=null,t.doMouseMove(),Ws(h,l)}}},t.mk=function(l){if(t.isEnabled){t.cl=!0;var h=l.pointerType==="touch"||l.pointerType==="pen",a=t.Wt;if(h&&t.ju)delete a[l.pointerId],l.preventDefault();else if(a=t.ul,a[0]!==null&&a[0].pointerId===l.pointerId){a[0]=null,a=wm(t,l,!1,!0,!0,!1);var c=W.document.elementFromPoint(l.clientX,l.clientY);c!==null&&c.shadowRoot!==void 0&&c.shadowRoot!==null&&(c=c.shadowRoot.elementFromPoint(l.clientX,l.clientY)),c!==null&&c.C instanceof I&&c.C!==t&&Xa(c.C,l,a),c===null&&(c=l.target),Xa(t,l,a),a.clickCount=t.rr,a.targetDiagram=xm(l,c),a.targetObject=null,t.doMouseUp(),Ws(a,l),h&&(t.Mt=!1)}else a[1]!==null&&a[1].pointerId===l.pointerId&&(a[1]=null)}},t.lk=function(l){if(t.isEnabled){t.cl=!1;var h=t.Wt;h[l.pointerId]&&delete h[l.pointerId],h=t.ul,h[0]!==null&&h[0].pointerId===l.pointerId&&(h[0]=null),h[1]!==null&&h[1].pointerId===l.pointerId&&(h[1]=null),l.pointerType!=="touch"&&l.pointerType!=="pen"&&(l=t.currentTool,l.cancelWaitAfter(),l.standardMouseOver())}},t.zt=n.Y["d"+bS[1]+bS[2]+"wI"+lh.slice(1,5)]["b"+hL.slice(1,e)](n.Y,ZS,e,e),n.Hc(!0),DT(t)}}qS.className="DiagramHelper";function ds(t){this.j=t===void 0?new N:t,this.o=new N}Y.Object.defineProperties(ds.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.o},set:function(t){this.o=t}}});var bS="DraggingInfo";ds.className="DraggingInfo";function tM(t,e,i){this.node=t,this.info=e,this.Wu=i}tM.className="DraggingNodeInfoPair";function uh(){this.reset()}uh.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new yt(NaN,NaN).freeze(),this.gridSnapCellSpot=di,this.gridSnapOrigin=new N(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},uh.className="DraggingOptions";function wp(t,e){if(typeof t=="string"||W.Element&&t instanceof Element)var i=I.call(this,t)||this;else i=I.call(this)||this,e=t;return eM(i),e&&i.xm(e),i}z(wp,I);function eM(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=oo,t.layout=new Fe}wp.prototype.reset=function(){I.prototype.reset.call(this),eM(this)},wp.className="Palette";function lo(t,e){if(typeof t=="string"||W.Element&&t instanceof Element)var i=I.call(this,t)||this;else i=I.call(this)||this,e=t;var n=i;i.animationManager.isEnabled=!1,i.qb=!0,i.Ov=null,i.Mn=!1,i.Nn=!1,i.yu=!0,i.xu=!0,i.ct=0,i.$i=!1,i.El=null,i.wy("drawShadows",!1),t=new ut;var r=new gt;return r.stroke="magenta",r.strokeWidth=2,r.fill="transparent",r.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(r),i.Yi=t,i.allowCopy=!1,i.allowDelete=!1,i.allowSelect=!0,i.autoScrollRegion=new Ft(0,0,0,0),i.ja.h(0,0),i.toolManager.Za("Dragging",new Bl,i.toolManager.mouseMoveTools),i.click=function(){var o=n.observed;if(o!==null){var l=o.viewportBounds,h=n.lastInput.documentPoint;o.position=new N(h.x-l.width/2,h.y-l.height/2)}},i.uw=function(){n.Qa(),Za(n)},i.tw=function(){n.observed!==null&&(n.Qa(),n.N())},i.ft=function(){1>n.updateDelay?n.N():n.$i||(n.$i=!0,setTimeout(function(){return n.redraw()},n.updateDelay))},i.sw=function(){n.observed!==null&&Za(n)},i.autoScale=sh,i.qb=!1,e&&Object.assign(i,e),i}z(lo,I),lo.prototype.computePixelRatio=function(){return 1},lo.prototype.redraw=function(){if(this.$i&&1<=this.updateDelay){this.$i=!1;var t=this.Ca,e=this.Vb;if(t!==null&&e!==null){if(Ha(this),this.El===null){var i=new Tn(null);i.width=t.width,i.height=t.height,this.El=i}try{this.Ca=this.El,this.Vb=this.Ca.context,this.Vb.Hc(!0),this.Vb.setTransform(1,0,0,1,0,0),this.Vb.clearRect(0,0,this.Ca.width,this.Ca.height),iM(this)}finally{this.Ca=t,this.Vb=e}}}I.prototype.redraw.call(this)},lo.prototype.oc=function(){if(this.Ga===null&&D("No div specified"),this.Ca===null&&D("No canvas specified"),!(this.Ca instanceof ao)&&(v0(this.box),this.Vc)){var t=this.observed;if(t!==null&&!t.animationManager.defaultAnimation.isAnimating&&t.Oi){Ha(this);var e=this.Ca;t=this.Vb,t.Hc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?iM(this):this.El!==null&&(t.drawImage(this.El.La,0,0),e=this.vb,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),t.scale(this.dc,this.dc),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy)),e=this.Oa.m;for(var i=e.length,n=0;n<i;n++)e[n].oc(t,this);this.Vc=this.lj=!1}}};function iM(t){var e=t.observed;if(e!==null){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,r=e.grid;n&&r!==null&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(r=_.alloc().assign(t.viewportBounds).Qc(e.viewportBounds),Fo(e,r),_.free(r),yi(e));var o=t.vb;o.reset(),t.scale!==1&&o.scale(t.scale),t.position.x===0&&t.position.y===0||o.translate(-t.position.x,-t.position.y),r=t.Vb,r.scale(t.dc,t.dc),r.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),e=e.Oa.m,o=e.length;for(var l=0;l<o;l++){var h=e[l],a=t;if(h.visible&&h.opacity!==0){var c=h.diagram.grid.part;if(!i&&h.isTemporary)n&&c.layer===h&&(h=eh(h,r),c.oc(r,a),r.globalAlpha=h);else{for(var p=eh(h,r),d=a.scale,m=_.alloc(),x=h.Ha.m,v=x.length,S=0;S<v;S++){var P=x[S];(n||P!==c)&&h.Di(r,P,a,null,d,m,!1)}_.free(m),r.globalAlpha=p}}}}}function Za(t){var e=t.box;if(e!==null){var i=t.observed;if(i!==null){t.Vc=!0,i=i.viewportBounds;var n=e.selectionObject,r=yt.alloc();r.h(i.width,i.height),n.desiredSize=r,yt.free(r),t=2/t.scale,n instanceof gt&&(n.strokeWidth=t),e.location=new N(i.x-t/2,i.y-t/2),e.isSelected=!0}}}lo.prototype.computeBounds=function(){var t=this.observed;if(t===null)return ep;var e=t.documentBounds.copy();return e.Qc(t.viewportBounds),e},lo.prototype.invalidateViewport=function(){this.Vc!==!0&&(this.Vc=!0,this.Fb())},lo.prototype.onViewportBoundsChanged=function(t,e,i,n){this.qb||(Hs(this),this.N(),ps(this),this.Qa(),Za(this),this.dd.scale=i,this.dd.position.x=t.x,this.dd.position.y=t.y,this.dd.bounds.assign(t),this.dd.by=n,this.S("ViewportBoundsChanged",this.dd,t))},Y.Object.defineProperties(lo.prototype,{observed:{get:function(){return this.Ov},set:function(t){var e=this.Ov;if(t instanceof lo&&D("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(e!==null&&(this.remove(this.box),e.km("ViewportBoundsChanged",this.uw),e.km("DocumentBoundsChanged",this.tw),e.km("InvalidateDraw",this.ft),e.km("AnimationFinished",this.sw)),this.Ov=t,t!==null&&(t.Lj("ViewportBoundsChanged",this.uw),t.Lj("DocumentBoundsChanged",this.tw),t.Lj("InvalidateDraw",this.ft),t.Lj("AnimationFinished",this.sw),this.add(this.box)),this.Qa(),t===null){this.El=null;var i=this.Ca,n=this.Vb;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else this.ft(null),Za(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.Yi},set:function(t){var e=this.Yi;e!==t&&(this.Yi=t,this.remove(e),this.add(this.Yi),Za(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.yu},set:function(t){this.yu!==t&&(this.yu=t,this.redraw())}},drawsGrid:{get:function(){return this.xu},set:function(t){this.xu!==t&&(this.xu=t,this.redraw())}},updateDelay:{get:function(){return this.ct},set:function(t){0>t&&(t=0),this.ct!==t&&(this.ct=t)}}}),lo.className="Overview";function Bl(){ie.call(this),this.j=null}z(Bl,ie),Bl.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(e===null)return!1;var i=t.lastInput;return!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)?!1:(this.findDraggablePart()===null&&(i=e.viewportBounds,this.j=new N(i.width/2,i.height/2),t=t.firstInput.documentPoint,e.position=new N(t.x-this.j.x,t.y-this.j.y)),!0)},Bl.prototype.doActivate=function(){this.j=null,ie.prototype.doActivate.call(this)},Bl.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;e!==null&&e.cursor&&(t.currentCursor=e.cursor)},Bl.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(e!==null){var i=t.box;if(i!==null){if(this.j===null){var n=t.firstInput.documentPoint;i=i.location,this.j=new N(n.x-i.x,n.y-i.y)}t=t.lastInput.documentPoint,e.position=new N(t.x-this.j.x,t.y-this.j.y)}}},Bl.className="OverviewDraggingTool";function Gt(){je(this),this.C=ih,this.Ma=this.D=this.o=!0,this.L=this.wa=this.Qb=this.Ba=!1,this.ki=this.j=null,this.rc=1.05,this.Nt=NaN,this.Pw=null,this.qu=NaN,this.pu=ep,this.Gb=!0,this.dg=null,this.Rb=200}Gt.prototype.toString=function(){return"CommandHandler"},Gt.prototype.Ne=function(t){this.C=t},Gt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=zt?e.meta:e.control,n=e.shift,r=e.alt,o=e.key;!i||o!=="C"&&o!=="Insert"?i&&o==="X"||n&&o==="Del"?this.canCutSelection()&&this.cutSelection():i&&o==="V"||n&&o==="Insert"?this.canPasteSelection()&&this.pasteSelection():i&&o==="Y"||r&&n&&o==="Backspace"?this.canRedo()&&this.redo():i&&o==="Z"||r&&o==="Backspace"?this.canUndo()&&this.undo():o==="Del"||o==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():i&&o==="A"?this.canSelectAll()&&this.selectAll():o==="Esc"?this.canStopCommand()&&this.stopCommand():o==="Up"?t.allowVerticalScroll&&(i?t.scroll("pixel","up"):t.scroll("line","up")):o==="Down"?t.allowVerticalScroll&&(i?t.scroll("pixel","down"):t.scroll("line","down")):o==="Left"?t.allowHorizontalScroll&&(i?t.scroll("pixel","left"):t.scroll("line","left")):o==="Right"?t.allowHorizontalScroll&&(i?t.scroll("pixel","right"):t.scroll("line","right")):o==="PageUp"?n&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):o==="PageDown"?n&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):o==="Home"?i&&t.allowVerticalScroll?t.scroll("document","up"):!i&&t.allowHorizontalScroll&&t.scroll("document","left"):o==="End"?i&&t.allowVerticalScroll?t.scroll("document","down"):!i&&t.allowHorizontalScroll&&t.scroll("document","right"):o===" "?this.canScrollToPart()&&this.scrollToPart():o==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():o==="Add"?this.canIncreaseZoom()&&this.increaseZoom():i&&o==="0"?this.canResetZoom()&&this.resetZoom():n&&o==="Z"?this.canZoomToFit()&&this.zoomToFit():i&&!n&&o==="G"?this.canGroupSelection()&&this.groupSelection():i&&n&&o==="G"?this.canUngroupSelection()&&this.ungroupSelection():o==="F2"||e.event&&e.event.key==="F2"?this.canEditTextBlock()&&this.editTextBlock():o==="ContextMenu"||e.event&&e.event.key==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Gt.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Gt.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof ee&&t.allowSelect&&t.clearSelection(),e!==null&&e.doCancel()},Gt.prototype.canStopCommand=function(){return!0},Gt.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.S("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.S("ChangedSelection",t.selection),t.currentCursor=""}},Gt.prototype.canSelectAll=function(){return this.diagram.allowSelect},Gt.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.xa("Delete"),t.S("SelectionDeleting",t.selection);for(var e=new Q,i=t.selection.iterator;i.next();)ms(e,i.value,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,function(n){return n.canDelete()});t.Ps(e,!0),t.S("SelectionDeleted",e)}finally{t.Xa("Delete"),t.S("ChangedSelection",t.selection),t.currentCursor=""}},Gt.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||t.selection.count===0)},Gt.prototype.copySelection=function(){var t=this.diagram,e=new Q;for(t=t.selection.iterator;t.next();)ms(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(i){return i.canCopy()});this.copyToClipboard(e)},Gt.prototype.canCopySelection=function(){var t=this.diagram;return!!(t.allowCopy&&t.allowClipboard&&t.selection.count!==0)},Gt.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Gt.prototype.canCutSelection=function(){var t=this.diagram;return!!(!t.isReadOnly&&!t.isModelReadOnly&&t.allowCopy&&t.allowDelete&&t.allowClipboard&&t.selection.count!==0)},Gt.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(t===null)oh=null,$a="";else{i=e.model;var n=!1,r=!1,o=null;try{i.dm()&&(n=i.Sj,i.Sj=this.copiesParentKey),i.bk()&&(r=i.Rj,i.Rj=this.copiesGroupKey),o=e.Tj(t,null,!0)}finally{i.dm()&&(i.Sj=n),i.bk()&&(i.Rj=r),i=new it,i.addAll(o),oh=i,$a=e.model.dataFormat}}e.S("ClipboardChanged",i)},Gt.prototype.pasteFromClipboard=function(){var t=new Q,e=oh;if(e===null)return t;var i=this.diagram;if($a!==i.model.dataFormat)return t;var n=i.model,r=!1,o=!1,l=null;try{n.dm()&&(r=n.Sj,n.Sj=this.copiesParentKey),n.bk()&&(o=n.Rj,n.Rj=this.copiesGroupKey),l=i.Tj(e,i,!1)}finally{for(n.dm()&&(n.Sj=r),n.bk()&&(n.Rj=o),e=l.iterator;e.next();)i=e.value,n=e.key,i.location.u()||(n.location.u()?i.location=n.location:!i.position.u()&&n.position.u()&&(i.position=n.position)),t.add(i)}return t},Gt.prototype.pasteSelection=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.xa("Paste");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(t!==null){var r=e.computePartsBounds(e.selection);if(r.u()){var o=this.computeEffectiveCollection(e.selection,e.on);Cm(e,o,new N(t.x-r.centerX,t.y-r.centerY),e.on,!1)}}e.S("ClipboardPasted",i)}finally{e.Xa("Paste"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},Gt.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||oh===null||oh.count===0||$a!==t.model.dataFormat)},Gt.prototype.undo=function(){this.diagram.undoManager.undo()},Gt.prototype.canUndo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canUndo()},Gt.prototype.redo=function(){this.diagram.undoManager.redo()},Gt.prototype.canRedo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canRedo()},Gt.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===cn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Gt.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale!==cn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Gt.prototype.increaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===cn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Gt.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale!==cn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Gt.prototype.resetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Gt.prototype.canResetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;return t<e.minScale||t>e.maxScale?!1:e.allowZoom},Gt.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.qc(),t.redraw();var i=t.position,n=t.scale;Do(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.qu&&!isNaN(this.Nt)&&t.documentBounds.A(this.pu)?(t.scale=this.Nt,t.position=this.Pw,this.qu=NaN,this.pu=ep):(this.Nt=n,this.Pw=i.copy(),t.zoomToFit(),this.qu=t.scale,this.pu=t.documentBounds.copy()),pm(e)},Gt.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Gt.prototype.scrollToPart=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.Ta(),t===null){try{this.dg!==null&&(this.dg.next()?t=this.dg.value:this.dg=null)}catch{this.dg=null}t===null&&(0<e.highlighteds.count?this.dg=e.highlighteds.iterator:0<e.selection.count&&(this.dg=e.selection.iterator),this.dg!==null&&this.dg.next()&&(t=this.dg.value))}if(t!==null){var i=e.animationManager;Do(i,"Scroll To Part");var n=this.scrollToPartPause;if(0<n){var r=Vl(this,t,[t]);if(r.length===1)e.xa(),e.ks(t.actualBounds),e.Xa("Scroll To Part");else{var o=function(){e.xa();for(var a=r.pop();0<r.length&&a instanceof q&&a.isTreeExpanded&&(!(a instanceof dt)||a.isSubGraphExpanded);)a=r.pop();0<r.length?(a instanceof ut&&e.Fv(a.actualBounds),a instanceof q&&!a.isTreeExpanded&&(a.isTreeExpanded=!0),a instanceof dt&&!a.isSubGraphExpanded&&(a.isSubGraphExpanded=!0)):(a instanceof ut&&e.ks(a.actualBounds),e.km("LayoutCompleted",l)),e.Xa("Scroll To Part")},l=function(){F(o,(i.isEnabled?i.duration:0)+n)};e.Lj("LayoutCompleted",l),o()}}else{var h=e.position.copy();e.ks(t.actualBounds),h.Ua(e.position)&&i.qc()}}};function Vl(t,e,i){if(e.isVisible())return i;if(e instanceof Tt)Vl(t,e.adornedPart,i);else if(e instanceof H){var n=e.fromNode;n!==null&&Vl(t,n,i),e=e.toNode,e!==null&&Vl(t,e,i)}else e instanceof q&&(n=e.labeledLink,n!==null&&Vl(t,n,i),n=e.qg(),n!==null&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),Vl(t,n,i))),e=e.containingGroup,e!==null&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),Vl(t,e,i));return i}Gt.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof ut)?!1:(t=this.diagram,t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll)},Gt.prototype.collapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.xa("Collapse Tree"),Do(e.animationManager,"Collapse Tree");var i=new it;if(t!==null&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof q&&r.isTreeExpanded&&(r.collapseTree(),i.add(r))}e.S("TreeCollapsed",i)}finally{e.Xa("Collapse Tree")}},Gt.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof q&&t.isTreeExpanded))return!1;if(0<t.Xp().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof q&&e.isTreeExpanded&&0<e.Xp().count)return!0;return!1},Gt.prototype.expandTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.xa("Expand Tree"),Do(e.animationManager,"Expand Tree");var i=new it;if(t!==null&&!t.isTreeExpanded)t.expandTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof q&&!r.isTreeExpanded&&(r.expandTree(),i.add(r))}e.S("TreeExpanded",i)}finally{e.Xa("Expand Tree")}},Gt.prototype.canExpandTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof q)||t.isTreeExpanded)return!1;if(0<t.Xp().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof q&&!e.isTreeExpanded&&0<e.Xp().count)return!0;return!1},Gt.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.ck()){var i=this.archetypeGroupData;if(i!==null){var n=null;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.xa("Group");for(var r=new it,o=t.selection.iterator;o.next();){var l=o.value;l.Mc()&&l.canGroup()&&r.add(l)}for(var h=new it,a=r.iterator;a.next();){var c=a.value;o=!1;for(var p=r.iterator;p.next();)if(c.Jd(p.value)){o=!0;break}o||h.add(c)}if(0<h.count){var d=h.first().containingGroup;if(d!==null)for(;d!==null;){r=!1;for(var m=h.iterator;m.next();)if(!m.value.Jd(d)){r=!0;break}if(r)d=d.containingGroup;else break}if(i instanceof dt)Ln(i),n=i.copy(),n!==null&&t.add(n);else if(e.dv(i)){var x=e.copyNodeData(i);ct(x)&&(e.sf(x),n=t.Gi(x))}if(n!==null){d!==null&&this.isValidMember(d,n)&&(n.containingGroup=d);for(var v=h.iterator;v.next();){var S=v.value;this.isValidMember(n,S)&&(S.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.S("SelectionGrouped",n)}finally{t.Xa("Group"),t.S("ChangedSelection",t.selection),t.currentCursor=""}}}},Gt.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.ck()||this.archetypeGroupData===null)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Mc()&&e.canGroup())return!0}return!1};function Ym(t){var e=Et();for(t=t.iterator;t.next();){var i=t.value;i instanceof H||e.push(i)}t=new Q,i=e.length;for(var n=0;n<i;n++){for(var r=e[n],o=!0,l=0;l<i;l++)if(r.Jd(e[l])){o=!1;break}o&&t.add(r)}return Ut(e),t}Gt.prototype.isValidMember=function(t,e){if(e===null||t===e||e instanceof H)return!1;if(t!==null){if(t===e||t.Jd(e))return!1;var i=t.memberValidation;if(i!==null&&!i(t,e)||t.data===null&&e.data!==null||t.data!==null&&e.data===null)return!1}return i=this.memberValidation,i!==null?i(t,e):!0},Gt.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.model;if(i.ck())try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.xa("Ungroup");var n=new it;if(t!==null)n.add(t);else for(var r=e.selection.iterator;r.next();){var o=r.value;o instanceof dt&&o.canUngroup()&&n.add(o)}var l=new it;if(0<n.count){e.clearSelection(!0);for(var h=n.iterator;h.next();){var a=h.value;a.expandSubGraph();var c=a.containingGroup,p=c!==null&&c.data!==null?i.pa(c.data):void 0;l.addAll(a.memberParts);for(var d=l.iterator;d.next();){var m=d.value;if(m.isSelected=!0,!(m instanceof H)){var x=m.data;x!==null?i.tq(x,p):m.containingGroup=c}}e.remove(a)}}e.S("SelectionUngrouped",n,l)}finally{e.Xa("Ungroup"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},Gt.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.ck())return!1;if(t!==null){if(!(t instanceof dt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&e.canUngroup())return!0;return!1},Gt.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=Ym(t).iterator;t.next();){var n=t.value;n.containingGroup!==null&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},Gt.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.xa("Collapse SubGraph"),Do(e.animationManager,"Collapse SubGraph");var i=new it;if(t!==null&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof dt&&r.isSubGraphExpanded&&(r.collapseSubGraph(),i.add(r))}e.S("SubGraphCollapsed",i)}finally{e.Xa("Collapse SubGraph")}},Gt.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return!!(t instanceof dt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&e.isSubGraphExpanded)return!0;return!1},Gt.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.xa("Expand SubGraph"),Do(e.animationManager,"Expand SubGraph");var i=new it;if(t!==null&&!t.isSubGraphExpanded)t.expandSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof dt&&!r.isSubGraphExpanded&&(r.expandSubGraph(),i.add(r))}e.S("SubGraphExpanded",i)}finally{e.Xa("Expand SubGraph")}},Gt.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return t instanceof dt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&!e.isSubGraphExpanded)return!0;return!1},Gt.prototype.editTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.toolManager.findTool("TextEditing");if(i!==null){if(t===null){t=null;for(var n=e.selection.iterator;n.next();){var r=n.value;if(r.canEdit()){t=r;break}}if(t===null)return;t=t.Yl(function(o){return o instanceof Yt&&o.editable})}t!==null&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},Gt.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||e.toolManager.findTool("TextEditing")===null)return!1;if(t!==null){if(!(t instanceof Yt))return!1;if(t=t.part,t!==null&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if(t=e.value,t.canEdit()&&(t=t.Yl(function(i){return i instanceof Yt&&i.editable}),t!==null))return!0;return!1},Gt.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(i!==null&&(t===void 0&&(t=0<e.selection.count?e.selection.first():e),t=i.findObjectWithContextMenu(t),t!==null)){var n=e.lastInput,r=null;t instanceof ht?r=t.da(_t):e.viewportBounds.$(n.documentPoint)||(r=e.viewportBounds,r=new N(r.x+r.width/2,r.y+r.height/2)),r!==null&&(n.viewPoint=e.vq(r),n.documentPoint=r,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,sS(i,!1,t)}},Gt.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");return i===null?!1:(t===void 0&&(t=0<e.selection.count?e.selection.first():e),i.findObjectWithContextMenu(t)!==null)},Gt.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool("Dragging"),r=i.currentTool===n;if(e===void 0&&(e=r?n.dragOptions:i.on),n=new pt,t===null)return n;for(var o=t.iterator;o.next();)Io(i,n,o.value,r,e);if(i.draggedLink!==null&&e.dragsLink)return n;for(o=t.iterator;o.next();)t=o.value,t instanceof H&&(e=t.fromNode,e===null||n.contains(e)?(e=t.toNode,e===null||n.contains(e)||n.remove(t)):n.remove(t));return n},Y.Object.defineProperties(Gt.prototype,{diagram:{get:function(){return this.C}},copiesClipboardData:{get:function(){return this.o},set:function(t){this.o=t}},copiesConnectedLinks:{get:function(){return this.D},set:function(t){this.D=t}},deletesConnectedLinks:{get:function(){return this.Ma},set:function(t){this.Ma=t}},copiesTree:{get:function(){return this.Ba},set:function(t){this.Ba=t}},deletesTree:{get:function(){return this.Qb},set:function(t){this.Qb=t}},copiesParentKey:{get:function(){return this.wa},set:function(t){this.wa=t}},copiesGroupKey:{get:function(){return this.L},set:function(t){this.L=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.ki},set:function(t){this.ki=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.rc},set:function(t){1<t||D("zoomFactor must be larger than 1.0, not: "+t),this.rc=t}},isZoomToFitRestoreEnabled:{get:function(){return this.Gb},set:function(t){this.Gb=t}},scrollToPartPause:{get:function(){return this.Rb},set:function(t){this.Rb=t}}}),Gt.className="CommandHandler",NS=function(){return new Gt};function ht(){je(this),this.G=4225027,this.mb=1,this.bg=null,this.na="",this.hd=this.Ub=null,this.ja=new N(NaN,NaN).freeze(),this.Tc=jg,this.Zf=Vu,this.Yf=xw,this.vb=new Mt,this.Nh=new Mt,this.Bb=null,this.sa=this.Rk=1,this.zb=0,this.Ee=wr,this.Ug=_u,this.lc=new _(NaN,NaN,NaN,NaN).freeze(),this.xb=new _(NaN,NaN,NaN,NaN).freeze(),this.uc=new _(0,0,NaN,NaN).freeze(),this.P=this.Po=this.Qo=null,this.wk=this.yb=Pi,this.ap=0,this.bp=1,this.Bg=0,this.Ym=1,this.sp=null,this.gp=-1/0,this.zl=0,this.Al=Oo,this.Bl=Ti,this.Th="",this.fb=this.O=null,this.Ck=-1,this.Dl=this.$a=this.Sh=this.Hl=null,this.Jr=ce,this.ep=this.wg=this.Bj=null}var he,ce,xr,wr,Xe,be,Qa,qa,ba,tf;ht.prototype.cloneProtected=function(t){t.G=this.G|6144,t.mb=this.mb,t.na=this.na,t.Ub=this.Ub,t.hd=this.hd,t.wg=this.wg,t.ja.assign(this.ja),t.Tc=this.Tc.I(),t.Zf=this.Zf.I(),t.Yf=this.Yf.I(),this.Bb!==null?t.Bb=this.Bb.copy():t.Bb=null,t.sa=this.sa,t.zb=this.zb,t.Ee=this.Ee,t.Ug=this.Ug.I(),t.lc.assign(this.lc),t.xb.assign(this.xb),t.uc.assign(this.uc),t.Po=this.Po,this.P!==null&&(t.P=this.P.copy()),t.yb=this.yb.I(),t.wk=this.wk.I(),t.ap=this.ap,t.bp=this.bp,t.Bg=this.Bg,t.Ym=this.Ym,t.sp=this.sp,t.gp=this.gp,t.zl=this.zl,t.Al=this.Al.I(),t.Bl=this.Bl,t.Th=this.Th,this.O!==null&&(t.O=this.O.copy()),t.fb=this.fb,t.Ck=this.Ck,this.Sh!==null&&(t.Sh=ke(this.Sh)),this.$a!==null&&(t.$a=this.$a.copy()),t.Dl=this.Dl},ht.prototype.sx=function(t){var e=this.Sh;if(mt(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.Sh=e=[];e.push(t)},ht.prototype.wf=function(t){t.Qo=null,t.Bj=null,t.s()},ht.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.Sh!==null)for(var e=0;e<this.Sh.length;e++){var i=this.Sh[e];t[i]=this[i]}return t},ht.prototype.copy=function(){return this.clone()},s=ht.prototype,s.gb=function(t){t.classType===H?t.name.indexOf("Orient")===0?this.segmentOrientation=t:D("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===ht&&(this.stretch=t)},s.toString=function(){return Gi(this.constructor)+"#"+Ce(this)};function Zi(t){t.O===null&&(t.O=new Pp)}s.Kc=function(){if(this.P===null){var t=new Cf;t.Og=Ze,t.th=Ze,t.Mg=10,t.rh=10,t.Ng=0,t.sh=0,this.P=t}},s.Wa=function(t,e,i,n,r,o,l){var h=this.part;if(h!==null&&(h.nk(t,e,i,n,r,o,l),i===this&&t===qt&&_l(this)&&$s(this,h,e),o=this.diagram,this.wg===null||o===null||!o.Oi||o.undoManager.isUndoingRedoing||o.animationManager.Tm||(t=this.wg.get(e),t!==null&&o.animationManager.isEnabled&&!o.animationManager.isTicking&&(this.ep===null&&(this.ep=new pt),l=o.undoManager.transactionLevel===0,t.startCondition===ym?l=!0:t.startCondition===MS&&(l=!1),l?(o=new ri,AT(t,o),l=this.ep.get(t),l!==null&&l.stop(),this.ep.add(t,o),o.nu=this,o.kx=t,o.add(this,e,n,r),o.start()):(Do(o.animationManager,"Trigger"),o.animationManager.defaultAnimation.add(this,e,n,r)))),this instanceof X&&i===h&&(h.G&16777216)!==0&&h.data!==null))for(i=this.T.m,n=i.length,r=0;r<n;r++)h=i[r],h instanceof X&&qs(h,function(a){a.data!==null&&(a.G&16777216)!==0&&a.Fa(e)})};function $s(t,e,i){var n=t.Ch();if(n!==null)for(var r=t.fb.iterator;r.next();){var o=r.value,l=null;if(o.sourceName!==null){if(l=zk(o,n,t),l===null)continue;o.zq(t,l,i,null)}else if(o.isToModel){var h=e.diagram;h===null||h.skipsModelSourceBindings||o.zq(t,h.model.modelData,i,n)}else{if(h=n.data,h===null)continue;var a=e.diagram;a===null||a.skipsModelSourceBindings||o.zq(t,h,i,n)}l===t&&(h=n.os(o.Xi),h!==null&&o.Vv(h,l,i))}}s.os=function(t){return this.Ck===t?this:null},s.g=function(t,e,i){this.Wa(qt,t,this,e,i)},s.xe=function(t,e,i,n){var r=this.lc;if(r.h(t,e,i,n),this.sa!==1||this.zb!==0){this.Bb===null&&(this.Bb=new Mt);var o=this.Bb;o.reset(),this.mp(o,t,e,i,n),o.wq(r)}};function nM(t,e,i,n){return t.pickable===!1?!1:(n.multiply(t.transform),i?t.Lc(e,n):t.Ah(e,n))}s.Ox=function(t,e,i){if(this.pickable===!1)return!1;var n=this.naturalBounds;return e=t.xf(e),i?pi(t.x,t.y,0,0,0,n.height)<=e||pi(t.x,t.y,0,n.height,n.width,n.height)<=e||pi(t.x,t.y,n.width,n.height,n.width,0)<=e||pi(t.x,t.y,n.width,0,0,0)<=e:t.pd(0,0)<=e&&t.pd(0,n.height)<=e&&t.pd(n.width,0)<=e&&t.pd(n.width,n.height)<=e},s.je=function(){return!0},s.$=function(t){var e=N.alloc();e.assign(t),this.transform.Aa(e);var i=this.actualBounds;if(!i.u())return N.free(e),!1;var n=this.diagram;if(n!==null&&n.Mt){var r=n.am("extraTouchThreshold"),o=n.am("extraTouchArea"),l=o/2,h=this.naturalBounds;n=this.Af()*n.scale;var a=1/n;if(h.width*n<r&&h.height*n<r)return t=Qn(i.x-l*a,i.y-l*a,i.width+o*a,i.height+o*a,e.x,e.y),N.free(e),t}return r=!1,(this instanceof Tt||this instanceof gt?Qn(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.$(e))&&(this.$a&&!this.$a.$(e)?r=!1:this.hd!==null&&i.$(e)||this.Ub!==null&&this.uc.$(t)?r=!0:r=this.Bh(t)),N.free(e),r},s.Bh=function(t){var e=this.naturalBounds;return Qn(0,0,e.width,e.height,t.x,t.y)},s.Ge=function(t){if(this.angle===0)return this.actualBounds.Ge(t);var e=this.naturalBounds;e=_.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,r=N.allocAt(t.x,t.y);return e.$(i.Hd(r))&&(r.h(t.x,t.bottom),e.$(i.Hd(r))&&(r.h(t.right,t.bottom),e.$(i.Hd(r))&&(r.h(t.right,t.y),e.$(i.Hd(r))&&(n=!0)))),N.free(r),_.free(e),n},s.Ah=function(t,e){if(e===void 0)return t.Ge(this.actualBounds);var i=this.naturalBounds,n=!1,r=N.allocAt(0,0);return t.$(e.Aa(r))&&(r.h(0,i.height),t.$(e.Aa(r))&&(r.h(i.width,i.height),t.$(e.Aa(r))&&(r.h(i.width,0),t.$(e.Aa(r))&&(n=!0)))),N.free(r),n},s.Lc=function(t,e){if(e===void 0&&(e=this.transform,this.angle===0))return t.Lc(this.actualBounds);var i=this.naturalBounds,n=N.allocAt(0,0),r=N.allocAt(0,i.height),o=N.allocAt(i.width,i.height),l=N.allocAt(i.width,0),h=!1;if(t.$(e.Aa(n))||t.$(e.Aa(r))||t.$(e.Aa(o))||t.$(e.Aa(l)))h=!0;else{i=_.allocAt(0,0,i.width,i.height);var a=N.allocAt(t.x,t.y);i.$(e.Hd(a))?h=!0:(a.h(t.x,t.bottom),i.$(e.Hd(a))?h=!0:(a.h(t.right,t.bottom),i.$(e.Hd(a))?h=!0:(a.h(t.right,t.y),i.$(e.Hd(a))&&(h=!0)))),N.free(a),_.free(i),!h&&(j.ys(t,n,r)||j.ys(t,r,o)||j.ys(t,o,l)||j.ys(t,l,n))&&(h=!0)}return N.free(n),N.free(r),N.free(o),N.free(l),h},s.da=function(t,e){if(e===void 0&&(e=new N),t instanceof at){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.fe.Aa(e),e},s.Li=function(t){t===void 0&&(t=new _);var e=this.naturalBounds,i=this.fe,n=N.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),Ve(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),Ve(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),Ve(t,n.x,n.y,0,0),N.free(n),t},s.Ki=function(){var t=this.fe;return t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},s.Af=function(){if((this.G&4096)===0)return this.Rk;var t=this.sa;return this.panel!==null?t*this.panel.Af():t},s.us=function(t,e){return e===void 0&&(e=new N),e.assign(t),this.fe.Hd(e),e},s.vs=function(t,e,i){return this.Zj(t.x,t.y,e.x,e.y,i)},s.Zj=function(t,e,i,n,r){var o=this.transform,l=1/(o.m11*o.m22-o.m12*o.m21),h=o.m22*l,a=-o.m12*l,c=-o.m21*l,p=o.m11*l,d=l*(o.m21*o.dy-o.m22*o.dx),m=l*(o.m12*o.dx-o.m11*o.dy);return this.areaBackground!==null?(o=this.actualBounds,j.Cf(o.left,o.top,o.right,o.bottom,t,e,i,n,r)):(l=t*h+e*c+d,t=t*a+e*p+m,e=i*h+n*c+d,i=i*a+n*p+m,r.h(0,0),n=this.naturalBounds,i=j.Cf(0,0,n.width,n.height,l,t,e,i,r),r.transform(o),i)},ht.prototype.measure=function(t,e,i,n){if(ho(this)!==!1){var r=this.Ug,o=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-o,0),e=Math.max(e-r,0),i=Math.max((i||0)-o,0),n=Math.max((n||0)-r,0),o=this.angle,r=this.desiredSize;var l=0;this instanceof gt&&(l=this.strokeWidth),o===90||o===270?(t=isFinite(r.height)?r.height+l:t,e=isFinite(r.width)?r.width+l:e):(t=isFinite(r.width)?r.width+l:t,e=isFinite(r.height)?r.height+l:e),r=i||0,l=n||0;var h=this instanceof X;switch(ir(this,!0)){case ce:l=r=0,h&&(e=t=1/0);break;case he:isFinite(t)&&t>i&&(r=t),isFinite(e)&&e>n&&(l=e);break;case Xe:isFinite(t)&&t>i&&(r=t),l=0,h&&(e=1/0);break;case be:isFinite(e)&&e>n&&(l=e),r=0,h&&(t=1/0)}h=this.maxSize;var a=this.minSize;r>h.width&&a.width<h.width&&(r=h.width),l>h.height&&a.height<h.height&&(l=h.height),i=Math.max(r/this.scale,a.width),n=Math.max(l/this.scale,a.height),h.width<i&&(i=Math.min(a.width,i)),h.height<n&&(n=Math.min(a.height,n)),t=Math.min(h.width,t),e=Math.min(h.height,e),t=Math.max(i,t),e=Math.max(n,e),(o===90||o===270)&&(o=t,t=e,e=o,o=i,i=n,n=o),this.lc.ea(),this.gm(t,e,i,n),this.lc.freeze(),this.lc.u()||D("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.lc.toString()),pn(this,!1)}},ht.prototype.gm=function(){},ht.prototype.Qi=function(){return!1},ht.prototype.arrange=function(t,e,i,n,r){this.bl();var o=_.alloc();o.assign(this.xb),this.xb.ea(),Nn(this)===!1?this.xb.h(t,e,i,n):this.zh(t,e,i,n),this.xb.freeze(),r===void 0?this.$a=null:this.$a=r,i=!1,r!==void 0?i=!0:(r=this.panel,r===null||r.type!==X.TableRow&&r.type!==X.TableColumn||(r=r.panel),r!==null&&(r=r.uc,n=this.measuredBounds,this.areaBackground!==null&&(n=this.xb),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=r.width+.05&&0<=e+.05&&i<=r.height+.05),this instanceof Yt&&(t=this.naturalBounds,this.vr>t.height||this.sb>t.width))&&(i=!0)),this.G=i?this.G|256:this.G&-257,this.xb.u()||D("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.xb.toString()),this.hm(o,this.xb),Js(this,!1),_.free(o)},s=ht.prototype,s.zh=function(){};function Xm(t,e,i,n,r){if(t.xb.h(e,i,n,r),!t.desiredSize.u()){var o=t.lc;i=t.Ug,e=i.right+i.left;var l=i.top+i.bottom;switch(i=o.width+e,o=o.height+l,n+=e,r+=l,e=ir(t,!0),i===n&&o===r&&(e=ce),e){case ce:(i>n||o>r)&&(pn(t,!0),t.measure(i>n?n:i,o>r?r:o,0,0));break;case he:pn(t,!0),t.measure(n,r,0,0);break;case Xe:pn(t,!0),t.measure(n,o,0,0);break;case be:pn(t,!0),t.measure(i,r,0,0)}}}s.hm=function(t,e){var i=this.part;i!==null&&i.diagram!==null&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||S0(i,!0),this.N(),Dg(t,e)||(i.Gh(),this.Eo(i)))},s.Eo=function(t){this.portId!==null&&(S0(t,!0),t instanceof q&&qM(t,this))},s.oc=function(t,e){if(this.visible){var i=this.opacity;if(i!==0){var n=this instanceof X&&(this.type===X.TableRow||this.type===X.TableColumn),r=this.xb;if(n||r.width!==0&&r.height!==0&&!isNaN(r.x)&&!isNaN(r.y)){var o=1;if(i!==1&&(o=t.globalAlpha,t.globalAlpha=o*i),n){r=this.xb,n=this.uc;var l=this.hd,h=this.Ub;l===null&&h===null||t.Ed(),l!==null&&(Qi(this,t,l,!0,!0,n,r),l instanceof Ot&&l.type===bi?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.yf(l)):t.fillRect(r.x,r.y,r.width,r.height)),h!==null&&(Qi(this,t,h,!0,!1,n,r),h instanceof Ot&&h.type===bi?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.yf(h)):t.fillRect(r.x,r.y,r.width,r.height)),this.Ei(t,e)}else if(!this.Jx(t,e)){this instanceof H&&this.fk(!1),n=this.transform,l=this.panel,(this.G&4096)!==0&&Sp(this);var a=this.part;h=!1;var c=0;if(a&&e.Ie("drawShadows")&&(h=a.isShadowed)){var p=a.shadowOffset;c=Math.max(p.y,p.x)*e.scale*e.dc}p=this.Qi();var d;if(!(d=e.nj||!p)){var m=this.naturalBounds;d=this.Nh;var x=d.m11,v=d.m21,S=d.dx,P=d.m12,k=d.m22,L=d.dy,T,O=T=0;d=T*x+O*v+S;var E=T*P+O*k+L;T=m.width+c,O=0;var V=T*x+O*v+S;T=T*P+O*k+L,O=Math.min(d,V);var $=Math.min(E,T),b=Math.max(d+0,V)-O,nt=Math.max(E+0,T)-$;d=O,E=$,T=m.width+c,O=m.height+c,V=T*x+O*v+S,T=T*P+O*k+L,O=Math.min(d,V),$=Math.min(E,T),b=Math.max(d+b,V)-O,nt=Math.max(E+nt,T)-$,d=O,E=$,T=0,O=m.height+c,V=T*x+O*v+S,T=T*P+O*k+L,O=Math.min(d,V),$=Math.min(E,T),b=Math.max(d+b,V)-O,nt=Math.max(E+nt,T)-$,d=O,E=$,c=e.viewportBounds,m=c.x,x=c.y,d=!(d>c.width+m||m>b+d||E>c.height+x||x>nt+E)}if(d){if(d=(this.G&256)!==0,t.clipInsteadOfFill&&(d=!1),this instanceof Yt&&(t.font=this.font),d){if(E=l.je()?l.naturalBounds:l.actualBounds,this.$a!==null?(m=this.$a,b=m.x,nt=m.y,c=m.width,m=m.height):(b=Math.max(r.x,E.x),nt=Math.max(r.y,E.y),c=Math.min(r.right,E.right)-b,m=Math.min(r.bottom,E.bottom)-nt),b>r.width+r.x||r.x>E.width+E.x){i!==1&&(t.globalAlpha=o);return}t.save(),t.beginPath(),t.rect(b,nt,c,m),t.clip()}if(p){if(!a.isVisible()){i!==1&&(t.globalAlpha=o);return}h&&(E=a.shadowOffset,t.Mv(E.x*e.scale*e.dc,E.y*e.scale*e.dc,a.shadowBlur),_o(t),t.shadowColor=a.shadowColor)}h&&this.shadowVisible===!0?_o(t):h&&this.shadowVisible===!1&&fo(t),a=this.naturalBounds,this.hd!==null&&(t.Ed(),Qi(this,t,this.hd,!0,!0,a,r),this.hd instanceof Ot&&this.hd.type===bi?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.yf(this.hd)):t.fillRect(r.x,r.y,r.width,r.height)),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),h&&(l!==null&&(l.G&512)!==0||l!==null&&(l.type===X.Auto||l.type===X.Spot)&&l.pb()!==this)&&this.shadowVisible===null&&fo(t),this.Ub!==null&&(t.Ed(),rM(this,t,a,r)),h&&(this.Ub!==null||this.hd!==null||l!==null&&(l.G&512)!==0||l!==null&&(l.type===X.Auto||l.type===X.Spot)&&l.pb()!==this)?(Mp(this,!0),this.shadowVisible===null&&fo(t)):Mp(this,!1),this.Ei(t,e),h&&(this.G&512)!==0&&_o(t),p&&h&&fo(t),d&&(t.restore(),t.Hc(this instanceof X)),n.Bs()||(e=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy)))}}i!==1&&(t.globalAlpha=o)}}}};function rM(t,e,i,n){var r=t.naturalBounds,o=0,l=0,h=r.width;r=r.height;var a=t.Mw();t instanceof gt&&(r=t.ma.bounds,o=r.x,l=r.y,h=r.width,r=r.height),Qi(t,e,t.Ub,!0,!1,i,n),t.Ub instanceof Ot&&t.Ub.type===bi?(e.beginPath(),e.rect(o-a/2,l-a/2,h+a,r+a),e.yf(t.Ub)):e.fillRect(o-a/2,l-a/2,h+a,r+a)}s.Jx=function(){return!1},s.Ei=function(){};function Qi(t,e,i,n,r,o,l){if(i!==null){var h=1,a=1;if(typeof i=="string")n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===Uo)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var c=0;if(t instanceof gt&&(c=t.strokeWidth),h=o.width,a=o.height,r?(h=l.width,a=l.height):n||(h+=c,a+=c),(o=e instanceof Qs)&&i.ne&&(i.type===gh||i.Fk===h&&i.st===a))var p=i.ne;else{var d=0,m=0,x=0,v=0,S=0,P=0;if(P=S=0,r?(S=l.x,P=l.y):n||(S-=c/2,P-=c/2),d=i.start.x*h+i.start.offsetX,m=i.start.y*a+i.start.offsetY,x=i.end.x*h+i.end.offsetX,v=i.end.y*a+i.end.offsetY,d+=S,x+=S,m+=P,v+=P,i.type===po)p=e.createLinearGradient(d,m,x,v);else if(i.type===bi)P=isNaN(i.endRadius)?Math.max(h,a)/2:i.endRadius,isNaN(i.startRadius)?(S=0,P=Math.max(h,a)/2):S=i.startRadius,p=e.createRadialGradient(d,m,S,x,v,P);else if(i.type===gh)try{p=e.createPattern(i.pattern,"repeat")}catch{p=null}if(i.type!==gh&&(r=i.colorStops,r!==null))for(r=r.iterator;r.next();)p.addColorStop(r.key,r.value);if(o&&(i.ne=p,p!==null&&(i.Fk=h,i.st=a),p===null&&i.type===gh&&i.Fk!==-1)){i.Fk=-1;var k=t.diagram;k!==null&&i.Fk===-1&&F(function(){k.redraw()},600)}}n?e.fillStyle=p:e.strokeStyle=p}}}s.rg=function(t){if(t instanceof X)t:{if(this!==t&&t!==null)for(var e=this.panel;e!==null;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},s.Ff=function(){if(!this.visible)return!1;var t=this.panel;return t!==null?t.Ff():!0},s.Ef=function(){for(var t=this instanceof X?this:this.panel;t!==null&&t.isEnabled;)t=t.panel;return t===null};function Sp(t){if((t.G&2048)!==0){var e=t.vb;if(e.reset(),!t.xb.u()||!t.lc.u()){ah(t,!1);return}if(e.translate(t.xb.x-t.lc.x,t.xb.y-t.lc.y),t.scale!==1||t.angle!==0){var i=t.naturalBounds;t.mp(e,i.x,i.y,i.width,i.height)}ah(t,!1),ys(t,!0)}(t.G&4096)!==0&&(e=t.panel,e===null?(t.Nh.set(t.vb),t.Rk=t.scale,ys(t,!1)):e.fe!==null&&(i=t.Nh,i.reset(),e.je()?i.multiply(e.Nh):e.panel!==null&&i.multiply(e.panel.Nh),i.multiply(t.vb),t.Rk=t.scale*e.Rk,ys(t,!1)))}s.mp=function(t,e,i,n,r){if(this.sa!==1&&t.scale(this.sa),this.zb!==0){var o=N.alloc();o.Ui(e,i,n,r,_t),t.rotate(this.zb,o.x,o.y),N.free(o)}},s.s=function(t){if(!ho(this)){t===void 0&&(t=!1),pn(this,!0),Js(this,!0);var e=this.panel;e===null||t||e.s()}},s.ak=function(){ho(this)||(pn(this,!0),Js(this,!0))};function hh(t){if(!Nn(t)){var e=t.panel;e!==null?e.s():t.Qi()&&(e=t.diagram,e!==null&&(e.te.add(t),t instanceof q&&t.rd(),e.Fb())),Js(t,!0)}}s.bl=function(){(this.G&2048)===0&&(ah(this,!0),ys(this,!0))},s.bv=function(){ys(this,!0)},s.N=function(){var t=this.part;t!==null&&t.N()};function ir(t,e){var i=t.stretch,n=t.panel;return n!==null&&n.type===X.Table?ef(t,n.getRowDefinition(t.row),n.getColumnDefinition(t.column),e):n!==null&&n.type===X.Auto&&n.pb()===t?uo(t,he,e):i===wr?n!==null?n.type===X.Spot&&n.pb()===t?uo(t,he,e):(i=n.defaultStretch,i===wr?uo(t,ce,e):uo(t,i,e)):uo(t,ce,e):uo(t,i,e)}function ef(t,e,i,n){var r=t.stretch;if(r!==wr)return uo(t,r,n);var o=r=null;switch(e.stretch){case be:o=!0;break;case he:o=!0}switch(i.stretch){case Xe:r=!0;break;case he:r=!0}return e=t.panel.defaultStretch,r===null&&(r=e===Xe||e===he),o===null&&(o=e===be||e===he),r===!0&&o===!0?uo(t,he,n):r===!0?uo(t,Xe,n):o===!0?uo(t,be,n):uo(t,ce,n)}function uo(t,e,i){if(i)return e;if(e===ce||(i=t.desiredSize,i.u()))return ce;if(t=t.angle,!isNaN(i.width))if(t!==90&&t!==270){if(e===Xe)return ce;if(e===he)return be}else{if(e===be)return ce;if(e===he)return Xe}if(!isNaN(i.height))if(t!==90&&t!==270){if(e===be)return ce;if(e===he)return Xe}else{if(e===Xe)return ce;if(e===he)return be}return e}function Mp(t,e){t.G=e?t.G|512:t.G&-513}function _l(t){return(t.G&1024)!==0}function Wm(t,e){t.G=e?t.G|1024:t.G&-1025}function ah(t,e){t.G=e?t.G|2048:t.G&-2049}function ys(t,e){t.G=e?t.G|4096:t.G&-4097}function ho(t){return(t.G&8192)!==0}function pn(t,e){t.G=e?t.G|8192:t.G&-8193}function Nn(t){return(t.G&16384)!==0}function Js(t,e){t.G=e?t.G|16384:t.G&-16385}s.Si=function(t){this.bg=t},s.Us=function(){},s.Jv=function(t){return this.ja=t,hh(this),!0},s.wm=function(t,e){(this.ja.x!==t||this.ja.y!==e)&&(this.ja.h(t,e),this.bl())},s.Mw=function(){return 0};function Zs(t){var e=t.part;if(e instanceof q&&(t.portId!==null||t===e.port)){var i=e.diagram;i===null||i.undoManager.isUndoingRedoing||qM(e,t)}}function oM(t){var e=t.diagram;e===null||e.undoManager.isUndoingRedoing||(t instanceof X?t instanceof q?t.rd():t.Cm(t,function(i){Zs(i)}):Zs(t))}s.bind=function(t,e,i,n){var r=null;return typeof t=="string"?r=new ae(t,e,i,n):r=t,r.od=this,t=this.Ch(),t!==null&&wM(t)&&D("Cannot add a Binding to a template that has already been copied: "+r),this.fb===null&&(this.fb=new it),this.fb.add(r),this},s.set=function(t){return Object.assign(this,t),this},s.wu=function(t){return Hm(this,t),this},s.apply=function(t){return t(this),this},s.xm=function(t){return Wa(this,t),this},s.Oz=function(){return this.Ch()},s.Ch=function(){for(var t=this instanceof X?this:this.panel;t!==null;){if(t.Qh!==null)return t;t=t.panel}return null},s.Rv=function(t){return t.od=this,this.wg===null&&(this.wg=new pt),this.wg.add(t.propertyName,t),this};function dn(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,r=null;if(typeof t=="function")r=t;else if(typeof t=="string"){var o=nf.H(t);typeof o=="function"?(i=ke(arguments),n=o(i),ct(n)||D('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):r=W.go[t]}if(n===null&&(r!=null&&r.constructor||D("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),n=new r),r=1,n instanceof I&&1<i.length){o=n;var l=i[1];(typeof l=="string"||l instanceof HTMLDivElement)&&(Gm(o,l),r++)}for(;r<i.length;r++)o=i[r],o===void 0?D("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+n):Hm(n,o);return n}function Hm(t,e){if(typeof e=="string")if(t instanceof Yt)t.text=e;else if(t instanceof gt)t.figure=e;else if(t instanceof Ii)t.source=e;else if(t instanceof X)e=zn.H(e),e!==null&&(t.type=e);else if(t instanceof Ot){var i=Oe(Ot,e);i!==null?t.type=i:D("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof tt?(e=Oe(tt,e),e!==null&&(t.type=e)):t instanceof Vt&&(e=Oe(Vt,e),e!==null&&(t.type=e));else if(e instanceof ht)t instanceof X||D("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof we){var n;e.isRow&&typeof t.getRowDefinition=="function"?n=t.getRowDefinition(e.index):e.isRow||typeof t.getColumnDefinition!="function"||(n=t.getColumnDefinition(e.index)),n instanceof we?(t=n,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.eg=e.separatorPadding===null?null:e.separatorPadding.I(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.Hj=null,e.separatorDashArray&&(t.Hj=ke(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.fb=e.fb):D("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof K)typeof t.gb=="function"&&t.gb(e);else if(e instanceof ge)t.type=e;else if(e instanceof ae)t instanceof ht||t instanceof we?t.bind(e):D("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof jr)t instanceof ht?t.Rv(e):D("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof Qe)t instanceof tt?t.figures.add(e):D("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof Vt)t instanceof Qe?t.segments.add(e):D("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Lt)t instanceof I||t instanceof dt?t.layout=e:D("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)Hm(t,e[i]);else if(typeof e=="object"&&e!==null)if(t instanceof Ot){i=new Je;for(var r in e)n=parseFloat(r),isNaN(n)?i[r]=e[r]:t.addColorStop(n,e[r]);Wa(t,i)}else if(t instanceof we){e.row!==void 0?(r=e.row,(r==null||r===1/0||isNaN(r)||0>r)&&D("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+r),t.isRow=!0,t.index=r):e.column!==void 0&&(r=e.column,(r==null||r===1/0||isNaN(r)||0>r)&&D("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+r),t.isRow=!1,t.index=r),r=new Je;for(i in e)i!=="row"&&i!=="column"&&(r[i]=e[i]);Wa(t,r)}else Wa(t,e);else D('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Bo(t,e){nf.add(t,e)}function kp(t,e,i){i===void 0&&(i=null);var n=t[1];if(typeof i=="function"?i(n):typeof n=="string")return t.splice(1,1),n;if(e===void 0)throw Error("no "+(typeof i=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Y.Object.defineProperties(ht.prototype,{shadowVisible:{get:function(){return this.Dl},set:function(t){var e=this.Dl;e!==t&&(this.Dl=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return this.O!==null?this.O.un:null},set:function(t){Zi(this);var e=this.O.un;e!==t&&(this.O.un=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Bl},set:function(t){var e=this.Bl;e!==t&&(this.Bl=t,this.s(),this.g("segmentOrientation",e,t),t===Ti&&(this.angle=0))}},segmentIndex:{get:function(){return this.gp},set:function(t){t=Math.round(t);var e=this.gp;e!==t&&(this.gp=t,this.s(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.zl},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.zl;e!==t&&(this.zl=t,this.s(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Al},set:function(t){var e=this.Al;e.A(t)||(this.Al=t=t.I(),this.s(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.Ee},set:function(t){var e=this.Ee;e!==t&&(this.Ee=t,this.s(),this.g("stretch",e,t))}},name:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.part!==null&&(this.part.li=null),this.g("name",e,t))}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&st(t,"0 <= value <= 1",ht,"opacity"),this.mb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(Xl(e,e.actualBounds)))}},visible:{get:function(){return(this.G&1)!==0},set:function(t){var e=(this.G&1)!==0;e!==t&&(this.G^=1,this.g("visible",e,t),e=this.panel,e!==null?e.s():this.Qi()&&this.Ob(t),this.N(),oM(this))}},pickable:{get:function(){return(this.G&2)!==0},set:function(t){var e=(this.G&2)!==0;e!==t&&(this.G^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return(this.G&4)!==0},set:function(t){var e=(this.G&4)!==0;e!==t&&(this.G^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return(this.G&8)!==0},set:function(t){var e=(this.G&8)!==0;e!==t&&(this.G^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return(this.G&16)!==0},set:function(t){var e=(this.G&16)!==0;e!==t&&(this.G^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return(this.G&32)!==0},set:function(t){var e=(this.G&32)!==0;e!==t&&(this.G^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return(this.G&64)!==0},set:function(t){var e=(this.G&64)!==0;e!==t&&(this.G^=64,this.s(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return(this.G&128)!==0},set:function(t){var e=(this.G&128)!==0;e!==t&&(this.G^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.hd},set:function(t){var e=this.hd;e!==t&&(t!==null&&Gl(t,"GraphObject.areaBackground"),t instanceof Ot&&t.freeze(),this.hd=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==t&&(t!==null&&Gl(t,"GraphObject.background"),t instanceof Ot&&t.freeze(),this.Ub=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.Qi())return this;if(this.Bj!==null)return this.Bj;var t;for(t=this.panel;t;){if(t instanceof ut)return this.Bj=t;t=t.panel}return null}},svg:{get:function(){return this.Zr},set:function(t){this.Zr=t}},panel:{get:function(){return this.bg}},layer:{get:function(){var t=this.part;return t!==null?t.layer:null}},diagram:{get:function(){var t=this.part;return t!==null?t.diagram:null}},position:{get:function(){return this.ja},set:function(t){var e=t.x,i=t.y,n=this.ja,r=n.x;n=n.y,(r===e||isNaN(r)&&isNaN(e))&&(n===i||isNaN(n)&&isNaN(i))?this.Us():(t=t.copy(),this.Jv(t,r,n)&&this.g("position",new N(r,n),t))}},actualBounds:{get:function(){return this.xb}},scale:{get:function(){return this.sa},set:function(t){var e=this.sa;e!==t&&(0>=t&&D("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.sa=t,this.s(),this.g("scale",e,t))}},angle:{get:function(){return this.zb},set:function(t){var e=this.zb;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.zb=t,oM(this),this.s(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Tc},set:function(t){var e=t.width,i=t.height,n=this.Tc,r=n.width,o=n.height;(r===e||isNaN(r)&&isNaN(e))&&(o===i||isNaN(o)&&isNaN(i))||(this.Tc=t=t.I(),this.s(),this instanceof gt&&this.fc(),this.g("desiredSize",n,t),_l(this)&&(t=this.part,t!==null&&($s(this,t,"width"),$s(this,t,"height"))))}},width:{get:function(){return this.Tc.width},set:function(t){var e=this.Tc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Tc,this.Tc=t=new yt(t,this.Tc.height).freeze(),this.s(),this instanceof gt&&this.fc(),this.g("desiredSize",e,t),_l(this)&&(t=this.part,t!==null&&$s(this,t,"width")))}},height:{get:function(){return this.Tc.height},set:function(t){var e=this.Tc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Tc,this.Tc=t=new yt(this.Tc.width,t).freeze(),this.s(),this instanceof gt&&this.fc(),this.g("desiredSize",e,t),_l(this)&&(t=this.part,t!==null&&$s(this,t,"height")))}},minSize:{get:function(){return this.Zf},set:function(t){var e=this.Zf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Zf=t,this.s(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.Yf},set:function(t){var e=this.Yf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Yf=t,this.s(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.lc}},naturalBounds:{get:function(){return this.uc}},margin:{get:function(){return this.Ug},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.Ug;e.A(t)||(this.Ug=t=t.I(),this.s(),this.g("margin",e,t))}},transform:{get:function(){return(this.G&2048)!==0&&Sp(this),this.vb}},fe:{get:function(){return(this.G&4096)!==0&&Sp(this),this.Nh}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.A(t)||(t.zc()&&!t.Mb()&&D("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.yb=t=t.I(),hh(this),this.g("alignment",e,t))}},column:{get:function(){return this.Bg},set:function(t){t=Math.round(t);var e=this.Bg;e!==t&&(0>t&&st(t,">= 0",ht,"column"),this.Bg=t,this.s(),this.g("column",e,t))}},columnSpan:{get:function(){return this.Ym},set:function(t){t=Math.round(t);var e=this.Ym;e!==t&&(1>t&&st(t,">= 1",ht,"columnSpan"),this.Ym=t,this.s(),this.g("columnSpan",e,t))}},row:{get:function(){return this.ap},set:function(t){t=Math.round(t);var e=this.ap;e!==t&&(0>t&&st(t,">= 0",ht,"row"),this.ap=t,this.s(),this.g("row",e,t))}},rowSpan:{get:function(){return this.bp},set:function(t){t=Math.round(t);var e=this.bp;e!==t&&(1>t&&st(t,">= 1",ht,"rowSpan"),this.bp=t,this.s(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.sp},set:function(t){var e=this.sp;e!==t&&(this.sp=t,this.s(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.wk},set:function(t){var e=this.wk;e.A(t)||(this.wk=t=t.I(),this.s(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Po},set:function(t){var e=this.Po;if(e!==t){var i=this.part;i===null||i instanceof q||D("Cannot set portID on a Link: "+t),e!==null&&i!==null&&P0(i,this),this.Po=t,t!==null&&i!==null&&(i.Je=!0,ek(i,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return this.P!==null?this.P.th:Ze},set:function(t){this.Kc();var e=this.P.th;e.A(t)||(t=t.I(),this.P.th=t,this.g("toSpot",e,t),Zs(this))}},toEndSegmentLength:{get:function(){return this.P!==null?this.P.rh:10},set:function(t){this.Kc();var e=this.P.rh;e!==t&&(0>t&&st(t,">= 0",ht,"toEndSegmentLength"),this.P.rh=t,this.g("toEndSegmentLength",e,t),Zs(this))}},toShortLength:{get:function(){return this.P!==null?this.P.sh:0},set:function(t){this.Kc();var e=this.P.sh;e!==t&&(this.P.sh=t,this.g("toShortLength",e,t),Zs(this))}},toLinkable:{get:function(){return this.P!==null?this.P.Ap:null},set:function(t){this.Kc();var e=this.P.Ap;e!==t&&(this.P.Ap=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return this.P!==null?this.P.Bp:1/0},set:function(t){this.Kc();var e=this.P.Bp;e!==t&&(0>t&&st(t,">= 0",ht,"toMaxLinks"),this.P.Bp=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return this.P!==null?this.P.Og:Ze},set:function(t){this.Kc();var e=this.P.Og;e.A(t)||(t=t.I(),this.P.Og=t,this.g("fromSpot",e,t),Zs(this))}},fromEndSegmentLength:{get:function(){return this.P!==null?this.P.Mg:10},set:function(t){this.Kc();var e=this.P.Mg;e!==t&&(0>t&&st(t,">= 0",ht,"fromEndSegmentLength"),this.P.Mg=t,this.g("fromEndSegmentLength",e,t),Zs(this))}},fromShortLength:{get:function(){return this.P!==null?this.P.Ng:0},set:function(t){this.Kc();var e=this.P.Ng;e!==t&&(this.P.Ng=t,this.g("fromShortLength",e,t),Zs(this))}},fromLinkable:{get:function(){return this.P!==null?this.P.An:null},set:function(t){this.Kc();var e=this.P.An;e!==t&&(this.P.An=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return this.P!==null?this.P.Bn:1/0},set:function(t){this.Kc();var e=this.P.Bn;e!==t&&(0>t&&st(t,">= 0",ht,"fromMaxLinks"),this.P.Bn=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g("cursor",e,t))}},click:{get:function(){return this.O!==null?this.O.Ag:null},set:function(t){Zi(this);var e=this.O.Ag;e!==t&&(this.O.Ag=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.O!==null?this.O.Ig:null},set:function(t){Zi(this);var e=this.O.Ig;e!==t&&(this.O.Ig=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.O!==null?this.O.Cg:null},set:function(t){Zi(this);var e=this.O.Cg;e!==t&&(this.O.Cg=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return this.O!==null?this.O.Xg:null},set:function(t){Zi(this);var e=this.O.Xg;e!==t&&(this.O.Xg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.O!==null?this.O.$g:null},set:function(t){Zi(this);var e=this.O.$g;e!==t&&(this.O.$g=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return this.O!==null?this.O.ah:null},set:function(t){Zi(this);var e=this.O.ah;e!==t&&(this.O.ah=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.O!==null?this.O.Zg:null},set:function(t){Zi(this);var e=this.O.Zg;e!==t&&(this.O.Zg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.O!==null?this.O.Yg:null},set:function(t){Zi(this);var e=this.O.Yg;e!==t&&(this.O.Yg=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return this.O!==null?this.O.vo:null},set:function(t){Zi(this);var e=this.O.vo;e!==t&&(this.O.vo=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return this.O!==null?this.O.wo:null},set:function(t){Zi(this);var e=this.O.wo;e!==t&&(this.O.wo=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return this.O!==null?this.O.Wg:null},set:function(t){Zi(this);var e=this.O.Wg;e!==t&&(this.O.Wg=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return this.O!==null?this.O.Km:null},set:function(t){Zi(this);var e=this.O.Km;e!==t&&(this.O.Km=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return this.O!==null?this.O.Lm:null},set:function(t){Zi(this);var e=this.O.Lm;e!==t&&(this.O.Lm=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return this.O!==null?this.O.Mm:null},set:function(t){Zi(this);var e=this.O.Mm;e!==t&&(this.O.Mm=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return this.O!==null?this.O.Jm:null},set:function(t){Zi(this);var e=this.O.Jm;e!==t&&(this.O.Jm=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return this.O!==null?this.O.uh:null},set:function(t){Zi(this);var e=this.O.uh;e!==t&&(this.O.uh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.O!==null?this.O.Dg:null},set:function(t){Zi(this);var e=this.O.Dg;e!==t&&(this.O.Dg=t,this.g("contextMenu",e,t))}}}),ht.prototype.trigger=ht.prototype.Rv,ht.prototype.findBindingPanel=ht.prototype.Ch,ht.prototype.findTemplateBinder=ht.prototype.Oz,ht.prototype.setProperties=ht.prototype.xm,ht.prototype.apply=ht.prototype.apply,ht.prototype.attach=ht.prototype.wu,ht.prototype.set=ht.prototype.set,ht.prototype.isEnabledObject=ht.prototype.Ef,ht.prototype.isVisibleObject=ht.prototype.Ff,ht.prototype.isContainedBy=ht.prototype.rg,ht.prototype.getNearestIntersectionPoint=ht.prototype.vs,ht.prototype.getLocalPoint=ht.prototype.us,ht.prototype.getDocumentScale=ht.prototype.Af,ht.prototype.getDocumentAngle=ht.prototype.Ki,ht.prototype.getDocumentBounds=ht.prototype.Li,ht.prototype.getDocumentPoint=ht.prototype.da,ht.prototype.intersectsRect=ht.prototype.Lc,ht.prototype.containedInRect=ht.prototype.Ah,ht.prototype.containsRect=ht.prototype.Ge,ht.prototype.containsPoint=ht.prototype.$,ht.prototype.raiseChanged=ht.prototype.g,ht.prototype.raiseChangedEvent=ht.prototype.Wa,ht.prototype.addCopyProperty=ht.prototype.sx;var nf=null;ht.className="GraphObject",nf=new pt,Bo("Button",function(){function t(i,n){return i.diagram.Zb(i.documentPoint,function(r){for(;r.panel!==null&&!r.isActionable;)r=r.panel;return r},function(r){return r===n})!==null}var e=dn(X,X.Auto,{isActionable:!0,enabledChanged:function(i,n){if(i instanceof X){var r=i.Ya("ButtonBorder");r!==null&&(r.fill=n?i._buttonFillNormal:i._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},dn(gt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new at(0,0,2.76142374915397,2.761423749153969),spot2:new at(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(i,n){if(n.Ef()&&n instanceof X&&(i=n.Ya("ButtonBorder"),i instanceof gt)){var r=n._buttonFillOver;n._buttonFillNormal=i.fill,i.fill=r,r=n._buttonStrokeOver,n._buttonStrokeNormal=i.stroke,i.stroke=r}},e.mouseLeave=function(i,n){n.Ef()&&n instanceof X&&(i=n.Ya("ButtonBorder"),i instanceof gt&&(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal))},e.actionDown=function(i,n){if(n.Ef()&&n instanceof X&&n._buttonFillPressed!==null&&i.button===0){var r=n.Ya("ButtonBorder");if(r instanceof gt){i=i.diagram;var o=i.skipsUndoManager;i.skipsUndoManager=!0;var l=n._buttonFillPressed;n._buttonFillOver=r.fill,r.fill=l,l=n._buttonStrokePressed,n._buttonStrokeOver=r.stroke,r.stroke=l,i.skipsUndoManager=o}}},e.actionUp=function(i,n){if(n.Ef()&&n instanceof X&&n._buttonFillPressed!==null&&i.button===0){var r=n.Ya("ButtonBorder");if(r instanceof gt){var o=i.diagram,l=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),o.skipsUndoManager=l}}},e.actionCancel=function(i,n){if(n.Ef()&&n instanceof X&&n._buttonFillPressed!==null){var r=n.Ya("ButtonBorder");if(r instanceof gt){var o=i.diagram,l=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),o.skipsUndoManager=l}}},e.actionMove=function(i,n){if(n.Ef()&&n instanceof X&&n._buttonFillPressed!==null){var r=i.diagram;if(r.firstInput.button===0&&(r.currentTool.standardMouseOver(),t(i,n)&&(i=n.Ya("ButtonBorder"),i instanceof gt))){var o=r.skipsUndoManager;r.skipsUndoManager=!0;var l=n._buttonFillPressed;i.fill!==l&&(i.fill=l),l=n._buttonStrokePressed,i.stroke!==l&&(i.stroke=l),r.skipsUndoManager=o}}},e}),Bo("TreeExpanderButton",function(){var t=dn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},dn(gt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:El},new ae("figure","isTreeExpanded",function(e,i){return i=i.panel,e?i._treeExpandedFigure:i._treeCollapsedFigure}).jq()),{visible:!1},new ae("visible","isTreeLeaf",function(e){return!e}).jq());return t.click=function(e,i){if(i=i.part,i instanceof Tt&&(i=i.adornedPart),i instanceof q){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isTreeExpanded){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;e.handled=!0,i.isTreeExpanded?n.collapseTree(i):n.expandTree(i)}}},t}),Bo("SubGraphExpanderButton",function(){var t=dn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},dn(gt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:El},new ae("figure","isSubGraphExpanded",function(e,i){return i=i.panel,e?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).jq()));return t.click=function(e,i){if(i=i.part,i instanceof Tt&&(i=i.adornedPart),i instanceof dt){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isSubGraphExpanded){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;e.handled=!0,i.isSubGraphExpanded?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),Bo("ToolTip",function(){return dn(Tt,X.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new N(0,3),shadowBlur:5},dn(gt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new at(0,0,4,6),spot2:new at(1,1,-4,-4)}))}),Bo("ContextMenu",function(){return dn(Tt,X.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new N(0,3),shadowBlur:5},new ae("background","",function(t){return t.adornedPart!==null&&t.placeholder!==null?null:"#F5F5F5"}))}),Bo("ContextMenuButton",function(){var t=dn("Button");t.stretch=Xe;var e=t.Ya("ButtonBorder");return e instanceof gt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new at(0,0,2,3),e.spot2=new at(1,1,-2,-2)),t}),Bo("PanelExpanderButton",function(t){var e=kp(t,"COLLAPSIBLE"),i=dn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},dn(gt,{name:"ButtonIcon",strokeWidth:2},new ae("geometryString","visible",function(n){return n?i._buttonExpandedFigure:i._buttonCollapsedFigure}).jq(e)));return t=i.Ya("ButtonBorder"),t instanceof gt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),i.click=function(n,r){var o=r.diagram;if(o!==null&&!o.isReadOnly){var l=r.Ch();l===null&&(l=r.part),l!==null&&(r=l.Ya(e),r!==null&&(n.handled=!0,o.xa("Collapse/Expand Panel"),r.visible=!r.visible,o.Xa("Collapse/Expand Panel")))}},i}),Bo("CheckBoxButton",function(t){var e=kp(t);return t=dn("Button",{desiredSize:new yt(14,14)},dn(gt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:he,geometryStretch:xr,visible:!1},e!==""?new ae("visible",e).hy():[])),t.click=function(i,n){if(n instanceof X){var r=i.diagram;if(!(r===null||r.isReadOnly||e!==""&&r.model.isReadOnly)){i.handled=!0;var o=n.Ya("ButtonIcon");r.xa("checkbox"),o.visible=!o.visible,typeof n._doClick=="function"&&n._doClick(i,n),r.Xa("checkbox")}}},t}),Bo("CheckBox",function(t){t=kp(t),t=dn("CheckBoxButton",t,{name:"Button",isActionable:!1,margin:new Ft(0,1,0,0)});var e=dn(X,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),ht.None=ce=new K(ht,"None",0),ht.Default=wr=new K(ht,"Default",0),ht.Vertical=be=new K(ht,"Vertical",4),ht.Horizontal=Xe=new K(ht,"Horizontal",5),ht.Fill=he=new K(ht,"Fill",3),ht.Uniform=xr=new K(ht,"Uniform",1),ht.UniformToFill=Qa=new K(ht,"UniformToFill",2),ht.FlipVertical=qa=new K(ht,"FlipVertical",1),ht.FlipHorizontal=ba=new K(ht,"FlipHorizontal",2),ht.FlipBoth=tf=new K(ht,"FlipBoth",3),ht.make=dn,ht.getBuilders=function(){var t=new pt,e;for(e in nf)if(e!==e.toLowerCase()){var i=nf.H(e);typeof i=="function"&&t.add(e,i)}return t.freeze(),t},ht.defineBuilder=Bo,ht.takeBuilderArgument=kp;function Pp(){this.un=this.Dg=this.uh=this.Jm=this.Mm=this.Lm=this.Km=this.Wg=this.wo=this.vo=this.Yg=this.Zg=this.ah=this.$g=this.Xg=this.Cg=this.Ig=this.Ag=null}Pp.prototype.copy=function(){var t=new Pp;return t.Ag=this.Ag,t.Ig=this.Ig,t.Cg=this.Cg,t.Xg=this.Xg,t.$g=this.$g,t.ah=this.ah,t.Zg=this.Zg,t.Yg=this.Yg,t.vo=this.vo,t.wo=this.wo,t.Wg=this.Wg,t.Km=this.Km,t.Lm=this.Lm,t.Mm=this.Mm,t.Jm=this.Jm,t.uh=this.uh,t.Dg=this.Dg,t.un=this.un,t},Pp.className="GraphObjectEventHandlers";function Ul(){this.Na=[1,0,0,1,0,0]}Ul.prototype.copy=function(){var t=new Ul;return t.Na[0]=this.Na[0],t.Na[1]=this.Na[1],t.Na[2]=this.Na[2],t.Na[3]=this.Na[3],t.Na[4]=this.Na[4],t.Na[5]=this.Na[5],t},Ul.prototype.translate=function(t,e){this.Na[4]+=this.Na[0]*t+this.Na[2]*e,this.Na[5]+=this.Na[1]*t+this.Na[3]*e},Ul.prototype.scale=function(t,e){this.Na[0]*=t,this.Na[1]*=t,this.Na[2]*=e,this.Na[3]*=e},Ul.className="STransform";function fh(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Bx=[],this.pattern=null}fh.prototype.addColorStop=function(t,e){this.Bx.push({offset:t,color:e})},fh.className="SGradient";function ao(t,e){this.ownerDocument=t=e===void 0?W.document:e,this.yA="http://www.w3.org/2000/svg",t!==void 0&&(this.La=this.Pb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.Tp=null,this.context=new zl(this)}ao.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.style.width=i+"px",this.style.height=n+"px",this.La.setAttributeNS(null,"width",i+"px"),this.La.setAttributeNS(null,"height",n+"px"),this.La.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.context.Tw.firstElementChild.setAttributeNS(null,"width",i+"px"),this.context.Tw.firstElementChild.setAttributeNS(null,"height",n+"px"),!0):!1},ao.prototype.Pb=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.yA,t),ct(e))for(var n in e)t.setAttributeNS(n==="href"?"http://www.w3.org/1999/xlink":"",n,e[n]);return i!==void 0&&(t.textContent=i),t},ao.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},ao.prototype.focus=function(){this.La.focus()},ao.prototype.Ix=function(){this.ownerDocument=null},Y.Object.defineProperties(ao.prototype,{width:{get:function(){return this.La.width.baseVal.value},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height.baseVal.value},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),ao.className="SVGSurface";function zl(t){this.Ws=t,this.svg=t.La,this.stack=[],this.fd=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.gg=this.Sr=this.Rr=0,this.Es=null,this.path=[],this.Ht=!1,this.mh=null,this.nh=0,this.He=new Ul,Vo(this,1,0,0,1,0,0);var e=as++,i=this.Pb("clipPath",{id:"mainClip"+e});i.appendChild(this.Pb("rect",{x:0,y:0,width:t.width,height:t.height})),this.Tw=i,this.Ws.La.appendChild(i),this.fd[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.AA={}}s=zl.prototype,s.arc=function(t,e,i,n,r,o,l,h){var a=2*Math.PI,c=a-1e-6,p=i*Math.cos(n),d=i*Math.sin(n),m=t+p,x=e+d,v=o?0:1;n=o?n-r:r-n,(1e-6<Math.abs(l-m)||1e-6<Math.abs(h-x))&&this.path.push(["L",m,+x]),0>n&&(n=n%a+a),n>c?(this.path.push(["A",i,i,0,1,v,t-p,e-d]),this.path.push(["A",i,i,0,1,v,m,x])):1e-6<n&&this.path.push(["A",i,i,0,+(n>=Math.PI),v,t+i*Math.cos(r),e+i*Math.sin(r)])},s.beginPath=function(){this.path=[]},s.bezierCurveTo=function(t,e,i,n,r,o){this.path.push(["C",t,e,i,n,r,o])},s.clearRect=function(){},s.clip=function(){this.addPath("clipPath",this.path,this.He)},s.closePath=function(){this.path.push(["z"])},s.createLinearGradient=function(t,e,i,n){var r=new fh("linear");return r.x1=t,r.y1=e,r.x2=i,r.y2=n,r},s.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var i=this.AA;if(i[e])return"url(#"+i[e]+")";var n="PATTERN"+as++,r={x:0,y:0,width:t.width,height:t.height,href:e};return t=this.Pb("pattern",{width:t.width,height:t.height,id:n,patternUnits:"userSpaceOnUse"}),t.appendChild(this.Pb(lh,r)),this.svg.appendChild(t),i[e]=n,"url(#"+n+")"},s.createRadialGradient=function(t,e,i,n,r,o){var l=new fh("radial");return l.x1=t,l.y1=e,l.r1=i,l.x2=n,l.y2=r,l.r2=o,l},s.drawImage=function(t,e,i,n,r,o,l,h,a){var c="";t instanceof HTMLCanvasElement&&(c=t.toDataURL()),t instanceof HTMLImageElement&&(c=t.getAttribute("src"));var p=t instanceof HTMLImageElement?t.naturalWidth:t.width,d=t instanceof HTMLImageElement?t.naturalHeight:t.height;n===void 0&&(o=e,l=i,h=n=p,a=r=d),n=n||0,r=r||0,o=o||0,l=l||0,h=h||0,a=a||0,t={x:0,y:0,width:p||n,height:d||r,href:c},j.aa(n,h)&&j.aa(r,a)?c.toLowerCase().indexOf(".svg")===-1&&c.toLowerCase().indexOf("data:image/svg")===-1&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",c="",h/=n,a/=r,(o!==0||l!==0)&&(c+=" translate("+o+", "+l+")"),(h!==1||a!==1)&&(c+=" scale("+h+", "+a+")"),(e!==0||i!==0)&&(c+=" translate("+-e+", "+-i+")"),(e!==0||i!==0||n!==p||r!==d)&&(o="CLIP"+as++,l=this.Pb("clipPath",{id:o}),l.appendChild(this.Pb("rect",{x:e,y:i,width:n,height:r})),this.svg.appendChild(l),t["clip-path"]="url(#"+o+")"),rf(this,lh,t,this.He,c),this.addElement(lh,t)},s.fill=function(){this.addPath("fill",this.path,this.He)},s.yf=function(){this.clipInsteadOfFill?this.clip():this.fill()},s.fillRect=function(t,e,i,n){t=[t,e,i,n],t={x:t[0],y:t[1],width:t[2],height:t[3]},rf(this,"fill",t,this.He),this.addElement("rect",t)},s.fillText=function(t,e,i){t=[t,e,i],e=this.textAlign,e==="left"?e="start":e==="right"?e="end":e==="center"&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},rf(this,"fill",e,this.He),this.addElement("text",e,t[0])},s.lineTo=function(t,e){this.path.push(["L",t,e])},s.moveTo=function(t,e){this.path.push(["M",t,e])},s.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},s.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},s.restore=function(){this.He=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},s.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.He.copy())},s.setTransform=function(t,e,i,n,r,o){t===1&&e===0&&i===0&&n===1&&r===0&&o===0||Vo(this,t,e,i,n,r,o)},s.scale=function(t,e){this.He.scale(t,e)},s.translate=function(t,e){this.He.translate(t,e)},s.transform=function(){},s.Ed=function(){},s.stroke=function(){this.addPath("stroke",this.path,this.He)},s.Wi=function(){this.clipInsteadOfFill||this.stroke()},s.Pb=function(t,e,i){return this.Ws.Pb(t,e,i)},s.addElement=function(t,e,i){return t=this.Pb(t,e,i),0<this.fd.length?this.fd[this.fd.length-1].appendChild(t):this.svg.appendChild(t),this.Es=t};function rf(t,e,i,n,r){t.globalAlpha!==1&&(i.opacity=t.globalAlpha),e==="fill"?(t.fillStyle instanceof fh?i.fill=sM(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),i.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",i["fill-opacity"]=t[4]):i.fill=t.fillStyle,i.stroke="none"):e==="stroke"&&(i.fill="none",t.strokeStyle instanceof fh?i.stroke=sM(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),i.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",i["stroke-opacity"]=e[4]):i.stroke=t.strokeStyle,i["stroke-width"]=t.lineWidth,i["stroke-linecap"]=t.lineCap,i["stroke-linejoin"]=t.lineJoin,i["stroke-miterlimit"]=t.miterLimit),n=n.Na,n="matrix("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")",r!==void 0&&(n+=r),i.transform=n}function sM(t,e){var i="GRAD"+as++;if(e.type==="linear")var n=t.Pb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:i,gradientUnits:"userSpaceOnUse"});else if(e.type==="radial")n=t.Pb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:i});else throw Error("invalid gradient");var r=e.Bx;e=r.length;for(var o=[],l=0;l<e;l++){var h=r[l],a=h.color;h={offset:h.offset,"stop-color":a},/^rgba\(/.test(a)&&(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a),h["stop-color"]="rgb("+a[1]+","+a[2]+","+a[3]+")",h["stop-opacity"]=a[4]),o.push(h)}for(o.sort(function(c,p){return c.offset>p.offset?1:-1}),r=0;r<e;r++)n.appendChild(t.Pb("stop",o[r]));return t.svg.appendChild(n),"url(#"+i+")"}s.addPath=function(t,e,i){for(var n=[],r=0;r<e.length;r++){var o=ke(e[r]),l=[o.shift()];if(l[0]==="A")l.push(o.shift()+","+o.shift(),o.shift(),o.shift()+","+o.shift(),o.shift()+","+o.shift());else for(;o.length;)l.push(o.shift()+","+o.shift());n.push(l.join(" "))}e={d:n.join(" ")},t==="stroke"&&this.Ht&&(e["stroke-dasharray"]=this.mh.toString(),e["stroke-dashoffset"]=this.nh),rf(this,t,e,i),t==="clipPath"?(t="CLIP"+as++,i=this.Pb("clipPath",{id:t}),i.appendChild(this.Pb("path",e)),this.svg.appendChild(i),0<this.fd.length&&this.fd[this.fd.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)};function Vo(t,e,i,n,r,o,l){var h=new Ul;h.Na=[e,i,n,r,o,l],e={},rf(t,"g",e,h),h=t.addElement("g",e),t.fd.push(h)}s.zm=function(t){if(this.shadowOffsetX!==0||this.shadowOffsetY!==0||this.shadowBlur!==0){var e="SHADOW"+as++,i=this.addElement("filter",{id:e,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),n=t.computePixelRatio();t=this.Pb("feGaussianBlur",{in:"SourceAlpha",result:"blur",stdDeviation:this.shadowBlur/2/n});var r=this.Pb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),o=this.Pb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"});n=this.Pb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX/n,dy:this.shadowOffsetY/n});var l=this.Pb("feMerge",{});l.appendChild(this.Pb("feMergeNode",{in:"offsetBlur"})),l.appendChild(this.Pb("feMergeNode",{in:"SourceGraphic"})),i.appendChild(t),i.appendChild(r),i.appendChild(o),i.appendChild(n),i.appendChild(l),0<this.fd.length&&this.fd[this.fd.length-1].setAttributeNS(null,"filter","url(#"+e+")")}},s.Mv=function(t,e,i){this.Rr=t,this.Sr=e,this.gg=i};function fo(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function _o(t){t.shadowOffsetX=t.Rr,t.shadowOffsetY=t.Sr,t.shadowBlur=t.gg}s.ns=function(t,e){this.Ht=!0,this.mh=t,this.nh=e},s.ls=function(){this.Ht=!1},s.Hc=function(){},s.vy=function(){},zl.prototype.rotate=function(){},zl.prototype.getImageData=function(){return null},zl.prototype.measureText=function(){return null},zl.className="SVGContext",I.prototype.Is=function(t){var e=new ao(this,W.document);t===void 0&&(t=new Je);var i=this;return GS(this,function(n,r){return n=YS(i,n,"SVG",e),n=n!==null?n.svg:null,typeof r=="function"?(r(n),null):n},t)},I.prototype.makeSvg=I.prototype.Is,I.prototype.kv=function(t){return this.Is(t)},I.prototype.makeSVG=I.prototype.kv,ht.prototype.Jx=function(t,e){if(!(t instanceof zl))return!1;var i=null,n=t.Es,r=this.transform,o=this.panel;(this.G&4096)!==0&&Sp(this);var l=this.xb,h=(this.G&256)!==0;t.clipInsteadOfFill&&(h=!1);var a=!1;if(this instanceof Yt&&(t.font=this.font),h){if(a=o.je()?o.naturalBounds:o.actualBounds,this.$a!==null){var c=this.$a,p=c.x,d=c.y,m=c.width;c=c.height}else p=Math.max(l.x,a.x),d=Math.max(l.y,a.y),m=Math.min(l.right,a.right)-p,c=Math.min(l.bottom,a.bottom)-d;if(p>l.width+l.x||l.x>a.width+a.x||d>l.height+l.y||l.y>a.height+a.y)return!0;a=!0,Vo(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(p,d,m,c),t.clip()}return this.Qi()&&!this.isVisible()||(t.He.Na=[1,0,0,1,0,0],(this instanceof Yt&&1<this.lineCount||this instanceof gt&&1<this.geometry.figures.length)&&Vo(t,1,0,0,1,0,0),p=!1,this.Qi()&&this.isShadowed&&e.Ie("drawShadows")&&(d=this.shadowOffset,t.Mv(d.x*e.scale*e.dc,d.y*e.scale*e.dc,this.shadowBlur),_o(t),t.shadowColor=this.shadowColor),d=!1,this.part&&e.Ie("drawShadows")&&(d=this.part.isShadowed),t.clipInsteadOfFill&&(d=!1),this.shadowVisible===!0?(_o(t),p===!1&&d&&(Vo(t,1,0,0,1,0,0),t.zm(e),p=!0)):this.shadowVisible===!1&&fo(t),m=this.naturalBounds,this.areaBackground!==null&&(Qi(this,t,this.areaBackground,!0,!0,m,l),p===!1&&d&&(Vo(t,1,0,0,1,0,0),t.zm(e),p=!0),this.areaBackground instanceof Ot&&this.areaBackground.type===bi?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.yf(this.areaBackground)):t.fillRect(l.x,l.y,l.width,l.height)),c=!1,this instanceof X?Vo(t,r.m11,r.m12,r.m21,r.m22,r.dx,r.dy):(t.He.Na=[r.m11,r.m12,r.m21,r.m22,r.dx,r.dy],p===!1&&d&&(c=!0)),this.background!==null&&(p===!1&&d&&(Vo(t,1,0,0,1,0,0),t.zm(e),p=!0),rM(this,t,m,l)),d&&(this.background!==null||this.areaBackground!==null||o!==null&&(o.G&512)!==0||o!==null&&(o.type===X.Auto||o.type===X.Spot)&&o.pb()!==this)?(Mp(this,!0),this.shadowVisible===null&&fo(t),c=!1):Mp(this,!1),c&&p===!1&&(Vo(t,1,0,0,1,0,0),t.zm(e),p=!0),this.Ei(t,e),d&&(this.G&512)!==0&&_o(t),this.Qi()&&d&&fo(t),h&&(t.restore(),a&&t.fd.pop()),this instanceof X&&(i=t.fd.pop()),p===!0&&t.fd.pop(),(this instanceof Yt&&1<this.lineCount||this instanceof gt&&1<this.geometry.figures.length)&&(i=t.fd.pop()),t.Ws.Tp!==null&&(i===null&&(n===t.Es?(Vo(t,1,0,0,1,0,0),i=t.fd.pop()):i=t.Es),t.Ws.Tp(this,i)),this.svg=i),!0};function Tn(t,e){this.ownerDocument=e=e===void 0?W.document:e,this.Tp=null,e=e.createElement("canvas"),e.tabIndex=0,this.La=e,this.La.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new Qs(e),e.C=t}Tn.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0):!1},Tn.prototype.toDataURL=function(t,e){return this.La.toDataURL(t,e)},Tn.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},Tn.prototype.focus=function(){this.La.focus()},Tn.prototype.Ix=function(){this.ownerDocument=this.La.C=null},Y.Object.defineProperties(Tn.prototype,{width:{get:function(){return this.La.width},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),Tn.className="CanvasSurface";function Qs(t){t.getContext&&t.getContext("2d")||D("Browser does not support HTML Canvas Element"),this.Y=t.getContext("2d"),this.pt=this.rt=this.qt="",this.Xm=!1,this.gg=this.Sr=this.Rr=0,this.Ul=new Mt}s=Qs.prototype,s.vy=function(t){this.Y.imageSmoothingEnabled=t},s.arc=function(t,e,i,n,r,o){this.Y.arc(t,e,i,n,r,o)},s.beginPath=function(){this.Y.beginPath()},s.bezierCurveTo=function(t,e,i,n,r,o){this.Y.bezierCurveTo(t,e,i,n,r,o)},s.clearRect=function(t,e,i,n){this.Ed(),this.Y.clearRect(t,e,i,n)},s.clip=function(){this.Y.clip()},s.closePath=function(){this.Y.closePath()},s.createLinearGradient=function(t,e,i,n){return this.Y.createLinearGradient(t,e,i,n)},s.createPattern=function(t,e){return this.Y.createPattern(t,e)},s.createRadialGradient=function(t,e,i,n,r,o){return this.Y.createRadialGradient(t,e,i,n,r,o)},s.drawImage=function(t,e,i,n,r,o,l,h,a){n===void 0?this.Y.drawImage(t,e,i):this.Y.drawImage(t,e,i,n,r,o,l,h,a)},s.fill=function(){this.Y.fill()},s.fillRect=function(t,e,i,n){this.Y.fillRect(t,e,i,n)},s.fillText=function(t,e,i){this.Y.fillText(t,e,i)},s.getImageData=function(t,e,i,n){return this.Y.getImageData(t,e,i,n)},s.lineTo=function(t,e){this.Y.lineTo(t,e)},s.measureText=function(t){return this.Y.measureText(t)},s.moveTo=function(t,e){this.Y.moveTo(t,e)},s.quadraticCurveTo=function(t,e,i,n){this.Y.quadraticCurveTo(t,e,i,n)},s.rect=function(t,e,i,n){this.Y.rect(t,e,i,n)},s.restore=function(){this.Y.restore()},s.save=function(){this.Ed(),this.Y.save()},Qs.prototype.rotate=function(t){this.Ul.rotate(57.2958*t,0,0)},s=Qs.prototype,s.setTransform=function(t,e,i,n,r,o){this.Ul.setTransform(t,e,i,n,r,o)},s.scale=function(t,e){this.Ul.scale(t,e)},s.translate=function(t,e){this.Ul.translate(t,e)},s.stroke=function(){this.Y.stroke()},s.transform=function(t,e,i,n,r,o){if(t!==1||e!==0||i!==0||n!==1||r!==0||o!==0){var l=this.Ul,h=l.m11*t+l.m21*e;t=l.m12*t+l.m22*e,e=l.m11*i+l.m21*n,i=l.m12*i+l.m22*n,l.dx=l.m11*r+l.m21*o+l.dx,l.dy=l.m12*r+l.m22*o+l.dy,l.m11=h,l.m12=t,l.m21=e,l.m22=i}},s.Ed=function(){var t=this.Ul;this.Y.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},s.yf=function(t){if(t instanceof Ot&&t.type===bi){var e=t.Fk;t=t.st,t>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.Xm?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.Xm?this.clip():this.fill()},s.Wi=function(){this.Xm||this.stroke()},s.Mv=function(t,e,i){this.Rr=t,this.Sr=e,this.gg=i},s.ns=function(t,e){var i=this.Y;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)},s.ls=function(){var t=this.Y;t.setLineDash!==void 0&&(t.setLineDash(WT),t.lineDashOffset=0)},s.Hc=function(t){t&&(this.qt=""),this.pt=this.rt=""},Y.Object.defineProperties(Qs.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.pt!==t&&(this.pt=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.qt!==t&&(this.qt=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.rt!==t&&(this.rt=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.Xm},set:function(t){this.Xm=t}}});var WT=Object.freeze([]);Qs.className="CanvasSurfaceContext";function of(){this.L=this.o=this.D=this.j=0}of.className="ColorNumbers";function Ot(t,e){yh||(qm(),yh=!0),je(this),this.v=!1,t===void 0?(this.ha=Uo,this.Ek="black"):typeof t=="string"?(this.ha=Uo,this.Ek=t):(this.ha=t,this.Ek="black"),t=this.ha,t===po?(this.Cd=oo,this.Sk=Ol):this.Sk=t===bi?this.Cd=_t:this.Cd=Ze,this.Vr=0,this.Wq=NaN,this.ne=this.Hr=this.me=null,this.st=this.Fk=0,e&&Object.assign(this,e)}Ot.prototype.copy=function(){var t=new Ot;return t.ha=this.ha,t.Ek=this.Ek,t.Cd=this.Cd.I(),t.Sk=this.Sk.I(),t.Vr=this.Vr,t.Wq=this.Wq,this.me!==null&&(t.me=this.me.copy()),t.Hr=this.Hr,t},s=Ot.prototype,s.freeze=function(){return this.v=!0,this.me!==null&&this.me.freeze(),this},s.ea=function(){return Object.isFrozen(this)&&D("cannot thaw constant: "+this),this.v=!1,this.me!==null&&this.me.ea(),this},s.gb=function(t){t.classType===Ot&&(this.type=t)},s.toString=function(){var t="Brush(";if(this.type===Uo)t+=this.color;else if(t=this.type===po?t+"Linear ":this.type===bi?t+"Radial ":this.type===gh?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.colorStops!==null)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},s.addColorStop=function(t,e){return this.v&&rt(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&st(t,"0 <= loc <= 1",Ot,"addColorStop:loc"),this.me===null&&(this.me=new pt),this.me.add(t,e),this.ha===Uo&&(this.type=po),this.ne=null,this},s.rA=function(t,e){if(this.v&&rt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?mh:e,this.type===Uo)co(this.color),this.color=ph(t,e);else if((this.type===po||this.type===bi)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)co(i.value),this.addColorStop(i.key,ph(t,e));return this};function lM(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?mh:i,co(t),ph(e,i)}s.sz=function(t,e){if(this.v&&rt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?mh:e,this.type===Uo)co(this.color),this.color=ph(-t,e);else if((this.type===po||this.type===bi)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)co(i.value),this.addColorStop(i.key,ph(-t,e));return this};function uM(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?mh:i,co(t),ph(-e,i)}function Km(t,e,i){co(t),t=Wt.j;var n=Wt.D,r=Wt.o,o=Wt.L;return co(e),i===void 0&&(i=.5),"rgba("+Math.round((Wt.j-t)*i+t)+", "+Math.round((Wt.D-n)*i+n)+", "+Math.round((Wt.o-r)*i+r)+", "+Math.round((Wt.L-o)*i+o)+")"}s.ay=function(){if(this.type===Uo)return ch(this.color);if((this.type===po||this.type===bi)&&this.colorStops!==null){var t=this.colorStops;if(this.type===bi)return ch(t.first().value);if(t.get(.5)!==null)return ch(t.get(.5));if(t.count===2)return t=t.ya(),ch(Km(t[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,r=1,o=1;e.next();){var l=e.key,h=Math.abs(.5-e.key);r>o&&h<r?(i=l,r=h):o>=r&&h<o&&(n=l,o=h)}return i>n&&(o=i,i=n,n=o,o=r),r=n-i,ch(Km(t.get(i),t.get(n),1-o/r))}return!1};function ch(t){return t?t instanceof Ot?t.ay():(co(t),128>(299*Wt.j+587*Wt.D+114*Wt.o)/1e3):!1}function ph(t,e){switch(e){case mh:e=100*Jm(Wt.j);var i=100*Jm(Wt.D),n=100*Jm(Wt.o);return gi.j=.4124564*e+.3575761*i+.1804375*n,gi.D=.2126729*e+.7151522*i+.072175*n,gi.o=.0193339*e+.119192*i+.9503041*n,gi.L=Wt.L,e=Qm(gi.j/dh[0]),i=Qm(gi.D/dh[1]),n=Qm(gi.o/dh[2]),Dr.j=116*i-16,Dr.D=500*(e-i),Dr.o=200*(i-n),Dr.L=gi.L,Dr.j=Math.min(100,Math.max(0,Dr.j+100*t)),t=(Dr.j+16)/116,e=t-Dr.o/200,gi.j=dh[0]*hM(Dr.D/500+t),gi.D=dh[1]*(Dr.j>Cp*bm?Math.pow(t,3):Dr.j/Cp),gi.o=dh[2]*hM(e),gi.L=Dr.L,t=-.969266*gi.j+1.8760108*gi.D+.041556*gi.o,e=.0556434*gi.j+-.2040259*gi.D+1.0572252*gi.o,Wt.j=255*Zm((3.2404542*gi.j+-1.5371385*gi.D+-.4985314*gi.o)/100),Wt.D=255*Zm(t/100),Wt.o=255*Zm(e/100),Wt.L=gi.L,Wt.j=Math.round(Wt.j),255<Wt.j?Wt.j=255:0>Wt.j&&(Wt.j=0),Wt.D=Math.round(Wt.D),255<Wt.D?Wt.D=255:0>Wt.D&&(Wt.D=0),Wt.o=Math.round(Wt.o),255<Wt.o?Wt.o=255:0>Wt.o&&(Wt.o=0),"rgba("+Wt.j+", "+Wt.D+", "+Wt.o+", "+Wt.L+")";case aM:return $m(),qi.o=Math.min(100,Math.max(0,qi.o+100*t)),"hsla("+qi.j+", "+qi.D+"%, "+qi.o+"%, "+qi.L+")";default:D("Unknown color space: "+e)}}function co(t){yh||(qm(),yh=!0);var e=t0;if(e!==null){e.clearRect(0,0,1,1),e.fillStyle="#000000";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Wt.j=t[0],Wt.D=t[1],Wt.o=t[2],Wt.L=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Wt.j=0,Wt.D=0,Wt.o=0,Wt.L=1)}}function $m(){var t=Wt.j/255,e=Wt.D/255,i=Wt.o/255,n=Math.max(t,e,i),r=Math.min(t,e,i),o=n-r;if(r=(n+r)/2,o===0)var l=t=0;else{switch(n){case t:l=(e-i)/o%6;break;case e:l=(i-t)/o+2;break;case i:l=(t-e)/o+4}l*=60,0>l&&(l+=360),t=o/(1-Math.abs(2*r-1))}qi.j=Math.round(l),qi.D=Math.round(100*t),qi.o=Math.round(100*r),qi.L=Wt.L}function Jm(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Zm(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Qm(t){return t>bm?Math.pow(t,1/3):(Cp*t+16)/116}function hM(t){var e=t*t*t;return e>bm?e:(116*t-16)/Cp}function Gl(t,e){typeof t!="string"&&(t instanceof Ot||D("Value for "+e+" must be a color string or a Brush, not "+t))}function qm(){t0=Un?new Tn(null).context:null}Y.Object.defineProperties(Ot.prototype,{type:{get:function(){return this.ha},set:function(t){this.v&&rt(this,t),this.ha=t,this.start.zc()&&(t===po?this.start=oo:t===bi&&(this.start=_t)),this.end.zc()&&(t===po?this.end=Ol:t===bi&&(this.end=_t)),this.ne=null}},color:{get:function(){return this.Ek},set:function(t){this.v&&rt(this,t),this.Ek=t,this.ne=null}},start:{get:function(){return this.Cd},set:function(t){this.v&&rt(this,t),this.Cd=t.I(),this.ne=null}},end:{get:function(){return this.Sk},set:function(t){this.v&&rt(this,t),this.Sk=t.I(),this.ne=null}},startRadius:{get:function(){return this.Vr},set:function(t){this.v&&rt(this,t),0>t&&st(t,">= zero",Ot,"startRadius"),this.Vr=t,this.ne=null}},endRadius:{get:function(){return this.Wq},set:function(t){this.v&&rt(this,t),0>t&&st(t,">= zero",Ot,"endRadius"),this.Wq=t,this.ne=null}},colorStops:{get:function(){return this.me},set:function(t){this.v&&rt(this,t),this.me=t,this.ne=null}},pattern:{get:function(){return this.Hr},set:function(t){this.v&&rt(this,t),this.Hr=t,this.ne=null}}}),Ot.prototype.isDark=Ot.prototype.ay,Ot.prototype.darkenBy=Ot.prototype.sz,Ot.prototype.lightenBy=Ot.prototype.rA,Ot.prototype.addColorStop=Ot.prototype.addColorStop;var bm=216/24389,Cp=24389/27,dh=[95.047,100,108.883],t0=null,Wt=new of,qi=new of,gi=new of,Dr=new of,yh=!1;Ot.className="Brush";var Uo;Ot.Solid=Uo=new K(Ot,"Solid",0);var po;Ot.Linear=po=new K(Ot,"Linear",1);var bi;Ot.Radial=bi=new K(Ot,"Radial",2);var gh;Ot.Pattern=gh=new K(Ot,"Pattern",4);var mh;Ot.Lab=mh=new K(Ot,"Lab",5);var aM;Ot.HSL=aM=new K(Ot,"HSL",6),Ot.randomColor=function(t,e){t===void 0&&(t=128),e===void 0&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e="0"+e),2>n.length&&(n="0"+n),2>t.length&&(t="0"+t),"#"+e+n+t},Ot.isValidColor=function(t){if(t==="black")return!0;if(t==="")return!1;yh||(qm(),yh=!0);var e=t0;if(e===null)return!0;e.fillStyle="#000000";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i?!0:(e.fillStyle="#FFFFFF",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},Ot.lighten=function(t){return lM(t)},Ot.lightenBy=lM,Ot.darken=function(t){return uM(t)},Ot.darkenBy=uM,Ot.mix=Km,Ot.isDark=ch;function ge(){this.na="Base"}ge.prototype.measure=function(){},ge.prototype.uA=function(t,e,i,n,r){t.measure(e,i,n,r)},ge.prototype.arrange=function(){},ge.prototype.gz=function(t,e,i,n,r,o){t.arrange(e,i,n,r,o)},ge.prototype.EA=function(t){t.ak()},ge.prototype.oc=function(){},Y.Object.defineProperties(ge.prototype,{name:{get:function(){return this.na},set:function(t){this.na=t}},classType:{get:function(){return X}}}),ge.prototype.remeasureObject=ge.prototype.EA,ge.prototype.arrangeElement=ge.prototype.gz,ge.prototype.measureElement=ge.prototype.uA,ge.className="PanelLayout";function Np(){this.na="Base"}z(Np,ge),Np.prototype.measure=function(t,e,i,n,r,o,l){var h=n.length;t=yo(t);for(var a=0;a<h;a++){var c=n[a];if(c.visible||c===t){var p=c.margin,d=p.right+p.left;p=p.top+p.bottom,c.measure(e,i,o,l);var m=c.measuredBounds;d=Math.max(m.width+d,0),p=Math.max(m.height+p,0),m=c.position.x;var x=c.position.y;isFinite(m)||(m=0),isFinite(x)||(x=0),c instanceof gt&&c.isGeometryPositioned&&(c=c.strokeWidth/2,m-=c,x-=c),Ve(r,m,x,d,p)}}},Np.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding;for(t=i.x-r.left,i=i.y-r.top,r=0;r<n;r++){var o=e[r],l=o.measuredBounds,h=o.margin,a=o.position.x,c=o.position.y;if(a=isNaN(a)?-t:a-t,c=isNaN(c)?-i:c-i,o instanceof gt&&o.isGeometryPositioned){var p=o.strokeWidth/2;a-=p,c-=p}o.visible&&o.arrange(a+h.left,c+h.top,l.width,l.height)}};function Tp(){this.na="Base"}z(Tp,ge),Tp.prototype.measure=function(t,e,i,n,r,o,l){var h=n.length;e=Et(),o=yo(t);for(var a=0;a<h;a++){var c=n[a];if(c.visible||c===o){var p=ir(c,!1);if(p!==ce&&p!==Xe)e.push(c);else{c.measure(1/0,i,0,l),p=c.margin,c=c.measuredBounds;var d=Math.max(c.height+p.top+p.bottom,0);r.width+=Math.max(c.width+p.right+p.left,0),r.height=Math.max(r.height,d)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):r.height!==0&&(i=Math.min(r.height,t.maxSize.height)),t=0;t<n;t++)a=e[t],(a.visible||a===o)&&(p=a.margin,h=p.right+p.left,p=p.top+p.bottom,a.measure(1/0,i,0,l),a=a.measuredBounds,p=Math.max(a.height+p,0),r.width+=Math.max(a.width+h,0),r.height=Math.max(r.height,p));Ut(e)},Tp.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.top,l=t.isOpposite,h=l?i.width:r.left,a=0;a<n;a++){var c=o,p=e[a];if(p.visible){var d=p.measuredBounds,m=p.margin,x=m.top+m.bottom,v=o+r.bottom,S=d.height,P=ir(p,!1);(isNaN(p.desiredSize.height)&&P===he||P===be)&&(S=Math.max(i.height-x-v,0)),x=S+x+v,v=p.alignment,v.Mb()&&(v=t.defaultAlignment),v.hb()||(v=_t),l&&(h-=d.width+m.left+m.right),p.arrange(h+v.offsetX+m.left,c+v.offsetY+m.top+(i.height*v.y-x*v.y),d.width,S),l||(h+=d.width+m.left+m.right)}}};function Lp(){this.na="Base"}z(Lp,ge),Lp.prototype.measure=function(t,e,i,n,r,o){var l=n.length;i=Et();for(var h=yo(t),a=0;a<l;a++){var c=n[a];if(c.visible||c===h){var p=ir(c,!1);if(p!==ce&&p!==be)i.push(c);else{var d=c.margin;p=d.right+d.left,d=d.top+d.bottom,c.measure(e,1/0,o,0),c=c.measuredBounds,ro(r,Math.max(r.width,Math.max(c.width+p,0)),r.height+Math.max(c.height+d,0))}}}if(n=i.length,n!==0){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):r.width!==0&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<n;t++)a=i[t],(a.visible||a===h)&&(c=a.margin,l=c.right+c.left,c=c.top+c.bottom,a.measure(e,1/0,o,0),a=a.measuredBounds,c=Math.max(a.height+c,0),r.width=Math.max(r.width,Math.max(a.width+l,0)),r.height+=c);Ut(i)}},Lp.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.left,l=t.isOpposite,h=l?i.height:r.top,a=0;a<n;a++){var c=o,p=e[a];if(p.visible){var d=p.measuredBounds,m=p.margin,x=m.left+m.right,v=o+r.right,S=d.width,P=ir(p,!1);(isNaN(p.desiredSize.width)&&P===he||P===Xe)&&(S=Math.max(i.width-x-v,0)),x=S+x+v,v=p.alignment,v.Mb()&&(v=t.defaultAlignment),v.hb()||(v=_t),l&&(h-=d.height+m.bottom+m.top),p.arrange(c+v.offsetX+m.left+(i.width*v.x-x*v.x),h+v.offsetY+m.top,S,d.height),l||(h+=d.height+m.bottom+m.top)}}};function Ep(){this.na="Base"}z(Ep,ge),Ep.prototype.measure=function(t,e,i,n,r,o,l){var h=n.length,a=t.pb(),c=a.margin,p=c.right+c.left,d=c.top+c.bottom;a.measure(e,i,o,l);var m=a.measuredBounds;o=m.width,l=m.height;var x=Math.max(o+p,0),v=Math.max(l+d,0),S=t.isClipping,P=_.allocAt(-c.left,-c.top,x,v),k=_.allocAt(0,0,o,l);e0(a,k,!0),o=k.width,l=k.height;for(var L=!0,T=yo(t),O=0;O<h;O++){var E=n[O],V=e,$=i;if(E!==a&&(E.visible||E===T)){switch(c=E.margin,x=c.right+c.left,v=c.top+c.bottom,m=ir(E,!1),m){case he:V=o,$=l;break;case Xe:V=o;break;case be:$=l}E.measure(V,$,0,0),m=E.measuredBounds,x=Math.max(m.width+x,0),v=Math.max(m.height+v,0),V=E.alignment,V.Mb()&&(V=t.defaultAlignment),V.hb()||(V=_t);var b=E.alignmentFocus;b.Mb()&&(b=_t),$=null,E instanceof X&&E.Re!==""&&($=E.Ya(E.Re),$===E&&($=null));var nt=k.x,et=k.y;if($!==null){for(E.arrange(0,0,m.width,m.height),c=$.actualBounds,c=N.allocAt(c.x+(b.x*c.width-b.offsetX),c.y+(b.y*c.height-b.offsetY)),$=$.panel;$!==E;)$.transform.Aa(c),$=$.panel;nt+=V.x*o+V.offsetX-c.x,et+=V.y*l+V.offsetY-c.y,N.free(c)}else nt+=V.x*o+V.offsetX-(b.x*m.width+b.offsetX)-c.left,et+=V.y*l+V.offsetY-(b.y*m.height+b.offsetY)-c.top;L?(L=!1,r.h(nt,et,x,v)):Ve(r,nt,et,x,v)}}switch(L?r.assign(P):S?r.$u(k.x,k.y,k.width,k.height):Ve(r,P.x,P.y,P.width,P.height),_.free(P),_.free(k),m=a.stretch,m===wr&&(m=ir(a,!1)),m){case ce:return;case he:if(!isFinite(e)&&!isFinite(i))return;break;case Xe:if(!isFinite(e))return;break;case be:if(!isFinite(i))return}for(m=a.measuredBounds,o=m.width,l=m.height,x=Math.max(o+p,0),v=Math.max(l+d,0),c=a.margin,k=_.allocAt(-c.left,-c.top,x,v),e0(a,k,!0),o=k.width,l=k.height,e=0;e<h;e++)i=n[e],i===a||!i.visible&&i!==T||(c=i.margin,x=c.right+c.left,v=c.top+c.bottom,m=i.measuredBounds,x=Math.max(m.width+x,0),v=Math.max(m.height+v,0),p=i.alignment,p.Mb()&&(p=t.defaultAlignment),p.hb()||(p=_t),i=i.alignmentFocus,i.Mb()&&(i=_t),L?(L=!1,r.h(p.x*o+p.offsetX-(i.x*m.width+i.offsetX)-c.left,p.y*l+p.offsetY-(i.y*m.height+i.offsetY)-c.top,x,v)):Ve(r,p.x*o+p.offsetX-(i.x*m.width+i.offsetX)-c.left,p.y*l+p.offsetY-(i.y*m.height+i.offsetY)-c.top,x,v));L?r.assign(P):S?r.$u(k.x,k.y,k.width,k.height):Ve(r,P.x,P.y,P.width,P.height),_.free(k)},Ep.prototype.arrange=function(t,e,i){var n=e.length,r=t.pb(),o=r.measuredBounds,l=o.width,h=o.height,a=t.padding;o=a.left,a=a.top;var c=o-i.x,p=a-i.y;for(r.arrange(c,p,l,h),l=_.allocAt(0,0,l,h),e0(r,l,!1),h=0;h<n;h++){var d=e[h];if(d!==r){c=d.measuredBounds;var m=c.width,x=c.height;p=d.alignment,p.Mb()&&(p=t.defaultAlignment),p.hb()||(p=_t);var v=d.alignmentFocus;if(v.Mb()&&(v=_t),c=null,d instanceof X&&d.Re!==""&&(c=d.Ya(d.Re),c===d&&(c=null)),c!==null){var S=c.actualBounds;for(v=N.allocAt(S.x+(v.x*S.width-v.offsetX),S.y+(v.y*S.height-v.offsetY)),c=c.panel;c!==d;)c.transform.Aa(v),c=c.panel;c=p.x*l.width+p.offsetX-v.x,p=p.y*l.height+p.offsetY-v.y,N.free(v)}else c=p.x*l.width+p.offsetX-(v.x*m+v.offsetX),p=p.y*l.height+p.offsetY-(v.y*x+v.offsetY);c+=l.x-i.x,p+=l.y-i.y,d.visible&&d.arrange(o+c,a+p,m,x)}}_.free(l)};function e0(t,e,i){var n=null;if(t instanceof X&&t.Re!==""&&(n=t.Ya(t.Re),n===t&&(n=null)),n!==null)for(i&&t.arrange(0,0,e.width,e.height),e.assign(n.actualBounds),n=n.panel;n!==t;)n.transform.wq(e),n=n.panel}function Op(){this.na="Base"}z(Op,ge),Op.prototype.measure=function(t,e,i,n,r,o,l){var h=n.length,a=t.pb(),c=a.margin,p=e,d=i,m=c.right+c.left,x=c.top+c.bottom;a.measure(e,i,o,l),c=a.measuredBounds;var v=0,S=null;a instanceof gt&&(S=a,v=S.strokeWidth*S.scale);var P=Math.max(c.width+m,0);c=Math.max(c.height+x,0);var k=r0(a),L=k.x*P+k.offsetX;k=k.y*c+k.offsetY;var T=o0(a),O=T.x*P+T.offsetX;for(T=T.y*c+T.offsetY,isFinite(e)&&(p=Math.max(Math.abs(L-O)-v,0)),isFinite(i)&&(d=Math.max(Math.abs(k-T)-v,0)),v=yt.alloc(),v.h(0,0),t=yo(t),T=0;T<h;T++)k=n[T],k===a||!k.visible&&k!==t||(c=k.margin,P=c.right+c.left,L=c.top+c.bottom,k.measure(p,d,0,0),c=k.measuredBounds,P=Math.max(c.width+P,0),c=Math.max(c.height+L,0),v.h(Math.max(P,v.width),Math.max(c,v.height)));if(h===1)r.width=P,r.height=c,yt.free(v);else{switch(k=r0(a),T=o0(a),h=n=0,T.x!==k.x&&T.y!==k.y&&(n=v.width/Math.abs(T.x-k.x),h=v.height/Math.abs(T.y-k.y)),yt.free(v),v=0,S!==null&&(v=S.strokeWidth*S.scale,f0(S)===xr&&(n=h=Math.max(n,h))),n+=Math.abs(k.offsetX)+Math.abs(T.offsetX)+v,h+=Math.abs(k.offsetY)+Math.abs(T.offsetY)+v,S=a.stretch,S===wr&&(S=ir(a,!1)),S){case ce:l=o=0;break;case he:isFinite(e)&&(n=e),isFinite(i)&&(h=i);break;case Xe:isFinite(e)&&(n=e),l=0;break;case be:o=0,isFinite(i)&&(h=i)}a.ak(),a.measure(n,h,o,l),r.width=a.measuredBounds.width+m,r.height=a.measuredBounds.height+x}},Op.prototype.arrange=function(t,e){var i=e.length,n=t.pb(),r=n.measuredBounds,o=_.alloc();o.h(0,0,1,1);var l=n.margin,h=l.left;l=l.top;var a=t.padding,c=a.left;a=a.top,n.arrange(c+h,a+l,r.width,r.height);var p=r0(n),d=o0(n),m=p.y*r.height+p.offsetY,x=d.x*r.width+d.offsetX;for(d=d.y*r.height+d.offsetY,o.x=p.x*r.width+p.offsetX,o.y=m,Ve(o,x,d,0,0),o.x+=h+c,o.y+=l+a,r=0;r<i;r++)h=e[r],h!==n&&(c=h.measuredBounds,l=h.margin,a=Math.max(c.width+l.right+l.left,0),p=Math.max(c.height+l.top+l.bottom,0),m=h.alignment,m.Mb()&&(m=t.defaultAlignment),m.hb()||(m=_t),a=o.width*m.x+m.offsetX-a*m.x+l.left+o.x,l=o.height*m.y+m.offsetY-p*m.y+l.top+o.y,h.visible&&(Qn(o.x,o.y,o.width,o.height,a,l,c.width,c.height)?h.arrange(a,l,c.width,c.height):h.arrange(a,l,c.width,c.height,new _(o.x,o.y,o.width,o.height))));_.free(o)};function Ap(){this.na="Base",this.name="Table"}z(Ap,ge),Ap.prototype.measure=function(t,e,i,n,r){for(var o=n.length,l=Et(),h=Et(),a=0;a<o;a++){var c=n[a],p=c instanceof X?c:null;if(p===null||p.type!==X.TableRow&&p.type!==X.TableColumn||!c.visible)l.push(c);else{h.push(p);for(var d=p.T.m,m=d.length,x=0;x<m;x++){var v=d[x];p.type===X.TableRow?v.row=c.row:p.type===X.TableColumn&&(v.column=c.column),l.push(v)}}}o=l.length,o===0&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var S=[],P=0;P<o;P++){var k=l[P];pn(k,!0),Js(k,!0),S[k.row]||(S[k.row]=[]),S[k.row][k.column]||(S[k.row][k.column]=[]),S[k.row][k.column].push(k)}Ut(l);var L=Et(),T=Et(),O=Et(),E={count:0},V={count:0},$=e,b=i,nt=t.ob;o=nt.length;for(var et=0;et<o;et++){var G=nt[et];G!==void 0&&(G.actual=0)}nt=t.ib,o=nt.length;for(var vt=0;vt<o;vt++)G=nt[vt],G!==void 0&&(G.actual=0);for(var ft=S.length,It=0,Kt=0;Kt<ft;Kt++)S[Kt]&&(It=Math.max(It,S[Kt].length));var Se=Math.min(t.topIndex,ft-1),Qt=Math.min(t.leftIndex,It-1),$t=0;ft=S.length;for(var Mr=yo(t),Ei=0;Ei<ft;Ei++)if(S[Ei]){It=S[Ei].length;var Oi=t.getRowDefinition(Ei);Oi.actual=0;for(var Le=Oi.cc=0;Le<It;Le++)if(S[Ei][Le]){var kr=t.getColumnDefinition(Le);L[Le]===void 0&&(kr.actual=0,kr.cc=0,L[Le]=!0);for(var su=S[Ei][Le],lu=su.length,Qo=0;Qo<lu;Qo++){var si=su[Qo];if(si.visible||si===Mr){var zh=1<si.rowSpan||1<si.columnSpan;zh&&(Ei<Se||Le<Qt||T.push(si));var uu=si.margin,Gh=uu.right+uu.left,Yh=uu.top+uu.bottom,Pe=ef(si,Oi,kr,!1),Wf=si.desiredSize,Qd=!isNaN(Wf.height),hu=!isNaN(Wf.width)&&Qd;if(zh||Pe===ce||hu||Ei<Se||Le<Qt||(E[Le]!==void 0||Pe!==he&&Pe!==Xe||(E[Le]=-1,E.count++),V[Ei]!==void 0||Pe!==he&&Pe!==be||(V[Ei]=-1,V.count++),O.push(si)),si.measure(1/0,1/0,0,0),!(Ei<Se||Le<Qt)){var lr=si.measuredBounds,Hi=Math.max(lr.width+Gh,0),rl=Math.max(lr.height+Yh,0);if(si.rowSpan===1&&(Pe===ce||Pe===Xe)){G=t.getRowDefinition(Ei);var nn=G.Ic();$t=Math.max(rl-G.actual,0),$t+nn>b&&($t=Math.max(b-nn,0));var au=G.la===0;G.cc=G.cc+$t,G.actual=G.la+$t,b=Math.max(b-($t+(au?nn:0)),0)}if(si.columnSpan===1&&(Pe===ce||Pe===be)){G=t.getColumnDefinition(Le);var Xh=G.Ic();$t=Math.max(Hi-G.actual,0),$t+Xh>$&&($t=Math.max($-Xh,0));var Mv=G.la===0;G.cc=G.cc+$t,G.actual=G.la+$t,$=Math.max($-($t+(Mv?Xh:0)),0)}zh&&si.ak()}}}}}Ut(L);var zr=0,mo=0;o=t.columnCount;for(var fu=0;fu<o;fu++){var cu=t.ib[fu];cu!==void 0&&(zr+=cu.cc,cu.cc!==0&&(zr+=cu.Ic()))}o=t.rowCount;for(var Kn=0;Kn<o;Kn++){var vo=t.ob[Kn];vo!==void 0&&(mo+=vo.cc,vo.cc!==0&&(mo+=vo.Ic()))}$=Math.max(e-zr,0);var Bi=b=Math.max(i-mo,0),Wh=$;o=O.length;for(var Hh=0;Hh<o;Hh++){var $n=O[Hh],Hf=t.getRowDefinition($n.row),xo=t.getColumnDefinition($n.column),Es=$n.measuredBounds,Pr=$n.margin,qd=Pr.right+Pr.left,kv=Pr.top+Pr.bottom;E[$n.column]=xo.cc===0&&E[$n.column]!==void 0?Math.max(Es.width+qd,E[$n.column]):null,V[$n.row]=Hf.cc===0&&V[$n.row]!==void 0?Math.max(Es.height+kv,V[$n.row]):null}var ol=0,li=0,Gr;for(Gr in V)Gr!=="count"&&(ol+=V[Gr]);for(Gr in E)Gr!=="count"&&(li+=E[Gr]);for(var Re=yt.alloc(),Kf=0;Kf<o;Kf++){var Ai=O[Kf];if(Ai.visible||Ai===Mr){var rn=t.getRowDefinition(Ai.row),Ki=t.getColumnDefinition(Ai.column),Yr=0;isFinite(Ki.width)?Yr=Ki.width:(isFinite($)&&E[Ai.column]!==null?li===0?Yr=Ki.actual+$:Yr=E[Ai.column]/li*Wh:E[Ai.column]!==null?Yr=$:Yr=Ki.actual||$,Yr=Math.max(0,Yr-Ki.Ic()));var Xr=0;switch(isFinite(rn.height)?Xr=rn.height:(isFinite(b)&&V[Ai.row]!==null?ol===0?Xr=rn.actual+b:Xr=V[Ai.row]/ol*Bi:V[Ai.row]!==null?Xr=b:Xr=rn.actual||b,Xr=Math.max(0,Xr-rn.Ic())),Re.h(Math.max(Ki.minimum,Math.min(Yr,Ki.maximum)),Math.max(rn.minimum,Math.min(Xr,rn.maximum))),Pe=ef(Ai,rn,Ki,!1),Pe){case Xe:Re.height=Math.max(Re.height,rn.actual+b);break;case be:Re.width=Math.max(Re.width,Ki.actual+$)}var pu=Ai.margin,mn=pu.right+pu.left,Kh=pu.top+pu.bottom;Ai.ak(),Ai.measure(Re.width,Re.height,Ki.minimum,rn.minimum);var du=Ai.measuredBounds,Wr=Math.max(du.width+mn,0),$h=Math.max(du.height+Kh,0);isFinite($)&&(Wr=Math.min(Wr,Re.width)),isFinite(b)&&($h=Math.min($h,Re.height));var Os=0;Os=rn.actual,rn.actual=Math.max(rn.actual,$h),rn.cc=Math.max(rn.cc,$h),$t=rn.actual-Os,b=Math.max(b-$t,0),V[Ai.row]===null&&(Bi=Math.max(Bi-$t,0)),Os=Ki.actual,Ki.actual=Math.max(Ki.actual,Wr),Ki.cc=Math.max(Ki.cc,Wr),$t=Ki.actual-Os,$=Math.max($-$t,0),E[Ai.column]===null&&(Wh=Math.max(Wh-$t,0))}}Ut(O);var qo=yt.alloc(),Hr=Et(),Kr=Et();if(o=T.length,o!==0){for(var bo=0;bo<ft;bo++)if(S[bo]){It=S[bo].length;var Jh=t.getRowDefinition(bo);Hr[bo]=Jh.actual;for(var wo=0;wo<It;wo++)if(S[bo][wo]){var Pv=t.getColumnDefinition(wo);Kr[wo]=Pv.actual}}}for(var Vi=0;Vi<o;Vi++){var oe=T[Vi];if(oe.visible||oe===Mr){var _i=t.getRowDefinition(oe.row),$r=t.getColumnDefinition(oe.column);switch(Re.h(Math.max($r.minimum,Math.min(e,$r.maximum)),Math.max(_i.minimum,Math.min(i,_i.maximum))),Pe=ef(oe,_i,$r,!1),Pe){case he:Kr[$r.index]!==0&&(Re.width=Math.min(Re.width,Kr[$r.index])),Hr[_i.index]!==0&&(Re.height=Math.min(Re.height,Hr[_i.index]));break;case Xe:Kr[$r.index]!==0&&(Re.width=Math.min(Re.width,Kr[$r.index]));break;case be:Hr[_i.index]!==0&&(Re.height=Math.min(Re.height,Hr[_i.index]))}isFinite($r.width)&&(Re.width=$r.width),isFinite(_i.height)&&(Re.height=_i.height),qo.h(0,0);for(var ts=$r.minimum,Zh=_i.minimum,es=1;es<oe.rowSpan&&!(oe.row+es>=t.rowCount);es++)G=t.getRowDefinition(oe.row+es),$t=0,$t=Pe===he||Pe===be?Math.max(G.minimum,Hr[oe.row+es]===0?G.maximum:Math.min(Hr[oe.row+es],G.maximum)):Math.max(G.minimum,isNaN(G.Bd)?G.maximum:Math.min(G.Bd,G.maximum)),qo.height+=$t,Zh+=G.minimum;for(var An=1;An<oe.columnSpan&&!(oe.column+An>=t.columnCount);An++)G=t.getColumnDefinition(oe.column+An),$t=0,$t=Pe===he||Pe===Xe?Math.max(G.minimum,Kr[oe.column+An]===0?G.maximum:Math.min(Kr[oe.column+An],G.maximum)):Math.max(G.minimum,isNaN(G.Bd)?G.maximum:Math.min(G.Bd,G.maximum)),qo.width+=$t,ts+=G.minimum;Re.width+=qo.width,Re.height+=qo.height;var As=oe.margin,Qh=As.right+As.left,Cv=As.top+As.bottom;oe.measure(Re.width,Re.height,ts,Zh);for(var yu=oe.measuredBounds,ur=Math.max(yu.width+Qh,0),Jr=Math.max(yu.height+Cv,0),So=0,Mo=0;Mo<oe.rowSpan&&!(oe.row+Mo>=t.rowCount);Mo++)G=t.getRowDefinition(oe.row+Mo),So+=G.total||0;if(So<Jr){var Zr=Jr-So,ko=Jr-So;if(oe.spanAllocation!==null)for(var bd=oe.spanAllocation,is=0;is<oe.rowSpan&&!(0>=Zr)&&!(oe.row+is>=t.rowCount);is++){G=t.getRowDefinition(oe.row+is);var $f=G.la||0,Nv=bd(oe,G,ko);G.actual=Math.min(G.maximum,$f+Nv),G.la!==$f&&(Zr-=G.la-$f)}for(;0<Zr;){var hr=G.la||0;if(isNaN(G.height)&&G.maximum>hr&&(G.actual=Math.min(G.maximum,hr+Zr),G.la!==hr&&(Zr-=G.la-hr)),G.index===0)break;G=t.getRowDefinition(G.index-1)}}for(var sl=0,qh=0;qh<oe.columnSpan&&!(oe.column+qh>=t.columnCount);qh++)G=t.getColumnDefinition(oe.column+qh),sl+=G.total||0;if(sl<ur){var gu=ur-sl,kL=ur-sl;if(oe.spanAllocation!==null)for(var PL=oe.spanAllocation,ty=0;ty<oe.columnSpan&&!(0>=gu)&&!(oe.column+ty>=t.columnCount);ty++){G=t.getColumnDefinition(oe.column+ty);var Tv=G.la||0,CL=PL(oe,G,kL);G.actual=Math.min(G.maximum,Tv+CL),G.la!==Tv&&(gu-=G.la-Tv)}for(;0<gu;){var ey=G.la||0;if(isNaN(G.width)&&G.maximum>ey&&(G.actual=Math.min(G.maximum,ey+gu),G.la!==ey&&(gu-=G.la-ey)),G.index===0)break;G=t.getColumnDefinition(G.index-1)}}}}Ut(T),yt.free(qo),yt.free(Re),Hr!==void 0&&Ut(Hr),Kr!==void 0&&Ut(Kr);var mu=0,vu=0,iy=t.desiredSize,NP=t.maxSize;Pe=ir(t,!0);var Jf=mo=zr=0,Zf=0;o=t.columnCount;for(var ny=0;ny<o;ny++)t.ib[ny]!==void 0&&(G=t.getColumnDefinition(ny),isFinite(G.width)?(Jf+=G.width,Jf+=G.Ic()):Up(G)===hf?(Jf+=G.la,Jf+=G.Ic()):G.la!==0&&(zr+=G.la,zr+=G.Ic()));isFinite(iy.width)?mu=Math.min(iy.width,NP.width):mu=Pe!==ce&&isFinite(e)?e:zr,mu=Math.max(mu,t.minSize.width),mu=Math.max(mu-Jf,0);for(var NL=zr===0?1:Math.max(mu/zr,1),ry=0;ry<o;ry++)t.ib[ry]!==void 0&&(G=t.getColumnDefinition(ry),isFinite(G.width)||Up(G)===hf||(G.actual=G.la*NL),G.position=r.width,G.la!==0&&(r.width+=G.la,r.width+=G.Ic()));o=t.rowCount;for(var oy=0;oy<o;oy++)t.ob[oy]!==void 0&&(G=t.getRowDefinition(oy),isFinite(G.height)?(Zf+=G.height,Zf+=G.Ic()):Up(G)===hf?(Zf+=G.la,Zf+=G.Ic()):G.la!==0&&(mo+=G.la,G.la!==0&&(mo+=G.Ic())));isFinite(iy.height)?vu=Math.min(iy.height,NP.height):vu=Pe!==ce&&isFinite(i)?i:mo,vu=Math.max(vu,t.minSize.height),vu=Math.max(vu-Zf,0);for(var TL=mo===0?1:Math.max(vu/mo,1),sy=0;sy<o;sy++)t.ob[sy]!==void 0&&(G=t.getRowDefinition(sy),isFinite(G.height)||Up(G)===hf||(G.actual=G.la*TL),G.position=r.height,G.la!==0&&(r.height+=G.la,G.la!==0&&(r.height+=G.Ic())));o=h.length;for(var Lv=0;Lv<o;Lv++){var ar=h[Lv],Ev=0,Ov=0;ar.type===X.TableRow?(Ev=r.width,G=t.getRowDefinition(ar.row),Ov=G.actual):(G=t.getColumnDefinition(ar.column),Ev=G.actual,Ov=r.height),ar.measuredBounds.h(0,0,Ev,Ov),pn(ar,!1),S[ar.row]||(S[ar.row]=[]),S[ar.row][ar.column]||(S[ar.row][ar.column]=[]),S[ar.row][ar.column].push(ar)}Ut(h),t.cp=S},Ap.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding,o=r.left;r=r.top;for(var l=t.cp,h,a,c=l.length,p=0,d=0;d<c;d++)l[d]&&(p=Math.max(p,l[d].length));for(d=Math.min(t.topIndex,c-1);d!==c&&(t.ob[d]===void 0||t.ob[d].la===0);)d++;for(d=Math.min(d,c-1),d=-t.ob[d].position,h=Math.min(t.leftIndex,p-1);h!==p&&(t.ib[h]===void 0||t.ib[h].la===0);)h++;h=Math.min(h,p-1);for(var m=-t.ib[h].position,x=yt.alloc(),v=0;v<c;v++)if(l[v]){p=l[v].length;var S=t.getRowDefinition(v);a=S.position+d+r,S.la!==0&&(a+=S.Cu());for(var P=0;P<p;P++)if(l[v][P]){var k=t.getColumnDefinition(P);h=k.position+m+o,k.la!==0&&(h+=k.Cu());for(var L=l[v][P],T=L.length,O=0;O<T;O++){var E=L[O],V=E.measuredBounds,$=E instanceof X?E:null;if($===null||$.type!==X.TableRow&&$.type!==X.TableColumn){x.h(0,0);for(var b=1;b<E.rowSpan&&!(v+b>=t.rowCount);b++)$=t.getRowDefinition(v+b),x.height+=$.total;for(b=1;b<E.columnSpan&&!(P+b>=t.columnCount);b++)$=t.getColumnDefinition(P+b),x.width+=$.total;var nt=k.la+x.width,et=S.la+x.height;b=h,$=a;var G=nt,vt=et,ft=h,It=a,Kt=nt,Se=et;h+nt>i.width&&(Kt=Math.max(i.width-h,0)),a+et>i.height&&(Se=Math.max(i.height-a,0));var Qt=E.alignment;if(Qt.Mb()){Qt=t.defaultAlignment,Qt.hb()||(Qt=_t);var $t=Qt.x,Mr=Qt.y,Ei=Qt.offsetX;Qt=Qt.offsetY;var Oi=k.alignment,Le=S.alignment;Oi.hb()&&($t=Oi.x,Ei=Oi.offsetX),Le.hb()&&(Mr=Le.y,Qt=Le.offsetY)}else $t=Qt.x,Mr=Qt.y,Ei=Qt.offsetX,Qt=Qt.offsetY;(isNaN($t)||isNaN(Mr))&&(Mr=$t=.5,Qt=Ei=0),Oi=V.width,Le=V.height;var kr=E.margin,su=kr.left+kr.right,lu=kr.top+kr.bottom,Qo=ef(E,S,k,!1);!isNaN(E.desiredSize.width)||Qo!==he&&Qo!==Xe||(Oi=Math.max(nt-su,0)),!isNaN(E.desiredSize.height)||Qo!==he&&Qo!==be||(Le=Math.max(et-lu,0)),nt=E.maxSize,et=E.minSize,Oi=Math.min(nt.width,Oi),Le=Math.min(nt.height,Le),Oi=Math.max(et.width,Oi),Le=Math.max(et.height,Le),nt=Le+lu,b+=G*$t-(Oi+su)*$t+Ei+kr.left,$+=vt*Mr-nt*Mr+Qt+kr.top,E.visible&&(Qn(ft,It,Kt,Se,b,$,V.width,V.height)?E.arrange(b,$,Oi,Le):E.arrange(b,$,Oi,Le,new _(ft,It,Kt,Se)))}else E.bl(),E.actualBounds.ea(),G=E.actualBounds,b=_.allocAt(G.x,G.y,G.width,G.height),G.x=$.type===X.TableRow?o:h,G.y=$.type===X.TableColumn?r:a,G.width=V.width,G.height=V.height,E.actualBounds.freeze(),Js(E,!1),Dg(b,G)||(V=E.part,V!==null&&(V.Gh(),E.Eo(V))),_.free(b)}}}for(yt.free(x),t=0;t<n;t++)i=e[t],o=i instanceof X?i:null,o===null||o.type!==X.TableRow&&o.type!==X.TableColumn||(o=i.actualBounds,i.naturalBounds.ea(),i.naturalBounds.h(0,0,o.width,o.height),i.naturalBounds.freeze())};function jp(){this.na="Base"}z(jp,ge),jp.prototype.measure=function(){},jp.prototype.arrange=function(){};function Dp(){this.na="Base"}z(Dp,ge),Dp.prototype.measure=function(){},Dp.prototype.arrange=function(){};function Ip(){this.na="Base"}z(Ip,ge),Ip.prototype.measure=function(t,e,i,n,r,o,l){1<n.length&&D("Viewbox Panel cannot contain more than one GraphObject."),n=n[0],n.sa=1,n.ak(),n.measure(1/0,1/0,o,l);var h=n.measuredBounds,a=n.margin,c=a.right+a.left;if(a=a.top+a.bottom,isFinite(e)||isFinite(i)){var p=n.scale,d=h.width;h=h.height;var m=Math.max(e-c,0),x=Math.max(i-a,0),v=1;t.viewboxStretch===xr?d!==0&&h!==0&&(v=Math.min(m/d,x/h)):d!==0&&h!==0&&(v=Math.max(m/d,x/h)),v===0&&(v=1e-4),n.sa*=v,p!==n.scale&&(pn(n,!0),n.measure(1/0,1/0,o,l))}h=n.measuredBounds,r.width=isFinite(e)?e:Math.max(h.width+c,0),r.height=isFinite(i)?i:Math.max(h.height+a,0)},Ip.prototype.arrange=function(t,e,i){e=e[0];var n=e.measuredBounds,r=e.margin,o=Math.max(n.width+(r.right+r.left),0);r=Math.max(n.height+(r.top+r.bottom),0);var l=e.alignment;l.Mb()&&(l=t.defaultAlignment),l.hb()||(l=_t),e.arrange(i.width*l.x-o*l.x+l.offsetX,i.height*l.y-r*l.y+l.offsetY,n.width,n.height)};function sf(){this.na="Base"}z(sf,ge),sf.prototype.measure=function(){},sf.prototype.arrange=function(){},sf.prototype.oc=function(t,e,i){i=t.Af()*i.scale,0>=i&&(i=1);var n=t.gridCellSize,r=n.width;n=n.height;var o=t.naturalBounds,l=t.actualBounds,h=o.width,a=o.height,c=Math.ceil(h/r),p=Math.ceil(a/n),d=t.gridOrigin,m=d.x;d=d.y,e.save(),e.beginPath(),e.rect(0,0,h,a),e.clip();for(var x=[],v=t.T.m,S=v.length,P=0;P<S;P++){var k=v[P],L=[];if(x.push(L),k.visible){var T=k.interval;if(!(0>T)){k=i0(k.figure);for(var O=0;O<S;O++)if(O!==P){var E=v[O];E.visible&&i0(E.figure)===k&&(E=E.interval,E>T&&L.push(E))}}}}for(v=t.T.m,S=v.length,P=0;P<S;P++){var V=v[P];if(V.visible&&(L=V.interval||1,k=Math.abs(L),!(2>r*k*i))){if(T=V.segmentIndex,(!isFinite(T)||isNaN(T))&&(T=0),0>T&&(T=k-Math.min(-T,k)),T=Math.round(T%k),k=V.opacity,O=1,k!==1){if(k===0)continue;O=e.globalAlpha,e.globalAlpha=O*k}E=x[P];var $=!1,b=V.strokeDashArray;if(b!==null&&($=!0,e.ns(b,V.strokeDashOffset)),V.figure==="LineV"&&V.stroke!==null&&0<V.strokeWidth){for(e.lineWidth=V.strokeWidth,Qi(t,e,V.stroke,!1,!1,o,l),e.beginPath(),b=V=Math.floor((m-r)/r);b<=V+c;b++){var nt=b*r+m;0<=nt&&nt<=h&&Fp(b,L,T,E)&&(e.moveTo(nt,0),e.lineTo(nt,a))}e.stroke()}else if(V.figure==="LineH"&&V.stroke!==null&&0<V.strokeWidth){for(e.lineWidth=V.strokeWidth,Qi(t,e,V.stroke,!1,!1,o,l),e.beginPath(),b=V=Math.floor((d-n)/n);b<=V+p;b++)nt=b*n+d,0<=nt&&nt<=a&&Fp(b,L,T,E)&&(e.moveTo(0,nt),e.lineTo(h,nt));e.stroke()}else if(V.figure==="BarV"&&V.fill!==null)for(Qi(t,e,V.fill,!0,!1,o,l),V=V.width,isNaN(V)&&(V=r),nt=b=Math.floor((m-r)/r);nt<=b+c;nt++){var et=nt*r+m;0<=et+V&&et<=h&&Fp(nt,L,T,E)&&e.fillRect(et,0,V,a)}else if(V.figure==="BarH"&&V.fill!==null)for(Qi(t,e,V.fill,!0,!1,o,l),V=V.height,isNaN(V)&&(V=n),nt=b=Math.floor((d-n)/n);nt<=b+p;nt++)et=nt*n+d,0<=et+V&&et<=a&&Fp(nt,L,T,E)&&e.fillRect(0,et,h,V);$&&e.ls(),k!==1&&(e.globalAlpha=O)}}e.restore(),e.Hc(!1)};function Fp(t,e,i,n){if(0>e)return t%e===i;if(t%e!==i)return!1;e=n.length;for(var r=0;r<e;r++)if(t%n[r]===i)return!1;return!0}function Rp(){this.na="Base"}z(Rp,ge),Rp.prototype.measure=function(t,e,i,n,r){if(i=n.length,t instanceof Tt||t instanceof H){var o=null,l=null;if(t instanceof H&&(o=t),t instanceof Tt&&(l=t,o=l.adornedPart,t.j===null&&(t.j=[])),o instanceof H){var h=o;if(i===0)ro(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var a=t instanceof Tt?null:o.path,c=o.routeBounds;e=t.ig,e.h(0,0,c.width,c.height);var p=h.points,d=o.pointsCount;l!==null?l.fk(!1):o!==null&&o.fk(!1);var m=c.width,x=c.height;t.location.h(c.x,c.y);var v=t.j;v.length=0,a!==null&&(fM(t,m,x,a),l=a.measuredBounds,e.Qc(l),v.push(l)),l=Mt.alloc();for(var S=N.alloc(),P=N.alloc(),k=0;k<i;k++){var L=n[k];if(L!==a)if(L.isPanelMain&&L instanceof gt){fM(t,m,x,L);var T=L.measuredBounds;e.Qc(T),v.push(T)}else if(2>d)L.measure(1/0,1/0,0,0),T=L.measuredBounds,e.Qc(T),v.push(T);else{var O=L.segmentIndex,E=L.segmentFraction,V=L.alignmentFocus;V.zc()&&(V=_t);var $=L.segmentOrientation,b=L.segmentOffset;if(isNaN(O)){var nt=h.ma;T=Et(),nt.Uu(E,T);var et=N.allocAt(T[0],T[1]);if(et.add(h.i(0)),nt.type===tt.j?et.offset(-nt.startX,-nt.startY):(nt=nt.figures.first(),nt!==null&&et.offset(-nt.startX,-nt.startY)),nt=T[2],$!==Ti){var G=h.computeAngle(L,$,nt);L.zb=G}G=et.x-c.x;var vt=et.y-c.y;N.free(et),Ut(T)}else if(O<-d||O>=d)T=N.alloc(),h.ug(),h.computeMidPoint(T),nt=h.midAngle,$!==Ti&&(G=h.computeAngle(L,$,nt),L.zb=G),G=T.x-c.x,vt=T.y-c.y,N.free(T);else{if(G=0,0<=O?(vt=p.J(O),T=O<d-1?p.J(O+1):vt):(G=d+O,vt=p.J(G),T=0<G?p.J(G-1):vt),vt.Ua(T)){0<=O?(nt=0<O?p.J(O-1):vt,G=O<d-2?p.J(O+2):T):(nt=G<d-1?p.J(G+1):vt,G=1<G?p.J(G-2):T),et=nt.xf(vt);var ft=T.xf(G);nt=et>ft+10?0<=O?nt.Pa(vt):vt.Pa(nt):ft>et+10?0<=O?T.Pa(G):G.Pa(T):0<=O?nt.Pa(G):G.Pa(nt)}else nt=0<=O?vt.Pa(T):T.Pa(vt);$!==Ti&&(G=h.computeAngle(L,$,nt),L.zb=G),G=vt.x+(T.x-vt.x)*E-c.x,vt=vt.y+(T.y-vt.y)*E-c.y}L.measure(1/0,1/0,0,0),T=L.measuredBounds,et=L.naturalBounds;var It=0;L instanceof gt&&(It=L.strokeWidth),ft=et.width+It;var Kt=et.height+It;l.reset(),l.translate(-T.x,-T.y),l.scale(L.scale,L.scale),l.rotate($===Ti?L.angle:nt,ft/2,Kt/2),$!==xf&&$!==Sf||l.rotate(90,ft/2,Kt/2),$!==wf&&$!==Mf||l.rotate(-90,ft/2,Kt/2),$===ud&&(45<nt&&135>nt||225<nt&&315>nt)&&l.rotate(-nt,ft/2,Kt/2),et=new _(0,0,ft,Kt),S.Ti(et,V),l.Aa(S),V=-S.x+It/2*L.scale,L=-S.y+It/2*L.scale,P.assign(b),It=isNaN(b.x);var Se=isNaN(b.y);if(It||Se){ft=ft/2+3,Kt=Kt/2+3;var Qt=45<=nt&&135>=nt,$t=225<=nt&&315>=nt;$===Ti&&(Qt||$t)?(P.x=Se?ft:b.y,P.y=It?Kt:b.x,Qt?0<=O||isNaN(O)&&.5>E||!It||(P.y=-Kt):$t&&((0<=O||isNaN(O)&&.5>E)&&It&&(P.y=-Kt),Se&&(P.x=-ft))):(It&&(P.x=0<=O||isNaN(O)&&.5>E?ft:-ft),Se&&(P.y=-Kt),P.rotate(nt))}else P.rotate(nt);G+=P.x,vt+=P.y,et.set(T),et.h(G+V,vt+L,T.width,T.height),v.push(et),e.Qc(et)}}if(o!==null)for(n=o.labelNodes;n.next();)n.value.measure(1/0,1/0);t.ig=e,t=t.location,t.h(t.x+e.x,t.y+e.y),ro(r,e.width||0,e.height||0),Mt.free(l),N.free(S),N.free(P)}}}},Rp.prototype.arrange=function(t,e){var i=e.length;if(t instanceof Tt||t instanceof H){var n=t,r=null;t instanceof Tt&&(r=t,n=r.adornedPart);var o=t instanceof Tt?null:n.path,l=t.j;if(l.length!==0){var h=0;if(o!==null&&h<l.length){var a=l[h];h++,o.arrange(a.x-t.ig.x,a.y-t.ig.y,a.width,a.height)}for(a=0;a<i;a++){var c=e[a];if(c!==o&&h<l.length){var p=l[h];h++,c.arrange(p.x-t.ig.x,p.y-t.ig.y,p.width,p.height)}}}if(e=n.points,i=e.count,2<=i&&t instanceof H)for(o=t.labelNodes;o.next();){var d=t;l=o.value,h=l.segmentIndex,a=l.segmentFraction;var m=l.alignmentFocus;if(c=l.segmentOrientation,p=l.segmentOffset,isNaN(h)){var x=d.ma,v=Et();x.Uu(a,v);var S=N.allocAt(v[0],v[1]);S.add(d.i(0)),x.type===tt.j||(x=x.figures.first()),S.offset(-x.startX,-x.startY),x=v[2],c!==Ti&&(d=d.computeAngle(l,c,x),l.angle=d),d=S.x;var P=S.y;N.free(S),Ut(v)}else if(h<-i||h>=i)v=N.alloc(),x=d,P=v,x.ug(),x.computeMidPoint(P),x=d.midAngle,c!==Ti&&(d=d.computeAngle(l,c,x),l.angle=d),d=v.x,P=v.y,N.free(v);else{if(S=0,0<=h?(v=e.m[h],P=h<i-1?e.m[h+1]:v):(S=i+h,v=e.m[S],P=0<S?e.m[S-1]:v),v.Ua(P)){0<=h?(x=0<h?e.m[h-1]:v,S=h<i-2?e.m[h+2]:P):(x=S<i-1?e.m[S+1]:v,S=1<S?e.m[S-2]:P);var k=x.xf(v),L=P.xf(S);x=k>L+10?0<=h?x.Pa(v):v.Pa(x):L>k+10?0<=h?P.Pa(S):S.Pa(P):0<=h?x.Pa(S):S.Pa(x)}else x=0<=h?v.Pa(P):P.Pa(v);c!==Ti&&(d=d.computeAngle(l,c,x),l.angle=d),d=v.x+(P.x-v.x)*a,P=v.y+(P.y-v.y)*a}if(m.Ds())l.location=new N(d,P);else{m.zc()&&(m=_t),v=Mt.alloc(),v.reset(),v.scale(l.scale,l.scale),v.rotate(l.angle,0,0);var T=l.naturalBounds;S=_.allocAt(0,0,T.width,T.height),k=N.alloc(),k.Ti(S,m),v.Aa(k),m=-k.x,L=-k.y;var O=T.width,E=T.height;T=N.alloc(),T.assign(p);var V=isNaN(p.x),$=isNaN(p.y);if(V||$){O=O/2+3,E=E/2+3;var b=45<=x&&135>=x,nt=225<=x&&315>=x;c===Ti&&(b||nt)?(T.x=$?O:p.y,T.y=V?E:p.x,b?0<=h||isNaN(h)&&.5>a||!V||(T.y=-E):nt&&((0<=h||isNaN(h)&&.5>a)&&V&&(T.y=-E),$&&(T.x=-O))):(V&&(T.x=0<=h||isNaN(h)&&.5>a?O:-O),$&&(T.y=-E),T.rotate(x))}else T.rotate(x);d+=T.x,P+=T.y,v.wq(S),m+=S.x,L+=S.y,h=N.allocAt(d+m,P+L),l.move(h),N.free(h),N.free(T),N.free(k),_.free(S),Mt.free(v)}}r!==null?r.fk(!1):n.fk(!1)}};function fM(t,e,i,n){if(ho(n)!==!1){var r=n.strokeWidth;r===0&&t instanceof Tt&&t.type===X.Link&&t.adornedObject instanceof gt&&(r=t.adornedObject.strokeWidth),r*=n.sa,t instanceof H&&t.ma!==null?(t=t.ma.bounds,n.xe(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):t instanceof Tt&&t.adornedPart.ma!==null?(t=t.adornedPart.ma.bounds,n.xe(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):n.xe(-(r/2),-(r/2),e+r,i+r),pn(n,!1)}}function lf(){this.na="Base"}z(lf,ge),lf.prototype.measure=function(t,e,i,n,r,o,l){var h=t.pb();t.Pg=[];var a=h.margin,c=a.right+a.left,p=a.top+a.bottom;h.measure(e,i,o,l);var d=h.measuredBounds,m=new _(-a.left,-a.top,Math.max(d.width+c,0),Math.max(d.height+p,0));t.Pg.push(m),r.assign(m);for(var x=h.geometry,v=h.strokeWidth,S=x.flattenedSegments,P=x.flattenedLengths,k=x.flattenedTotalLength,L=S.length,T=0,O=0,E=Et(),V=0;V<L;V++){var $=S[V],b=[];O=T=0;for(var nt=$.length,et=0;et<nt;et+=2){var G=$[et],vt=$[et+1];if(et!==0){var ft=180*Math.atan2(vt-O,G-T)/Math.PI;0>ft&&(ft+=360),b.push(ft)}T=G,O=vt}E.push(b)}if(t.Rf===null){for(var It=[],Kt=t.T.m,Se=Kt.length,Qt=0;Qt<Se;Qt++){var $t=Kt[Qt],Mr=[];if(It.push(Mr),$t.visible){var Ei=$t.interval;if(!(0>Ei)){for(var Oi=0;Oi<Se;Oi++)if(Oi!==Qt){var Le=Kt[Oi];if(Le.visible&&$t.constructor===Le.constructor){var kr=Le.interval;kr>Ei&&Mr.push(kr)}}}}}t.Rf=It}var su=t.Rf,lu=t.T.m,Qo=lu.length,si=0,zh=0,uu=k;t.ij=[];for(var Gh,Yh=0;Yh<Qo;Yh++){var Pe=lu[Yh];if(Gh=[],Pe.visible&&Pe!==h){var Wf=Math.abs(Pe.interval),Qd=t.graduatedTickUnit;if(!(2>Qd*Wf*k/t.graduatedRange)){var hu=P[0][0],lr=0,Hi=0;zh=k*Pe.graduatedStart-1e-4,uu=k*Pe.graduatedEnd+1e-4;var rl=Qd*Wf,nn=t.graduatedTickBase;if(nn<t.graduatedMin){var au=(t.graduatedMin-nn)/rl;au=au%1===0?au:Math.floor(au+1),nn+=au*rl}else nn>t.graduatedMin+rl&&(nn-=Math.floor((nn-t.graduatedMin)/rl)*rl);for(var Xh=su[Yh],Mv=nn,zr=1;nn<t.graduatedMax+5e-8;zr++){t:{for(var mo=Xh.length,fu=0;fu<mo;fu++)if(j.aa((nn-t.graduatedTickBase)%(Xh[fu]*t.graduatedTickUnit),0)){var cu=!1;break t}cu=!0}if(cu&&(Pe.graduatedSkip===null||!Pe.graduatedSkip(nn))&&(si=(nn-t.graduatedMin)*k/t.graduatedRange,si>k&&(si=k),zh<=si&&si<=uu)){for(var Kn=E[lr][Hi],vo=P[lr][Hi];lr<P.length;){for(;si>hu&&Hi<P[lr].length-1;)Hi++,Kn=E[lr][Hi],vo=P[lr][Hi],hu+=vo;if(si<=hu)break;lr++,Hi=0,Kn=E[lr][Hi],vo=P[lr][Hi],hu+=vo}var Bi=S[lr],Wh=Bi[2*Hi],Hh=Bi[2*Hi+1],$n=(si-(hu-vo))/vo,Hf=new N(Wh+(Bi[2*Hi+2]-Wh)*$n+v/2-x.bounds.x,Hh+(Bi[2*Hi+3]-Hh)*$n+v/2-x.bounds.y);Hf.scale(h.scale,h.scale);var xo=Kn,Es=E[lr];if(1e-4>$n?0<Hi?xo=Es[Hi-1]:j.aa(Bi[0],Bi[Bi.length-2])&&j.aa(Bi[1],Bi[Bi.length-1])&&(xo=Es[Es.length-1]):.9999<$n&&(Hi+1<Es.length?xo=Es[Hi+1]:j.aa(Bi[0],Bi[Bi.length-2])&&j.aa(Bi[1],Bi[Bi.length-1])&&(xo=Es[0])),Kn!==xo&&(180<Math.abs(Kn-xo)&&(Kn<xo?Kn+=360:xo+=360),Kn=(Kn+xo)/2%360),Pe instanceof Yt){var Pr="";Pe.graduatedFunction!==null?(Pr=Pe.graduatedFunction(nn),Pr=Pr!=null?Pr.toString():""):Pr=(+nn.toFixed(2)).toString(),Pr!==""&&Gh.push({jm:Hf,angle:Kn,text:Pr})}else Gh.push({jm:Hf,angle:Kn})}nn=Mv+zr*rl}}}t.ij.push(Gh)}Ut(E);var qd=t.ij;if(qd!==null)for(var kv=n.length,ol=0;ol<kv;ol++){var li=n[ol],Gr=qd[ol];if(li.visible&&li!==h&&Gr.length!==0){if(li instanceof gt){var Re=t,Kf=r,Ai=li.alignmentFocus;Ai.zc()&&(Ai=oo);var rn=li.angle;li.zb=0,li.measure(1/0,1/0,0,0),li.zb=rn;var Ki=li.measuredBounds,Yr=Ki.width,Xr=Ki.height,pu=_.allocAt(0,0,Yr,Xr),mn=N.alloc();mn.Ti(pu,Ai),_.free(pu);for(var Kh=-mn.x,du=-mn.y,Wr=new _,$h=Gr.length,Os=0;Os<$h;Os++)for(var qo=Gr[Os],Hr=qo.jm.x,Kr=qo.jm.y,bo=qo.angle,Jh=0;4>Jh;Jh++){switch(Jh){case 0:mn.h(Kh,du);break;case 1:mn.h(Kh+Yr,du);break;case 2:mn.h(Kh,du+Xr);break;case 3:mn.h(Kh+Yr,du+Xr)}mn.rotate(bo+li.angle),mn.offset(Hr,Kr),Os===0&&Jh===0?Wr.h(mn.x,mn.y,0,0):Wr.Oe(mn),mn.offset(-Hr,-Kr),mn.rotate(-bo-li.angle)}N.free(mn),Re.Pg!==null&&Re.Pg.push(Wr),Ve(Kf,Wr.x,Wr.y,Wr.width,Wr.height)}else if(li instanceof Yt){var wo=t,Pv=r;wo.qh===null&&(wo.qh=new Yt);var Vi=wo.qh;NM(Vi,li);var oe=li.alignmentFocus;oe.zc()&&(oe=oo);for(var _i=li.segmentOrientation,$r=li.segmentOffset,ts=new _,Zh=0,es=0,An=0,As=0,Qh=0,Cv=Gr.length,yu=0;yu<Cv;yu++){var ur=Gr[yu];Zh=ur.jm.x,es=ur.jm.y,An=ur.angle,Qh=As=li.angle,_i!==Ti&&(Qh=_i===vf||_i===ld?An+li.angle:An,As=H.computeAngle(_i,Qh)),Vi.zb=As,Vi.text=ur.text||"",Vi.measure(1/0,1/0,0,0);var Jr=Vi.measuredBounds,So=Vi.naturalBounds,Mo=So.width,Zr=So.height,ko=Mt.alloc();ko.reset(),ko.translate(-Jr.x,-Jr.y),ko.scale(Vi.scale,Vi.scale),ko.rotate(Qh,Mo/2,Zr/2),_i!==xf&&_i!==Sf||ko.rotate(90,Mo/2,Zr/2),_i!==wf&&_i!==Mf||ko.rotate(-90,Mo/2,Zr/2),_i===ud&&(45<An&&135>An||225<An&&315>An)&&ko.rotate(-An,Mo/2,Zr/2);var bd=_.allocAt(0,0,Mo,Zr),is=N.alloc();is.Ti(bd,oe),ko.Aa(is);var $f=-is.x,Nv=-is.y,hr=N.alloc();hr.assign($r),isNaN(hr.x)&&(hr.x=Mo/2+3),isNaN(hr.y)&&(hr.y=-(Zr/2+3)),hr.rotate(An),Zh+=hr.x+$f,es+=hr.y+Nv;var sl=new _(Zh,es,Jr.width,Jr.height),qh=new _(Jr.x,Jr.y,Jr.width,Jr.height),gu=new _(So.x,So.y,So.width,So.height);ur.pA=As,ur.lineCount=Vi.lineCount,ur.lines=[Vi.sb,Vi.ei,Vi.re,Vi.Ce,Vi.Cc,Vi.Sb,Vi.pe],ur.actualBounds=sl,ur.measuredBounds=qh,ur.naturalBounds=gu,yu===0?ts.assign(sl):ts.Qc(sl),N.free(hr),N.free(is),_.free(bd),Mt.free(ko)}wo.Pg!==null&&wo.Pg.push(ts),Ve(Pv,ts.x,ts.y,ts.width,ts.height)}pn(li,!1)}}},lf.prototype.arrange=function(t,e,i){if(t.Pg!==null){var n=t.pb(),r=t.ij;if(r!==null){var o=t.Pg,l=0,h=o[l];l++,n!==null&&n.arrange(h.x-i.x,h.y-i.y,h.width,h.height);for(var a=e.length,c=0;c<a;c++){var p=e[c];h=r[c],p.visible&&p!==n&&h.length!==0&&(h=o[l],l++,p.arrange(h.x-i.x,h.y-i.y,h.width,h.height))}t.Pg=null}}},lf.prototype.oc=function(t,e,i){var n=i.nj;i.nj=!0;var r=t.naturalBounds,o=r.width;r=r.height,e.save(),e.beginPath(),e.rect(-1,-1,o+1,r+1),e.clip(),o=t.pb(),o.oc(e,i),r=t.Af()*i.scale,0>=r&&(r=1);for(var l=o.actualBounds,h=t.T.m,a=t.ij,c=h.length,p=0;p<c;p++){var d=h[p],m=a[p],x=m.length;if(d.visible&&d!==o&&m.length!==0){if(d instanceof gt){if(!(2>t.graduatedTickUnit*d.interval*o.geometry.flattenedTotalLength/t.graduatedRange*r)){var v=d.measuredBounds,S=d.strokeWidth*d.scale,P=d.alignmentFocus;P.zc()&&(P=oo);for(var k=0;k<x;k++){var L=m[k].jm,T=m[k].angle,O=P,E=d.vb;E.reset(),E.translate(L.x+l.x,L.y+l.y),E.rotate(T+d.angle,0,0),E.translate(-v.width*O.x+O.offsetX+S/2,-v.height*O.y+O.offsetY+S/2),E.scale(d.scale,d.scale),ah(d,!1),d.Nh.set(d.vb),d.Rk=d.scale,ys(d,!1),d.oc(e,i),d.vb.reset()}}}else if(d instanceof Yt)for(t.qh===null&&(t.qh=new Yt),v=t.qh,NM(v,d),d=0;d<x;d++)S=m[d],S.actualBounds&&S.measuredBounds&&S.naturalBounds&&(v.Xb=S.text||"",v.zb=S.pA||0,v.Xc=S.lineCount||0,P=S.lines,P!==void 0&&(v.sb=P[0],v.ei=P[1],v.re=P[2],v.Ce=P[3],v.Cc=P[4],v.Sb=P[5],v.pe=P[6]),S.naturalBounds&&(v.uc=S.naturalBounds),S.actualBounds&&(P=S.actualBounds,v.arrange(P.x,P.y,P.width,P.height)),P=S.actualBounds,v.arrange(P.x,P.y,P.width,P.height),k=S.measuredBounds,S=S.naturalBounds,L=v.vb,L.reset(),L.translate(P.x+l.x,P.y+l.y),L.translate(-k.x,-k.y),v.mp(L,S.x,S.y,S.width,S.height),ah(v,!1),v.Nh.set(v.vb),v.Rk=v.scale,ys(v,!1),v.oc(e,i))}}i.nj=n,e.restore(),e.Hc(!0)};function X(t,e){if(ht.call(this),this.ha=null,t===void 0)this.ha=X.Position;else if(typeof t=="string"){var i=zn.H(t);i!==null&&(this.ha=i)}else t instanceof ge?this.ha=t:t&&(this.ha=X.Position,e=t);this.ha===null&&D("Panel type not specified or PanelLayout not loaded: "+t),this.T=new it,this.nb=_u,this.ha===X.Grid&&(this.G|=1048576),this.ln=Pi,this.Of=wr,this.ha===X.Table&&cM(this),this.Gp=xr,this.Jn=vw,this.Kn=Oo,this.Gn=0,this.Fn=100,this.In=10,this.Hn=0,this.Qh=this.jb=this.Rf=this.Pg=this.ij=null,this.ao=NaN,this.ve=this.ci=null,this.fl="category",this.$d=null,this.ig=new _(NaN,NaN,NaN,NaN),this.qh=this.cp=this.ph=null,this.Re="",e&&Object.assign(this,e)}z(X,ht);function cM(t){t.dj=_u,t.Gg=1,t.Wh=null,t.Vh=null,t.Fg=1,t.Eg=null,t.Uh=null,t.ob=[],t.ib=[],t.Dj=af,t.cj=af,t.vi=0,t.gi=0}X.prototype.cloneProtected=function(t){if(ht.prototype.cloneProtected.call(this,t),t.ha=this.ha,t.nb=this.nb.I(),t.ln=this.ln.I(),t.Of=this.Of,t.ha===X.Table){t.dj=this.dj.I(),t.Gg=this.Gg,t.Wh=this.Wh,t.Vh=this.Vh,t.Fg=this.Fg,t.Eg=this.Eg,t.Uh=this.Uh;var e=[];if(0<this.ob.length){for(var i=this.ob,n=i.length,r=0;r<n;r++)if(i[r]!==void 0){var o=i[r].copy();o.Si(t),e[r]=o}}if(t.ob=e,e=[],0<this.ib.length)for(i=this.ib,n=i.length,r=0;r<n;r++)i[r]!==void 0&&(o=i[r].copy(),o.Si(t),e[r]=o);t.ib=e,t.Dj=this.Dj,t.cj=this.cj,t.vi=this.vi,t.gi=this.gi}t.Gp=this.Gp,t.Jn=this.Jn.I(),t.Kn=this.Kn.I(),t.Gn=this.Gn,t.Fn=this.Fn,t.In=this.In,t.Hn=this.Hn,t.ij=this.ij,t.Rf=this.Rf,t.jb=this.jb,t.Qh=this.Qh,t.ao=this.ao,t.ci=this.ci,t.ve=this.ve,t.fl=this.fl,t.ig.assign(this.ig),t.Re=this.Re,this.cp!==null&&(t.cp=this.cp)},X.prototype.wf=function(t){ht.prototype.wf.call(this,t),t.T=this.T;for(var e=t.T.m,i=e.length,n=0;n<i;n++)e[n].bg=t;t.ph=null},X.prototype.copy=function(){var t=ht.prototype.copy.call(this);if(t!==null){for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n].copy();r.Si(t),r.Bj=null;var o=t.T,l=o.count;if(o.wb(l,r),o=t.part,o!==null){o.li=null,r.portId!==null&&o instanceof q&&(o.Je=!0);var h=t.diagram;h!==null&&h.undoManager.isUndoingRedoing||o.Wa(ve,"elements",t,null,r,null,l)}}return t}return null},s=X.prototype,s.toString=function(){return"Panel("+this.type.name+")#"+Ce(this)},s.Eo=function(t){ht.prototype.Eo.call(this,t);for(var e=this.T.m,i=e.length,n=0;n<i;n++)e[n].Eo(t)},s.Ei=function(t,e){if(this.ha===X.Grid)t.Ed(),this.ha.oc(this,t,e);else if(this.ha===X.Graduated)t.Ed(),this.ha.oc(this,t,e);else{this.ha===X.Table&&(t.Ed(),t.lineCap="butt",Bp(this,t,!0,this.ob,!0),Bp(this,t,!1,this.ib,!0),pM(this,t,!0,this.ob),pM(this,t,!1,this.ib),Bp(this,t,!0,this.ob,!1),Bp(this,t,!1,this.ib,!1));var i=this.isClipping&&this.ha===X.Spot;i&&t.save();for(var n=this.pb(),r=this.T.m,o=r.length,l=0;l<o;l++){var h=r[l];i&&h===n&&(t.clipInsteadOfFill=!0),h.oc(t,e),i&&h===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.Hc(!0))}};function pM(t,e,i,n){for(var r=n.length,o=t.actualBounds,l=t.naturalBounds,h=!0,a=0;a<r;a++){var c=n[a];if(c!==void 0){if(h)h=!1;else if(c.actual!==0){if(i){if(c.position>o.height)continue}else if(c.position>o.width)continue;var p=c.separatorStrokeWidth;isNaN(p)&&(p=i?t.Gg:t.Fg);var d=c.separatorStroke;if(d===null&&(d=i?t.Wh:t.Eg),p!==0&&d!==null){Qi(t,e,d,!1,!1,l,o),d=!1;var m=c.separatorDashArray;m===null&&(m=i?t.Vh:t.Uh),m!==null&&(d=!0,e.ns(m,0)),e.beginPath(),m=c.position+p,i?m>o.height&&(p-=m-o.height):m>o.width&&(p-=m-o.width),c=c.position+p/2,e.lineWidth=p,p=t.nb,i?(c+=p.top,m=o.width-p.right,e.moveTo(p.left,c),e.lineTo(m,c)):(c+=p.left,m=o.height-p.bottom,e.moveTo(c,p.top),e.lineTo(c,m)),e.stroke(),d&&e.ls()}}}}}function Bp(t,e,i,n,r){for(var o=n.length,l=t.actualBounds,h=t.naturalBounds,a=0;a<o;a++){var c=n[a];if(c!==void 0&&c.background!==null&&c.coversSeparators!==r&&c.actual!==0){var p=i?l.height:l.width;if(!(c.position>p)){var d=c.Ic(),m=c.separatorStrokeWidth;isNaN(m)&&(m=i?t.Gg:t.Fg);var x=c.separatorStroke;x===null&&(x=i?t.Wh:t.Eg),x===null&&(m=0),d-=m,m=c.position+m,d+=c.actual,m+d>p&&(d=p-m),0>=d||(p=t.nb,Qi(t,e,c.background,!0,!1,h,l),i?e.fillRect(p.left,m+p.top,l.width-(p.left+p.right),d):e.fillRect(m+p.left,p.top,d,l.height-(p.top+p.bottom)))}}}}function i0(t){return t==="LineV"||t==="BarV"}s.Zj=function(t,e,i,n,r){var o=this.je(),l=this.transform,h=1/(l.m11*l.m22-l.m12*l.m21),a=l.m22*h,c=-l.m12*h,p=-l.m21*h,d=l.m11*h,m=h*(l.m21*l.dy-l.m22*l.dx),x=h*(l.m12*l.dx-l.m11*l.dy);if(this.areaBackground!==null)return l=this.actualBounds,j.Cf(l.left,l.top,l.right,l.bottom,t,e,i,n,r);if(this.background!==null)return o=t*a+e*p+m,h=t*c+e*d+x,t=i*a+n*p+m,a=i*c+n*d+x,r.h(0,0),i=this.naturalBounds,o=j.Cf(0,0,i.width,i.height,o,h,t,a,r),r.transform(l),o;o||(a=1,p=c=0,d=1,x=m=0),h=t*a+e*p+m,t=t*c+e*d+x,a=i*a+n*p+m,i=i*c+n*d+x,r.h(a,i),n=(a-h)*(a-h)+(i-t)*(i-t),c=!1,d=this.T.m,x=d.length,p=N.alloc(),m=null,e=1/0;var v=null,S=this.isClipping&&this.ha===X.Spot;S&&(v=N.alloc(),m=this.pb(),(c=m.Zj(h,t,a,i,v))&&(e=(h-v.x)*(h-v.x)+(t-v.y)*(t-v.y)));for(var P=0;P<x;P++){var k=d[P];k.visible&&k!==m&&k.Zj(h,t,a,i,p)&&(c=!0,k=(h-p.x)*(h-p.x)+(t-p.y)*(t-p.y),k<n&&(n=k,r.set(p)))}return S&&(e>n&&r.set(v),N.free(v)),N.free(p),o&&r.transform(l),c},s.s=function(t){if(!ho(this)){ht.prototype.s.call(this,t),t=null,(this.ha===X.Auto||this.ha===X.Link)&&(t=this.pb());for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n];if((r===t||r.isPanelMain)&&r.s(!0),!r.desiredSize.u()){var o=ir(r,!1);(r instanceof mi||r instanceof X||r instanceof Yt||o!==ce)&&r.s(!0)}}}},s.ak=function(){if(!ho(this)){pn(this,!0),Js(this,!0);for(var t=this.T.m,e=t.length,i=0;i<e;i++)t[i].ak()}},s.bl=function(){if((this.G&2048)===0){ah(this,!0),ys(this,!0);for(var t=this.T.m,e=t.length,i=0;i<e;i++)t[i].bv()}},s.bv=function(){ys(this,!0);for(var t=this.T.m,e=t.length,i=0;i<e;i++)t[i].bv()},s.gm=function(t,e,i,n){var r=this.ig;r.h(0,0,0,0);var o=this.desiredSize,l=this.minSize;i===void 0&&(i=l.width,n=l.height),i=Math.max(i,l.width),n=Math.max(n,l.height);var h=this.maxSize;isNaN(o.width)||(t=Math.min(o.width,h.width)),isNaN(o.height)||(e=Math.min(o.height,h.height)),t=Math.max(i,t),e=Math.max(n,e);var a=this.nb;t=Math.max(t-a.left-a.right,0),e=Math.max(e-a.top-a.bottom,0);var c=this.T.m;c.length!==0&&this.ha.measure(this,t,e,c,r,i,n),t=r.width+a.left+a.right,a=r.height+a.top+a.bottom,isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(a=o.height),t=Math.min(h.width,t),a=Math.min(h.height,a),t=Math.max(l.width,t),a=Math.max(l.height,a),t=Math.max(i,t),a=Math.max(n,a),ro(r,t,a),ro(this.naturalBounds,t,a),this.xe(0,0,t,a)},s.pb=function(){if(this.ph===null){var t=this.T.m,e=t.length;if(e===0)return null;for(var i=0;i<e;i++){var n=t[i];if(n.isPanelMain===!0)return this.ph=n}this.ph=t[0]}return this.ph};function yo(t){return t.part!==null?t.part.locationObject:null}s.zh=function(t,e,i,n){var r=this.T.m;if(this.actualBounds.h(t,e,i,n),r.length!==0){if(!this.desiredSize.u()){t=ir(this,!0);var o=this.measuredBounds;e=o.width,o=o.height;var l=this.Ug,h=l.left+l.right;switch(l=l.top+l.bottom,e===i&&o===n&&(t=ce),t){case ce:(e>i||o>n)&&(this.s(),this.measure(e>i?i:e,o>n?n:o,0,0));break;case he:this.s(!0),this.measure(i+h,n+l,0,0);break;case Xe:this.s(!0),this.measure(i+h,o+l,0,0);break;case be:this.s(!0),this.measure(e+h,n+l,0,0)}}this.ha.arrange(this,r,this.ig)}},s.Bh=function(t){var e=this.naturalBounds,i=yo(this);if(Qn(0,0,e.width,e.height,t.x,t.y)){e=this.T.m;for(var n=e.length,r=N.allocAt(0,0);n--;){var o=e[n];if((o.visible||o===i)&&(ci(r.set(t),o.transform),o.$(r)))return N.free(r),!0}return N.free(r),!(this.Ub===null&&this.hd===null)}return!1},s.os=function(t){if(this.Ck===t)return this;for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n].os(t);if(r!==null)return r}return null},s.Cm=function(t,e){if(e(this,t),t instanceof X){t=t.T.m;for(var i=t.length,n=0;n<i;n++)this.Cm(t[n],e)}};function qs(t,e){dM(t,t,e)}function dM(t,e,i){i(e),e=e.T.m;for(var n=e.length,r=0;r<n;r++){var o=e[r];o instanceof X&&dM(t,o,i)}}function HT(t,e){yM(t,t,e)}function yM(t,e,i){if(i(e),e instanceof X){e=e.T.m;for(var n=e.length,r=0;r<n;r++)yM(t,e[r],i)}}s.Yl=function(t){return gM(this,this,t)};function gM(t,e,i){if(i(e))return e;if(e instanceof X){e=e.T.m;for(var n=e.length,r=0;r<n;r++){var o=gM(t,e[r],i);if(o!==null)return o}}return null}s.Ya=function(t){if(this.name===t)return this;var e=this.T.m,i=e.length;this.ci===null&&this.ve===null||(i=uf(this));for(var n=0;n<i;n++){var r=e[n];if(r instanceof X){var o=r.Ya(t);if(o!==null)return o}if(r.name===t)return r}return null};function mM(t){t=t.T.m;for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];r instanceof X?i=Math.max(i,mM(r)):r instanceof gt&&(i=Math.max(i,r.hg/2*r.Ij*r.Af()))}return i}s.je=function(){return!(this.type===X.TableRow||this.type===X.TableColumn)},s.Zb=function(t,e,i){if(this.pickable===!1||(e===void 0&&(e=null),i===void 0&&(i=null),Nn(this)))return null;var n=this.naturalBounds,r=1/this.Af(),o=this.je(),l=o?t:ci(N.allocAt(t.x,t.y),this.transform),h=this.diagram,a=10,c=5;if(h!==null&&(a=h.am("extraTouchArea"),c=a/2),Qn(-(c*r),-(c*r),n.width+a*r,n.height+a*r,l.x,l.y)){if(!this.isAtomic){r=this.T.m;var p=r.length;if(h=N.alloc(),c=(a=this.isClipping&&this.ha===X.Spot)?this.pb():null,a&&(c.je()?ci(h.set(t),c.transform):h.set(t),!c.$(h)))return N.free(h),o||N.free(l),null;for(var d=yo(this);p--;){var m=r[p];if((m.visible||m===d)&&(m.je()?ci(h.set(t),m.transform):h.set(t),!a||m!==c)){var x=null;if(m instanceof X?x=m.Zb(h,e,i):m.pickable===!0&&m.$(h)&&(x=m),x!==null&&(e!==null&&(x=e(x)),x!==null&&(i===null||i(x))))return N.free(h),o||N.free(l),x}}N.free(h)}return this.background===null&&this.areaBackground===null?(o||N.free(l),null):(t=Qn(0,0,n.width,n.height,l.x,l.y)?this:null,o||N.free(l),t)}return o||N.free(l),null},s.Hi=function(t,e,i,n){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var r=this.naturalBounds,o=this.je(),l=o?t:ci(N.allocAt(t.x,t.y),this.transform);if(r=Qn(0,0,r.width,r.height,l.x,l.y),this.type===X.TableRow||this.type===X.TableColumn||r){if(!this.isAtomic){for(var h=this.T.m,a=h.length,c=N.alloc(),p=yo(this);a--;){var d=h[a];if(d.visible||d===p){d.je()?ci(c.set(t),d.transform):c.set(t);var m=d;d=d instanceof X?d:null,(d!==null?d.Hi(c,e,i,n):m.$(c))&&m.pickable!==!1&&(e!==null&&(m=e(m)),m===null||i!==null&&!i(m)||n.add(m))}}N.free(c)}return o||N.free(l),r&&(this.background!==null||this.areaBackground!==null)}return o||N.free(l),!1},s.zf=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var l=o;if(o===void 0&&(l=Mt.alloc(),l.reset()),l.multiply(this.transform),this.Ah(t,l))return n0(this,e,i,r),o===void 0&&Mt.free(l),!0;if(this.Lc(t,l)){if(!this.isAtomic)for(var h=yo(this),a=this.T.m,c=a.length;c--;){var p=a[c];if(p.visible||p===h){var d=p.actualBounds,m=this.naturalBounds;d.x>m.width||d.y>m.height||0>d.x+d.width||0>d.y+d.height||(d=p,p=p instanceof X?p:null,m=Mt.alloc(),m.set(l),(p!==null?p.zf(t,e,i,n,r,m):nM(d,t,n,m))&&(e!==null&&(d=e(d)),d===null||i!==null&&!i(d)||r.add(d)),Mt.free(m))}}return o===void 0&&Mt.free(l),n}return o===void 0&&Mt.free(l),!1};function n0(t,e,i,n){for(var r=t.T.m,o=r.length;o--;){var l=r[o];if(l.visible){var h=l.actualBounds,a=t.naturalBounds;h.x>a.width||h.y>a.height||0>h.x+h.width||0>h.y+h.height||(l instanceof X&&n0(l,e,i,n),e!==null&&(l=e(l)),l===null||i!==null&&!i(l)||n.add(l))}}}s.pg=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var l=this.naturalBounds,h=this.je(),a=h?t:ci(N.allocAt(t.x,t.y),this.transform),c=h?e:ci(N.allocAt(e.x,e.y),this.transform),p=a.xf(c),d=0<a.x&&a.x<l.width&&0<a.y&&a.y<l.height||pi(a.x,a.y,0,0,0,l.height)<=p||pi(a.x,a.y,0,l.height,l.width,l.height)<=p||pi(a.x,a.y,l.width,l.height,l.width,0)<=p||pi(a.x,a.y,l.width,0,0,0)<=p;if(l=a.pd(0,0)<=p&&a.pd(0,l.height)<=p&&a.pd(l.width,0)<=p&&a.pd(l.width,l.height)<=p,h||(N.free(a),N.free(c)),d){if(!this.isAtomic){a=N.alloc(),c=N.alloc(),p=yo(this);for(var m=this.T.m,x=m.length;x--;){var v=m[x];if(v.visible||v===p){var S=v.actualBounds,P=this.naturalBounds;(!h||!(S.x>P.width||S.y>P.height||0>S.x+S.width||0>S.y+S.height))&&(v.je()?(S=v.transform,ci(a.set(t),S),ci(c.set(e),S)):(a.set(t),c.set(e)),S=v,v=v instanceof X?v:null,(v!==null?v.pg(a,c,i,n,r,o):S.Ox(a,c,r))&&(i!==null&&(S=i(S)),S===null||n!==null&&!n(S)||o.add(S)))}}N.free(a),N.free(c)}return r?d:l}return!1};function r0(t){var e=null;return t instanceof gt&&(e=t.spot1,e===Pi&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot1)),e===null&&(e=di),e}function o0(t){var e=null;return t instanceof gt&&(e=t.spot2,e===Pi&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot2)),e===null&&(e=Er),e}s.add=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];for(i=0;i<e.length;i++)this.wb(this.T.count,e[i]);return this},s.J=function(t){return this.T.J(t)},s.wb=function(t,e){e instanceof ut&&D("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.rg(e))&&(this===e&&D("Cannot make a Panel contain itself: "+this.toString()),D("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.panel;if(i!==null&&i!==this&&D("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.ha!==X.Grid||e instanceof gt||D("Can only add Shapes to a Grid Panel, not: "+e),this.ha!==X.Graduated||e instanceof gt||e instanceof Yt||D("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.Si(this),e.Bj=null,this.itemArray!==null){var n=e.data;n!==null&&typeof n=="object"&&(this.$d===null&&(this.$d=new pt),this.$d.add(n,e))}var r=this.T;if(n=-1,i===this){for(var o=-1,l=this.T.m,h=l.length,a=0;a<h;a++)if(l[a]===e){o=a;break}if(o!==-1){if(o===t||o+1>=r.count&&t>=r.count)return;r.eb(o),n=o}else D("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.wb(t,e),(t===0||e.isPanelMain)&&(this.ph=null),ho(this)||this.s(),e.s(!1),e.portId!==null?this.Je=!0:e instanceof X&&e.Je===!0&&(this.Je=!0),this.Rf=null,this.Ef()||_p(this,e,!1),i=this.part,i!==null&&(i.li=null,i.Xf=NaN,this.Je&&i instanceof q&&(i.Je=!0),i.Je&&i instanceof q&&(i.nc=null),r=this.diagram,r!==null&&r.undoManager.isUndoingRedoing||(n!==-1&&i.Wa(Ne,"elements",this,e,null,n,null),i.Wa(ve,"elements",this,null,e,null,t)))};function s0(t,e){t.G=e?t.G|16777216:t.G&-16777217}s.remove=function(t){for(var e=this.T.m,i=e.length,n=-1,r=0;r<i;r++)if(e[r]===t){n=r;break}n!==-1&&this.ec(n,!0)},s.eb=function(t){0<=t&&this.ec(t,!0)},s.ec=function(t,e){var i=this.T,n=i.J(t);if(n.Bj=null,n.Si(null),this.$d!==null){var r=n.data;typeof r=="object"&&this.$d.remove(r)}i.eb(t),pn(this,!1),this.s(),this.ph===n&&(this.ph=null),this.Rf=null;var o=this.part;o!==null&&(o.li=null,o.Xf=NaN,o.Lb(),o instanceof q&&(n instanceof X?n.Cm(n,function(l,h){P0(o,h,e)}):P0(o,n,e)),i=this.diagram,i!==null&&i.undoManager.isUndoingRedoing||o.Wa(Ne,"elements",this,n,null,t,null))},X.prototype.getRowDefinition=function(t){0>t&&st(t,">= 0",X,"getRowDefinition:idx"),t=Math.round(t);var e=this.ob;if(e===void 0)return null;if(e[t]===void 0){var i=new we;i.Si(this),i.isRow=!0,i.index=t,e[t]=i,this.Wa(ve,"rowdefs",this,null,i,null,t)}return e[t]},X.prototype.KA=function(t){0>t&&st(t,">= 0",X,"removeRowDefinition:idx"),t=Math.round(t);var e=this.ob;if(e!==void 0){var i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&e[n--]===void 0;)e.length--;this.Wa(Ne,"rowdefs",this,i,null,t,null),this.s()}}};function vM(t,e,i){var n=t.ob;if(n&&!(0>e)){if(n[e]=i instanceof we?i:void 0,!i)for(e=n.length-1;0<=e&&n[e--]===void 0;)n.length--;t.s()}}X.prototype.getColumnDefinition=function(t){0>t&&st(t,">= 0",X,"getColumnDefinition:idx"),t=Math.round(t);var e=this.ib;if(e===void 0)return null;if(e[t]===void 0){var i=new we;i.Si(this),i.isRow=!1,i.index=t,e[t]=i,this.Wa(ve,"coldefs",this,null,i,null,t)}return e[t]},s=X.prototype,s.FA=function(t){0>t&&st(t,">= 0",X,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.ib;if(e!==void 0){var i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&e[n--]===void 0;)e.length--;this.Wa(Ne,"coldefs",this,i,null,t,null),this.s()}}};function xM(t,e,i){var n=t.ib;if(n&&!(0>e)){if(n[e]=i instanceof we?i:void 0,!i)for(e=n.length-1;0<=e&&n[e--]===void 0;)n.length--;t.s()}}s.Mz=function(t){if(0>t||this.type!==X.Table)return-1;for(var e=0,i=this.ob,n=i.length,r=this.vi;r<n;r++){var o=i[r];if(o!==void 0&&(e+=o.total,t<e))break}return r},s.Ez=function(t){if(0>t||this.type!==X.Table)return-1;for(var e=0,i=this.ib,n=i.length,r=this.gi;r<n;r++){var o=i[r];if(o!==void 0&&(e+=o.total,t<e))break}return r},s.cA=function(t,e){if(e===void 0&&(e=new N(NaN,NaN)),this.type!==X.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.pb();return i.geometry.Tu((t-this.graduatedMin)/this.graduatedRange,e),i.transform.Aa(e)},s.dA=function(t){if(this.type!==X.Graduated)return NaN;var e=this.pb();return e.transform.Hd(t),e.geometry.Sx(t)*this.graduatedRange+this.graduatedMin};function wM(t){return t=t.Qh,t!==null&&t.v}function Ln(t){var e=t.Qh;if(e===null)t.data!==null&&D("Template cannot have .data be non-null: "+t),t.Qh=e=new it;else if(e.v)return;var i=new it;s0(t,!1),t.Cm(t,function(c,p){var d=p.fb;if(d!==null)for(Wm(p,!1),d=d.iterator;d.next();){var m=d.value;m.mode===jf&&Wm(p,!0);var x=m.sourceName;x!==null&&(x==="/"&&s0(c,!0),x=zk(m,c,p),x!==null&&(i.add(x),x.Hl===null&&(x.Hl=new it),x.Hl.add(m))),e.add(m)}if(p instanceof X&&p.type===X.Table){if(0<p.ob.length){for(c=p.ob,d=c.length,m=0;m<d;m++)if(x=c[m],x!==void 0&&x.fb!==null)for(var v=x.fb.iterator;v.next();){var S=v.value;S.od=x,S.xp=2,S.Nl=x.index,e.add(S)}}if(0<p.ib.length){for(p=p.ib,c=p.length,d=0;d<c;d++)if(m=p[d],m!==void 0&&m.fb!==null)for(x=m.fb.iterator;x.next();)v=x.value,v.od=m,v.xp=1,v.Nl=m.index,e.add(v)}}});for(var n=i.iterator;n.next();){var r=n.value;if(r.Hl!==null){Wm(r,!0);for(var o=r.Hl.iterator;o.next();){var l=o.value;r.fb===null&&(r.fb=new it),r.fb.add(l)}}r.Hl=null}for(n=e.iterator;n.next();)if(r=n.value,o=r.od,o!==null){r.od=null;var h=r.targetProperty,a=h.indexOf(".");0<a&&o instanceof X&&(l=h.substring(0,a),h=h.substr(a+1),a=o.Ya(l),a!==null?(o=a,r.targetProperty=h):wt('Warning: unable to find GraphObject named "'+l+'" for Binding: '+r.toString())),o instanceof we?(l=Ce(o.panel),r.Xi=l===void 0?-1:l,o.panel.Ck=r.Xi):o instanceof ht?(l=Ce(o),r.Xi=l===void 0?-1:l,o.Ck=r.Xi):D("Unknown type of binding target: "+o)}e.freeze(),t instanceof ut&&t.Mc()&&t.Ta()}s.qz=function(t){t===void 0&&(t=!1);var e=this.copy();return HT(e,function(i){i instanceof X&&(i.Qh=null,i.jb=null);var n=i.fb;n!==null&&(i.fb=null,n.each(function(r){i.bind(r.copy())})),n=i.wg,n!==null&&(i.wg=null,n.each(function(r){i.Rv(r.value.copy())}))}),t&&Ln(e),e},s.Fa=function(t){var e=this.Qh;if(e!==null)for(t===void 0&&(t=""),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((t===""||n===""||n===t)&&(n=i.targetProperty,i.converter!==null||n!=="")){n=this.data;var r=i.sourceName;if(r!==null){if(r==="")n=this;else if(r==="/")n=this;else if(r===".")n=this;else if(r==="..")n=this;else if(n=this.Ya(r),n===null)continue}else if(i.isToModel)if(n=this.diagram,n!==null)n=n.model.modelData;else continue;var o=this,l=i.Xi;if(l!==-1){if(o=this.os(l),o===null)continue}else i.od!==null&&(o=i.od);if(r==="/"?n=o.part:r==="."?n=o:r===".."&&(n=o.panel),r=i.xp,r!==0){if(!(o instanceof X))continue;r===1?o=o.getColumnDefinition(i.Nl):r===2&&(o=o.getRowDefinition(i.Nl))}o!==void 0&&i.Vv(o,n)}}},s.Nx=function(t){return t==null||this.$d===null?null:this.$d.H(t)};function KT(t,e){t=t.T.m;for(var i=t.length,n=e.length,r=0,o=null;r<i&&(o=t[r],!(o instanceof X&&o.data!==null));)r++,o=t[r];if(i-r!==n)return!0;if(o===null)return 0<n;for(var l=0;r<i&&l<n;){if(o=t[r],!(o instanceof X)||o.data!==e[l])return!0;r++,l++}return!1}function uf(t){if(t.type===X.Spot||t.type===X.Auto)return Math.min(t.T.length,1);if(t.type===X.Link){t=t.T;for(var e=t.length,i=0;i<e;i++){var n=t.J(i);if(!(n instanceof gt&&n.isPanelMain))break}return i}return t.type===X.Table&&0<t.T.length&&(t=t.T.J(0),t.isPanelMain&&t instanceof X&&(t.type===X.TableRow||t.type===X.TableColumn))?1:0}s.xv=function(){for(var t=uf(this);this.T.length>t;)this.ec(this.T.length-1,!1);SM(this,this.itemArray)};function SM(t,e){var i=uf(t);if(e===null||e.length===0)for(;t.T.length>i;)t.ec(t.T.length-1,!1);else if(t.T.length<=i){i=e.length;for(var n=0;n<i;n++)Vp(t,e[n],n,!0)}else{n=i;for(var r=0;r<e.length;r++,n++){var o=e[r],l=n<t.T.length?t.T.J(n):null;if(l instanceof X){if(l.data!==o){var h=u0(t,l.data),a=u0(t,o),c=a!==h;c||(h=h0(t,h),c=h0(t,a)!==h),c?(t.ec(n,!1),Vp(t,o,r,!1)):l.data=o}}else Vp(t,o,r,!1)}for(;n<t.T.length;)t.ec(n,!1);t.ph=null,l0(t,i,0),ho(t)||t.s(),t.Rf=null,t.Ef()||_p(t,t,!1),e=t.part,e!==null&&(e.li=null,e.Xf=NaN,t.Je&&e instanceof q&&(e.Je=!0),e.Je&&e instanceof q&&(e.nc=null))}}function Vp(t,e,i,n){if(!(e==null||0>i)){var r=u0(t,e);if(r=h0(t,r),r!==null){if(Ln(r),r=r.copy(),(r.G&16777216)!==0){var o=t.Ch();o!==null&&s0(o,!0)}typeof e=="object"&&(t.$d===null&&(t.$d=new pt),t.$d.add(e,r)),o=i+uf(t),t.wb(o,r),n&&(r.jb=e,l0(t,o,i),r.jb=null),r.data=e}}}function l0(t,e,i){for(t=t.T;e<t.length;){var n=t.J(e);if(n instanceof X){var r=e,o=i;n.type===X.TableRow?n.row=r:n.type===X.TableColumn&&(n.column=r),n.itemIndex=o}e++,i++}}function u0(t,e){if(e===null)return"";if(t=t.fl,typeof t=="function")t=t(e);else if(typeof t=="string"&&typeof e=="object"){if(t==="")return"";t=ue(e,t)}else return"";if(t===void 0)return"";if(typeof t=="string")return t;D("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function h0(t,e){var i=t.itemTemplateMap,n=null;return i!==null&&(n=i.H(e)),n===null&&(i!==null&&(n=i.H("")),n===null&&(MM||(MM=!0,wt('No item template Panel found for category "'+e+'" on '+t),wt("  Using default item template."),t=new X,e=new Yt,e.bind(new ae("text","",ii)),t.add(e),kM=t),n=kM)),n}function _p(t,e,i){var n=e.enabledChanged;if(n!==null&&n(e,i),e instanceof X){e=e.T.m,n=e.length;for(var r=0;r<n;r++){var o=e[r];i&&o instanceof X&&!o.isEnabled||_p(t,o,i)}}}function Sr(t,e){e.name=t,zn.add(t,e)}Y.Object.defineProperties(X.prototype,{type:{get:function(){return this.ha},set:function(t){var e=this.ha;e!==t&&(this.ha=t,this.ha===X.Grid?this.isAtomic=!0:this.ha===X.Table&&cM(this),this.s(),this.g("type",e,t))}},elements:{get:function(){return this.T.iterator}},naturalBounds:{get:function(){return this.uc}},padding:{get:function(){return this.nb},set:function(t){typeof t=="number"?(0>t&&st(t,">= 0",X,"padding"),t=new Ft(t)):(0>t.left&&st(t.left,">= 0",X,"padding:value.left"),0>t.right&&st(t.right,">= 0",X,"padding:value.right"),0>t.top&&st(t.top,">= 0",X,"padding:value.top"),0>t.bottom&&st(t.bottom,">= 0",X,"padding:value.bottom"));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.s(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.ln},set:function(t){var e=this.ln;e.A(t)||(this.ln=t=t.I(),this.s(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Of},set:function(t){var e=this.Of;e!==t&&(this.Of=t,this.s(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return this.dj===void 0?_u:this.dj},set:function(t){if(this.dj!==void 0){typeof t=="number"&&(t=new Ft(t));var e=this.dj;e.A(t)||(this.dj=t=t.I(),this.s(),this.g("defaultSeparatorPadding",e,t))}}},defaultRowSeparatorStroke:{get:function(){return this.Wh===void 0?null:this.Wh},set:function(t){var e=this.Wh;e!==t&&(t===null||typeof t=="string"||t instanceof Ot)&&(t instanceof Ot&&t.freeze(),this.Wh=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return this.Gg===void 0?1:this.Gg},set:function(t){if(this.Gg!==void 0){var e=this.Gg;e!==t&&isFinite(t)&&0<=t&&(this.Gg=t,this.s(),this.g("defaultRowSeparatorStrokeWidth",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return this.Vh===void 0?null:this.Vh},set:function(t){if(this.Vh!==void 0){var e=this.Vh;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||D("defaultRowSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.Vh=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return this.Eg===void 0?null:this.Eg},set:function(t){if(this.Eg!==void 0){var e=this.Eg;e!==t&&(t===null||typeof t=="string"||t instanceof Ot)&&(t instanceof Ot&&t.freeze(),this.Eg=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return this.Fg===void 0?1:this.Fg},set:function(t){if(this.Fg!==void 0){var e=this.Fg;e!==t&&isFinite(t)&&0<=t&&(this.Fg=t,this.s(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return this.Uh===void 0?null:this.Uh},set:function(t){if(this.Uh!==void 0){var e=this.Uh;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||D("defaultColumnSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.Uh=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.Gp},set:function(t){var e=this.Gp;e!==t&&(this.Gp=t,this.s(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Jn},set:function(t){var e=this.Jn;if(!e.A(t)){t.u()&&t.width!==0&&t.height!==0||D("Invalid Panel.gridCellSize: "+t),this.Jn=t.I();var i=this.diagram;i!==null&&this===i.grid&&Fo(i),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Kn},set:function(t){var e=this.Kn;if(!e.A(t)){t.u()||D("Invalid Panel.gridOrigin: "+t),this.Kn=t.I();var i=this.diagram;i!==null&&this===i.grid&&Fo(i),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,this.s(),this.g("graduatedMin",e,t),_l(this)&&(t=this.part,t!==null&&$s(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.Fn},set:function(t){var e=this.Fn;e!==t&&(this.Fn=t,this.s(),this.g("graduatedMax",e,t),_l(this)&&(t=this.part,t!==null&&$s(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.In},set:function(t){var e=this.In;e!==t&&0<t&&(this.In=t,this.s(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.Hn},set:function(t){var e=this.Hn;e!==t&&(this.Hn=t,this.s(),this.g("graduatedTickBase",e,t))}},Je:{get:function(){return(this.G&8388608)!==0},set:function(t){(this.G&8388608)!==0!==t&&(this.G^=8388608)}},rowCount:{get:function(){return this.ob===void 0?0:this.ob.length}},columnCount:{get:function(){return this.ib===void 0?0:this.ib.length}},rowSizing:{get:function(){return this.Dj===void 0?af:this.Dj},set:function(t){if(this.Dj!==void 0){var e=this.Dj;e!==t&&(this.Dj=t,this.s(),this.g("rowSizing",e,t))}}},columnSizing:{get:function(){return this.cj===void 0?af:this.cj},set:function(t){if(this.cj!==void 0){var e=this.cj;e!==t&&(this.cj=t,this.s(),this.g("columnSizing",e,t))}}},topIndex:{get:function(){return this.vi===void 0?0:this.vi},set:function(t){if(this.vi!==void 0){var e=this.vi;e!==t&&((!isFinite(t)||0>t)&&D("Panel.topIndex must be greater than zero and a real number, not: "+t),this.vi=t,this.s(),this.g("topIndex",e,t))}}},leftIndex:{get:function(){return this.gi===void 0?0:this.gi},set:function(t){if(this.gi!==void 0){var e=this.gi;e!==t&&((!isFinite(t)||0>t)&&D("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.gi=t,this.s(),this.g("leftIndex",e,t))}}},data:{get:function(){return this.jb},set:function(t){var e=this.jb;if(e!==t){var i=this instanceof ut&&!(this instanceof Tt);Ln(this),this.jb=t;var n=this.diagram;n!==null&&(i?(i=n.partManager,this instanceof H?(e!==null&&i.Ue.remove(e),t!==null&&i.Ue.add(t,this)):this instanceof ut&&(e!==null&&i.Ve.remove(e),t!==null&&i.Ve.add(t,this))):(i=this.panel,i!==null&&i.$d!==null&&(e!==null&&i.$d.remove(e),t!==null&&i.$d.add(t,this)))),this.g("data",e,t),n!==null&&n.undoManager.isUndoingRedoing||t!==null&&this.Fa()}}},itemIndex:{get:function(){return this.ao},set:function(t){var e=this.ao;e!==t&&(this.ao=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.ci},set:function(t){var e=this.ci;if(e!==t||t!==null&&KT(this,t)){var i=this.diagram;e!==t&&(i!==null&&e!==null&&H0(i.partManager,this,i),this.ci=t,i!==null&&t!==null&&W0(i.partManager,this)),this.g("itemArray",e,t),i!==null&&i.undoManager.isUndoingRedoing||SM(this,t)}}},itemTemplate:{get:function(){return this.ve===null?null:this.ve.H("")},set:function(t){if(this.ve===null){if(t===null)return;this.ve=new pt}var e=this.ve.H("");e!==t&&((t instanceof ut||t.isPanelMain)&&D("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.ve.add("",t),this.g("itemTemplate",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.xv())}},itemTemplateMap:{get:function(){return this.ve},set:function(t){var e=this.ve;if(e!==t){for(var i=t.iterator;i.next(););this.ve=t,this.g("itemTemplateMap",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.xv()}}},itemCategoryProperty:{get:function(){return this.fl},set:function(t){var e=this.fl;e!==t&&(this.fl=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return(this.G&1048576)!==0},set:function(t){var e=(this.G&1048576)!==0;e!==t&&(this.G^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return(this.G&2097152)!==0},set:function(t){var e=(this.G&2097152)!==0;e!==t&&(this.G^=2097152,this instanceof dt&&(this.$a=null),this.s(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return(this.G&33554432)!==0},set:function(t){var e=(this.G&33554432)!==0;e!==t&&(this.G^=33554432,this.s(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return(this.G&4194304)!==0},set:function(t){var e=(this.G&4194304)!==0;if(e!==t){var i=this.panel===null||this.panel.Ef();this.G^=4194304,this.g("isEnabled",e,t),e=this.diagram,e!==null&&e.undoManager.isUndoingRedoing||i&&_p(this,this,t)}}},alignmentFocusName:{get:function(){return this.Re},set:function(t){var e=this.Re;e!==t&&(this.Re=t,this.s(),this.g("alignmentFocusName",e,t))}}}),Y.Object.defineProperties(X,{Position:{get:function(){return zn.H("Position")}},Horizontal:{get:function(){return zn.H("Horizontal")}},Vertical:{get:function(){return zn.H("Vertical")}},Spot:{get:function(){return zn.H("Spot")}},Auto:{get:function(){return zn.H("Auto")}},Table:{get:function(){return zn.H("Table")}},Viewbox:{get:function(){return zn.H("Viewbox")}},TableRow:{get:function(){return zn.H("TableRow")}},TableColumn:{get:function(){return zn.H("TableColumn")}},Link:{get:function(){return zn.H("Link")}},Grid:{get:function(){return zn.H("Grid")}},Graduated:{get:function(){return zn.H("Graduated")}}}),X.prototype.rebuildItemElements=X.prototype.xv,X.prototype.findItemPanelForData=X.prototype.Nx,X.prototype.updateTargetBindings=X.prototype.Fa,X.prototype.copyTemplate=X.prototype.qz,X.prototype.graduatedValueForPoint=X.prototype.dA,X.prototype.graduatedPointForValue=X.prototype.cA,X.prototype.findColumnForLocalX=X.prototype.Ez,X.prototype.findRowForLocalY=X.prototype.Mz,X.prototype.removeColumnDefinition=X.prototype.FA,X.prototype.removeRowDefinition=X.prototype.KA,X.prototype.removeAt=X.prototype.eb,X.prototype.remove=X.prototype.remove,X.prototype.insertAt=X.prototype.wb,X.prototype.elt=X.prototype.J,X.prototype.add=X.prototype.add,X.prototype.findObject=X.prototype.Ya,X.prototype.findInVisualTree=X.prototype.Yl,X.prototype.walkVisualTreeFrom=X.prototype.Cm,X.prototype.findMainElement=X.prototype.pb;var MM=!1,kM=null,zn=new pt;X.className="Panel",X.definePanelLayout=Sr,Sr("Position",new Np),Sr("Vertical",new Lp),Sr("Auto",new Op),Sr("Link",new Rp);function we(){je(this),this.bg=null,this.nr=!0,this.Ra=0,this.Bd=NaN,this.wj=0,this.vj=1/0,this.yb=Pi,this.ja=this.cc=this.la=0,this.fb=null,this.pp=a0,this.Ee=wr,this.kp=this.eg=null,this.lp=NaN,this.Ub=this.Hj=null,this.gn=!1}we.prototype.copy=function(){var t=new we;return t.nr=this.nr,t.Ra=this.Ra,t.Bd=this.Bd,t.wj=this.wj,t.vj=this.vj,t.yb=this.yb,t.la=this.la,t.cc=this.cc,t.ja=this.ja,t.Ee=this.Ee,t.pp=this.pp,this.eg===null?t.eg=null:t.eg=this.eg.I(),t.kp=this.kp,t.lp=this.lp,t.Hj=null,this.Hj!==null&&(t.separatorDashArray=ke(this.separatorDashArray)),t.Ub=this.Ub,t.gn=this.gn,t.fb=this.fb,t},s=we.prototype,s.gb=function(t){t.classType===we&&(this.sizing=t)},s.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Ce(this)},s.Si=function(t){this.bg=t},s.Cu=function(){var t=0,e=0,i=this.bg,n=this.isRow;if(i!==null&&i.type===X.Table)for(var r=n?i.ob.length:i.ib.length,o=0;o<r;o++){var l=n?i.ob[o]:i.ib[o];if(l!==void 0){e=l.index;break}}if(this.index!==e&&(e=this.separatorStroke,e===null&&i!==null&&(e=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),e!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(i!==null?t=this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:t=0))),e=this.eg,e===null)if(i!==null)e=i.defaultSeparatorPadding;else return t;return t+(this.isRow?e.top:e.left)},s.Ic=function(){var t=0,e=this.bg,i=0,n=this.isRow;if(e!==null&&e.type===X.Table)for(var r=n?e.ob.length:e.ib.length,o=0;o<r;o++){var l=n?e.ob[o]:e.ib[o];if(l!==void 0){i=l.index;break}}if(this.index!==i&&(i=this.separatorStroke,i===null&&e!==null&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),i!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(e!==null?t=n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:t=0))),n=this.eg,n===null)if(e!==null)n=e.defaultSeparatorPadding;else return t;return t+(this.isRow?n.top+n.bottom:n.left+n.right)},s.Db=function(t,e,i){var n=this.bg;if(n!==null&&(n.Wa(qt,t,this,e,i,void 0,void 0),this.fb!==null&&(e=n.diagram,e!==null&&!e.skipsModelSourceBindings&&(n=n.Ch(),n!==null&&(e=n.data,e!==null)))))for(i=this.fb.iterator;i.next();)i.value.zq(this,e,t,n)};function Up(t){if(t.sizing===a0){var e=t.bg;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}s.bind=function(t,e,i,n){var r=null;return typeof t=="string"?r=new ae(t,e,i,n):r=t,r.od=this,t=this.panel,t!==null&&(e=t.Ch(),e!==null&&wM(e)&&D("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+r+" on "+t)),this.fb===null&&(this.fb=new it),this.fb.add(r),this},Y.Object.defineProperties(we.prototype,{panel:{get:function(){return this.bg}},isRow:{get:function(){return this.nr},set:function(t){this.nr=t}},index:{get:function(){return this.Ra},set:function(t){this.Ra=t}},height:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(0>t&&st(t,">= 0",we,"height"),this.Bd=t,this.actual=this.la,this.panel!==null&&this.panel.s(),this.Db("height",e,t))}},width:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(0>t&&st(t,">= 0",we,"width"),this.Bd=t,this.actual=this.la,this.panel!==null&&this.panel.s(),this.Db("width",e,t))}},minimum:{get:function(){return this.wj},set:function(t){var e=this.wj;e!==t&&((0>t||!isFinite(t))&&st(t,">= 0",we,"minimum"),this.wj=t,this.actual=this.la,this.panel!==null&&this.panel.s(),this.Db("minimum",e,t))}},maximum:{get:function(){return this.vj},set:function(t){var e=this.vj;e!==t&&(0>t&&st(t,">= 0",we,"maximum"),this.vj=t,this.actual=this.la,this.panel!==null&&this.panel.s(),this.Db("maximum",e,t))}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.A(t)||(this.yb=t.I(),this.panel!==null&&this.panel.s(),this.Db("alignment",e,t))}},stretch:{get:function(){return this.Ee},set:function(t){var e=this.Ee;e!==t&&(this.Ee=t,this.panel!==null&&this.panel.s(),this.Db("stretch",e,t))}},separatorPadding:{get:function(){return this.eg},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.eg;t!==null&&e!==null&&e.A(t)||(t!==null&&(t=t.I()),this.eg=t,this.panel!==null&&this.panel.s(),this.Db("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.kp},set:function(t){var e=this.kp;e!==t&&(t!==null&&Gl(t,"RowColumnDefinition.separatorStroke"),t instanceof Ot&&t.freeze(),this.kp=t,this.panel!==null&&this.panel.s(),this.Db("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.lp},set:function(t){var e=this.lp;e!==t&&(this.lp=t,this.panel!==null&&this.panel.s(),this.Db("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.Hj},set:function(t){var e=this.Hj;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||D("separatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.Hj=t,this.panel!==null&&this.panel.N(),this.Db("separatorDashArray",e,t)}}},background:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==t&&(t!==null&&Gl(t,"RowColumnDefinition.background"),t instanceof Ot&&t.freeze(),this.Ub=t,this.panel!==null&&this.panel.N(),this.Db("background",e,t))}},coversSeparators:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,this.panel!==null&&this.panel.N(),this.Db("coversSeparators",e,t))}},sizing:{get:function(){return this.pp},set:function(t){var e=this.pp;e!==t&&(this.pp=t,this.panel!==null&&this.panel.s(),this.Db("sizing",e,t))}},actual:{get:function(){return this.la},set:function(t){this.la=isNaN(this.Bd)?Math.max(Math.min(this.vj,t),this.wj):Math.max(Math.min(this.vj,this.Bd),this.wj)}},measured:{get:function(){return this.cc},set:function(t){this.cc=t}},total:{get:function(){return this.la+this.Ic()}},position:{get:function(){return this.ja},set:function(t){this.ja=t}}}),we.prototype.computeEffectiveSpacing=we.prototype.Ic,we.prototype.computeEffectiveSpacingTop=we.prototype.Cu;var a0=new K(we,"Default",0),hf=new K(we,"None",1),af=new K(we,"ProportionalExtra",2);we.className="RowColumnDefinition",we.Default=a0,we.None=hf,we.ProportionalExtra=af;function gt(t,e){ht.call(this),this.Dd=this.ma=null,this.wn="None",this.Dn=wr,this.Gc=this.Tk="black",this.hg=1,this.Jl="butt",this.Kl="miter",this.Ij=10,this.mh=null,this.nh=0,this.nf=this.mf=Pi,this.Lo=this.Ko=NaN,this.Sn=!1,this.No=null,this.Uk=this.Ql="None",this.Zd=1,this.Xd=0,this.Vd=1,this.Wd=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}z(gt,ht),gt.prototype.cloneProtected=function(t){ht.prototype.cloneProtected.call(this,t),t.ma=this.ma,t.wn=this.wn,t.Dn=this.Dn,t.Dd=this.Dd,t.Tk=this.Tk,t.Gc=this.Gc,t.hg=this.hg,t.Jl=this.Jl,t.Kl=this.Kl,t.Ij=this.Ij,this.mh!==null&&(t.mh=ke(this.mh)),t.nh=this.nh,t.mf=this.mf.I(),t.nf=this.nf.I(),t.Ko=this.Ko,t.Lo=this.Lo,t.Sn=this.Sn,t.No=this.No,t.Ql=this.Ql,t.Uk=this.Uk,t.Zd=this.Zd,t.Xd=this.Xd,t.Vd=this.Vd,t.Wd=this.Wd},s=gt.prototype,s.gb=function(t){t===ce||t===xr||t===Qa||t===wr?this.geometryStretch=t:ht.prototype.gb.call(this,t)},s.toString=function(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+Ce(this)};function vh(t,e,i,n){var r=i.length;if(!(4>r)){var o=n.measuredBounds,l=Math.max(1,o.width);o=o.height;for(var h=i[0],a=i[1],c,p,d,m,x,v,S=0,P=Et(),k=2;k<r;k+=2)c=i[k],p=i[k+1],d=c-h,h=p-a,d===0&&(d=.001),m=h/d,x=Math.atan2(h,d),v=Math.sqrt(d*d+h*h),P.push([d,x,m,v]),S+=v,h=c,a=p;h=i[0],a=i[1],d=n.measuredBounds.width,n instanceof gt&&(d-=n.strokeWidth),1>d&&(d=1),r=i=d,c=l/2,p=c!==0,k=0,v=P[k],d=v[0],x=v[1],m=v[2],v=v[3];for(var L=0;.1<=S;){if(L===0&&(p?(r=i,r-=c,S-=c,p=!1):r=i,r===0&&(r=1)),r>S){Ut(P);return}r>v?(L=r-v,r=v):L=0;var T=Math.sqrt(r*r/(1+m*m));if(0>d&&(T=-T),h+=T,a+=m*T,t.translate(h,a),t.rotate(x),t.translate(-(l/2),-(o/2)),L===0&&n.Ei(t,e),t.translate(l/2,o/2),t.rotate(-x),t.translate(-h,-a),S-=r,v-=r,L!==0){if(k++,k===P.length){Ut(P);return}v=P[k],d=v[0],x=v[1],m=v[2],v=v[3],r=L}}Ut(P)}}s.Ei=function(t,e){var i=this.Gc,n=this.Tk;if(i!==null||n!==null){var r=this.ma;if(r!==null){t.Ed();var o=this.actualBounds,l=this.naturalBounds;n!==null&&Qi(this,t,n,!0,!1,l,o);var h=this.part,a=this.hg;if(i===null||a!==0||h===null||!this.isPanelMain&&h.pb()!==this||(a=h.type===X.Link&&h instanceof Tt&&h.category==="Selection"&&h.adornedObject instanceof gt&&h.adornedPart.pb()===h.adornedObject?h.adornedObject.strokeWidth:0),a===0&&(i=null),i!==null&&a!==0&&(Qi(this,t,i,!1,!1,l,o),t.lineWidth=a,t.lineJoin=this.Kl,t.lineCap=this.Jl,t.miterLimit=this.Ij),o=!1,h&&e.Ie("drawShadows")&&(o=h.isShadowed),h=!0,i===null||n!==null&&n!=="transparent"||(h=!1),l=!1,a=this.strokeDashArray,a!==null&&(l=!0,t.ns(a,this.nh)),r.type===tt.j)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),i!==null&&t.Wi();else if(r.type===tt.D){var c=r.startX;a=r.startY;var p=r.endX,d=r.endY;r=Math.min(c,p);var m=Math.min(a,d);c=Math.abs(p-c),a=Math.abs(d-a),t.beginPath(),t.rect(r,m,c,a),n!==null&&t.yf(n),i!==null&&(h&&o&&fo(t),(c===0||a===0)&&(t.beginPath(),t.rect(r,m,Math.max(c,.1),Math.max(a,.1))),t.Wi(),h&&o&&_o(t))}else if(r.type===tt.L)c=r.startX,a=r.startY,p=r.endX,d=r.endY,r=Math.abs(p-c)/2,m=Math.abs(d-a)/2,c=Math.min(c,p)+r,a=Math.min(a,d)+m,t.beginPath(),t.moveTo(c,a-m),t.bezierCurveTo(c+j.vg*r,a-m,c+r,a-j.vg*m,c+r,a),t.bezierCurveTo(c+r,a+j.vg*m,c+j.vg*r,a+m,c,a+m),t.bezierCurveTo(c-j.vg*r,a+m,c-r,a+j.vg*m,c-r,a),t.bezierCurveTo(c-r,a-j.vg*m,c-j.vg*r,a-m,c,a-m),t.closePath(),n!==null&&t.yf(n),i!==null&&(h&&o?(fo(t),t.Wi(),_o(t)):t.Wi());else if(r.type===tt.o)for(r=r.figures,a=r.length,m=0;m<a;m++){c=r.m[m],t.beginPath(),t.moveTo(c.startX,c.startY),p=c.segments.m,d=p.length;for(var x=null,v=0;v<d;v++){var S=p[v];switch(S.type){case _n:t.moveTo(S.endX,S.endY);break;case fe:t.lineTo(S.endX,S.endY);break;case un:t.bezierCurveTo(S.point1X,S.point1Y,S.point2X,S.point2Y,S.endX,S.endY);break;case vr:t.quadraticCurveTo(S.point1X,S.point1Y,S.endX,S.endY);break;case ye:if(S.radiusX===S.radiusY){var P=Math.PI/180;t.arc(S.point1X,S.point1Y,S.radiusX,S.startAngle*P,(S.startAngle+S.sweepAngle)*P,0>S.sweepAngle,x!==null?x.endX:c.startX,x!==null?x.endY:c.startY)}else if(x=so(S,c),P=x.length,P===0)t.lineTo(S.centerX,S.centerY);else for(var k=0;k<P;k++){var L=x[k];k===0&&t.lineTo(L[0],L[1]),t.bezierCurveTo(L[2],L[3],L[4],L[5],L[6],L[7])}break;case qn:if(k=P=0,x!==null&&x.type===ye){if(x=so(x,c),L=x.length,L===0){t.lineTo(S.endX,S.endY);break}x=x[L-1]||null,x!==null&&(P=x[6],k=x[7])}else P=x!==null?x.endX:c.startX,k=x!==null?x.endY:c.startY;if(x=Gs(S,c,P,k),P=x.length,P===0){t.lineTo(S.endX,S.endY);break}for(k=0;k<P;k++)L=x[k],t.bezierCurveTo(L[2],L[3],L[4],L[5],L[6],L[7]);break;default:D("Segment not of valid type: "+S.type)}S.isClosed&&t.closePath(),x=S}p=c.isFilled,o?c.isShadowed?(p===!0&&n!=="transparent"&&n!==null&&t.yf(n),i!==null&&(p&&h&&fo(t),t.Wi(),p&&h&&_o(t))):(fo(t),p&&n!=="transparent"&&n!==null&&t.yf(n),i!==null&&t.Wi(),_o(t)):(p&&n!==null&&t.yf(n),i!==null&&t.Wi())}if(l&&t.ls(),this.pathPattern!==null){if(i=this.pathPattern,i.measure(1/0,1/0),n=i.measuredBounds,i.arrange(0,0,n.width,n.height),o=this.geometry,t.save(),t.beginPath(),n=Et(),o.type===tt.j)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.endY),vh(t,e,n,i);else if(o.type===tt.o)for(o=o.figures.iterator;o.next();){for(h=o.value,n.length=0,n.push(h.startX),n.push(h.startY),l=h.startX,r=h.startY,a=l,m=r,c=h.segments.m,p=c.length,d=0;d<p;d++){switch(v=c[d],v.type){case _n:vh(t,e,n,i),n.length=0,n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY,a=l,m=r;break;case fe:n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY;break;case un:j.Fe(l,r,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,n),l=v.endX,r=v.endY;break;case vr:j.kq(l,r,v.point1X,v.point1Y,v.endX,v.endY,.5,n),l=v.endX,r=v.endY;break;case ye:if(S=so(v,h),x=S.length,x===0){n.push(v.centerX),n.push(v.centerY),l=v.centerX,r=v.centerY;break}for(P=0;P<x;P++)k=S[P],j.Fe(l,r,k[2],k[3],k[4],k[5],k[6],k[7],.5,n),l=k[6],r=k[7];break;case qn:if(S=Gs(v,h,l,r),x=S.length,x===0){n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY;break}for(P=0;P<x;P++)k=S[P],j.Fe(l,r,k[2],k[3],k[4],k[5],k[6],k[7],.5,n),l=k[6],r=k[7];break;default:D("Segment not of valid type: "+v.type)}v.isClosed&&(n.push(a),n.push(m),vh(t,e,n,i))}vh(t,e,n,i)}else if(o.type===tt.D)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.startY),n.push(o.endX),n.push(o.endY),n.push(o.startX),n.push(o.endY),n.push(o.startX),n.push(o.startY),vh(t,e,n,i);else if(o.type===tt.L){if(r=new Qe,r.startX=o.endX,r.startY=(o.startY+o.endY)/2,l=new Vt(ye),l.startAngle=0,l.sweepAngle=360,l.centerX=(o.startX+o.endX)/2,l.centerY=(o.startY+o.endY)/2,l.radiusX=Math.abs(o.startX-o.endX)/2,l.radiusY=Math.abs(o.startY-o.endY)/2,r.add(l),o=so(l,r),h=o.length,h===0)n.push(l.centerX),n.push(l.centerY);else for(l=r.startX,r=r.startY,a=0;a<h;a++)m=o[a],j.Fe(l,r,m[2],m[3],m[4],m[5],m[6],m[7],.5,n),l=m[6],r=m[7];vh(t,e,n,i)}Ut(n),t.restore(),t.Hc(!1)}}}},s.da=function(t,e){if(e===void 0&&(e=new N),t instanceof at){t.zc()&&D("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.fe.Aa(e),e},s.Li=function(t){t===void 0&&(t=new _);var e=this.naturalBounds,i=this.fe;e=_.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.Jc(n/2,n/2),n=N.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),Ve(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),Ve(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),Ve(t,n.x,n.y,0,0),_.free(e),N.free(n),t},s.Bh=function(t,e){var i=this.geometry;if(i===null||this.fill===null&&this.stroke===null)return!1;var n=i.bounds,r=this.strokeWidth/2;i.type!==tt.j||e||(r+=2);var o=_.alloc();if(o.assign(n),o.Jc(r+2,r+2),!o.$(t))return _.free(o),!1;if(n=r+1e-4,i.type===tt.j)return this.stroke===null||(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n)?!1:(_.free(o),j.Nb(i.startX,i.startY,i.endX,i.endY,r,t.x,t.y));if(i.type===tt.D){e=i.startX;var l=i.startY,h=i.endX;if(i=i.endY,o.x=Math.min(e,h),o.y=Math.min(l,i),o.width=Math.abs(h-e),o.height=Math.abs(i-l),this.fill===null){if(o.Jc(-n,-n),o.$(t))return _.free(o),!1;o.Jc(n,n)}return this.stroke!==null&&o.Jc(r,r),t=o.$(t),_.free(o),t}if(i.type===tt.L){l=i.startX,r=i.startY,h=i.endX;var a=i.endY;if(i=Math.min(l,h),e=Math.min(r,a),l=Math.abs(h-l)/2,r=Math.abs(a-r)/2,i=t.x-(i+l),e=t.y-(e+r),this.fill===null){if(l-=n,r-=n,0>=l||0>=r||1>=i*i/(l*l)+e*e/(r*r))return _.free(o),!1;l+=n,r+=n}return this.stroke!==null&&(l+=n,r+=n),_.free(o),0>=l||0>=r?!1:1>=i*i/(l*l)+e*e/(r*r)}if(i.type===tt.o)return _.free(o),this.fill===null?zw(i,t.x,t.y,r):Zg(i,t,r,1<this.strokeWidth,e);D("Unknown Geometry type: "+i.type)},s.gm=function(t,e,i,n){var r=this.desiredSize,o=this.hg;if(t=Math.max(t,0),e=Math.max(e,0),this.Dd!==null)var l=this.geometry.bounds;else{var h=this.figure,a=c0[h];if(a===void 0){var c=j.Qe[h];typeof c=="string"&&(c=j.Qe[c]),typeof c=="function"?(a=c(null,100,100),c0[h]=a):D("Unsupported Figure: "+h)}l=a.bounds}h=l.width,a=l.height,c=l.width;var p=l.height;switch(ir(this,!0)){case ce:n=i=0;break;case he:c=Math.max(t-o,0),p=Math.max(e-o,0);break;case Xe:c=Math.max(t-o,0),n=0;break;case be:i=0,p=Math.max(e-o,0)}switch(isFinite(r.width)&&(c=r.width),isFinite(r.height)&&(p=r.height),r=this.maxSize,l=this.minSize,i=Math.max(i-o,l.width),n=Math.max(n-o,l.height),c=Math.min(r.width,c),p=Math.min(r.height,p),c=isFinite(c)?Math.max(i,c):Math.max(h,i),p=isFinite(p)?Math.max(n,p):Math.max(a,n),i=f0(this),i){case ce:break;case he:h=c,a=p;break;case xr:i=Math.min(c/h,p/a),isFinite(i)||(i=1),h*=i,a*=i;break;default:D(i+" is not a valid geometryStretch.")}this.Dd!==null?(h===0&&(h=.001),a===0&&(a=.001),i=this.Dd!==null?this.Dd:this.ma,r=i.bounds,n=h/r.width,r=a/r.height,isFinite(n)||(n=1),isFinite(r)||(r=1),this.ma=n===1&&r===1?i:i.copy().scale(n,r)):this.ma!==null&&j.aa(this.ma.al,t-o)&&j.aa(this.ma.$k,e-o)||(this.ma=gt.makeGeometry(this,h,a)),l=this.ma.bounds,t===1/0||e===1/0?this.xe(l.x-o/2,l.y-o/2,t===0&&h===0?0:l.width+o,e===0&&a===0?0:l.height+o):this.xe(-(o/2),-(o/2),c+o,p+o)};function f0(t){var e=t.geometryStretch;return t.Dd!==null?e===wr?he:e:e===wr?c0[t.figure].defaultStretch:e}s.zh=function(t,e,i,n){Xm(this,t,e,i,n)},s.vs=function(t,e,i){return this.Zj(t.x,t.y,e.x,e.y,i)},s.Zj=function(t,e,i,n,r){var o=this.transform,l=1/(o.m11*o.m22-o.m12*o.m21),h=o.m22*l,a=-o.m12*l,c=-o.m21*l,p=o.m11*l,d=l*(o.m21*o.dy-o.m22*o.dx),m=l*(o.m12*o.dx-o.m11*o.dy);o=t*h+e*c+d,l=t*a+e*p+m,h=i*h+n*c+d,a=i*a+n*p+m,d=this.hg/2,c=this.ma,c===null&&(this.measure(1/0,1/0),c=this.ma);var x=c.bounds;if(p=!1,c.type===tt.j)if(1.5>=this.strokeWidth)p=j.Le(c.startX,c.startY,c.endX,c.endY,o,l,h,a,r);else{if(c.startX===c.endX?(n=d,p=0):(e=(c.endY-c.startY)/(c.endX-c.startX),p=d/Math.sqrt(1+e*e),n=p*e),e=Et(),t=new N,j.Le(c.startX+n,c.startY+p,c.endX+n,c.endY+p,o,l,h,a,t)&&e.push(t),t=new N,j.Le(c.startX-n,c.startY-p,c.endX-n,c.endY-p,o,l,h,a,t)&&e.push(t),t=new N,j.Le(c.startX+n,c.startY+p,c.startX-n,c.startY-p,o,l,h,a,t)&&e.push(t),t=new N,j.Le(c.endX+n,c.endY+p,c.endX-n,c.endY-p,o,l,h,a,t)&&e.push(t),h=e.length,h===0)return Ut(e),!1;for(p=!0,a=1/0,n=0;n<h;n++)t=e[n],i=(t.x-o)*(t.x-o)+(t.y-l)*(t.y-l),i<a&&(a=i,r.x=t.x,r.y=t.y);Ut(e)}else if(c.type===tt.D)p=j.Cf(x.x-d,x.y-d,x.x+x.width+d,x.y+x.height+d,o,l,h,a,r);else if(c.type===tt.L){e=_.allocAt(x.x,x.y,x.width,x.height).Jc(d,d);t:if(e.width===0)p=j.Le(e.x,e.y,e.x,e.y+e.height,o,l,h,a,r);else if(e.height===0)p=j.Le(e.x,e.y,e.x+e.width,e.y,o,l,h,a,r);else{if(t=e.width/2,c=e.height/2,n=e.x+t,p=e.y+c,i=9999,o!==h&&(i=(l-a)/(o-h)),9999>Math.abs(i)){if(a=l-p-i*(o-n),0>t*t*i*i+c*c-a*a){r.x=NaN,r.y=NaN,p=!1;break t}d=Math.sqrt(t*t*i*i+c*c-a*a),h=(-(t*t*i*a)+t*c*d)/(c*c+t*t*i*i)+n,t=(-(t*t*i*a)-t*c*d)/(c*c+t*t*i*i)+n,c=i*(h-n)+a+p,a=i*(t-n)+a+p,Math.abs((o-h)*(o-h))+Math.abs((l-c)*(l-c))<Math.abs((o-t)*(o-t))+Math.abs((l-a)*(l-a))?(r.x=h,r.y=c):(r.x=t,r.y=a)}else{if(h=c*c,a=o-n,h-=h/(t*t)*a*a,0>h){r.x=NaN,r.y=NaN,p=!1;break t}a=Math.sqrt(h),h=p+a,a=p-a,Math.abs(h-l)<Math.abs(a-l)?(r.x=o,r.y=h):(r.x=o,r.y=a)}p=!0}_.free(e)}else if(c.type===tt.o){m=N.alloc();var v=h-o,S=a-l,P=v*v+S*S,k=o,L=l;if(0<P&&x.contains(k,L)&&(m.x=k,m.y=L,this.$(m)))for(v!==0&&.5>Math.abs(v)?(S*=.5/v,v=.5):S!==0&&.5>Math.abs(S)&&(v*=.5/S,S=.5),k-=v,L-=S;x.contains(k,L);)k-=v,L-=S;for(r.x=h,r.y=a,S=0;S<c.figures.count;S++){var T=c.figures.m[S],O=T.isFilled?k:o,E=T.isFilled?L:l,V=T.segments;x=T.startX,v=T.startY;for(var $=x,b=v,nt=0;nt<V.count;nt++){var et=V.m[nt],G=et.type,vt=et.endX,ft=et.endY,It=!1;switch(G){case _n:$=vt,b=ft;break;case fe:It=Gp(x,v,vt,ft,O,E,h,a,m);break;case un:It=j.Np(x,v,et.point1X,et.point1Y,et.point2X,et.point2Y,vt,ft,O,E,h,a,.6,m);break;case vr:It=j.Np(x,v,x+2/3*(et.point1X-x),v+2/3*(et.point1Y-v),vt+2/3*(et.point1X-vt),ft+2/3*(et.point1Y-ft),vt,ft,O,E,h,a,.6,m);break;case ye:case qn:G=et.type===ye?so(et,T):Gs(et,T,x,v);var Kt=G.length;if(Kt===0){It=Gp(x,v,et.type===ye?et.centerX:et.endX,et.type===ye?et.centerY:et.endY,O,E,h,a,m);break}for(ft=null,vt=0;vt<Kt;vt++){if(ft=G[vt],vt===0&&Gp(x,v,ft[0],ft[1],O,E,h,a,m)){var Se=zp(O,E,m,P,r);Se<P&&(P=Se,p=!0)}j.Np(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5],ft[6],ft[7],O,E,h,a,.6,m)&&(Se=zp(O,E,m,P,r),Se<P&&(P=Se,p=!0))}vt=ft[6],ft=ft[7];break;default:D("Unknown Segment type: "+G)}x=vt,v=ft,It&&(It=zp(O,E,m,P,r),It<P&&(P=It,p=!0)),et.isClosed&&(vt=$,ft=b,Gp(x,v,vt,ft,O,E,h,a,m)&&(et=zp(O,E,m,P,r),et<P&&(P=et,p=!0)))}}o=i-t,l=n-e,h=Math.sqrt(o*o+l*l),h!==0&&(o/=h,l/=h),r.x-=o*d,r.y-=l*d,N.free(m)}else D("Unknown Geometry type: "+c.type);return p?(this.transform.Aa(r),!0):!1};function zp(t,e,i,n,r){return t=i.x-t,e=i.y-e,e=t*t+e*e,e<n?(r.x=i.x,r.y=i.y,e):n}function Gp(t,e,i,n,r,o,l,h,a){var c=!1,p=(r-l)*(e-n)-(o-h)*(t-i);return p===0?!1:(a.x=((r*h-o*l)*(t-i)-(r-l)*(t*n-e*i))/p,a.y=((r*h-o*l)*(e-n)-(o-h)*(t*n-e*i))/p,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(a.y>t||j.aa(a.y,t))&&(a.y<e||j.aa(a.y,e))&&(c=!0)):(e=t<i?t:i,t=t<i?i:t,(a.x>e||j.aa(a.x,e))&&(a.x<t||j.aa(a.x,t))&&(c=!0)),c)}s.Ah=function(t,e){if(e===void 0)return t.Ge(this.actualBounds);var i=this.ma;i===null&&(this.measure(1/0,1/0),i=this.ma),i=i.bounds;var n=this.strokeWidth/2,r=!1,o=N.alloc();return o.h(i.x-n,i.y-n),t.$(e.Aa(o))&&(o.h(i.x-n,i.bottom+n),t.$(e.Aa(o))&&(o.h(i.right+n,i.bottom+n),t.$(e.Aa(o))&&(o.h(i.right+n,i.y-n),t.$(e.Aa(o))&&(r=!0)))),N.free(o),r},s.Lc=function(t,e){if(this.Ah(t,e)||e===void 0&&(e=this.transform,t.Ge(this.actualBounds)))return!0;var i=Mt.alloc();i.set(e),i.As();var n=t.left,r=t.right,o=t.top;t=t.bottom;var l=N.alloc();if(l.h(n,o),i.Aa(l),this.Bh(l,!0)||(l.h(r,o),i.Aa(l),this.Bh(l,!0))||(l.h(n,t),i.Aa(l),this.Bh(l,!0))||(l.h(r,t),i.Aa(l),this.Bh(l,!0)))return N.free(l),!0;var h=N.alloc(),a=N.alloc();return i.set(e),i.lv(this.transform),i.As(),h.x=r,h.y=o,h.transform(i),l.x=n,l.y=o,l.transform(i),e=!1,bs(this,l,h,a)?e=!0:(l.x=r,l.y=t,l.transform(i),bs(this,l,h,a)?e=!0:(h.x=n,h.y=t,h.transform(i),bs(this,l,h,a)?e=!0:(l.x=n,l.y=o,l.transform(i),bs(this,l,h,a)&&(e=!0)))),N.free(l),Mt.free(i),N.free(h),N.free(a),e};function bs(t,e,i,n){if(!t.vs(e,i,n))return!1;t=e.x,e=e.y;var r=i.x,o=i.y;return i=n.x,n=n.y,t===r?(e<o?(t=e,e=o):t=o,n>=t&&n<=e):(t<r?(n=t,t=r):n=r,i>=n&&i<=t)}s.Ox=function(t,e,i){function n(P,k){for(var L=P.length,T=0;T<L;T+=2)if(k.pd(P[T],P[T+1])>r)return!0;return!1}if(i&&this.fill!==null&&this.Bh(t,!0))return!0;var r=t.xf(e),o=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),e=this.ma,e===null&&(this.measure(1/0,1/0),e=this.ma,e===null))return!1;if(!i){var l=e.bounds,h=l.x,a=l.y,c=l.x+l.width;if(l=l.y+l.height,no(t.x,t.y,h,a)<=r&&no(t.x,t.y,c,a)<=r&&no(t.x,t.y,h,l)<=r&&no(t.x,t.y,c,l)<=r)return!0}if(h=e.startX,a=e.startY,c=e.endX,l=e.endY,e.type===tt.j){if(i=(h-c)*(t.x-c)+(a-l)*(t.y-l),pi(t.x,t.y,h,a,c,l)<=(0<=(c-h)*(t.x-h)+(l-a)*(t.y-a)&&0<=i?r:o))return!0}else{if(e.type===tt.D)return e=!1,i&&(e=pi(t.x,t.y,h,a,h,l)<=r||pi(t.x,t.y,h,a,c,a)<=r||pi(t.x,t.y,c,a,c,l)<=r||pi(t.x,t.y,h,l,c,l)<=r),e;if(e.type===tt.L){e=t.x-(h+c)/2,o=t.y-(a+l)/2;var p=Math.abs(c-h)/2,d=Math.abs(l-a)/2;if(p===0||d===0)return pi(t.x,t.y,h,a,c,l)<=r;if(i){if(t=j.xz(p,d,e,o),t*t<=r)return!0}else return!(no(e,o,-p,0)>=r||no(e,o,0,-d)>=r||no(e,o,0,d)>=r||no(e,o,p,0)>=r)}else if(e.type===tt.o){if(c=e.bounds,o=c.x,h=c.y,a=c.x+c.width,c=c.y+c.height,t.x>a&&t.x<o&&t.y>c&&t.y<h&&pi(t.x,t.y,o,h,o,c)>r&&pi(t.x,t.y,o,h,a,h)>r&&pi(t.x,t.y,a,c,o,c)>r&&pi(t.x,t.y,a,c,a,h)>r)return!1;if(o=Math.sqrt(r),i){if(this.fill===null?zw(e,t.x,t.y,o):Zg(e,t,o,!0,!1))return!0}else{for(i=e.figures,e=0;e<i.count;e++){if(o=i.m[e],l=o.startX,p=o.startY,t.pd(l,p)>r)return!1;for(h=o.segments.m,a=h.length,c=0;c<a;c++)switch(d=h[c],d.type){case _n:case fe:if(l=d.endX,p=d.endY,t.pd(l,p)>r)return!1;break;case un:var m=Et();if(j.Fe(l,p,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.8,m),l=n(m,t),Ut(m),l||(l=d.endX,p=d.endY,t.pd(l,p)>r))return!1;break;case vr:if(m=Et(),j.kq(l,p,d.point1X,d.point1Y,d.endX,d.endY,.8,m),l=n(m,t),Ut(m),l||(l=d.endX,p=d.endY,t.pd(l,p)>r))return!1;break;case ye:case qn:m=d.type===ye?so(d,o):Gs(d,o,l,p);var x=m.length;if(x===0){if(l=d.type===ye?d.centerX:d.endX,p=d.type===ye?d.centerY:d.endY,t.pd(l,p)>r)return!1;break}d=null;for(var v=Et(),S=0;S<x;S++)if(d=m[S],v.length=0,j.Fe(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.8,v),n(v,t))return Ut(v),!1;Ut(v),d!==null&&(l=d[6],p=d[7]);break;default:D("Unknown Segment type: "+d.type)}}return!0}}}return!1},s.fc=function(){this.ma=null},s.Mw=function(){return this.hg};function PM(t){var e=t.diagram;e!==null&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=vf,t.Ql!=="None"?(t.segmentIndex=-1,t.alignmentFocus=Xi):t.Uk!=="None"&&(t.segmentIndex=0,t.alignmentFocus=new at(1-Xi.x,Xi.y)))}gt.makeGeometry=function(t,e,i){if(t.toArrow!=="None")var n=Ir[t.toArrow];else t.fromArrow!=="None"?n=Ir[t.fromArrow]:(n=j.Qe[t.figure],typeof n=="string"&&(n=j.Qe[n]),n===void 0&&D("Unknown Shape.figure: "+t.figure),n=n(t,e,i),n.al=e,n.$k=i);if(n===null){var r=j.Qe.Rectangle;typeof r=="function"&&(n=r(t,e,i))}return n};function CM(t){var e=Ir[t];if(e===void 0){var i=t.toLowerCase();if(i==="none")return"None";if(e=Ir[i],e===void 0){var n=null,r;for(r in j.Gm)if(r.toLowerCase()===i){n=r;break}if(n!==null)return t=tt.parse(j.Gm[n],!1),Ir[n]=t,i!==n&&(Ir[i]=n),n}}return typeof e=="string"?e:e instanceof tt?t:null}Y.Object.defineProperties(gt.prototype,{geometry:{get:function(){return this.ma!==null?this.ma:this.Dd},set:function(t){var e=this.ma,i=this.Dd;if(e!==t){t!==null?this.Dd=this.ma=t.freeze():this.Dd=this.ma=null;var n=this.part;n!==null&&(n.Xf=NaN),this.s(),this.g("geometry",e||i,t),_l(this)&&(t=this.part,t!==null&&$s(this,t,"geometryString"))}}},geometryString:{get:function(){return this.geometry===null?"":this.geometry.toString()},set:function(t){t=tt.parse(t);var e=t.normalize();this.geometry=t,this.position=t=N.allocAt(-e.x,-e.y),N.free(t)}},isGeometryPositioned:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.s(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Tk},set:function(t){var e=this.Tk;e!==t&&(t!==null&&Gl(t,"Shape.fill"),t instanceof Ot&&t.freeze(),this.Tk=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(t!==null&&Gl(t,"Shape.stroke"),t instanceof Ot&&t.freeze(),this.Gc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.hg},set:function(t){var e=this.hg;if(e!==t)if(0<=t){this.hg=t,this.s();var i=this.part;i!==null&&(i.Xf=NaN),this.g("strokeWidth",e,t)}else st(t,"value >= 0",gt,"strokeWidth:value")}},strokeCap:{get:function(){return this.Jl},set:function(t){var e=this.Jl;e!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?st(t,'"butt", "round", or "square"',gt,"strokeCap"):(this.Jl=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Kl},set:function(t){var e=this.Kl;e!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?st(t,'"miter", "bevel", or "round"',gt,"strokeJoin"):(this.Kl=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Ij},set:function(t){var e=this.Ij;if(e!==t&&1<=t){this.Ij=t,this.N();var i=this.part;i!==null&&(i.Xf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.mh},set:function(t){var e=this.mh;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];0<=o&&isFinite(o)||D("strokeDashArray:value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.mh=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&0<=t&&(this.nh=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.wn},set:function(t){var e=this.wn;if(e!==t){var i=j.Qe[t];typeof i=="function"?i=t:(i=j.Qe[t.toLowerCase()])||D("Unknown Shape.figure: "+t),e!==i&&(t=this.part,t!==null&&(t.Xf=NaN),this.wn=i,this.Dd=null,this.fc(),this.s(),this.g("figure",e,i))}}},toArrow:{get:function(){return this.Ql},set:function(t){var e=this.Ql;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=CM(t);i===null?D("Unknown Shape.toArrow: "+t):e!==i&&(this.Ql=i,this.Dd=null,this.fc(),this.s(),PM(this),this.g("toArrow",e,i))}}},fromArrow:{get:function(){return this.Uk},set:function(t){var e=this.Uk;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=CM(t);i===null?D("Unknown Shape.fromArrow: "+t):e!==i&&(this.Uk=i,this.Dd=null,this.fc(),this.s(),PM(this),this.g("fromArrow",e,i))}}},spot1:{get:function(){return this.mf},set:function(t){var e=this.mf;e.A(t)||(this.mf=t=t.I(),this.s(),this.g("spot1",e,t))}},spot2:{get:function(){return this.nf},set:function(t){var e=this.nf;e.A(t)||(this.nf=t=t.I(),this.s(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Ko},set:function(t){var e=this.Ko;e!==t&&(this.Ko=t,this.fc(),this.s(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Lo},set:function(t){var e=this.Lo;e!==t&&(this.Lo=t,this.fc(),this.s(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){var t=this.desiredSize;return t.u()||this.ma===null?new _(0,0,t.width,t.height):(this.uc.assign(this.ma.bounds),this.uc)}},pathPattern:{get:function(){return this.No},set:function(t){var e=this.No;e!==t&&(this.No=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.s(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Zd},set:function(t){var e=this.Zd;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.Zd=t;var i=this.diagram;i!==null&&this.panel===i.grid&&Fo(i),this.s(),i=this.panel,i!==null&&(i.Rf=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Xd},set:function(t){var e=this.Xd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Xd=t,this.s(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Vd=t,this.s(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Wd},set:function(t){var e=this.Wd;e!==t&&(this.Wd=t,this.s(),this.g("graduatedSkip",e,t))}}}),gt.prototype.intersectsRect=gt.prototype.Lc,gt.prototype.containedInRect=gt.prototype.Ah,gt.prototype.getNearestIntersectionPoint=gt.prototype.vs,gt.prototype.getDocumentBounds=gt.prototype.Li,gt.prototype.getDocumentPoint=gt.prototype.da;var Ir=new Je,c0=new Je;gt.className="Shape",gt.getFigureGenerators=function(){var t=new pt,e;for(e in j.Qe)e!==e.toLowerCase()&&t.add(e,j.Qe[e]);return t.freeze(),t},gt.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=j.Qe;n[t]=e,n[i]=t},gt.getArrowheadGeometries=function(){var t=new pt;for(n in j.Gm)if(Ir[n]===void 0){var e=tt.parse(j.Gm[n],!1);Ir[n]=e,e=n.toLowerCase(),e!==n&&(Ir[e]=n)}for(var i in Ir)if(i!==i.toLowerCase()){var n=Ir[i];n instanceof tt&&t.add(i,n)}return t.freeze(),t},gt.defineArrowheadGeometry=function(t,e){var i=null;typeof e=="string"?i=tt.parse(e,!1):i=e,e=t.toLowerCase(),e!=="none"&&t!==e||D("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var n=Ir;n[t]=i,n[e]=t};function Yt(t,e){return ht.call(this),Kp||(Ni=Un?new Tn(null).context:null,Kp=!0),this.Xb="",this.Gc="black",this.qe="13px sans-serif",this.ti="start",this.Ud=ce,this.Ai=Hg,this.oj=!0,this.ai=this.bi=!1,this.$f=jM,this.lg=OM,this.vr=this.sb=this.Xc=0,this.Pt=this.Qt=null,this.tn=!1,this.md=this.Wm=this.yp=this.ui=this.zp=null,this.lf=this.kf=0,this.Yh=y0,this.we=1/0,this.ei=0,this.re=null,this.Ce=0,this.pe=this.Sb=this.Cc=null,this.Zd=1,this.Xd=0,this.Vd=1,this.Wd=this.hj=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}z(Yt,ht),Yt.prototype.cloneProtected=function(t){ht.prototype.cloneProtected.call(this,t),t.Xb=this.Xb,t.Gc=this.Gc,t.qe=this.qe,t.ti=this.ti,t.Ud=this.Ud,t.Ai=this.Ai,t.oj=this.oj,t.bi=this.bi,t.ai=this.ai,t.$f=this.$f,t.lg=this.lg,t.Xc=this.Xc,t.vr=this.vr,t.sb=this.sb,t.Qt=this.Qt,t.Pt=this.Pt,t.tn=this.tn,t.zp=this.zp,t.ui=this.ui,t.yp=this.yp,t.Wm=this.Wm,t.md=this.md,t.kf=this.kf,t.lf=this.lf,t.Yh=this.Yh,t.we=this.we,t.re=this.re,t.Ce=this.Ce,t.Cc=this.Cc,t.Sb=this.Sb,t.pe=this.pe,t.ei=this.ei,t.Zd=this.Zd,t.Xd=this.Xd,t.Vd=this.Vd,t.hj=this.hj,t.Wd=this.Wd};function NM(t,e){t.G=e.G|6144,t.mb=e.opacity,t.Ub=e.background,t.hd=e.areaBackground,t.Tc=e.desiredSize.I(),t.Zf=e.minSize.I(),t.Yf=e.maxSize.I(),e.Bb!==null?t.Bb=e.Bb.copy():t.Bb=null,t.sa=e.scale,t.zb=e.angle,t.Ee=e.stretch,t.Ug=e.margin.I(),t.yb=e.alignment.I(),t.wk=e.alignmentFocus.I(),t.zl=e.segmentFraction,t.Al=e.segmentOffset.I(),t.Bl=e.segmentOrientation,e.$a!==null&&(t.$a=e.$a.copy()),t.Dl=e.shadowVisible,e instanceof Yt&&(t.Xb=e.Xb,t.Gc=e.Gc,t.qe=e.qe,t.ti=e.ti,t.Ud=e.Ud,t.Ai=e.Ai,t.oj=e.oj,t.bi=e.bi,t.ai=e.ai,t.$f=e.$f,t.lg=e.lg,t.re=null,t.kf=e.kf,t.lf=e.lf,t.we=e.we,t.ei=e.ei,t.Zd=e.Zd,t.Xd=e.Xd,t.Vd=e.Vd,t.hj=e.hj,t.Wd=e.Wd)}s=Yt.prototype,s.gb=function(t){t.classType===Yt?this.wrap=t:ht.prototype.gb.call(this,t)},s.toString=function(){return 22<this.Xb.length?'TextBlock("'+this.Xb.substring(0,20)+'"...)':'TextBlock("'+this.Xb+'")'},s.s=function(){ht.prototype.s.call(this),this.Pt=this.Qt=null},s.Ei=function(t,e){if(this.Gc!==null&&this.Xb.length!==0&&this.qe!==null){var i=this.naturalBounds,n=this.actualBounds,r=i.width,o=i.height,l=cf(this),h=t.textAlign=this.ti,a=e.Vn;h==="start"?h=a?"right":"left":h==="end"&&(h=a?"left":"right"),a=this.bi;var c=this.ai;Qi(this,t,this.Gc,!0,!1,i,n),(a||c)&&Qi(this,t,this.Gc,!1,!1,i,n),n=0,i=!1;var p=this.fe,d=p.dx-(l*p.m21+p.dx);p=p.dy-(l*p.m22+p.dy);var m=e.scale;switch(8>(d*d+p*p)*m*m&&(i=!0),e.Vb!==t&&(i=!1),e.Ie("textGreeking")===!1&&(i=!1),e=this.kf,d=this.lf,this.flip){case ba:t.translate(r,0),t.scale(-1,1);break;case qa:t.translate(0,o),t.scale(1,-1);break;case tf:t.translate(r,o),t.scale(-1,-1)}if(t.Ed(),p=this.Xc,m=(e+l+d)*p,o>m&&(n=this.Ai,n=n.y*o-n.y*m+n.offsetY),p===1&&this.pe!==null)d=this.sb,d>r&&(d=r),this.Di(this.pe,t,0,n+e,r,l,d,i,h,a,c);else if(this.Cc!==null&&this.Sb!==null)for(m=0;m<p;m++){var x=this.Cc[m];x>r&&(x=r),n+=e,this.Di(this.Sb[m],t,0,n,r,l,x,i,h,a,c),n+=l+d}switch(this.flip){case ba:t.scale(-1,1),t.translate(-r,0);break;case qa:t.scale(1,-1),t.translate(0,-o);break;case tf:t.scale(-1,-1),t.translate(-r,-o)}}},s.Di=function(t,e,i,n,r,o,l,h,a,c,p){var d=0;h?(a==="left"?d=0:a==="right"?d=r-l:a==="center"&&(d=(r-l)/2),e.fillRect(i+d,n+.25*o,l,1)):(a==="left"?d=0:a==="right"?d=r:a==="center"&&(d=r/2),r=Yp!==null?Yp(this,o):.75*o,e.fillText(t,i+d,n+r),t=o/20|0,t===0&&(t=1),a==="right"?d-=l:a==="center"&&(d-=l/2),c&&(a=Xp!==null?Xp(this,o):.8*o,e.beginPath(),e.lineWidth=t,e.moveTo(i+d,n+a),e.lineTo(i+d+l,n+a),e.stroke()),p&&(e.beginPath(),e.lineWidth=t,n=n+o-o/2.2|0,t%2!==0&&(n+=.5),e.moveTo(i+d,n),e.lineTo(i+d+l,n),e.stroke()))},s.gm=function(t,e,i,n){this.ei=t;var r=this.qe;Ni!==null&&IM!==r&&(IM=Ni.font=r),this.sb=this.Ce=0,this.pe=this.Sb=this.Cc=this.re=null;var o;if(isNaN(this.desiredSize.width)){if(r=this.Xb.replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.length===0)r=0;else if(this.isMultiline){for(var l=o=0,h=!1;!h;){var a=r.indexOf(`
`,l);a===-1&&(a=r.length,h=!0),l=r.substr(l,a-l),this.Yh===y0&&(l=l.trim()),o=Math.max(o,Gn(l)),l=a+1}r=o}else o=r.indexOf(`
`,0),0<=o&&(r=r.substr(0,o)),r=Gn(r);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.desiredSize.width;if(this.panel!==null&&(r=Math.min(r,this.panel.maxSize.width)),o=LM(this,r),isNaN(this.desiredSize.height)?o=Math.min(o,e/this.scale):o=this.desiredSize.height,h=o,this.sb!==0&&this.Cc!==null&&this.Sb!==null&&this.$f===Wp&&(e=this.qe,e=this.$f===Wp?TM(e):0,a=this.kf+this.lf,a=Math.max(0,cf(this)+a),h=Math.min(this.maxLines-1,Math.max(Math.floor(h/a+.01)-1,0)),!(h+1>=this.Sb.length))){for(a=this.Sb[h],e=Math.max(1,t-e);Gn(a)>e&&1<a.length;)a=a.substr(0,a.length-1);a+=pf,e=Gn(a),this.Sb[h]=a,this.Sb=this.Sb.slice(0,h+1),this.Cc[h]=e,this.Cc=this.Cc.slice(0,h+1),this.Ce=this.Sb.length,this.sb=Math.max(this.sb,e),this.Xc=this.Ce,this.Xc===1&&(this.pe=this.Sb[0])}(this.wrap===EM||isNaN(this.desiredSize.width))&&(r=isNaN(t)?this.sb:Math.min(t,this.sb),isNaN(this.desiredSize.width)&&(r=Math.max(8,r))),r=Math.max(i,r),o=Math.max(n,o),ro(this.uc,r,o),this.xe(0,0,r,o)},s.zh=function(t,e,i,n){Xm(this,t,e,i,n)};function ff(t,e,i){t.pe===null?(t.pe=e,t.sb=i):((t.Sb===null||t.Cc===null)&&(t.Sb=[],t.Cc=[],t.Sb.push(t.pe),t.Cc.push(t.sb)),t.Sb.push(e),t.Cc.push(i))}function p0(t,e,i,n){var r=t.Yh===y0;r&&(e=e.trim());var o=0,l=t.qe,h=t.kf+t.lf;h=Math.max(0,cf(t)+h);var a=t.$f===Wp?TM(l):0;if(t.Xc>=t.we)n!==null&&n.h(0,h);else if(l=e,t.lg===d0){t.Ce=1;var c=Gn(e);if(a===0||c<=i)t.sb=Math.max(t.sb,c),ff(t,e,t.sb),n!==null&&n.h(c,h);else{for(o=xh(t,l),l=l.substr(o.length),e=xh(t,l),c=Gn(o+e);0<e.length&&c<=i;)o+=e,l=l.substr(e.length),e=xh(t,l),c=o+e,r&&(c=c.trim()),c=Gn(c);for(r&&(e=e.trim()),o+=e,i=Math.max(1,i-a);Gn(o)>i&&1<o.length;)o=o.substr(0,o.length-1);o+=pf;var p=Gn(o);t.sb=p,ff(t,o,p),n!==null&&n.h(p,h)}}else{for(a=0,l.length===0&&(a=1,ff(t,l,0));0<l.length;){for(e=xh(t,l),l=l.substr(e.length);Gn(e)>i;){var d=1;for(c=Gn(e.substr(0,d)),p=0;c<=i;)d++,p=c,c=Gn(e.substr(0,d));if(d===1){var m=c;o=Math.max(o,c)}else m=p,o=Math.max(o,p);if(d--,1>d&&(d=1),ff(t,e.substr(0,d),m),a++,e=e.substr(d),t.Xc+a>t.we)break}for(p=xh(t,l),c=Gn(e+p);0<p.length&&c<=i;)e+=p,l=l.substr(p.length),p=xh(t,l),c=e+p,r&&(c=c.trim()),c=Gn(c);if(r&&(e=e.trim()),e!==""&&(e[e.length-1]==="\xAD"&&(e=e.substring(0,e.length-1)+"\u2010"),p.length===0?(d=c,o=Math.max(o,c)):(d=p=Gn(e),o=Math.max(o,p)),ff(t,e,d),a++,t.Xc+a>t.we))break}t.Ce=Math.min(t.we,a),t.sb=Math.max(t.sb,o),n!==null&&n.h(t.sb,h*t.Ce)}}function xh(t,e){if(t.lg===AM)return e.substr(0,1);for(var i=e.length,n=0,r=JT;n<i&&!r.test(e.charAt(n));)n++;for(t.Yh===$T&&(i=Math.min(i,n+1));n<i&&r.test(e.charAt(n));)n++;return n>=e.length?e:e.substr(0,n)}function Gn(t){return Ni===null?8*t.length:Ni.measureText(t).width}function cf(t){if(t.re!==null)return t.re;var e=t.qe;if(Ni===null){var i=16;return t.re=i}return g0[e]!==void 0&&5e3>DM?i=g0[e]:(i=1.3*Ni.measureText("M").width,g0[e]=i,DM++),t.re=i}function TM(t){if(Ni===null)return 6;if(Hp[t]!==void 0&&5e3>m0)var e=Hp[t];else e=Ni.measureText(pf).width,Hp[t]=e,m0++;return e}function LM(t,e){var i=t.Xb.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n=t.kf+t.lf;if(n=Math.max(0,cf(t)+n),i.length===0)return t.sb=0,t.Xc=1,n;if(!t.isMultiline){var r=i.indexOf(`
`,0);0<=r&&(i=i.substr(0,r))}r=0;for(var o=t.Xc=0,l,h=!1;!h;){if(l=i.indexOf(`
`,o),l===-1&&(l=i.length,h=!0),o<=l){if(o=i.substr(o,l-o),t.lg!==d0){t.Ce=0;var a=yt.alloc();p0(t,o,e,a),r+=a.height,yt.free(a),t.Xc+=t.Ce}else p0(t,o,e,null),r+=n,t.Xc++;t.Xc===t.we&&(h=!0)}o=l+1}return t.vr=r}Y.Object.defineProperties(Yt.prototype,{font:{get:function(){return this.qe},set:function(t){var e=this.qe;e!==t&&(this.qe=t,this.re=null,this.s(),this.g("font",e,t))}},text:{get:function(){return this.Xb},set:function(t){var e=this.Xb;t!=null?t=t.toString():t="",e!==t&&(this.Xb=t,this.s(),this.g("text",e,t))}},textAlign:{get:function(){return this.ti},set:function(t){var e=this.ti;e===t||t!=="start"&&t!=="end"&&t!=="left"&&t!=="right"&&t!=="center"||(this.ti=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.Ud},set:function(t){var e=this.Ud;e!==t&&(this.Ud=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e.A(t)||(this.Ai=t=t.I(),hh(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.uc.u()){var t=yt.alloc();p0(this,this.Xb,999999,t);var e=t.width;yt.free(t),t=LM(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),ro(this.uc,e,t)}return this.uc}},isMultiline:{get:function(){return this.oj},set:function(t){var e=this.oj;e!==t&&(this.oj=t,this.s(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.lg},set:function(t){var e=this.lg;e!==t&&(this.lg=t,this.s(),this.g("wrap",e,t))}},overflow:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.s(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(t!==null&&Gl(t,"TextBlock.stroke"),t instanceof Ot&&t.freeze(),this.Gc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Xc}},lineHeight:{get:function(){return cf(this)}},editable:{get:function(){return this.tn},set:function(t){var e=this.tn;e!==t&&(this.tn=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.zp},set:function(t){var e=this.zp;e!==t&&(this.zp=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.md},set:function(t){var e=this.md;e!==t&&(this.md=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Zd},set:function(t){var e=this.Zd;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.Zd=t,this.s();var i=this.panel;i!==null&&(i.Rf=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Xd},set:function(t){var e=this.Xd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Xd=t,this.s(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Vd=t,this.s(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.hj},set:function(t){var e=this.hj;e!==t&&(this.hj=t,this.s(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Wd},set:function(t){var e=this.Wd;e!==t&&(this.Wd=t,this.s(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.ui},set:function(t){var e=this.ui;e!==t&&(this.ui=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.yp},set:function(t){var e=this.yp;e!==t&&(this.yp=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.kf},set:function(t){var e=this.kf;e!==t&&(this.kf=t,this.s(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.s(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.Yh},set:function(t){var e=this.Yh;e!==t&&(this.Yh=t,this.s(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.we},set:function(t){var e=this.we;e!==t&&(t=Math.floor(t),0>=t&&st(t,"> 0",Yt,"maxLines"),this.we=t,this.s(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:this.Cc!==null?this.Cc:[this.sb],arrText:this.Sb!==null?this.Sb:[this.pe],maxLineWidth:this.sb,fontHeight:this.re}}},choices:{get:function(){return this.Wm},set:function(t){var e=this.Wm;e!==t&&(this.Wm=t,this.g("choices",e,t))}}});var Yp=null,Xp=null,d0=new K(Yt,"None",0),EM=new K(Yt,"WrapFit",1),OM=new K(Yt,"WrapDesiredSize",2),AM=new K(Yt,"WrapBreakAll",3),jM=new K(Yt,"OverflowClip",0),Wp=new K(Yt,"OverflowEllipsis",1),y0=new K(Yt,"FormatTrim",0),$T=new K(Yt,"FormatNone",0),JT=/[ \u200b\u00ad]/,g0=new Je,DM=0,Hp=new Je,m0=0,pf="...",IM="",Ni=null,Kp=!1;Yt.className="TextBlock",Yt.getEllipsis=function(){return pf},Yt.setEllipsis=function(t){pf=t,Hp=new Je,m0=0},Yt.getBaseline=function(){return Yp},Yt.setBaseline=function(t){Yp=t},Yt.getUnderline=function(){return Xp},Yt.setUnderline=function(t){Xp=t},Yt.isValidFont=function(t){if(Kp||(Ni=Un?new Tn(null).context:null,Kp=!0),Ni===null)return!0;var e=Ni.font;if(t===e||t==="10px sans-serif")return!0;Ni.font="10px sans-serif",Ni.font=t;var i=Ni.font;if(i!=="10px sans-serif")return Ni.font=e,!0;Ni.font="19px serif";var n=Ni.font;return Ni.font=t,i=Ni.font,Ni.font=e,i!==n},Yt.None=d0,Yt.WrapFit=EM,Yt.WrapDesiredSize=OM,Yt.WrapBreakAll=AM,Yt.OverflowClip=jM,Yt.OverflowEllipsis=Wp;function Ii(t,e){ht.call(this),this.Lg=null,this.rp="",this.lh=Lw,this.Wk=he,this.oh=this.md=null,this.Vk=_t,this.Ud=ce,this.Ml=null,this.Rn=!1,this.ar=!0,this.kl=!1,this.Fl=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}var wh;z(Ii,ht),Ii.prototype.cloneProtected=function(t){ht.prototype.cloneProtected.call(this,t),t.element=this.Lg,t.rp=this.rp,t.lh=this.lh.I(),t.Wk=this.Wk,t.Ud=this.Ud,t.md=this.md,t.oh=this.oh,t.Vk=this.Vk.I(),t.ar=this.ar,t.Fl=this.Fl},Ii.prototype.gb=function(t){t===ce||t===xr||t===Qa?this.imageStretch=t:ht.prototype.gb.call(this,t)},Ii.prototype.toString=function(){return"Picture("+this.source+")#"+Ce(this)};function Sh(t){t===void 0&&(t=""),t!==""?wh[t]&&(delete wh[t],$p--):(wh=new Je,$p=0)}function FM(t,e){e.Py||(e.ur=function(i){e.lr=!0,e.Ln=!1;var n=e.Hg.copy();if(n!=null){for(n=n.iterator;n.next();){var r=n.value,o=e.getAttribute("src")||"",l=r.eh.H(o);if(l!==null)for(var h=l.length,a=0;a<h;a++)o=l[a],r.Oo.add(o),r.Fb(),e.En&&(e.bu===void 0&&(e.bu=i),o.oh!==null&&o.oh(o,i))}e.Hg.clear()}t.desiredSize.u()||(pn(t,!1),t.s())},e.Xq=function(i){e.Ln=i;var n=e.Hg.copy();if(n!=null){for(n=n.iterator;n.next();){var r=n.value,o=e.getAttribute("src")||"",l=r.eh.H(o);if(l!==null){r=l.length,o=Et();for(var h=0;h<r;h++)o.push(l[h]);if(e.En)for(h=0;h<r;h++)l=o[h],l.md!==null&&l.md(l,i);Ut(o)}}e.Hg.clear()}},e.addEventListener("load",e.ur),e.addEventListener("error",e.Xq),e.Py=!0)}function RM(t){t.ur&&t.removeEventListener("load",t.ur),t.Xq&&t.removeEventListener("error",t.Xq),delete t.ur,delete t.Xq}Ii.prototype.DA=function(){if(this.source!==""){Sh(this.source);var t=this.source;this.source="",this.source=t}},Ii.prototype.redraw=function(){this.N()},Ii.prototype.Ei=function(t,e){var i=this.Lg;if(i!==null){var n=i.getAttribute("src");if(!(i instanceof HTMLImageElement&&(n===null||n==="")||i.Ln instanceof Event&&t instanceof Qs)){n=this.naturalBounds;var r=0,o=0,l=this.Rn,h=l?+i.width:i.naturalWidth;if(l=l?+i.height:i.naturalHeight,h===void 0&&i.videoWidth&&(h=i.videoWidth),l===void 0&&i.videoHeight&&(l=i.videoHeight),h=h||n.width,l=l||n.height,h!==0&&l!==0){var a=h,c=l;this.sourceRect.u()&&(r=this.lh.x,o=this.lh.y,h=this.lh.width,l=this.lh.height);var p=h,d=l,m=this.Wk,x=this.Vk;switch(m){case ce:if(this.sourceRect.u())break;p>=n.width&&(r=r+x.offsetX+(p*x.x-n.width*x.x)),d>=n.height&&(o=o+x.offsetY+(d*x.y-n.height*x.y)),h=Math.min(n.width,p),l=Math.min(n.height,d);break;case he:p=n.width,d=n.height;break;case xr:case Qa:m===xr?(m=Math.min(n.height/d,n.width/p),p*=m,d*=m):m===Qa&&(m=Math.max(n.height/d,n.width/p),p*=m,d*=m,p>=n.width&&(r=(r+x.offsetX+(p*x.x-n.width*x.x)/p)*h),d>=n.height&&(o=(o+x.offsetY+(d*x.y-n.height*x.y)/d)*l),h*=1/(p/n.width),l*=1/(d/n.height),p=n.width,d=n.height)}m=this.Af()*e.scale;var v=p*m*d*m,S=h*l/v,P=i.__goCache;m=null;var k=ZT;if(i.lr&&P!==void 0&&4<v&&S>k*k)for(P.Ci===null&&(VM(P,4,a,c,i),VM(P,16,a,c,i)),a=P.Ci,c=a.length,v=0;v<c&&a[v].ratio*a[v].ratio<S;v++)m=a[v];if(!e.qn){if(this.Ml===null)if(this.Lg===null)this.Ml=!1;else{a=new Tn(null).context,a.drawImage(this.Lg,0,0);try{a.getImageData(0,0,1,1).data[3]&&(this.Ml=!1),this.Ml=!1}catch{this.Ml=!0}}if(this.Ml)return}switch(a=0,p<n.width&&(a=x.offsetX+(n.width*x.x-p*x.x)),c=0,d<n.height&&(c=x.offsetY+(n.height*x.y-d*x.y)),this.flip){case ba:t.translate(Math.min(n.width,p),0),t.scale(-1,1);break;case qa:t.translate(0,Math.min(n.height,d)),t.scale(1,-1);break;case tf:t.translate(Math.min(n.width,p),Math.min(n.height,d)),t.scale(-1,-1)}if(t.Ed(),e.Ie("pictureRatioOptimization")&&!e.nj&&P!==void 0&&m!==null&&m.ratio!==1){t.save(),e=m.ratio;try{t.drawImage(m.source,r/e,o/e,Math.min(m.source.width,h/e),Math.min(m.source.height,l/e),a,c,Math.min(n.width,p),Math.min(n.height,d))}catch{this.ar=!1}t.restore()}else try{t.drawImage(i,r,o,h,l,a,c,Math.min(n.width,p),Math.min(n.height,d))}catch{this.ar=!1}switch(this.flip){case ba:t.scale(-1,1),t.translate(-Math.min(n.width,p),0);break;case qa:t.scale(1,-1),t.translate(0,-Math.min(n.height,d));break;case tf:t.scale(-1,-1),t.translate(-Math.min(n.width,p),-Math.min(n.height,d))}}}}},Ii.prototype.gm=function(t,e,i,n){var r=this.desiredSize,o=ir(this,!0),l=this.Lg,h=this.Rn;(h||!this.kl&&l&&l.complete)&&(this.kl=!0),l===null&&(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)),isFinite(r.width)||o===he||o===Xe?(isFinite(t)||(this.sourceRect.u()?t=this.sourceRect.width:l!==null&&(t=h?+l.width:l.naturalWidth)),i=0):l!==null&&this.kl!==!1&&(t=this.sourceRect.u()?this.sourceRect.width:h?+l.width:l.naturalWidth),isFinite(r.height)||o===he||o===be?(isFinite(e)||(this.sourceRect.u()?e=this.sourceRect.height:l!==null&&(e=h?+l.height:l.naturalHeight)),n=0):l!==null&&this.kl!==!1&&(e=this.sourceRect.u()?this.sourceRect.height:h?+l.height:l.naturalHeight),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,o=this.minSize,i=Math.max(i||0,o.width),n=Math.max(n||0,o.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(i,t),e=Math.max(n,e),l===null||l.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),ro(this.uc,t,e),this.xe(0,0,t,e)},Ii.prototype.zh=function(t,e,i,n){Xm(this,t,e,i,n)},Y.Object.defineProperties(Ii.prototype,{element:{get:function(){return this.Lg},set:function(t){var e=this.Lg;if(e!==t){this.Rn=t instanceof HTMLCanvasElement;var i=t instanceof HTMLImageElement;e instanceof HTMLImageElement&&RM(e),t===null||i||t instanceof HTMLVideoElement||this.Rn||D("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var n=this.diagram;n!==null&&Om(n,this),this.Lg=t,t!==null&&i&&t.Hg===void 0&&(t.Hg=new Q),n!==null&&i&&Em(n,this),t!==null&&(this.Rn||t.complete===!0?(t.En&&(t.Ln instanceof Event&&this.md!==null?this.md(this,t.Ln):t.lr===!0&&!t.Ln&&this.oh!==null&&t.bu&&this.oh(this,t.bu)),t.lr=!0,this.desiredSize.u()||(pn(this,!1),this.s())):i&&FM(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.rp},set:function(t){var e=this.rp;if(e!==t){this.rp=t;var i=wh;if(Un){if(i[t]!==void 0)var n=i[t];else if(t!==""){30<$p&&(Sh(),i=wh),n=J("img"),n.En=!0,FM(this,n);var r=this.Fl;r!==null&&(n.crossOrigin=r(this)),n.src=t,i[t]=n,$p++}this.element=n,n!==null&&n.__goCache===void 0&&(n.__goCache=new BM),this.s(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.Fl},set:function(t){if(this.Fl!==t&&(this.Fl=t,this.element!==null)){var e=this.element.getAttribute("src");t===null&&typeof e=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.lh},set:function(t){var e=this.lh;e.A(t)||(this.lh=t=t.I(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Wk},set:function(t){var e=this.Wk;e!==t&&(this.Wk=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Ud},set:function(t){var e=this.Ud;e!==t&&(this.Ud=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Vk},set:function(t){var e=this.Vk;e.A(t)||(this.Vk=t=t.I(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.md},set:function(t){var e=this.md;e!==t&&(this.md=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.oh},set:function(t){var e=this.oh;e!==t&&(this.oh=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.uc}}}),Ii.prototype.redraw=Ii.prototype.redraw,Ii.prototype.reloadSource=Ii.prototype.DA;var $p=0,ZT=4;Ii.className="Picture",wh=new Je,Ii.clearCache=Sh;function BM(){this.Ci=null}function VM(t,e,i,n,r){t.Ci===null&&(t.Ci=[]);var o=new Tn(null),l=o.context,h=1/e;o.width=i/e,o.height=n/e,o.width!==0&&o.height!==0&&(e=new _M(o.La,e),i=1,0<t.Ci.length&&(i=t.Ci[t.Ci.length-1],r=i.source,i=i.ratio),l.setTransform(h*i,0,0,h*i,0,0),l.Ed(),l.drawImage(r,0,0),t.Ci.push(e))}BM.className="PictureCacheArray";function _M(t,e){this.source=t,this.ratio=e}_M.className="PictureCacheInstance";function Yl(){this.ss=new tt,this.jc=null}Yl.prototype.reset=function(t){t!==null?(t.ea(),this.ss=t,t.figures.clear()):this.ss=new tt,this.jc=null};function Mh(t,e,i,n,r){t.jc=new Qe,t.jc.startX=e,t.jc.startY=i,t.jc.isFilled=n,t.ss.figures.add(t.jc),r!==void 0&&(t.jc.isShadowed=r)}function QT(t){var e=t.jc.segments.length;0<e&&t.jc.segments.J(e-1).close()}Yl.prototype.zm=function(t){this.jc.isShadowed=t},Yl.prototype.moveTo=function(t,e,i){i===void 0&&(i=!1);var n=new Vt(_n);n.endX=t,n.endY=e,i&&n.close(),this.jc.segments.add(n)},Yl.prototype.lineTo=function(t,e,i){i===void 0&&(i=!1);var n=new Vt(fe);n.endX=t,n.endY=e,i&&n.close(),this.jc.segments.add(n)};function zo(t,e,i,n,r,o,l){var h;h===void 0&&(h=!1);var a=new Vt(un);a.point1X=e,a.point1Y=i,a.point2X=n,a.point2Y=r,a.endX=o,a.endY=l,h&&a.close(),t.jc.segments.add(a)}function Jp(t,e,i,n,r){var o;o===void 0&&(o=!1);var l=new Vt(vr);l.point1X=e,l.point1Y=i,l.endX=n,l.endY=r,o&&l.close(),t.jc.segments.add(l)}Yl.prototype.arcTo=function(t,e,i,n,r,o,l){o===void 0&&(o=0),l===void 0&&(l=!1);var h=new Vt(ye);h.startAngle=t,h.sweepAngle=e,h.centerX=i,h.centerY=n,h.radiusX=r,h.radiusY=o!==0?o:r,l&&h.close(),this.jc.segments.add(h)};function qT(t,e,i,n,r,o,l,h){var a;a===void 0&&(a=!1),e=new Vt(qn,l,h,e,i,n,r,o),a&&e.close(),t.jc.segments.add(e)}function UM(t){var e=Zp;return e!==null?(Zp=null,e.reset(t),e):(e=new Yl,e.reset(t),e)}var Zp=null;Yl.className="StreamGeometryContext";function Fi(t,e){var i=t.toLowerCase(),n=j.Qe;n[t]=e,n[i]=t}Fi("Rectangle",function(t,e,i){t="r"+e+","+i;var n=j.Jf[t];return n!==void 0||(n=new tt(tt.D),n.endX=e,n.endY=i,j.Kf<j.Hm&&(j.Jf[t]=n,j.Kf++)),n}),Fi("Square",function(t,e,i){t="s"+e+","+i;var n=j.Jf[t];return n!==void 0||(n=new tt(tt.D),n.endX=e,n.endY=i,n.defaultStretch=xr,j.Kf<j.Hm&&(j.Jf[t]=n,j.Kf++)),n}),Fi("RoundedRectangle",function(t,e,i){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3),t=Math.min(t,i/3);var n="rr"+e+","+i+","+t,r=j.Jf[n];if(r!==void 0)return r;var o=t*j.vg;return r=new tt().add(new Qe(t,0,!0).add(new Vt(fe,e-t,0)).add(new Vt(un,e,t,e-o,0,e,o)).add(new Vt(fe,e,i-t)).add(new Vt(un,e-t,i,e,i-o,e-o,i)).add(new Vt(fe,t,i)).add(new Vt(un,0,i-t,o,i,0,i-o)).add(new Vt(fe,0,t)).add(new Vt(un,t,0,0,o,o,0).close())),1<o&&(r.spot1=new at(0,0,o,o),r.spot2=new at(1,1,-o,-o)),j.Kf<j.Hm&&(j.Jf[n]=r,j.Kf++),r}),Fi("Border","RoundedRectangle"),Fi("Ellipse",function(t,e,i){t="e"+e+","+i;var n=j.Jf[t];return n!==void 0||(n=new tt(tt.L),n.endX=e,n.endY=i,n.spot1=Kg,n.spot2=$g,j.Kf<j.Hm&&(j.Jf[t]=n,j.Kf++)),n}),Fi("Circle",function(t,e,i){t="c"+e+","+i;var n=j.Jf[t];return n!==void 0||(n=new tt(tt.L),n.endX=e,n.endY=i,n.spot1=Kg,n.spot2=$g,n.defaultStretch=xr,j.Kf<j.Hm&&(j.Jf[t]=n,j.Kf++)),n}),Fi("TriangleRight",function(t,e,i){return new tt().add(new Qe(0,0).add(new Vt(fe,e,.5*i)).add(new Vt(fe,0,i).close())).Am(0,.25,.5,.75)}),Fi("TriangleDown",function(t,e,i){return new tt().add(new Qe(0,0).add(new Vt(fe,e,0)).add(new Vt(fe,.5*e,i).close())).Am(.25,0,.75,.5)}),Fi("TriangleLeft",function(t,e,i){return new tt().add(new Qe(e,i).add(new Vt(fe,0,.5*i)).add(new Vt(fe,e,0).close())).Am(.5,.25,1,.75)}),Fi("TriangleUp",function(t,e,i){return new tt().add(new Qe(e,i).add(new Vt(fe,0,i)).add(new Vt(fe,.5*e,0).close())).Am(.25,.5,.75,1)}),Fi("Triangle","TriangleUp"),Fi("Diamond",function(t,e,i){return new tt().add(new Qe(.5*e,0).add(new Vt(fe,0,.5*i)).add(new Vt(fe,.5*e,i)).add(new Vt(fe,e,.5*i).close())).Am(.25,.25,.75,.75)}),Fi("LineH",function(t,e,i){return t=new tt(tt.j),t.startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t}),Fi("LineV",function(t,e,i){return t=new tt(tt.j),t.startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t}),Fi("None","Rectangle"),Fi("BarH","Rectangle"),Fi("BarV","Rectangle"),Fi("MinusLine","LineH"),Fi("PlusLine",function(t,e,i){return new tt().add(new Qe(0,i/2,!1).add(new Vt(fe,e,i/2)).add(new Vt(_n,e/2,0)).add(new Vt(fe,e/2,i)))}),Fi("XLine",function(t,e,i){return new tt().add(new Qe(0,i,!1).add(new Vt(fe,e,0)).add(new Vt(_n,0,0)).add(new Vt(fe,e,i)))}),j.Gm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function ut(t,e){t===void 0||t instanceof ge||typeof t=="string"?X.call(this,t):(X.call(this),t&&(e=t)),this.F=2408959,this.Tg=this.Nf="",this.Yo=this.Uo=this.hp=this.eo=null,this.jp="",this.Lf=this.On=this.ip=this.jh=null,this.Wo="",this.Vo=jg,this.Xb=this.Zo="",this.fi=this.Zm=this.Rh=null,this.Wf=new N(NaN,NaN).freeze(),this.lo="",this.cf=null,this.mo=di,this.$o=Pi,this.uo=cw,this.no=pw,this.pn=null,this.fo=127,this.op=dw,this.np="gray",this.gg=4,this.Sw=-1,this.Kp=NaN,this.Oy=new _,this.li=null,this.Xf=NaN,e&&Object.assign(this,e)}z(ut,X),ut.prototype.cloneProtected=function(t){X.prototype.cloneProtected.call(this,t),t.F=this.F&-4097|49152,t.Nf=this.Nf,t.Tg=this.Tg,t.eo=this.eo,t.hp=this.hp,t.Uo=this.Uo,t.Yo=this.Yo,t.jp=this.jp,t.ip=this.ip,t.On=this.On,t.Lf=null,t.Wo=this.Wo,t.Vo=this.Vo.I(),t.Zo=this.Zo,t.$o=this.$o.I(),t.Xb=this.Xb,t.Zm=this.Zm,t.Wf.assign(this.Wf),t.lo=this.lo,t.mo=this.mo.I(),t.uo=this.uo.I(),t.no=this.no.I(),t.pn=this.pn,t.fo=this.fo,t.op=this.op.I(),t.np=this.np,t.gg=this.gg,t.Kp=this.Kp},ut.prototype.wf=function(t){X.prototype.wf.call(this,t),t.Gh(),t.jh=null,t.cf=null,t.li=null},ut.prototype.toString=function(){var t=Gi(this.constructor)+"#"+Ce(this);return this.data!==null&&(t+="("+ii(this.data)+")"),t},ut.prototype.nk=function(t,e,i,n,r,o,l){var h=this.diagram;h!==null&&(t===ve&&e==="elements"?r instanceof X?qs(r,function(a){W0(h.partManager,a),FS(h,a)}):Em(h,r):t===Ne&&e==="elements"&&(r instanceof X?qs(r,function(a){H0(h.partManager,a,h)}):Om(h,r)),h.Wa(t,e,i,n,r,o,l))},ut.prototype.Fa=function(t){if(X.prototype.Fa.call(this,t),this.data!==null){for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n];r instanceof X&&qs(r,function(o){o.data!==null&&o.Fa()})}for(e=this.adornments;e.next();)e.value.Fa(t)}},ut.prototype.updateRelationshipsFromData=function(){var t;this.data!==null&&((t=this.diagram)===null||t===void 0||t.partManager.updateRelationshipsFromData(this))},ut.prototype.Wj=function(t){var e=this.Lf;return e===null?null:e.H(t)},ut.prototype.xh=function(t,e){if(e!==null){var i=null,n=this.Lf;if(n!==null&&(i=n.H(t)),i!==e){if(i!==null){var r=i.diagram;r!==null&&r.remove(i)}n===null&&(this.Lf=n=new pt),e.Nf!==t&&(e.category=t),n.add(t,e),t=this.diagram,t!==null&&(t.add(e),t=e.adornedObject,t!==null&&(t=t.Ch(),t!==null&&(e.data=t.data)))}}},ut.prototype.Gf=function(t){var e=this.Lf;if(e!==null){var i=e.H(t);if(i!==null){var n=i.diagram;n!==null&&n.remove(i)}e.remove(t),e.count===0&&(this.Lf=null)}},ut.prototype.Oj=function(){var t=this.Lf;if(t!==null){var e=Et();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.Gf(e[i]);Ut(e)}},ut.prototype.updateAdornments=function(){var t=this.diagram;if(t!==null){for(var e=this.adornments;e.next();){var i=e.value;i.s(),i.placeholder&&i.placeholder.s()}t:{if(this.isSelected&&this.selectionAdorned&&(e=this.selectionObject,e!==null&&this.actualBounds.u()&&this.isVisible()&&e.Ff()&&e.actualBounds.u())){if(i=this.Wj("Selection"),i===null){if(i=this.selectionAdornmentTemplate,i===null&&(i=this.Hh()?t.linkSelectionAdornmentTemplate:this instanceof dt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof Tt))break t;Ln(i),i=i.copy(),i!==null&&(this.Hh()&&this.selectionObject===this.path&&(i.type=X.Link),i.adornedObject=e)}if(i!==null){i.type===X.Link&&i.s(),this.xh("Selection",i);break t}}this.Gf("Selection")}for(bT(this,t),e=this.adornments;e.next();)e.value.Fa()}},ut.prototype.Lb=function(){var t=this.diagram;t!==null&&(Hs(t),(this.F&16384)===0&&(this.F|=16384,t.Fb()))};function v0(t){(t.F&16384)!==0&&(t.updateAdornments(),t.F&=-16385)}function bT(t,e){e.toolManager.mouseDownTools.each(function(i){i.isEnabled&&i.updateAdornments(t)}),e.toolManager.updateAdornments(t)}function Qp(t){if(Yo(t)===!1){w0(t,!0),t.bl();var e=t.diagram;e!==null&&(e.te.add(t),e.Fb())}}function zM(t){if(t.F|=2097152,Yo(t)!==!1){var e=t.position,i=t.location;i.u()&&e.u()||YM(t,e,i),i=t.xb;var n=_.alloc().assign(i);i.ea(),i.x=e.x,i.y=e.y,i.freeze(),t.hm(n,i),_.free(n),w0(t,!1)}}ut.prototype.xe=function(t,e,i,n){var r=this.lc;r.h(t,e,i,n),this.Bb===null&&(this.Bb=new Mt);var o=this.Bb;o.reset(),this.mp(o,t,e,i,n),this.Bb=o,o.Bs()||o.wq(r)},ut.prototype.mp=function(t,e,i,n,r){if(this.sa!==1&&t.scale(this.sa),this.zb!==0){var o=_t;this.locationSpot.hb()&&(o=this.locationSpot);var l=N.alloc();if(this.locationObject!==this)for(e=this.locationObject,i=e.naturalBounds,l.Ui(i.x,i.y,i.width,i.height,o),e.Bb!==null&&e.Bb.Aa(l),l.offset(-e.measuredBounds.x,-e.measuredBounds.y),o=e.panel;o!==null&&o!==this;)o.Bb!==null&&o.Bb.Aa(l),l.offset(-o.measuredBounds.x,-o.measuredBounds.y),o=o.panel;else l.Ui(e,i,n,r,o);t.rotate(this.zb,l.x,l.y),N.free(l)}},ut.prototype.move=function(t,e){e===!0?this.location=t:this.position=t},ut.prototype.moveTo=function(t,e,i){t=N.allocAt(t,e),this.move(t,i),N.free(t)},ut.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(t!==null){if(!t.visible)return!1;if(t=t.diagram,t!==null&&t.animationManager.Ls(this))return!0}return t=this.containingGroup,!!(t===null||t.isSubGraphExpanded&&t.isVisible())},ut.prototype.Ob=function(t){var e=this.diagram;t?(this.B(4),this.Lb(),e!==null&&e.te.add(this)):(this.B(8),this.Oj()),this.Gh(),e!==null&&(e.Qa(),e.N())},ut.prototype.Ya=function(t){if(this.name===t)return this;var e=this.li;if(e===null&&(this.li=e=new pt),e.H(t)!==null)return e.H(t);var i=X.prototype.Ya.call(this,t);return i!==null?(e.set(t,i),i):(e.set(t,null),null)};function Go(t,e,i,n){n===void 0&&(n=new N),i=i.zc()?_t:i;var r=e.naturalBounds;if(n.h(r.width*i.x+i.offsetX,r.height*i.y+i.offsetY),e===null||e===t)return n;for(e.transform.Aa(n),e=e.panel;e!==null&&e!==t;)e.transform.Aa(n),e=e.panel;return t.Bb!==null&&t.Bb.Aa(n),n.offset(-t.lc.x,-t.lc.y),n}ut.prototype.Li=function(t){return t===void 0&&(t=new _),t.assign(this.actualBounds)},ut.prototype.Ta=function(){ho(this)===!0&&this.measure(1/0,1/0),this.arrange()};function Xl(t,e){var i=t.Oy;isNaN(t.Xf)&&(t.Xf=mM(t));var n=t.Xf,r=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+r,e.height+2+r),i;n=e.x,r=e.y;var o=e.width;e=e.height;var l=t.shadowBlur;return t=t.shadowOffset,o+=l,e+=l,n-=l/2,r-=l/2,0<t.x?o+=t.x:(n+=t.x,o-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),i.h(n-1,r-1,o+2,e+2),i}ut.prototype.arrange=function(){if(Nn(this)===!1)zM(this);else{Js(this,!1);var t=this.xb,e=_.alloc();e.assign(t);var i=gs(this);this.zh(0,0,this.lc.width,this.lc.height);var n=this.position;YM(this,n,this.location),t.ea(),t.x=n.x,t.y=n.y,t.freeze(),this.hm(e,t),e.A(t)?this.Md(i):!this.Mc()||j.w(e.width,t.width)&&j.w(e.height,t.height)||0<=this.Sw&&this.B(16),_.free(e),w0(this,!1)}},s=ut.prototype,s.hm=function(t,e){var i=this.diagram;if(i!==null){var n=!1;if(i.jj===!1&&t.u()){var r=_.alloc();r.assign(i.documentBounds),r.Nv(i.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(n=!0),_.free(r)}(this.F&65536)===0&&t.A(e)||HM(this,n,i),i.N(),!t.u()&&!e.u()||Dg(t,e)||(this instanceof q&&!i.undoManager.isUndoingRedoing&&this.rd(),this.Gh())}},s.Jv=function(t,e,i){if(this.Hh()||!t.u())return!1;var n=this.diagram;n!==null&&GM(this,n,t,e,i),this.ja=t,this.F&=-2097153;var r=this.Wf;return!r.u()||n!==null&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(n=r.copy(),r.h(r.x+(t.x-e),r.y+(t.y-i)),this.g("location",n,r.copy())),Yo(this)===!1&&Nn(this)===!1&&(Qp(this),zM(this)),!0};function GM(t,e,i,n,r){e===null||t instanceof Tt||(e=e.animationManager,e.tb&&aS(e,t,new N(n,r),i))}s.wm=function(t,e,i){var n=this.Wf,r=this.ja;if(i){if(n.x===t&&n.y===e)return;Yo(this)||Nn(this)?r.h(NaN,NaN):r.h(r.x+t-n.x,r.y+e-n.y),n.h(t,e)}else{if(r.x===t&&r.y===e)return;Yo(this)||Nn(this)?this.Us():n.h(n.x+t-r.x,n.y+e-r.y),r.h(t,e)}Qp(this)},s.Us=function(){this.F&=-2097153,Qp(this)};function YM(t,e,i){var n=N.alloc(),r=t.locationObject,o=r.naturalBounds,l=r instanceof gt?r.strokeWidth:0;if(n.Ui(0,0,o.width+l,o.height+l,t.locationSpot),r!==t)for(n.offset(-l/2,-l/2),r.transform.Aa(n),r=r.panel;r!==null&&r!==t;)r.transform.Aa(n),r=r.panel;t.Bb!==null&&t.Bb.Aa(n),n.offset(-t.lc.x,-t.lc.y),r=t.diagram,o=i.u(),l=e.u(),o&&l?(t.F&2097152)!==0?XM(t,e,i,r,n):WM(t,e,i,r,n):o?XM(t,e,i,r,n):l&&WM(t,e,i,r,n),t.F|=2097152,N.free(n),t.bl()}function XM(t,e,i,n,r){var o=e.x,l=e.y;e.h(i.x-r.x,i.y-r.y),n!==null&&(i=n.animationManager,(n=i.defaultAnimation.isAnimating)||!i.tb||t instanceof Tt||aS(i,t,new N(o,l),e),n||e.x===o&&e.y===l||t.g("position",new N(o,l),e.copy()))}function WM(t,e,i,n,r){var o=i.copy();i.h(e.x+r.x,e.y+r.y),i.A(o)||n===null||t.g("location",o,i.copy())}function HM(t,e,i){S0(t,!1),t instanceof q&&Rm(i,t),t.layer.isTemporary||e||i.Qa(),e=t.xb;var n=i.viewportBounds;n.u()?gs(t)?(Nw(e,n)||t.Md(!1),t.updateAdornments()):e.Lc(n)?(t.Md(!0),t.updateAdornments()):t.Lb():i.lj=!0}s.Ri=function(){return!0},s.Mc=function(){return!0},s.Hh=function(){return!1},s.Qi=function(){return!0};function x0(t,e,i,n){e.constructor===t.constructor||JM||(JM=!0,wt('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),wt("  Old class: "+Gi(t.constructor)+", new class: "+Gi(e.constructor)+", part: "+t.toString())),t.Oj();var r=t.data;i=t.layerName;var o=t.isSelected,l=t.isHighlighted,h=!0,a=!0,c=!1;t instanceof q&&(h=t.isTreeLeaf,a=t.isTreeExpanded,c=t.wasTreeExpanded),e.wf(t),e.cloneProtected(t),t.Nf=n,t.s(),t.N(),e=t.diagram,n=!0,e!==null&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.jb=r,t.F=o?t.F|4096:t.F&-4097,t.F=l?t.F|524288:t.F&-524289,t instanceof q&&(t.R=h?t.R|4:t.R&-5,t.R=a?t.R|1:t.R&-2,t.R=c?t.R|2:t.R&-3),r!==null&&t.Fa(),r=t.layerName,r!==i&&(t.Tg=i,t.layerName=r),e!==null&&(e.skipsUndoManager=n),t.Mc()&&t.B(64)}ut.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return t===null?!0:t.allowCopy?(t=t.diagram,t===null?!0:!!t.allowCopy):!1},ut.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return t===null?!0:t.allowDelete?(t=t.diagram,t===null?!0:!!t.allowDelete):!1},ut.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return t===null?!0:t.allowTextEdit?(t=t.diagram,t===null?!0:!!t.allowTextEdit):!1},ut.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return t===null?!0:t.allowGroup?(t=t.diagram,t===null?!0:!!t.allowGroup):!1},ut.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return t===null?!0:t.allowMove?(t=t.diagram,t===null?!0:!!t.allowMove):!1},ut.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return t===null?!0:t.allowReshape?(t=t.diagram,t===null?!0:!!t.allowReshape):!1},ut.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return t===null?!0:t.allowResize?(t=t.diagram,t===null?!0:!!t.allowResize):!1},ut.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return t===null?!0:t.allowRotate?(t=t.diagram,t===null?!0:!!t.allowRotate):!1},ut.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return t===null?!0:t.allowSelect?(t=t.diagram,t===null?!0:!!t.allowSelect):!1};function Yo(t){return(t.F&32768)!==0}function w0(t,e){t.F=e?t.F|32768:t.F&-32769}function S0(t,e){t.F=e?t.F|65536:t.F&-65537}function gs(t){return(t.F&131072)!==0}s=ut.prototype,s.Md=function(t){this.F=t?this.F|131072:this.F&-131073};function qp(t,e){t.F=e?t.F|1048576:t.F&-1048577}s.Gh=function(){var t=this.containingGroup;t!==null&&(t.s(),t.placeholder!==null&&t.placeholder.s(),t.rd())},s.N=function(){var t=this.diagram;t!==null&&!Nn(this)&&!Yo(this)&&this.isVisible()&&this.xb.u()&&t.N(Xl(this,this.xb))},s.s=function(){X.prototype.s.call(this);var t=this.diagram;t!==null&&(t.te.add(this),this instanceof q&&this.labeledLink!==null&&hh(this.labeledLink),t.Fb(!0))},s.bq=function(t){t||(t=this.Rh,t!==null&&T0(t,this))},s.cq=function(t){t||(t=this.Rh,t!==null&&L0(t,this))},s.Uj=function(){var t=this.data;if(t!==null){var e=this.diagram;e!==null&&(e=e.model,e!==null&&e.mm(t))}},s.Nz=function(){return M0(this,this)};function M0(t,e){var i=e.containingGroup;return i!==null?1+M0(t,i):e instanceof q&&(e=e.labeledLink,e!==null)?M0(t,e):0}s.Rz=function(){return KM(this,this)};function KM(t,e){var i=e.containingGroup;return i!==null||e instanceof q&&(i=e.labeledLink,i!==null)?KM(t,i):e}s.Jd=function(t){return t instanceof dt?k0(this,this,t):!1};function k0(t,e,i){if(e===i||i===null)return!1;var n=e.containingGroup;return n===null||n!==i&&!k0(t,n,i)?e instanceof q&&(e=e.labeledLink,e!==null)?k0(t,e,i):!1:!0}s.Lx=function(t){if(t===null)return null;if(this===t)return this.containingGroup;for(var e=this;e!==null;){if(e instanceof dt&&qp(e,!0),e instanceof q){var i=e.labeledLink;i!==null&&(e=i)}e=e.containingGroup}for(i=null,e=t;e!==null;){if((e.F&1048576)!==0){i=e;break}e instanceof q&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup}for(e=this;e!==null;)e instanceof dt&&qp(e,!1),e instanceof q&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup;return i},ut.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.isTemporary||this instanceof q&&this.isLinkLabel)},ut.prototype.B=function(t){if(t===void 0&&(t=16777215),this.isLayoutPositioned&&(t&this.layoutConditions)!==0){var e=this.layer;e!==null&&e.isTemporary||this instanceof q&&this.isLinkLabel?e=!1:(e=this.diagram,e=!(e!==null&&e.undoManager.isUndoingRedoing))}else e=!1;if(e)if(e=this.Rh,e!==null){var i=e.layout;i!==null?i.B():e.B(t)}else t=this.diagram,t!==null&&(t=t.layout,t!==null&&t.B())};function $M(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.isTemporary)):!1}function ms(t,e,i,n,r,o){if(o===void 0&&(o=null),!(t.contains(e)||o!==null&&!o(e)||e instanceof Tt)){if(t.add(e),e instanceof q){if(i&&e instanceof dt)for(var l=e.memberParts;l.next();)ms(t,l.value,i,n,r,o);if(r!==!1)for(l=e.linksConnected;l.next();){var h=l.value;if(!t.contains(h)){var a=h.fromNode,c=h.toNode;a=a===null||t.contains(a),c=c===null||t.contains(c),(r?a&&c:a||c)&&ms(t,h,i,n,r,o)}}if(1<n)for(e=e.Ru();e.next();)ms(t,e.value,i,n-1,r,o)}else if(e instanceof H)for(e=e.labelNodes;e.next();)ms(t,e.value,i,n,r,o)}}Y.Object.defineProperties(ut.prototype,{key:{get:function(){var t=this.diagram;if(t!==null)return t.model.pa(this.data)}},adornments:{get:function(){return this.Lf===null?Vn:this.Lf.iteratorValues}},layer:{get:function(){return this.fi}},diagram:{get:function(){var t=this.fi;return t==null?null:t.diagram}},layerName:{get:function(){return this.Tg},set:function(t){var e=this.Tg;if(e!==t){var i=this.diagram;if((i===null||i.Xj(t)!==null&&!i.partManager.addsToTemporaryLayer)&&(this.Tg=t,i!==null&&i.Qa(),this.g("layerName",e,t),e=this.layer,e!==null&&e.name!==t&&(i=e.diagram,i!==null&&(t=i.Xj(t),t!==null&&t!==e)))){var n=e.ec(-1,this,!0);if(0<=n&&i.Wa(Ne,"parts",e,this,null,n,!0),n=t.Ni(99999999,this,!0),e.visible!==t.visible&&this.Ob(t.visible),0<=n&&i.Wa(ve,"parts",t,null,this,!0,n),n=this.layerChanged,n!==null){var r=i.Z;i.Z=!0,n(this,e,t),i.Z=r}}}}},layerChanged:{get:function(){return this.eo},set:function(t){var e=this.eo;e!==t&&(this.eo=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Kp},set:function(t){var e=this.Kp;if(e!==t){this.Kp=t;var i=this.layer;i!==null&&pp(i,-1,this),this.g("zOrder",e,t),t=this.diagram,t!==null&&t.N()}}},locationObject:{get:function(){if(this.cf===null){var t=this.locationObjectName;t!==""?(t=this.Ya(t),t!==null?this.cf=t:this.cf=this):this instanceof Tt?this.type!==X.Link&&this.placeholder!==null?this.cf=this.placeholder:this.cf=this:this.cf=this}return this.cf.visible?this.cf:this}},minLocation:{get:function(){return this.uo},set:function(t){var e=this.uo;e.A(t)||(this.uo=t=t.I(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.no},set:function(t){var e=this.no;e.A(t)||(this.no=t=t.I(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.lo},set:function(t){var e=this.lo;e!==t&&(this.lo=t,this.cf=null,this.s(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.mo},set:function(t){var e=this.mo;e.A(t)||(this.mo=t=t.I(),this.s(),this.g("locationSpot",e,t))}},location:{get:function(){return this.Wf},set:function(t){var e=t.x,i=t.y,n=this.Wf;if(!(n.x===e||isNaN(n.x)&&isNaN(e))||!(n.y===i||isNaN(n.y)&&isNaN(i))){if(t=t.copy(),e=t,this.Hh())e=!1;else{if(this.Wf=e,this.F|=2097152,Nn(this)===!1&&(Qp(this),i=this.ja,i.u())){var r=this.diagram;if(r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing){var o=i.copy();i.h(i.x+(e.x-n.x),i.y+(e.y-n.y)),GM(this,r,i,o.x,o.y),this.g("position",o,i.copy())}}e=!0}e&&this.g("location",n,t.copy())}}},category:{get:function(){return this.Nf},set:function(t){var e=this.Nf;if(e!==t){var i=this.diagram,n=this.data,r=null;if(i!==null&&n!==null&&!(this instanceof Tt)){var o=i.model.undoManager;o.isEnabled&&!o.isUndoingRedoing&&(r=this.clone(),r.T.addAll(this.T))}this.Nf=t,this.g("category",e,t),i===null||n===null||this instanceof Tt?this instanceof Tt&&(r=this.adornedPart,r!==null&&(t=r.Lf,t!==null&&t.remove(e),r.xh(this.category,this))):(o=i.model,o.undoManager.isUndoingRedoing||(this.Hh()?(i.partManager.setLinkCategoryForData(n,t),i=i.partManager.findLinkTemplateForCategory(t),i!==null&&(Ln(i),i=i.copy(),i!==null&&x0(this,i,e,t))):(o!==null&&o.tm(n,t),i=Nk(i.partManager,n,t),i!==null&&(Ln(i),i=i.copy(),i===null||i instanceof H||(n=this.location.copy(),x0(this,i,e,t),this.location.u()||(this.location=n)))),r!==null&&(e=this.clone(),e.T.addAll(this.T),this.g("self",r,e))))}}},self:{get:function(){return this},set:function(t){x0(this,t,this.category,t.category)}},copyable:{get:function(){return(this.F&1)!==0},set:function(t){var e=(this.F&1)!==0;e!==t&&(this.F^=1,this.g("copyable",e,t))}},deletable:{get:function(){return(this.F&2)!==0},set:function(t){var e=(this.F&2)!==0;e!==t&&(this.F^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return(this.F&4)!==0},set:function(t){var e=(this.F&4)!==0;e!==t&&(this.F^=4,this.g("textEditable",e,t),this.Lb())}},groupable:{get:function(){return(this.F&8)!==0},set:function(t){var e=(this.F&8)!==0;e!==t&&(this.F^=8,this.g("groupable",e,t))}},movable:{get:function(){return(this.F&16)!==0},set:function(t){var e=(this.F&16)!==0;e!==t&&(this.F^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return(this.F&32)!==0},set:function(t){var e=(this.F&32)!==0;e!==t&&(this.F^=32,this.g("selectionAdorned",e,t),this.Lb())}},isInDocumentBounds:{get:function(){return(this.F&64)!==0},set:function(t){var e=(this.F&64)!==0;if(e!==t){this.F^=64;var i=this.diagram;i!==null&&i.Qa(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return(this.F&128)!==0},set:function(t){var e=(this.F&128)!==0;e!==t&&(this.F^=128,this.g("isLayoutPositioned",e,t),this.B(t?4:8))}},selectable:{get:function(){return(this.F&256)!==0},set:function(t){var e=(this.F&256)!==0;e!==t&&(this.F^=256,this.g("selectable",e,t),this.Lb())}},reshapable:{get:function(){return(this.F&512)!==0},set:function(t){var e=(this.F&512)!==0;e!==t&&(this.F^=512,this.g("reshapable",e,t),this.Lb())}},resizable:{get:function(){return(this.F&1024)!==0},set:function(t){var e=(this.F&1024)!==0;e!==t&&(this.F^=1024,this.g("resizable",e,t),this.Lb())}},rotatable:{get:function(){return(this.F&2048)!==0},set:function(t){var e=(this.F&2048)!==0;e!==t&&(this.F^=2048,this.g("rotatable",e,t),this.Lb())}},isSelected:{get:function(){return(this.F&4096)!==0},set:function(t){var e=(this.F&4096)!==0;if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(i!==null&&i.selection.count>=i.maxSelectionCount)){this.F^=4096;var n=!1;if(i!==null){n=i.skipsUndoManager,i.skipsUndoManager=!0;var r=i.selection;r.ea(),t?r.add(this):r.remove(this),r.freeze()}this.g("isSelected",e,t),this.Lb(),t=this.selectionChanged,t!==null&&t(this),i!==null&&(i.Fb(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return(this.F&524288)!==0},set:function(t){var e=(this.F&524288)!==0;if(e!==t){this.F^=524288;var i=this.diagram;i!==null&&(i=i.highlighteds,i.ea(),t?i.add(this):i.remove(this),i.freeze()),this.g("isHighlighted",e,t),this.N(),t=this.highlightedChanged,t!==null&&t(this)}}},isShadowed:{get:function(){return(this.F&8192)!==0},set:function(t){var e=(this.F&8192)!==0;e!==t&&(this.F^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return(this.F&262144)!==0},set:function(t){var e=(this.F&262144)!==0;e!==t&&(this.F^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(this.On=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.jp},set:function(t){var e=this.jp;e!==t&&(this.jp=t,this.jh=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.hp},set:function(t){var e=this.hp;e!==t&&(this.hp=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(this.jh===null){var t=this.selectionObjectName;t!==null&&t!==""?(t=this.Ya(t),t!==null?this.jh=t:this.jh=this):this instanceof H?(t=this.path,t!==null?this.jh=t:this.jh=this):this.jh=this}return this.jh}},selectionChanged:{get:function(){return this.ip},set:function(t){var e=this.ip;e!==t&&(this.ip=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.Uo},set:function(t){var e=this.Uo;e!==t&&(this.Uo=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.Wo},set:function(t){var e=this.Wo;e!==t&&(this.Wo=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return t!==""&&(t=this.Ya(t),t!==null)?t:this}},resizeCellSize:{get:function(){return this.Vo},set:function(t){var e=this.Vo;e.A(t)||(this.Vo=t=t.I(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.Yo},set:function(t){var e=this.Yo;e!==t&&(this.Yo=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.Zo},set:function(t){var e=this.Zo;e!==t&&(this.Zo=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return t!==""&&(t=this.Ya(t),t!==null)?t:this}},rotationSpot:{get:function(){return this.$o},set:function(t){var e=this.$o;e.A(t)||(this.$o=t=t.I(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Xb},set:function(t){var e=this.Xb;e!==t&&(this.Xb=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.Rh},set:function(t){if(this.Mc()){var e=this.Rh;if(e!==t){t===null||this!==t&&!t.Jd(this)||(this===t&&D("Cannot make a Group a member of itself: "+this.toString()),D("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.B(2);var i=this.diagram;if(e!==null?L0(e,this):this instanceof dt&&i!==null&&i.wi.remove(this),this.Rh=t,t!==null?T0(t,this):this instanceof dt&&i!==null&&i.wi.add(this),this.B(1),i!==null&&i.Z){var n=this.data,r=i.model;if(n!==null&&r.ck()){var o=r.pa(t!==null?t.data:null);r.tq(n,o)}}if(n=this.containingGroupChanged,n!==null&&(r=!0,i!==null&&(r=i.Z,i.Z=!0),n(this,e,t),i!==null&&(i.Z=r)),this instanceof dt){for(i=new Q,ms(i,this,!0,0,!0),i=i.iterator;i.next();)if(n=i.value,n instanceof q)for(n=n.linksConnected;n.next();)kh(n.value)}if(this instanceof q){for(i=this.linksConnected;i.next();)kh(i.value);i=this.labeledLink,i!==null&&kh(i)}this.g("containingGroup",e,t),t!==null&&(e=t.layer,e!==null&&pp(e,-1,t))}}else D("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.Zm},set:function(t){var e=this.Zm;e!==t&&(this.Zm=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(this.containingGroup!==null||this instanceof q&&this.labeledLink!==null)}},layoutConditions:{get:function(){return this.fo},set:function(t){var e=this.fo;e!==t&&(this.fo=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.pn},set:function(t){var e=this.pn;e!==t&&(this.pn=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.op},set:function(t){var e=this.op;e.A(t)||(this.op=t=t.I(),this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.np},set:function(t){var e=this.np;e!==t&&(this.np=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.gg},set:function(t){var e=this.gg;e!==t&&(this.gg=t,this.N(),this.g("shadowBlur",e,t))}}}),ut.prototype.invalidateLayout=ut.prototype.B,ut.prototype.findCommonContainingGroup=ut.prototype.Lx,ut.prototype.isMemberOf=ut.prototype.Jd,ut.prototype.findTopLevelPart=ut.prototype.Rz,ut.prototype.findSubGraphLevel=ut.prototype.Nz,ut.prototype.ensureBounds=ut.prototype.Ta,ut.prototype.getDocumentBounds=ut.prototype.Li,ut.prototype.findObject=ut.prototype.Ya,ut.prototype.moveTo=ut.prototype.moveTo,ut.prototype.invalidateAdornments=ut.prototype.Lb,ut.prototype.clearAdornments=ut.prototype.Oj,ut.prototype.removeAdornment=ut.prototype.Gf,ut.prototype.addAdornment=ut.prototype.xh,ut.prototype.findAdornment=ut.prototype.Wj,ut.prototype.updateTargetBindings=ut.prototype.Fa;var JM=!1;ut.className="Part",ut.LayoutNone=0,ut.LayoutAdded=1,ut.LayoutRemoved=2,ut.LayoutShown=4,ut.LayoutHidden=8,ut.LayoutNodeSized=16,ut.LayoutGroupLayout=32,ut.LayoutNodeReplaced=64,ut.LayoutStandard=127,ut.LayoutAll=16777215;function Tt(t,e){t===void 0||t instanceof ge||typeof t=="string"?ut.call(this,t):(ut.call(this),t&&(e=t)),this.F&=-257,this.Tg="Adornment",this.le=null,this.Ww=0,this.qx=!1,this.j=this.Sa=null,e&&Object.assign(this,e)}z(Tt,ut),Tt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")},Tt.prototype.updateRelationshipsFromData=function(){},Tt.prototype.fk=function(t){var e=this.adornedObject,i=e==null?void 0:e.part;if(i instanceof H&&e instanceof gt){e=i.path,i.fk(t),t=e.geometry,i=this.T.m,e=i.length;for(var n=0;n<e;n++){var r=i[n];r.isPanelMain&&r instanceof gt&&(r.ma=t)}}},Tt.prototype.Ri=function(){var t=this.le;return t===null?!0:(t=t.part,t===null||!Nn(t))},Tt.prototype.Mc=function(){return!1},Tt.prototype.nk=function(t,e,i,n,r,o,l){if(t===ve&&e==="elements"){if(r instanceof mi)this.Sa===null&&(this.Sa=r);else if(r instanceof X){var h=r.Yl(function(a){return a instanceof mi});h instanceof mi&&this.Sa===null&&(this.Sa=h)}}else t===Ne&&e==="elements"&&this.Sa!==null&&(n===this.Sa?this.Sa=null:n instanceof X&&this.Sa.rg(n)&&(this.Sa=null));ut.prototype.nk.call(this,t,e,i,n,r,o,l)},Tt.prototype.updateAdornments=function(){},Tt.prototype.Uj=function(){},Y.Object.defineProperties(Tt.prototype,{placeholder:{get:function(){return this.Sa}},adornedObject:{get:function(){return this.le},set:function(t){var e=this.adornedPart,i=null;t!==null&&(i=t.part),e===null||t!==null&&e===i||e.Gf(this.category),this.le=t,i!==null&&i.xh(this.category,this)}},adornedPart:{get:function(){var t=this.le;return t!==null?t.part:null}},containingGroup:{get:function(){return null}}}),Tt.className="Adornment";function q(t,e){t===void 0||t instanceof ge||typeof t=="string"?ut.call(this,t):(ut.call(this),t&&(e=t)),this.R=13,this.ab=new it,this.Dp=this.gl=this.ii=this.io=this.ho=null,this.Ak=Aw,this.nc=this.Te=null,this.Ro=C0,this.vh=!1,e&&Object.assign(this,e)}z(q,ut),q.prototype.cloneProtected=function(t){ut.prototype.cloneProtected.call(this,t),t.R=this.R,t.R=this.R&-17,t.ho=this.ho,t.io=this.io,t.ii=this.ii,t.Dp=this.Dp,t.Ak=this.Ak.I(),t.Ro=this.Ro},s=q.prototype,s.wf=function(t){ut.prototype.wf.call(this,t),t.rd(),t.Te=this.Te,t.nc=null};function ZM(t,e){e!==null&&(t.Te===null&&(t.Te=new Q),t.Te.add(e))}function QM(t,e,i,n){if(e===null||t.Te===null)return null;for(var r=t.Te.iterator;r.next();){var o=r.value;if(o.Js===t&&o.nv===e&&o.my===i&&o.ny===n||o.Js===e&&o.nv===t&&o.my===n&&o.ny===i)return o}return null}s.jA=function(t,e,i){e==null&&(e=""),i==null&&(i=""),t=QM(this,t,e,i),t!==null&&t.cm()},s.nk=function(t,e,i,n,r,o,l){t===ve&&e==="elements"?this.nc=null:t===Ne&&e==="elements"&&(this.nc=null),ut.prototype.nk.call(this,t,e,i,n,r,o,l)},s.rd=function(t){for(var e=this.linksConnected;e.next();){var i=e.value;t!==void 0&&t.contains(i)||(Wi(i.fromPort),Wi(i.toPort),i.Va())}};function qM(t,e){for(t=t.linksConnected;t.next();){var i=t.value;(i.fromPort===e||i.toPort===e)&&(Wi(i.fromPort),Wi(i.toPort),i.Va())}}function Wi(t){if(t!==null){var e=t.Qo;e!==null&&e.cm(),t=t.part,e=t.containingGroup,e===null||t.isVisible()||Wi(e.port)}}s.Ri=function(){return!0},q.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Lp(this.Ak),t},q.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.containingGroup;return t},q.prototype.isVisible=function(){if(!ut.prototype.isVisible.call(this))return!1;var t=!0,e=Rl,i=this.diagram;if(i!==null){if(i.animationManager.Ls(this))return!0;t=i.isTreePathToChildren,e=i.treeCollapsePolicy}if(e===Rl){if(t=this.qg(),t!==null&&!t.isTreeExpanded)return!1}else if(e===_m){if(t=t?this.Ou():this.Pu(),0<t.count&&t.all(function(n){return!n.isTreeExpanded}))return!1}else if(e===Um&&(t=t?this.Ou():this.Pu(),0<t.count&&t.any(function(n){return!n.isTreeExpanded})))return!1;return t=this.labeledLink,t!==null?t.isVisible():!0},q.prototype.Ob=function(t){ut.prototype.Ob.call(this,t);for(var e=this.linksConnected;e.next();){var i=e.value;if(t&&this.containingGroup!==null){var n=i.$p(this);n===null||n.Jd(this.containingGroup)||i.Va()}i.Ob(t)}},q.prototype.Mx=function(){var t=new Q,e=new Q;return bM(this,this,t,e),e.iterator};function bM(t,e,i,n){if(e!==null&&!i.has(e)){i.add(e);var r=!0,o=t.diagram;o!==null&&(r=o.isTreePathToChildren),e.linksConnected.each(function(l){l.isTreeLink?(r?l.fromNode===e:l.toNode===e)&&bM(t,r?l.toNode:l.fromNode,i,n):n.add(l)})}}q.prototype.findLinksConnected=function(t){if(t===void 0&&(t=null),t===null)return this.ab.iterator;var e=new Ie(this.ab),i=this;return e.predicate=function(n){return n.fromNode===i&&n.fromPortId===t||n.toNode===i&&n.toPortId===t},e},s=q.prototype,s.Vp=function(t){t===void 0&&(t=null);var e=new Ie(this.ab),i=this;return e.predicate=function(n){return n.fromNode!==i?!1:t===null?!0:n.fromPortId===t},e},s.Gd=function(t){t===void 0&&(t=null);var e=new Ie(this.ab),i=this;return e.predicate=function(n){return n.toNode!==i?!1:t===null?!0:n.toPortId===t},e},s.Nu=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.ab.iterator;n.next();){var r=n.value;r.fromNode===this?(t===null||r.fromPortId===t)&&(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new Q,e.add(i),e.add(r)):i=r):r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new Q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new Be(i):Vn},s.Pu=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.ab.iterator;n.next();){var r=n.value;r.fromNode!==this||t!==null&&r.fromPortId!==t||(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new Q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new Be(i):Vn},s.Ou=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.ab.iterator;n.next();){var r=n.value;r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new Q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new Be(i):Vn},s.Iz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Ie(this.ab),r=this;return n.predicate=function(o){return!((o.fromNode!==r||o.toNode!==t||e!==null&&o.fromPortId!==e||i!==null&&o.toPortId!==i)&&(o.fromNode!==t||o.toNode!==r||i!==null&&o.fromPortId!==i||e!==null&&o.toPortId!==e))},n},s.Jz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Ie(this.ab),r=this;return n.predicate=function(o){return!(o.fromNode!==r||o.toNode!==t||e!==null&&o.fromPortId!==e||i!==null&&o.toPortId!==i)},n};function bp(t,e,i){Wi(i);var n=t.ab.contains(e);if(n||t.ab.add(e),!n||e.fromNode===e.toNode){var r=t.linkConnected;if(r!==null){var o=!0,l=t.diagram;l!==null&&(o=l.Z,l.Z=!0),r(t,e,i),l!==null&&(l.Z=o)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,i!==null&&e!==null&&i!==e&&(n=!0,t=t.diagram,t!==null&&(n=t.isTreePathToChildren),r=n?e:i,o=n?i:e,r.vh||(r.vh=o),!o.isTreeLeaf||t!==null&&t.undoManager.isUndoingRedoing||(n?i===o&&(o.isTreeLeaf=!1):e===o&&(o.isTreeLeaf=!1))))}function td(t,e,i){Wi(i);var n=t.ab.remove(e),r=null;if(n||e.toNode===e.fromNode){var o=t.linkDisconnected;if(r=t.diagram,o!==null){var l=!0;r!==null&&(l=r.Z,r.Z=!0),o(t,e,i),r!==null&&(r.Z=l)}}n&&e.isTreeLink&&(i=!0,r!==null&&(i=r.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,t!==null&&(t.vh=!1),e===null||e.isTreeLeaf||(e.ab.count===0?(e.vh=null,r!==null&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):df(e)))}function df(t){if(t.vh=!1,t.ab.count!==0){var e=!0,i=t.diagram;if(i===null||!i.undoManager.isUndoingRedoing){for(i!==null&&(e=i.isTreePathToChildren),i=t.ab.iterator;i.next();){var n=i.value;if(n.isTreeLink){if(e){if(n.fromNode===t){t.isTreeLeaf=!1;return}}else if(n.toNode===t){t.isTreeLeaf=!1;return}}}t.isTreeLeaf=!0}}}q.prototype.updateRelationshipsFromData=function(){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)},s=q.prototype,s.bq=function(t){ut.prototype.bq.call(this,t),t||(df(this),t=this.gl,t!==null&&uk(t,this))},s.cq=function(t){ut.prototype.cq.call(this,t),t||(t=this.gl,t!==null&&t.nd!==null&&(t.nd.remove(this),t.s()))},s.Uj=function(){if(0<this.ab.count){var t=this.diagram;if(t!==null)for(var e=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,i=this.ab.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,ut.prototype.Uj.call(this)},s.rs=function(t){if(this.nc===null){if(t===""&&this.Je===!1)return this;tk(this)}var e=this.nc.H(t);return e!==null||t!==""&&(e=this.nc.H(""),e!==null)?e:this};function tk(t){t.nc===null?t.nc=new pt:t.nc.clear(),t.Cm(t,function(e,i){ek(e,i)}),t.nc.count===0&&t.nc.add("",t)}function ek(t,e){var i=e.portId;i!==null&&t.nc!==null&&t.nc.add(i,e)}function P0(t,e,i){var n=e.portId;if(n!==null&&(t.nc!==null&&t.nc.remove(n),e=t.diagram,e!==null&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,i===null&&(i=Et()),i.push(n);if(i!==null){for(t=0;t<i.length;t++)e.remove(i[t]);Ut(i)}}}s.lA=function(t){if(t===null||t===this)return!1;var e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.ab.iterator;n.next();){var r=n.value;if(r.isTreeLink&&(e=r.fromNode,e!==i&&e!==this))break}if(e===this||e===null||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.ab.iterator;n.next()&&(r=n.value,!r.isTreeLink||(e=r.toNode,e===i||e===this)););if(e===this||e===null||e===i)return!1;i=e}return!0},s.Vz=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.ab.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode,t!==e&&t!==this))break}if(t===this)return this;if(t===null||t===e)return e;e=t}else for(;;){for(t=null,i=e.ab.iterator;i.next()&&(n=i.value,!n.isTreeLink||(t=n.toNode,t===e||t===this)););if(t===this)return this;if(t===null||t===e)return e;e=t}},s.Fz=function(t){if(t===null)return null;if(this===t)return this;for(var e=this;e!==null;)qp(e,!0),e=e.qg();var i=null;for(e=t;e!==null;){if((e.F&1048576)!==0){i=e;break}e=e.qg()}for(e=this;e!==null;)qp(e,!1),e=e.qg();return i},s.Ii=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this.ab.iterator,t){for(;e.next();)if(t=e.value,t.isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if(t=e.value,t.isTreeLink&&t.toNode!==this)return t;return null},s.qg=function(){var t=this.vh;if(t===null)return null;if(t instanceof q)return t;var e=!0;if(t=this.diagram,t!==null&&(e=t.isTreePathToChildren),t=this.ab.iterator,e){for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.fromNode,e!==this))return this.vh=e}else for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.toNode,e!==this))return this.vh=e;return this.vh=null},s.Tz=function(){function t(i,n){if(i!==null){n.add(i);var r=i.Ii();r!==null&&(n.add(r),t(i.qg(),n))}}var e=new Q;return t(this,e),e},s.Sz=function(){return ik(this,this)};function ik(t,e){return e=e.qg(),e===null?0:1+ik(t,e)}s.Xp=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren),e=new Ie(this.ab);var i=this;return e.predicate=t?function(n){return!!(n.isTreeLink&&n.fromNode===i)}:function(n){return!!(n.isTreeLink&&n.toNode===i)},e},s.Ru=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren);var i=e=null,n=this.ab.iterator;if(t)for(;n.next();)t=n.value,t.isTreeLink&&t.fromNode===this&&(t=t.toNode,e!==null?e.add(t):i!==null&&i!==t?(e=new it,e.add(i),e.add(t)):i=t);else for(;n.next();)t=n.value,t.isTreeLink&&t.toNode===this&&(t=t.fromNode,e!==null?e.add(t):i!==null&&i!==t?(e=new it,e.add(i),e.add(t)):i=t);return e!==null?e.iterator:i!==null?new Be(i):Vn},s.Uz=function(t){t===void 0&&(t=1/0);var e=new Q;return ms(e,this,!1,t,!0),e},q.prototype.collapseTree=function(t){t===void 0&&(t=1),1>t&&(t=1);var e=this.diagram;if(e!==null&&!e.Ke){e.Ke=!0;var i=new Q;i.add(this),nk(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Rl),e.Ke=!1}};function nk(t,e,i,n,r,o,l){if(1<n)for(var h=i?t.Vp():t.Gd();h.next();){var a=h.value;a.isTreeLink&&(a=a.$p(t),a===null||a===t||e.contains(a)||(e.add(a),nk(a,e,i,n-1,r,o,l)))}else rk(t,e,i,r,o,l)}function rk(t,e,i,n,r,o){for(var l=r===t?!0:t.isTreeExpanded,h=i?t.Vp():t.Gd();h.next();){var a=h.value;if(a.isTreeLink&&(a=a.$p(t),a!==null&&a!==t)){var c=e.contains(a);c||e.add(a),l&&(o&&n.Kj(a,r),a.Gh(),a.Ob(!1)),a.isTreeExpanded&&(a.wasTreeExpanded=a.isTreeExpanded,c||rk(a,e,i,n,r,o))}}t.isTreeExpanded=!1}q.prototype.expandTree=function(t){t===void 0&&(t=2),2>t&&(t=2);var e=this.diagram;if(e!==null&&!e.Ke){e.Ke=!0;var i=new Q;i.add(this),ok(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Rl),e.Ke=!1}};function ok(t,e,i,n,r,o,l){for(var h=o===t?!1:t.isTreeExpanded,a=i?t.Vp():t.Gd();a.next();){var c=a.value;c.isTreeLink&&(h||c.td||c.Va(),c=c.$p(t),c!==null&&c!==t&&!e.contains(c)&&(e.add(c),h||(c.Ob(!0),c.Gh(),l&&r.Mj(c,o)),2<n||c.wasTreeExpanded))&&(c.wasTreeExpanded=!1,ok(c,e,i,n-1,r,o,l))}t.isTreeExpanded=!0}Y.Object.defineProperties(q.prototype,{portSpreading:{get:function(){return this.Ro},set:function(t){var e=this.Ro;e!==t&&(this.Ro=t,this.g("portSpreading",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.rd())}},avoidable:{get:function(){return(this.R&8)!==0},set:function(t){var e=(this.R&8)!==0;if(e!==t){this.R^=8;var i=this.diagram;i!==null&&Rm(i,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.Ak},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.Ak;if(!e.A(t)){this.Ak=t=t.I();var i=this.diagram;i!==null&&Rm(i,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.ab.iterator}},linkConnected:{get:function(){return this.ho},set:function(t){var e=this.ho;e!==t&&(this.ho=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.io},set:function(t){var e=this.io;e!==t&&(this.io=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return this.gl!==null}},labeledLink:{get:function(){return this.gl},set:function(t){var e=this.gl;if(e!==t){var i=this.diagram,n=this.data;if(e!==null){if(e.nd!==null&&(e.nd.remove(this),e.s()),i!==null&&n!==null&&!i.undoManager.isUndoingRedoing){var r=e.data,o=i.model;if(r!==null&&o.Pi()){var l=o.pa(n);l!==void 0&&o.oy(r,l)}}this.containingGroup=null}this.gl=t,t!==null&&(uk(t,this),i===null||n===null||i.undoManager.isUndoingRedoing||(r=t.data,i=i.model,r!==null&&i.Pi()&&(n=i.pa(n),n!==void 0&&i.tu(r,n))),this.containingGroup=t.containingGroup),hh(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.rs("")}},ports:{get:function(){return this.nc===null&&tk(this),this.nc.iteratorValues}},isTreeExpanded:{get:function(){return(this.R&1)!==0},set:function(t){var e=(this.R&1)!==0;if(e!==t){this.R^=1;var i=this.diagram;if(this.g("isTreeExpanded",e,t),e=this.treeExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.Z,i.Z=!0),e(this),i!==null&&(i.Z=n)}i!==null&&i.undoManager.isUndoingRedoing?this.Ob(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return(this.R&2)!==0},set:function(t){var e=(this.R&2)!==0;e!==t&&(this.R^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.Dp},set:function(t){var e=this.Dp;e!==t&&(this.Dp=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return(this.R&4)!==0},set:function(t){var e=(this.R&4)!==0;e!==t&&(this.R^=4,this.g("isTreeLeaf",e,t))}}}),q.prototype.expandTree=q.prototype.expandTree,q.prototype.collapseTree=q.prototype.collapseTree,q.prototype.findTreeParts=q.prototype.Uz,q.prototype.findTreeChildrenNodes=q.prototype.Ru,q.prototype.findTreeChildrenLinks=q.prototype.Xp,q.prototype.findTreeLevel=q.prototype.Sz,q.prototype.findTreeParentChain=q.prototype.Tz,q.prototype.findTreeParentNode=q.prototype.qg,q.prototype.findTreeParentLink=q.prototype.Ii,q.prototype.findCommonTreeParent=q.prototype.Fz,q.prototype.findTreeRoot=q.prototype.Vz,q.prototype.isInTreeOf=q.prototype.lA,q.prototype.findPort=q.prototype.rs,q.prototype.findLinksTo=q.prototype.Jz,q.prototype.findLinksBetween=q.prototype.Iz,q.prototype.findNodesInto=q.prototype.Ou,q.prototype.findNodesOutOf=q.prototype.Pu,q.prototype.findNodesConnected=q.prototype.Nu,q.prototype.findLinksInto=q.prototype.Gd,q.prototype.findLinksOutOf=q.prototype.Vp,q.prototype.findExternalTreeLinksConnected=q.prototype.Mx,q.prototype.invalidateConnectedLinks=q.prototype.rd,q.prototype.invalidateLinkBundle=q.prototype.jA;var tL=new K(q,"SpreadingNone",10),C0=new K(q,"SpreadingEvenly",11),N0=new K(q,"SpreadingPacked",12);q.className="Node",q.SpreadingNone=tL,q.SpreadingEvenly=C0,q.SpreadingPacked=N0;function dt(t,e){t===void 0||t instanceof ge||typeof t=="string"?q.call(this,t):(q.call(this),t&&(e=t)),this.R|=4608,this.so=new Q,this.pl=new Q,this.Sa=this.wp=this.ki=this.to=this.ro=this.$a=null,this.Dc=new Lt,this.Dc.group=this,this.Zq=null,e&&Object.assign(this,e)}z(dt,q),dt.prototype.cloneProtected=function(t){q.prototype.cloneProtected.call(this,t),this.R=this.R&-32769,this.$a!==null&&(t.$a=this.$a.copy()),t.ro=this.ro,t.to=this.to,t.ki=this.ki,t.wp=this.wp;var e=t.Yl(function(i){return i instanceof mi});e instanceof mi?t.Sa=e:t.Sa=null,this.Dc!==null?(t.Dc=this.Dc.copy(),t.Dc.group=t):(t.Dc!==null&&(t.Dc.group=null),t.Dc=null)},s=dt.prototype,s.wf=function(t){q.prototype.wf.call(this,t);var e=t.Yj();for(t=t.memberParts;t.next();){var i=t.value;if(i.s(),i.B(8),i.Oj(),i instanceof q)i.rd(e);else if(i instanceof H)for(i=i.labelNodes;i.next();)i.value.rd(e)}},s.nk=function(t,e,i,n,r,o,l){if(t===ve&&e==="elements"){if(r instanceof mi)this.Sa===null?this.Sa=r:this.Sa!==r&&D("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof X){var h=r.Yl(function(a){return a instanceof mi});h instanceof mi&&(this.Sa===null?this.Sa=h:this.Sa!==h&&D("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Ne&&e==="elements"&&this.Sa!==null&&(n===this.Sa?this.Sa=null:n instanceof X&&this.Sa.rg(n)&&(this.Sa=null));q.prototype.nk.call(this,t,e,i,n,r,o,l)},s.hm=function(t,e){q.prototype.hm.call(this,t,e),this.isClipping&&this.type!==X.Spot&&this.isSubGraphExpanded&&(t=this.resizeObject,t instanceof X&&(t=t.pb()),this.$a===null&&(this.$a=new _),t.Li(this.$a),t instanceof gt&&this.$a.Jc(-t.strokeWidth,-t.strokeWidth))},s.zh=function(t,e,i,n){this.cf=this.Sa,q.prototype.zh.call(this,t,e,i,n)},s.Ta=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof H||e.Ta()}),q.prototype.Ta.call(this)},s.Ri=function(){if(!q.prototype.Ri.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof q){if(e.isVisible()&&Nn(e))return!1}else if(e instanceof H&&e.isVisible()&&Nn(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0};function T0(t,e){if(t.so.add(e)){e instanceof dt&&t.pl.add(e);var i=t.memberAdded;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.Z,r.Z=!0),i(t,e),r!==null&&(r.Z=n)}t.isVisible()&&t.isSubGraphExpanded||e.Ob(!1)}e instanceof H&&!t.computesBoundsIncludingLinks||(e=t.Sa,e===null&&(e=t),e.s())}function L0(t,e){if(t.so.remove(e)){e instanceof dt&&t.pl.remove(e);var i=t.memberRemoved;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.Z,r.Z=!0),i(t,e),r!==null&&(r.Z=n)}t.isVisible()&&t.isSubGraphExpanded||e.Ob(!0)}e instanceof H&&!t.computesBoundsIncludingLinks||(e=t.Sa,e===null&&(e=t),e.s())}s.Uj=function(){if(0<this.so.count){var t=this.diagram;if(t!==null)for(var e=this.so.copy().iterator;e.next();)t.remove(e.value)}q.prototype.Uj.call(this)},dt.prototype.canAddMembers=function(t){var e=this.diagram;if(e===null)return!1;for(e=e.commandHandler,t=Ym(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},dt.prototype.addMembers=function(t,e){var i=this.diagram;if(i===null)return!1;i=i.commandHandler;var n=!0;for(t=Ym(t).iterator;t.next();){var r=t.value;!e||i.isValidMember(this,r)?r.containingGroup=this:n=!1}return n},dt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return t!==null&&!t.allowUngroup?!1:(t=t.diagram,!!(t===null||t.allowUngroup))},s=dt.prototype,s.rd=function(t){var e=(this.R&65536)!==0;if(q.prototype.rd.call(this,t),!e)for((this.R&65536)===0&&(this.R=this.R^65536),e=this.Mu();e.next();){var i=e.value;if(t===void 0||!t.contains(i)){var n=i.fromNode;n!==null&&n!==this&&n.Jd(this)&&!n.isVisible()?(Wi(i.fromPort),Wi(i.toPort),i.Va()):(n=i.toNode,n!==null&&n!==this&&n.Jd(this)&&!n.isVisible()&&(Wi(i.fromPort),Wi(i.toPort),i.Va()))}}},s.Mu=function(){var t=this.diagram!==null&&this.diagram.mx;if(t&&this.Zq!==null)return this.Zq.iterator;var e=this.Yj();e.add(this);for(var i=new Q,n=e.iterator;n.next();){var r=n.value;if(r instanceof q)for(r=r.linksConnected;r.next();){var o=r.value;e.contains(o)||i.add(o)}}return t&&(this.Zq=i),i.iterator},s.Hz=function(){var t=this.Yj();t.add(this);for(var e=new Q,i=t.iterator;i.next();){var n=i.value;if(n instanceof q)for(n=n.linksConnected;n.next();){var r=n.value,o=r.fromNode;o===null||t.contains(o)&&o!==this||e.add(o),r=r.toNode,r===null||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},s.Gz=function(){function t(i,n){i!==null&&(n.add(i),t(i.containingGroup,n))}var e=new Q;return t(this,e),e},s.Yj=function(){var t=new Q;return ms(t,this,!0,0,!0),t.remove(this),t},s.Ob=function(t){q.prototype.Ob.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ob(t)},dt.prototype.collapseSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ke){t.Ke=!0;var e=this.Yj();sk(this,e,t,this),t.Ke=!1}};function sk(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Ob(!1),o instanceof dt&&o.isSubGraphExpanded&&(o.wasSubGraphExpanded=o.isSubGraphExpanded,sk(o,e,i,n)),o instanceof q)o.rd(e),i.Kj(o,n);else if(o instanceof H)for(o=o.labelNodes;o.next();)o.value.rd(e)}t.isSubGraphExpanded=!1}dt.prototype.expandSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ke){t.Ke=!0;var e=this.Yj();lk(this,e,t,this),t.Ke=!1}};function lk(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Ob(!0),o instanceof dt&&o.wasSubGraphExpanded&&(o.wasSubGraphExpanded=!1,lk(o,e,i,n)),o instanceof q)o.rd(e),i.Mj(o,n);else if(o instanceof H)for(o=o.labelNodes;o.next();)o.value.rd(e)}t.isSubGraphExpanded=!0}dt.prototype.move=function(t,e){e===void 0&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var r=t.x,o=t.y;if(!(n===r||isNaN(n)&&isNaN(r))||!(i===o||isNaN(i)&&isNaN(o))){for(n=r-(isNaN(n)?0:n),i=o-(isNaN(i)?0:i),o=N.alloc(),q.prototype.move.call(this,t,e),t=new Q,e=this.Yj().iterator;e.next();)r=e.value,r instanceof H&&(r.suspendsRouting&&t.add(r),r.td||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(r=e.value,!(r.Hh()||r instanceof q&&r.isLinkLabel)){var l=r.position,h=r.location;l.u()?(o.x=l.x+n,o.y=l.y+i,r.position=o):h.u()&&(o.x=h.x+n,o.y=h.y+i,r.location=o)}for(e.reset();e.next();)r=e.value,r instanceof H&&(r.suspendsRouting=t.contains(r),r.td||r.fromNode!==this&&r.toNode!==this)&&(l=r.position,o.x=l.x+n,o.y=l.y+i,o.u()?r.move(o):r.Va(),O0(r)&&r.Va());N.free(o)}},Y.Object.defineProperties(dt.prototype,{placeholder:{get:function(){return this.Sa}},computesBoundsAfterDrag:{get:function(){return(this.R&2048)!==0},set:function(t){var e=(this.R&2048)!==0;e!==t&&(this.R^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return(this.R&4096)!==0},set:function(t){var e=(this.R&4096)!==0;e!==t&&(this.R^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return(this.R&8192)!==0},set:function(t){var e=(this.R&8192)!==0;e!==t&&(this.R^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return(this.R&16384)!==0},set:function(t){var e=(this.R&16384)!==0;e!==t&&(this.R^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.so.iterator}},layout:{get:function(){return this.Dc},set:function(t){var e=this.Dc;if(e!==t){e!==null&&(e.diagram=null,e.group=null),this.Dc=t;var i=this.diagram;t!==null&&(t.diagram=i,t.group=this),i!==null&&(i.Oh=!0),this.g("layout",e,t),i!==null&&i.Fb()}}},memberAdded:{get:function(){return this.ro},set:function(t){var e=this.ro;e!==t&&(this.ro=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.to},set:function(t){var e=this.to;e!==t&&(this.to=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.ki},set:function(t){var e=this.ki;e!==t&&(this.ki=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return(this.R&256)!==0},set:function(t){var e=(this.R&256)!==0;e!==t&&(this.R^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return(this.R&512)!==0},set:function(t){var e=(this.R&512)!==0;if(e!==t){this.R^=512;var i=this.diagram;if(this.g("isSubGraphExpanded",e,t),e=this.subGraphExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.Z,i.Z=!0),e(this),i!==null&&(i.Z=n)}i!==null&&i.undoManager.isUndoingRedoing?(this.Sa!==null&&this.Sa.s(),this.memberParts.each(function(r){r.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return(this.R&1024)!==0},set:function(t){var e=(this.R&1024)!==0;e!==t&&(this.R^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.wp},set:function(t){var e=this.wp;e!==t&&(this.wp=t,this.g("subGraphExpandedChanged",e,t))}},Jh:{get:function(){return(this.R&32768)!==0},set:function(t){(this.R&32768)!==0!==t&&(this.R^=32768)}}}),dt.prototype.expandSubGraph=dt.prototype.expandSubGraph,dt.prototype.collapseSubGraph=dt.prototype.collapseSubGraph,dt.prototype.findSubGraphParts=dt.prototype.Yj,dt.prototype.findContainingGroupChain=dt.prototype.Gz,dt.prototype.findExternalNodesConnected=dt.prototype.Hz,dt.prototype.findExternalLinksConnected=dt.prototype.Mu,dt.prototype.ensureBounds=dt.prototype.Ta,dt.className="Group";function mi(t){ht.call(this),this.nb=_u,this.fp=new _(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}z(mi,ht),mi.prototype.cloneProtected=function(t){ht.prototype.cloneProtected.call(this,t),t.nb=this.nb.I(),t.fp=this.fp.copy()},mi.prototype.Bh=function(t){if(this.background===null&&this.areaBackground===null)return!1;var e=this.naturalBounds;return Qn(0,0,e.width,e.height,t.x,t.y)},mi.prototype.gm=function(){var t=this.part;if(t!==null&&(t instanceof dt||t instanceof Tt)||D("Placeholder is not inside a Group or Adornment."),t instanceof dt){var e=this.computeBorder(this.fp),i=this.minSize,n=this.uc;for(ro(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),this.xe(0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||n===null||n.animationManager.cv(t)||isNaN(e.x)||isNaN(e.y)||(i=N.alloc(),i.Ti(e,t.locationSpot),i.A(t.location)||(t.location=i),N.free(i))}else{e=this.uc,i=this.nb,n=i.left+i.right;var r=i.top+i.bottom,o=t.adornedObject;t.angle=o.Ki();var l=0;o instanceof gt&&(l=o.strokeWidth);var h=o.Af(),a=o.naturalBounds,c=(a.width+l)*h;l=(a.height+l)*h,t.type!==X.Link&&(o=o.da(t.category==="Selection"?di:t.locationSpot,N.alloc()),t.location=o,N.free(o)),isNaN(c)||isNaN(l)?(t=t.adornedObject,c=t.da(di,N.alloc()),o=_.allocAt(c.x,c.y,0,0),o.Oe(t.da(Er,c)),o.Oe(t.da(Uu,c)),o.Oe(t.da(zu,c)),ro(e,o.width+n||0,o.height+r||0),this.xe(-i.left,-i.top,e.width,e.height),N.free(c),_.free(o)):(ro(e,c+n||0,l+r||0),this.xe(-i.left,-i.top,e.width,e.height))}},mi.prototype.zh=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},mi.prototype.computeBorder=function(t){var e=this.part,i=e.diagram;if(i!==null&&e instanceof dt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.fp.u()){var n=i.toolManager.findTool("Dragging");if(n===i.currentTool&&(i=n.computeBorder(e,this.fp,t),i!==null))return i}i=_.alloc(),n=this.computeMemberBounds(i);var r=this.nb;return e instanceof dt&&!e.isSubGraphExpanded?t.h(n.x-r.left,n.y-r.top,0,0):t.h(n.x-r.left,n.y-r.top,Math.max(n.width+r.left+r.right,0),Math.max(n.height+r.top+r.bottom,0)),_.free(i),e instanceof dt&&e.computesBoundsIncludingLocation&&e.location.u()&&t.Oe(e.location),t},mi.prototype.computeMemberBounds=function(t){if(!(this.part instanceof dt))return t.h(0,0,0,0),t;for(var e=this.part,i=1/0,n=1/0,r=-1/0,o=-1/0,l=e.memberParts;l.next();){var h=l.value;if(h.isVisible()){if(h instanceof H&&(!e.computesBoundsIncludingLinks||ho(h)||h.fromNode===e||h.toNode===e))continue;h=h.actualBounds,h.left<i&&(i=h.left),h.top<n&&(n=h.top),h.right>r&&(r=h.right),h.bottom>o&&(o=h.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,r-i,o-n):(e=e.location,t.h(e.x,e.y,0,0)),t},Y.Object.defineProperties(mi.prototype,{padding:{get:function(){return this.nb},set:function(t){typeof t=="number"&&(t=new Ft(t));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.g("padding",e,t),this.s())}}}),mi.className="Placeholder";function H(t){ut.call(this,X.Link),this.Ia=8,this.We=null,this.Xe="",this.pf=this.Cn=null,this.qf="",this.Cp=null,this.uk=Ti,this.fn=0,this.hn=Ti,this.jn=NaN,this.Cj=I0,this.qp=.5,this.nd=null,this.Cb=new it().freeze(),this.gf=this.dh=null,this.wl=new _,this.ma=new tt,this.D=this.o=this.Mf=this.Qf=null,this.lu=new N,this.cr=this.jx=this.ix=null,this.Gt=NaN,this.P=null,this.j=[],t&&Object.assign(this,t)}z(H,ut),H.prototype.cloneProtected=function(t){ut.prototype.cloneProtected.call(this,t),t.Ia=this.Ia&-113,t.Xe=this.Xe,t.Cn=this.Cn,t.qf=this.qf,t.Cp=this.Cp,t.uk=this.uk,t.fn=this.fn,t.hn=this.hn,t.jn=this.jn,t.Cj=this.Cj,t.qp=this.qp,this.P!==null&&(t.P=this.P.copy())},s=H.prototype,s.wf=function(t){ut.prototype.wf.call(this,t),this.Xe=t.Xe,this.qf=t.qf,t.dh=null,t.Va(),t.Mf=this.Mf;var e=t.fromPort;e!==null&&Wi(e),t=t.toPort,t!==null&&Wi(t)},s.gb=function(t){t.classType===H?(t.value&2)===2?this.routing=t:t===tn||t===Wo||t===Ch?this.curve=t:t===mf||t===od||t===sd?this.adjusting=t:t!==I0&&t!==Ti&&D("Unknown Link enum value for a Link property: "+t):ut.prototype.gb.call(this,t)},s.Kc=function(){this.P===null&&(this.P=new Cf)},s.Ri=function(){var t=this.fromNode;if(t!==null){var e=t.findVisibleNode();if(e!==null&&(t=e),Nn(t)||Yo(t))return!1}return t=this.toNode,!(t!==null&&(e=t.findVisibleNode(),e!==null&&(t=e),Nn(t)||Yo(t)))},s.Jv=function(){return!1},s.Us=function(){},s.Mc=function(){return!1},H.prototype.computeAngle=function(t,e,i){return H.computeAngle(e,i)},H.computeAngle=function(t,e){switch(t){default:case Ti:t=0;break;case vf:t=e;break;case xf:t=e+90;break;case wf:t=e-90;break;case F0:t=e+180;break;case ld:t=j.iq(e),90<t&&270>t&&(t-=180);break;case Sf:t=j.iq(e+90),90<t&&270>t&&(t-=180);break;case Mf:t=j.iq(e-90),90<t&&270>t&&(t-=180);break;case ud:if(t=j.iq(e),45<t&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return j.iq(t)};function kh(t){var e=t.fromNode,i=t.toNode,n=null;if(e!==null?n=i!==null?e.Lx(i):e.containingGroup:i!==null?n=i.containingGroup:n=null,e=n,i=t.Rh,i!==e){i!==null&&L0(i,t),t.Rh=e,e!==null&&T0(e,t);var r=t.containingGroupChanged;if(r!==null){var o=!0,l=t.diagram;l!==null&&(o=l.Z,l.Z=!0),r(t,i,e),l!==null&&(l.Z=o)}!t.td||t.ix!==i&&t.jx!==i||t.Va()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=n}s=H.prototype,s.Gh=function(){var t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&ut.prototype.Gh.call(this)},s.$p=function(t){var e=this.fromNode;return t===e?this.toNode:e},s.$z=function(t){var e=this.fromPort;return t===e?this.toPort:e};function uk(t,e){t.nd===null&&(t.nd=new Q),t.nd.add(e),t.s()}s.bq=function(t){if(ut.prototype.bq.call(this,t),tl(this)&&this.eq(this.actualBounds),!t){t=this.We;var e=null;t!==null&&(e=this.fromPort,bp(t,this,e));var i=this.pf;if(i!==null){var n=this.toPort;i===t&&n===e||bp(i,this,n)}yf(this)}},s.cq=function(t){if(ut.prototype.cq.call(this,t),tl(this)&&this.eq(this.actualBounds),!t){t=this.We;var e=null;t!==null&&(e=this.fromPort,td(t,this,e));var i=this.pf;if(i!==null){var n=this.toPort;i===t&&n===e||td(i,this,n)}gf(this)}},s.Uj=function(){if(this.td=!0,this.nd!==null){var t=this.diagram;if(t!==null)for(var e=this.nd.copy().iterator;e.next();)t.remove(e.value)}this.data!==null&&(t=this.diagram,t!==null&&t.partManager.removeDataForLink(this))},H.prototype.updateRelationshipsFromData=function(){if(this.data!==null){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}},H.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var r=i.y;for(isNaN(r)&&(r=0),n=t.x-n,r=t.y-r,e===!0?ut.prototype.move.call(this,t,!1):(t=N.allocAt(i.x+n,i.y+r),ut.prototype.move.call(this,t,!1),N.free(t)),Xo(this,n,r),t=this.labelNodes;t.next();)e=t.value,i=e.position,e.moveTo(i.x+n,i.y+r)},H.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},H.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},H.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(e===0)return t.assign(qc),t;if(e===1)return t.assign(this.i(0)),t;if(e===2){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===tn))return this.ma.Tu(.5,t),t.add(this.i(0)),i=this.ma.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===tn){if(e===3)return this.i(1);if(n=(e-1)/3|0,i=3*(n/2|0),n%2===1){n=this.i(i);var r=this.i(i+1),o=this.i(i+2);i=this.i(i+3),j.iz(n.x,n.y,r.x,r.y,o.x,o.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var l=this.flattenedLengths;for(i=this.flattenedTotalLength,r=o=n=0;n<i/2&&o<e&&(r=l[o],!(n+r>i/2));)n+=r,o++;return e=this.i(o),o=this.i(o+1),1>Math.abs(e.x-o.x)?e.y>o.y?t.h(e.x,e.y-(i/2-n)):t.h(e.x,e.y+(i/2-n)):1>Math.abs(e.y-o.y)?e.x>o.x?t.h(e.x-(i/2-n),e.y):t.h(e.x+(i/2-n),e.y):(i=(i/2-n)/r,t.h(e.x+i*(o.x-e.x),e.y+i*(o.y-e.y))),t},H.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(t===2)return this.i(0).Pa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===tn))return this.ma.Rx(.5);if(this.computeCurve()===tn&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(e%2===1){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),j.hz(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).Pa(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var r=0;i=0;for(var o;r<n/2&&i<t&&(o=e[i],!(r+o>n/2));)r+=o,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).Pa(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.Pa(n)},s=H.prototype,s.i=function(t){return this.Cb.m[t]},s.Pc=function(t,e){this.Cb.Oc(t,e)},s.M=function(t,e,i){this.Cb.Oc(t,new N(e,i))},s.iA=function(t,e){this.Cb.wb(t,e)},s.l=function(t,e,i){this.Cb.wb(t,new N(e,i))},s.ee=function(t){this.Cb.add(t)},s.tf=function(t,e){this.Cb.add(new N(t,e))},s.Av=function(t){this.Cb.eb(t)},s.Pj=function(){this.Cb.clear()};function Xo(t,e,i){if(e!==0||i!==0)if(t.pointsCount===0)t.defaultFromPoint&&t.defaultFromPoint.offset(e,i),t.defaultToPoint&&t.defaultToPoint.offset(e,i);else{for(var n=t.td,r=new it,o=t.Cb.iterator;o.next();){var l=o.value;r.add(new N(l.x+e,l.y+i).freeze())}r.freeze(),o=t.Cb,t.Cb=r,l=t.diagram,isNaN(e)||isNaN(i)||l!==null&&l.animationManager.tb?t.s():(t.Wf.h(t.Wf.x+e,t.Wf.y+i),t.ja.h(t.ja.x+e,t.ja.y+i),hh(t)),n?ed(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),l!==null&&l.animationManager.tb&&(e=l.animationManager,t.gf=r,e.yl.add(t)),t.g("points",o,r)}}s.Lh=function(){this.dh===null&&(this.dh=this.Cb,this.Cb=this.Cb.copy())},s.vf=function(){if(this.dh!==null){for(var t=this.dh,e=this.Cb,i=1/0,n=1/0,r=t.m,o=r.length,l=0;l<o;l++){var h=r[l];i=Math.min(h.x,i),n=Math.min(h.y,n)}h=l=1/0;for(var a=e.m,c=a.length,p=0;p<c;p++){var d=a[p];l=Math.min(d.x,l),h=Math.min(d.y,h),d.freeze()}if(e.freeze(),c===o){for(o=0;o<c;o++)if(p=r[o],d=a[o],p.x-i!==d.x-l||p.y-n!==d.y-h){this.fc(!0);break}}else this.fc(!0);this.dh=null,i=this.diagram,i!==null&&i.animationManager.tb&&(i=i.animationManager,this.gf=e,i.yl.add(this)),ed(this),this.g("points",t,e)}},s.Cv=function(){this.dh!==null&&(this.Cb=this.dh,this.dh=null)};function ed(t){t.Cb.count===0?t.td=!1:(t.td=!0,t.cr=null,t.Gt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),D0(t,!1))}s.Va=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Gs.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager,t.isTicking&&!t.isAnimating))return;this.gf!==null&&!t.isTicking&&t.isAnimating&&(this.gf=null)}t=this.path,t!==null&&(this.td=!1,this.s(),t.s())}},s.ug=function(){if(!this.td&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.Lh(),t=this.computePoints()}catch{this.computingPoints=!1,this.Cv()}finally{this.computingPoints=!1,t?this.vf():this.Cv()}}},H.prototype.computePoints=function(){if(this.diagram===null)return!1;var t=this.fromNode,e=null;if(t===null?(Kl||(Kl=new q,Kl.desiredSize=Vu,Kl.Ta()),this.defaultFromPoint&&(Kl.location=this.defaultFromPoint,Kl.Ta(),e=t=Kl)):e=this.fromPort,e!==null&&!t.isVisible()){var i=t.findVisibleNode();i!==null&&i!==t?(t=i,e=i.port):t=i}if(this.ix=t,t===null||!t.location.u())return!1;for(;!(e===null||e.actualBounds.u()&&e.Ff());)e=e.panel;if(e===null)return!1;var n=this.toNode,r=null;if(n===null?($l||($l=new q,$l.desiredSize=Vu,$l.Ta()),this.defaultToPoint&&($l.location=this.defaultToPoint,$l.Ta(),r=n=$l)):r=this.toPort,r===null||n.isVisible()||(i=n.findVisibleNode(),i!==null&&i!==n?(n=i,r=i.port):n=i),this.jx=n,n===null||!n.location.u())return!1;for(;!(r===null||r.actualBounds.u()&&r.Ff());)r=r.panel;if(r===null)return!1;var o=this.pointsCount,l=this.computeSpot(!0,e);i=this.computeSpot(!1,r);var h=Ph(l),a=Ph(i),c=e===r&&e!==null,p=this.isOrthogonal,d=this.curve===tn;this.Qf=c&&!p?d=!0:!1;var m=this.computeAdjusting()===Ti||c;if(!p&&!c&&h&&a){if(h=!1,!m&&3<=o&&(m=this.getLinkPoint(t,e,l,!0,!1,n,r),a=this.getLinkPoint(n,r,i,!1,!1,t,e),h=this.adjustPoints(0,m,o-1,a))&&(m=this.getLinkPoint(t,e,l,!0,!1,n,r),a=this.getLinkPoint(n,r,i,!1,!1,t,e),this.adjustPoints(0,m,o-1,a)),!h)if(this.Pj(),d){o=this.getLinkPoint(t,e,l,!0,!1,n,r),m=this.getLinkPoint(n,r,i,!1,!1,t,e),h=m.x-o.x,a=m.y-o.y,c=this.computeCurviness(),d=p=0;var x=o.x+h/3,v=o.y+a/3,S=x,P=v;j.w(a,0)?P=0<h?P-c:P+c:(p=-h/a,d=Math.sqrt(c*c/(p*p+1)),0>c&&(d=-d),S=(0>a?-1:1)*d+x,P=p*(S-x)+v),x=o.x+2*h/3,v=o.y+2*a/3;var k=x,L=v;j.w(a,0)?L=0<h?L-c:L+c:(k=(0>a?-1:1)*d+x,L=p*(k-x)+v),this.Pj(),this.ee(o),this.tf(S,P),this.tf(k,L),this.ee(m),this.Pc(0,this.getLinkPoint(t,e,l,!0,!1,n,r)),this.Pc(3,this.getLinkPoint(n,r,i,!1,!1,t,e))}else o=n,m=r,n=this.getLinkPoint(t,e,l,!0,!1,o,m),r=this.getLinkPoint(o,m,i,!1,!1,t,e),this.hasCurviness()?(m=r.x-n.x,i=r.y-n.y,l=this.computeCurviness(),t=n.x+m/2,e=n.y+i/2,o=t,h=e,j.w(i,0)?h=0<m?h-l:h+l:(m=-m/i,o=Math.sqrt(l*l/(m*m+1)),0>l&&(o=-o),o=(0>i?-1:1)*o+t,h=m*(o-t)+e),this.ee(n),this.tf(o,h),this.ee(r)):(this.ee(n),this.ee(r),h=_.alloc(),e.Li(h),a=h.$(r),m.Li(h),c=h.$(n),(a||c)&&(l=e.da(nd(l),new N),this.Pc(0,this.getLinkPointFromPoint(t,e,l,r,!0,l)),i=m.da(nd(i),new N),this.Pc(1,this.getLinkPointFromPoint(o,m,i,n,!1,i))),_.free(h))}else{d=this.isAvoiding,m&&(p&&d||c)&&this.Pj();var T=c?this.computeCurviness():0;d=this.getLinkPoint(t,e,l,!0,p,n,r),x=S=v=0,(p||!h||c)&&(P=this.computeEndSegmentLength(t,e,l,!0),x=this.getLinkDirection(t,e,d,l,!0,p,n,r),c&&(h||l.A(i)||!p&&l.x+i.x===1&&l.y+i.y===1)&&(x-=p?90:30,0>T&&(x-=180)),0>x?x+=360:360<=x&&(x-=360),c&&(P+=Math.abs(T)*(p?1:2)),x===0?v=P:x===90?S=P:x===180?v=-P:x===270?S=-P:(v=P*Math.cos(x*Math.PI/180),S=P*Math.sin(x*Math.PI/180)),l.zc()&&c&&(P=e.da(_t,N.alloc()),k=N.allocAt(P.x+1e3*v,P.y+1e3*S),this.getLinkPointFromPoint(t,e,P,k,!0,d),N.free(P),N.free(k))),P=this.getLinkPoint(n,r,i,!1,p,t,e);var O=L=k=0;if(p||!a||c){var E=this.computeEndSegmentLength(n,r,i,!1);O=this.getLinkDirection(n,r,P,i,!1,p,t,e),c&&(a||l.A(i)||!p&&l.x+i.x===1&&l.y+i.y===1)&&(O+=p?0:30,0>T&&(O+=180)),0>O?O+=360:360<=O&&(O-=360),c&&(E+=Math.abs(T)*(p?1:2)),O===0?k=E:O===90?L=E:O===180?k=-E:O===270?L=-E:(k=E*Math.cos(O*Math.PI/180),L=E*Math.sin(O*Math.PI/180)),i.zc()&&c&&(i=r.da(_t,N.alloc()),l=N.allocAt(i.x+1e3*k,i.y+1e3*L),this.getLinkPointFromPoint(n,r,i,l,!1,P),N.free(i),N.free(l))}i=d,(p||!h||c)&&(i=new N(d.x+v,d.y+S)),l=P,(p||!a||c)&&(l=new N(P.x+k,P.y+L)),!m&&!p&&h&&3<o&&this.adjustPoints(0,d,o-2,l)?this.Pc(o-1,P):!m&&!p&&a&&3<o&&this.adjustPoints(1,i,o-1,P)?this.Pc(0,d):!m&&(p?6<=o:4<o)&&this.adjustPoints(1,i,o-2,l)?(this.Pc(0,d),this.Pc(o-1,P)):(this.Pj(),this.ee(d),(p||!h||c)&&this.ee(i),p&&this.addOrthoPoints(i,x,l,O,t,n),(p||!a||c)&&this.ee(l),this.ee(P))}return!0};function E0(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}H.prototype.getLinkPointFromPoint=function(t,e,i,n,r,o){if(o===void 0&&(o=new N),t===null||e===null)return o.assign(i),o;if(t.isVisible()||(r=t.findVisibleNode(),r!==null&&r!==t&&(e=r.port)),t=null,r=e.panel,r===null||r.je()||(r=r.panel),r===null){r=n.x,n=n.y;var l=i.x;i=i.y}else{t=r.fe,r=1/(t.m11*t.m22-t.m12*t.m21),l=t.m22*r;var h=-t.m12*r,a=-t.m21*r,c=t.m11*r,p=r*(t.m21*t.dy-t.m22*t.dx),d=r*(t.m12*t.dx-t.m11*t.dy);r=n.x*l+n.y*a+p,n=n.x*h+n.y*c+d,l=i.x*l+i.y*a+p,i=i.x*h+i.y*c+d}return e.Zj(r,n,l,i,o),t!==null&&o.transform(t),o};function id(t,e){var i=e.Qo;return i===null&&(i=new Jl,i.port=e,i.node=e.part,e.Qo=i),gk(i,t)}H.prototype.getLinkPoint=function(t,e,i,n,r,o,l,h){if(h===void 0&&(h=new N),i.hb()&&!Ph(i))return e.da(i,h),h;if(i.Nc()){var a=id(this,e);if(a!==null){if(h.assign(a.gq),r&&this.routing===ak){var c=id(this,l);if(c!==null&&a.Wl<c.Wl){a=N.alloc(),c=N.alloc();var p=new _(e.da(di,a),e.da(Er,c)),d=this.computeSpot(!n,l);t=this.getLinkPoint(o,l,d,!n,r,t,e,c),(i.Df(Yu)||i.Df(Xu))&&t.y>=p.y&&t.y<=p.y+p.height?h.y=t.y:(i.Df(Gu)||i.Df(Wu))&&t.x>=p.x&&t.x<=p.x+p.width&&(h.x=t.x),N.free(a),N.free(c)}}return h}}return i=e.da(nd(i),N.alloc()),this.pointsCount>(r?6:2)?(l=n?this.i(1):this.i(this.pointsCount-2),r&&(l=E0(i,l.copy()))):(a=this.computeSpot(!n,l),o=N.alloc(),l=l.da(nd(a),o),r&&(l=E0(i,l)),N.free(o)),this.getLinkPointFromPoint(t,e,i,l,n,h),N.free(i),h},H.prototype.getLinkDirection=function(t,e,i,n,r,o,l,h){t:if(n.hb())var a=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.Nc()&&(a=id(this,e),a!==null))switch(a.Ac){case 1:a=270;break t;case 2:a=180;break t;default:case 4:a=0;break t;case 8:a=90;break t}a=e.da(_t,N.alloc()),this.pointsCount>(o?6:2)?(h=r?this.i(1):this.i(this.pointsCount-2),h=o?E0(a,h.copy()):i):(i=N.alloc(),h=h.da(_t,i),N.free(i)),i=Math.abs(h.x-a.x)>Math.abs(h.y-a.y)?h.x>=a.x?0:180:h.y>=a.y?90:270,N.free(a),a=i}return n.zc()&&l.Jd(t)&&(a+=180,360<=a&&(a-=360)),Ph(n)||(t=e.Ki(),t===0)||(45<=t&&135>t?a+=90:135<=t&&225>t?a+=180:225<=t&&315>t&&(a+=270),360<=a&&(a-=360)),a},H.prototype.computeEndSegmentLength=function(t,e,i,n){return e!==null&&i.Nc()&&(t=id(this,e),t!==null)?t.Ju:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,e!==null&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},H.prototype.computeSpot=function(t,e){return e===void 0&&(e=null),t?(t=e||this.fromPort,t===null?t=_t:(e=this.fromSpot,e.Mb()&&(e=t.fromSpot),t=e===Pi?Ze:e)):(t=e||this.toPort,t===null?t=_t:(e=this.toSpot,e.Mb()&&(e=t.toSpot),t=e===Pi?Ze:e)),t};function Ph(t){return t===Ze||t.x===.5&&t.y===.5}function nd(t){return t.x===.5&&t.y===.5?t:_t}H.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Ti&&4<this.pointsCount?this.computeMidPoint(new N):(t=e.Qo,t=t!==null?gk(t,this):null,t!==null?t.gq:e.da(_t))},H.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;e!==null&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(e=this.toPort,e!==null&&(t=e.toShortLength)),isNaN(t)?0:t},H.prototype.zf=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var l=o;if(o===void 0&&(l=Mt.alloc(),l.reset()),l.multiply(this.transform),this.Ah(t,l))return n0(this,e,i,r),o===void 0&&Mt.free(l),!0;if(this.Lc(t,l)){var h=!1;if(!this.isAtomic)for(var a=this.T.m,c=a.length;c--;){var p=a[c];if(p.visible||p===this.locationObject){var d=p.actualBounds,m=this.naturalBounds;if(!(d.x>m.width||d.y>m.height||0>d.x+d.width||0>d.y+d.height)){if(d=Mt.alloc(),d.set(l),p instanceof X)h=p.zf(t,e,i,n,r,d);else if(this.path===p){if(p instanceof gt)if(h=t,m=n,p.pickable===!1)h=!1;else if(d.multiply(p.transform),m)t:{var x=h,v=d;if(p.Ah(x,v))h=!0;else{if(v===void 0&&(v=p.transform,x.Ge(p.actualBounds))){h=!0;break t}h=x.left,m=x.right;var S=x.top;x=x.bottom;var P=N.alloc(),k=N.alloc(),L=N.alloc(),T=Mt.alloc();T.set(v),T.lv(p.transform),T.As(),k.x=m,k.y=S,k.transform(T),P.x=h,P.y=S,P.transform(T),v=!1,bs(p,P,k,L)?v=!0:(P.x=m,P.y=x,P.transform(T),bs(p,P,k,L)?v=!0:(k.x=h,k.y=x,k.transform(T),bs(p,P,k,L)?v=!0:(P.x=h,P.y=S,P.transform(T),bs(p,P,k,L)&&(v=!0)))),Mt.free(T),N.free(P),N.free(k),N.free(L),h=v}}else h=p.Ah(h,d)}else h=nM(p,t,n,d);h&&(m=p,e!==null&&(m=e(p)),m&&(i===null||i(m))&&r.add(m)),Mt.free(d)}}}return o===void 0&&Mt.free(l),h||this.background!==null||this.areaBackground!==null}return o===void 0&&Mt.free(l),!1},H.prototype.computeCurve=function(){if(this.Qf===null){var t=this.fromPort,e=this.isOrthogonal;this.Qf=t!==null&&t===this.toPort&&!e}return this.Qf?tn:this.curve},H.prototype.computeCorner=function(){if(this.curve===tn)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},H.prototype.findMidLabel=function(){for(var t=this.path,e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n];if(r!==t&&!r.isPanelMain&&(r.segmentIndex===-1/0||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(e=t.value,e.segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},H.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=ck;t=Math.max(t,this.computeThickness());var e=this.fromPort,i=this.toPort;if(e!==null&&i!==null){var n=this.findMidLabel();if(n!==null){var r=n.naturalBounds,o=n.margin,l=isNaN(r.width)?30:r.width*n.scale+o.left+o.right;r=isNaN(r.height)?14:r.height*n.scale+o.top+o.bottom,n=n.segmentOrientation,n===vf||n===ld||n===F0?t=Math.max(t,r):n===wf||n===Mf||n===xf||n===Sf?t=Math.max(t,l):(e=e.da(_t).Pa(i.da(_t))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*l)+Math.abs(Math.cos(e)*r)+1)),this.curve===tn&&(t*=1.333)}}return t},H.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===Ti&&i.Va()}},H.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=fk;var e=this.Mf;if(e!==null){for(var i=Et(),n=0,r=e.links,o=0;o<r.length;o++){var l=r[o].computeSpacing();i.push(l),n+=l}for(n=-n/2,o=0;o<r.length;o++){if(r[o]===this){t=n+i[o]/2;break}n+=i[o]}e.Js===this.fromNode&&(t=-t),Ut(i)}}return t},H.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.strokeWidth,1):1},H.prototype.hasCurviness=function(){return!isNaN(this.curviness)||this.Mf!==null},H.prototype.adjustPoints=function(t,e,i,n){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===od)return!1;r===sd&&(r=mf)}switch(r){case od:var o=this.i(t),l=this.i(i);if(!o.Ua(e)||!l.Ua(n)){r=o.x,o=o.y;var h=l.x-r,a=l.y-o,c=Math.sqrt(h*h+a*a);if(!j.aa(c,0)){if(j.aa(h,0))var p=0>a?-Math.PI/2:Math.PI/2;else p=Math.atan(a/Math.abs(h)),0>h&&(p=Math.PI-p);l=e.x;var d=e.y;h=n.x-l;var m=n.y-d;for(a=Math.sqrt(h*h+m*m),j.aa(h,0)?m=0>m?-Math.PI/2:Math.PI/2:(m=Math.atan(m/Math.abs(h)),0>h&&(m=Math.PI-m)),c=a/c,p=m-p,this.Pc(t,e),t+=1;t<i;t++)e=this.i(t),h=e.x-r,a=e.y-o,e=Math.sqrt(h*h+a*a),j.aa(e,0)||(j.aa(h,0)?a=0>a?-Math.PI/2:Math.PI/2:(a=Math.atan(a/Math.abs(h)),0>h&&(a=Math.PI-a)),h=a+p,e*=c,this.M(t,l+e*Math.cos(h),d+e*Math.sin(h)));this.Pc(i,n)}}return!0;case sd:if(o=this.i(t),d=this.i(i),!o.Ua(e)||!d.Ua(n)){r=o.x,o=o.y,l=d.x,d=d.y,c=(l-r)*(l-r)+(d-o)*(d-o),h=e.x,p=e.y,a=n.x,m=n.y;var x=1;if(a-h!==0){var v=(m-p)/(a-h);x=Math.sqrt(1+1/(v*v))}else v=9e9;for(this.Pc(t,e),t+=1;t<i;t++){e=this.i(t);var S=e.x,P=e.y,k=.5;c!==0&&(k=((r-S)*(r-l)+(o-P)*(o-d))/c);var L=r+k*(l-r),T=o+k*(d-o);e=Math.sqrt((S-L)*(S-L)+(P-T)*(P-T)),P<v*(S-L)+T&&(e=-e),0<v&&(e=-e),S=h+k*(a-h),k=p+k*(m-p),v!==0?(e=S+e/x,this.M(t,e,k-(e-S)/v)):this.M(t,S,k+e)}this.Pc(i,n)}return!0;case mf:t:{if(this.isOrthogonal&&(r=this.i(t),o=this.i(t+1),l=this.i(t+2),h=o.x,p=o.y,d=h,c=p,j.w(r.y,o.y)?j.w(o.x,l.x)?p=e.y:j.w(o.y,l.y)&&(h=e.x):j.w(r.x,o.x)&&(j.w(o.y,l.y)?h=e.x:j.w(o.x,l.x)&&(p=e.y)),this.M(t+1,h,p),r=this.i(i),o=this.i(i-1),l=this.i(i-2),h=o.x,p=o.y,a=h,m=p,j.w(r.y,o.y)?j.w(o.x,l.x)?p=n.y:j.w(o.y,l.y)&&(h=n.x):j.w(r.x,o.x)&&(j.w(o.y,l.y)?h=n.x:j.w(o.x,l.x)&&(p=n.y)),this.M(i-1,h,p),O0(this))){this.M(t+1,d,c),this.M(i-1,a,m),i=!1;break t}this.Pc(t,e),this.Pc(i,n),i=!0}return i;default:return!1}},H.prototype.addOrthoPoints=function(t,e,i,n,r,o){0>e?e+=360:360<=e&&(e-=360),0>n?n+=360:360<=n&&(n-=360);var l=n;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=315<=n||45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var h=r.actualBounds.copy(),a=o.actualBounds.copy();if(h.u()&&a.u()){h.Jc(kf,kf),a.Jc(kf,kf),h.Oe(t),a.Oe(i);var c=N.alloc(),p=N.alloc();e===0?i.x>t.x||n===270&&i.y<t.y&&a.right>t.x||n===90&&i.y>t.y&&a.right>t.x?(c.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),n===180?(c.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),p.x=c.x,p.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(c.x=t.x<a.left?this.computeMidOrthoPosition(t.x,t.y,a.left,i.y,!1):t.x<a.right&&(n===270&&t.y<a.top||n===90&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):a.right,p.x=c.x,p.y=i.y):n===0&&t.x<a.left&&t.y>a.top&&t.y<a.bottom&&(c.x=t.x,c.y=t.y<i.y?Math.min(i.y,a.top):Math.max(i.y,a.bottom),p.y=c.y)):(c.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),(n===180||n===90&&i.y<h.top||n===270&&i.y>h.bottom)&&(n===180&&(a.$(t)||h.$(i))?c.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===180||n===90)?c.y=this.computeMidOrthoPosition(t.x,h.top,i.x,Math.max(i.y,a.bottom),!0):i.y>t.y&&(n===180||n===270)&&(c.y=this.computeMidOrthoPosition(t.x,h.bottom,i.x,Math.min(i.y,a.top),!0)),p.x=i.x,p.y=c.y),c.y>h.top&&c.y<h.bottom&&(i.x>=h.left&&i.x<=t.x||t.x<=a.right&&t.x>=i.x?(n===90||n===270)&&(c.h(Math.max((t.x+i.x)/2,t.x),t.y),p.h(c.x,i.y)):(c.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===0?h.top:Math.min(h.top,a.top)):Math.max(i.y,n===0?h.bottom:Math.max(h.bottom,a.bottom)),p.x=i.x,p.y=c.y))):e===180?i.x<t.x||n===270&&i.y<t.y&&a.left<t.x||n===90&&i.y>t.y&&a.left<t.x?(c.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),n===0?(c.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),p.x=c.x,p.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(c.x=t.x>a.right?this.computeMidOrthoPosition(t.x,t.y,a.right,i.y,!1):t.x>a.left&&(n===270&&t.y<a.top||n===90&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):a.left,p.x=c.x,p.y=i.y):n===180&&t.x>a.right&&t.y>a.top&&t.y<a.bottom&&(c.x=t.x,c.y=t.y<i.y?Math.min(i.y,a.top):Math.max(i.y,a.bottom),p.y=c.y)):(c.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),(n===0||n===90&&i.y<h.top||n===270&&i.y>h.bottom)&&(n===0&&(a.$(t)||h.$(i))?c.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===0||n===90)?c.y=this.computeMidOrthoPosition(t.x,h.top,i.x,Math.max(i.y,a.bottom),!0):i.y>t.y&&(n===0||n===270)&&(c.y=this.computeMidOrthoPosition(t.x,h.bottom,i.x,Math.min(i.y,a.top),!0)),p.x=i.x,p.y=c.y),c.y>h.top&&c.y<h.bottom&&(i.x<=h.right&&i.x>=t.x||t.x>=a.left&&t.x<=i.x?(n===90||n===270)&&(c.h(Math.min((t.x+i.x)/2,t.x),t.y),p.h(c.x,i.y)):(c.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===180?h.top:Math.min(h.top,a.top)):Math.max(i.y,n===180?h.bottom:Math.max(h.bottom,a.bottom)),p.x=i.x,p.y=c.y))):e===90?i.y>t.y||n===180&&i.x<t.x&&a.bottom>t.y||n===0&&i.x>t.x&&a.bottom>t.y?(c.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),n===270?(c.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),p.x=i.x,p.y=c.y):n===180&&i.x<t.x||n===0&&i.x>t.x?(c.y=t.y<a.top?this.computeMidOrthoPosition(t.x,t.y,i.x,a.top,!0):t.y<a.bottom&&(n===180&&t.x<a.left||n===0&&t.x>a.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):a.bottom,p.x=i.x,p.y=c.y):n===90&&t.y<a.top&&t.x>a.left&&t.x<a.right&&(c.x=t.x<i.x?Math.min(i.x,a.left):Math.max(i.x,a.right),c.y=t.y,p.x=c.x)):(c.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),(n===270||n===0&&i.x<h.left||n===180&&i.x>h.right)&&(n===270&&(a.$(t)||h.$(i))?c.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===270||n===0)?c.x=this.computeMidOrthoPosition(h.left,t.y,Math.max(i.x,a.right),i.y,!1):i.x>t.x&&(n===270||n===180)&&(c.x=this.computeMidOrthoPosition(h.right,t.y,Math.min(i.x,a.left),i.y,!1)),p.x=c.x,p.y=i.y),c.x>h.left&&c.x<h.right&&(i.y>=h.top&&i.y<=t.y||t.y<=a.bottom&&t.y>=i.y?(n===0||n===180)&&(c.h(t.x,Math.max((t.y+i.y)/2,t.y)),p.h(i.x,c.y)):(c.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===90?h.left:Math.min(h.left,a.left)):Math.max(i.x,n===90?h.right:Math.max(h.right,a.right)),p.x=c.x,p.y=i.y))):i.y<t.y||n===180&&i.x<t.x&&a.top<t.y||n===0&&i.x>t.x&&a.top<t.y?(c.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),n===90?(c.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),p.x=i.x,p.y=c.y):n===180&&i.x<t.x||n===0&&i.x>=t.x?(c.y=t.y>a.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,a.bottom,!0):t.y>a.top&&(n===180&&t.x<a.left||n===0&&t.x>a.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):a.top,p.x=i.x,p.y=c.y):n===270&&t.y>a.bottom&&t.x>a.left&&t.x<a.right&&(c.x=t.x<i.x?Math.min(i.x,a.left):Math.max(i.x,a.right),c.y=t.y,p.x=c.x)):(c.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),(n===90||n===0&&i.x<h.left||n===180&&i.x>h.right)&&(n===90&&(a.$(t)||h.$(i))?c.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===90||n===0)?c.x=this.computeMidOrthoPosition(h.left,t.y,Math.max(i.x,a.right),i.y,!1):i.x>t.x&&(n===90||n===180)&&(c.x=this.computeMidOrthoPosition(h.right,t.y,Math.min(i.x,a.left),i.y,!1)),p.x=c.x,p.y=i.y),c.x>h.left&&c.x<h.right&&(i.y<=h.bottom&&i.y>=t.y||t.y>=a.top&&t.y<=i.y?(n===0||n===180)&&(c.h(t.x,Math.min((t.y+i.y)/2,t.y)),p.h(i.x,c.y)):(c.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===270?h.left:Math.min(h.left,a.left)):Math.max(i.x,n===270?h.right:Math.max(h.right,a.right)),p.x=c.x,p.y=i.y)));var d=i;if(this.isAvoiding){var m=this.diagram;if(m===null||r===o||this.layer.isTemporary||!_S(m)||h.$(d)&&!o.Jd(r)||a.$(t)&&!r.Jd(o))e=!1;else{var x=Im(m,!0,this.containingGroup,null);if(this.segmentIndex!==17&&x.dk(Math.min(t.x,c.x),Math.min(t.y,c.y),Math.abs(t.x-c.x),Math.abs(t.y-c.y))&&x.dk(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y))&&x.dk(Math.min(p.x,d.x),Math.min(p.y,d.y),Math.abs(p.x-d.x),Math.abs(p.y-d.y)))e=!1;else{r=t,o=d;var v=i=null;if(m.isVirtualized){m=x.bounds.copy(),m.Jc(-x.Qp,-x.Pp);var S=N.alloc();Nh(x,t.x,t.y)||(j.Cf(m.x,m.y,m.x+m.width,m.y+m.height,t.x,t.y,c.x,c.y,S)?(i=t=S.copy(),e=S.Pa(c)):j.Cf(m.x,m.y,m.x+m.width,m.y+m.height,c.x,c.y,p.x,p.y,S)?(i=t=S.copy(),e=S.Pa(p)):j.Cf(m.x,m.y,m.x+m.width,m.y+m.height,p.x,p.y,d.x,d.y,S)&&(i=t=S.copy(),e=S.Pa(d))),Nh(x,d.x,d.y)||(j.Cf(m.x,m.y,m.x+m.width,m.y+m.height,d.x,d.y,p.x,p.y,S)?(v=d=S.copy(),n=p.Pa(S)):j.Cf(m.x,m.y,m.x+m.width,m.y+m.height,p.x,p.y,c.x,c.y,S)?(v=d=S.copy(),n=c.Pa(S)):j.Cf(m.x,m.y,m.x+m.width,m.y+m.height,c.x,c.y,t.x,t.y,S)&&(v=d=S.copy(),n=t.Pa(S))),N.free(S)}h=h.copy().Qc(a),h.Jc(x.Qp*x.zy,x.Pp*x.zy),dk(x,t,e,d,n,h,!0),a=Fr(x,d.x,d.y),!x.abort&&a>=Th&&(pk(x),h.Jc(x.Qp*x.ey,x.Pp*x.ey),dk(x,t,e,d,n,h,!1),a=Fr(x,d.x,d.y)),!x.abort&&a<Th&&Fr(x,d.x,d.y)!==Ho?(A0(this,x,d.x,d.y,n,!0,l),h=this.i(2),4>this.pointsCount?(e===0||e===180?(h.x=t.x,h.y=d.y):(h.x=d.x,h.y=t.y),this.M(2,h.x,h.y),this.l(3,h.x,h.y)):(l=this.i(3),e===0||e===180?j.w(h.x,l.x)?(h=e===0?Math.max(h.x,t.x):Math.min(h.x,t.x),this.M(2,h,t.y),this.M(3,h,l.y)):j.w(h.y,l.y)?(Math.abs(t.y-h.y)<=x.Pp/2&&(this.M(2,h.x,t.y),this.M(3,l.x,t.y)),this.l(2,h.x,t.y)):this.M(2,t.x,h.y):(e===90||e===270)&&(j.w(h.y,l.y)?(h=e===90?Math.max(h.y,t.y):Math.min(h.y,t.y),this.M(2,t.x,h),this.M(3,l.x,h)):j.w(h.x,l.x)?(Math.abs(t.x-h.x)<=x.Qp/2&&(this.M(2,t.x,h.y),this.M(3,t.x,l.y)),this.l(2,t.x,h.y)):this.M(2,h.x,t.y))),i!==null&&(t=this.i(1),l=this.i(2),t.x!==l.x&&t.y!==l.y?e===0||e===180?this.l(2,t.x,l.y):this.l(2,l.x,t.y):e===0||e===180?this.l(2,r.x,i.y):this.l(2,i.x,r.y)),v!==null&&(n===0||n===180?this.tf(o.x,v.y):this.tf(v.x,o.y)),e=!0):e=!1}}}else e=!1;e||(this.ee(c.copy()),this.ee(p.copy())),N.free(c),N.free(p)}},H.prototype.computeMidOrthoPosition=function(t,e,i,n,r){var o=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Nc()||this.computeSpot(!1,this.toPort).Nc()||(o=this.computeCurviness()),r?(e+n)/2+o:(t+i)/2+o};function O0(t){if(t.diagram===null||!t.isAvoiding||!_S(t.diagram))return!1;var e=t.points.m,i=e.length;if(4>i)return!1;t=Im(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var r=e[n],o=e[n+1];if(!t.dk(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.abs(r.x-o.x),Math.abs(r.y-o.y)))return!0}return!1}function A0(t,e,i,n,r,o,l){var h=e.Qp,a=e.Pp,c=Fr(e,i,n),p=i,d=n;for(r===0?p+=h:r===90?d+=a:r===180?p-=h:d-=a,r!==l&&c>el&&Fr(e,p,d)!==c-1&&(Fr(e,i-h,n)===c-1?(r=180,p=i-h,d=n):Fr(e,i+h,n)===c-1?(r=0,p=i+h,d=n):Fr(e,i,n-a)===c-1?(r=270,p=i,d=n-a):Fr(e,i,n+a)===c-1&&(r=90,p=i,d=n+a));c>el&&Fr(e,p,d)===c-1;)i=p,n=d,r===0?p+=h:r===90?d+=a:r===180?p-=h:d-=a,--c;o?c>el&&(r===180||r===0?i=Math.floor(i/h)*h+h/2:(r===90||r===270)&&(n=Math.floor(n/a)*a+a/2)):(i=Math.floor(i/h)*h+h/2,n=Math.floor(n/a)*a+a/2),c>el&&(o=r,l=i,p=n,r===0?(o=90,p+=a):r===90?(o=180,l-=h):r===180?(o=270,p-=a):r===270&&(o=0,l+=h),Fr(e,l,p)===c-1?A0(t,e,l,p,o,!1,o):(l=i,p=n,r===0?(o=270,p-=a):r===90?(o=0,l+=h):r===180?(o=90,p+=a):r===270&&(o=180,l-=h),Fr(e,l,p)===c-1&&A0(t,e,l,p,o,!1,o))),t.tf(i,n)}H.prototype.Dz=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),r=pi(e,t,i.x,i.y,n.x,n.y),o=0,l=1;l<this.pointsCount-1;l++){i=this.i(l+1);var h=pi(e,t,n.x,n.y,i.x,i.y);n=i,h<r&&(o=l,r=h)}return o},H.prototype.fc=function(t){this.Bm=!1,t&&this.s()},H.prototype.fk=function(t){if(!(!t&&(this.td===!1||(t=this.pb(),this.Bm&&(t===null||t.geometry!==null))))&&(this.ma=this.makeGeometry(),t=this.path,t!==null)){t.ma=this.ma;for(var e=this.T.m,i=e.length,n=0;n<i;n++){var r=e[n];r!==t&&r.isPanelMain&&r instanceof gt&&(r.ma=this.ma)}}},H.prototype.makeGeometry=function(){var t=this.ma,e=this.pointsCount;if(2>e)return t.type=tt.j,this.Bm=!0,t;var i=!1,n=this.diagram;n!==null&&tl(this)&&n.Xh.contains(this)&&(this.wl.width!==0||this.wl.height!==0)&&(i=!0);var r=this.i(0).copy(),o=r.copy();n=this.Cb.m;var l=this.computeCurve();if(l===tn&&3<=e&&!j.aa(this.smoothness,0))if(e===3){var h=this.i(1);n=Math.min(r.x,h.x);var a=Math.min(r.y,h.y);h=this.i(2),n=Math.min(n,h.x),a=Math.min(a,h.y)}else{if(this.isOrthogonal)for(a=0;a<e;a++)h=n[a],o.x=Math.min(h.x,o.x),o.y=Math.min(h.y,o.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),a=this.i(n),o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);n=o.x,a=o.y}else{for(a=0;a<e;a++)h=n[a],o.x=Math.min(h.x,o.x),o.y=Math.min(h.y,o.y);n=o.x,a=o.y}if(n-=this.lu.x,a-=this.lu.y,r.x-=n,r.y-=a,e!==2||tl(this)){if(t.type=tt.o,h=UM(t),this.computeShortLength(!0)!==0&&(r=Wl(this,r,!0,o)),Mh(h,r.x,r.y,!1),l===tn&&3<=e&&!j.aa(this.smoothness,0))if(e===3)i=this.i(1),e=i.x-n,i=i.y-a,r=this.i(2).copy(),r.x-=n,r.y-=a,this.computeShortLength(!1)!==0&&(r=Wl(this,r,!1,o)),zo(h,e,i,e,i,r.x,r.y);else if(this.isOrthogonal){e=N.allocAt(n,a),i=N.alloc(),i.assign(this.i(1)),o=N.allocAt(n,a),r=N.allocAt(n,a),l=this.i(0);for(var c,p=this.smoothness/3,d=1;d<this.pointsCount-1;d++){c=this.i(d);var m=l,x=c,v=this.i(j0(this,c,d,!1));if((!j.aa(m.x,x.x)||!j.aa(x.x,v.x))&&(!j.aa(m.y,x.y)||!j.aa(x.y,v.y))){var S=p;isNaN(S)&&(S=this.smoothness/3);var P=m.x;m=m.y;var k=x.x;x=x.y;var L=v.x;v=v.y;var T=S*rd(P,m,k,x);S*=rd(k,x,L,v),j.aa(m,x)&&j.aa(k,L)&&(k>P?v>x?(o.x=k-T,o.y=x-T,r.x=k+S,r.y=x+S):(o.x=k-T,o.y=x+T,r.x=k+S,r.y=x-S):v>x?(o.x=k+T,o.y=x-T,r.x=k-S,r.y=x+S):(o.x=k+T,o.y=x+T,r.x=k-S,r.y=x-S)),j.aa(P,k)&&j.aa(x,v)&&(x>m?(L>k?(o.x=k-T,o.y=x-T,r.x=k+S):(o.x=k+T,o.y=x-T,r.x=k-S),r.y=x+S):(L>k?(o.x=k-T,o.y=x+T,r.x=k+S):(o.x=k+T,o.y=x+T,r.x=k-S),r.y=x-S)),(j.aa(P,k)&&j.aa(k,L)||j.aa(m,x)&&j.aa(x,v))&&(P=.5*(P+L),m=.5*(m+v),o.x=P,o.y=m,r.x=P,r.y=m),(d===1||d===2&&j.aa(l.x,this.i(0).x)&&j.aa(l.y,this.i(0).y))&&(i.x=.5*(l.x+c.x),i.y=.5*(l.y+c.y)),zo(h,i.x-n,i.y-a,o.x-n,o.y-a,c.x-n,c.y-a),e.set(o),i.set(r),l=c}}c=l.x,l=l.y,p=this.i(this.pointsCount-1),this.computeShortLength(!1)!==0&&(p=Wl(this,p.copy(),!1,Oo)),c=.5*(c+p.x),l=.5*(l+p.y),zo(h,r.x-n,r.y-a,c-n,l-a,p.x-n,p.y-a),N.free(e),N.free(i),N.free(o),N.free(r)}else for(i=3;i<e;i+=3)o=this.i(i-2),i+3>=e&&(i=e-1),r=this.i(i-1),l=this.i(i),i===e-1&&this.computeShortLength(!1)!==0&&(l=Wl(this,l.copy(),!1,Oo)),zo(h,o.x-n,o.y-a,r.x-n,r.y-a,l.x-n,l.y-a);else{for(o=N.alloc(),o.assign(this.i(0)),r=N.alloc(),r.assign(o),l=this.computeCorner(),d=1,c=0;d<e;){if(d=j0(this,o,d,1<d),p=this.i(d),d>=e-1){if(!o.A(p))this.computeShortLength(!1)!==0&&(p=Wl(this,p.copy(),!1,Oo)),Hl(this,h,-n,-a,o,p,i);else if(c===0)for(d=1;d<e;)r.assign(o),p=this.i(d++),Hl(this,h,-n,-a,o,p,i),o.assign(p);break}if(c=j0(this,p,d+1,d<e-3),d=-n,P=-a,m=p,k=this.i(c),S=i,j.w(o.y,m.y)&&j.w(m.x,k.x))if(v=Math.min(l,Math.abs(m.x-r.x)/2),v=T=Math.min(v,Math.abs(k.y-m.y)/2),j.w(v,0))Hl(this,h,d,P,o,m,S),o.assign(m);else{var O=m.x,E=m.y;x=O,L=E,m.x>o.x?O=m.x-v:O=m.x+v,k.y>m.y?L=m.y+T:L=m.y-T,k=N.allocAt(O,E),Hl(this,h,d,P,o,k,S),N.free(k),Jp(h,m.x+d,m.y+P,x+d,L+P),o.h(x,L)}else j.w(o.x,m.x)&&j.w(m.y,k.y)?(v=Math.min(l,Math.abs(m.y-r.y)/2),v=T=Math.min(v,Math.abs(k.x-m.x)/2),j.w(T,0)?(Hl(this,h,d,P,o,m,S),o.assign(m)):(O=m.x,E=m.y,x=O,L=E,m.y>o.y?E=m.y-v:E=m.y+v,k.x>m.x?x=m.x+T:x=m.x-T,k=N.allocAt(O,E),Hl(this,h,d,P,o,k,S),N.free(k),Jp(h,m.x+d,m.y+P,x+d,L+P),o.h(x,L))):(Hl(this,h,d,P,o,m,S),o.assign(m));r.assign(p),d=c}N.free(o)}Zp=h}else h=this.i(1).copy(),h.x-=n,h.y-=a,this.computeShortLength(!0)!==0&&(r=Wl(this,r,!0,o)),this.computeShortLength(!1)!==0&&(h=Wl(this,h,!1,o)),t.type=tt.j,t.startX=r.x,t.startY=r.y,t.endX=h.x,t.endY=h.y;return this.Bm=!0,t};function rd(t,e,i,n){return t=i-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),j.aa(t,0)?e:j.aa(e,0)?t:Math.sqrt(t*t+e*e)))}function Wl(t,e,i,n){var r=t.pointsCount;if(2>r)return e;if(i){var o=t.i(1);if(i=o.x-n.x,o=o.y-n.y,n=rd(e.x,e.y,i,o),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!0),t>r&&(t=r),r=t*(o-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=r}else{if(o=t.i(r-2),i=o.x-n.x,o=o.y-n.y,n=rd(e.x,e.y,i,o),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!1),t>r&&(t=r),r=t*(e.y-o)/n,e.x-=t*(e.x-i)/n,e.y-=r}return e}function j0(t,e,i,n){for(var r=t.pointsCount,o=e;j.aa(e.x,o.x)&&j.aa(e.y,o.y);){if(i>=r)return r-1;o=t.i(i++)}if(!j.aa(e.x,o.x)&&!j.aa(e.y,o.y))return i-1;for(var l=o;j.aa(e.x,o.x)&&j.aa(o.x,l.x)&&(!n||(e.y>=o.y?o.y>=l.y:o.y<=l.y))||j.aa(e.y,o.y)&&j.aa(o.y,l.y)&&(!n||(e.x>=o.x?o.x>=l.x:o.x<=l.x));){if(i>=r)return r-1;l=t.i(i++)}return i-2}H.prototype.computeJumpLength=function(){return 10};function Hl(t,e,i,n,r,o,l){if(!l&&tl(t)){l=t.computeJumpLength();var h=l/2,a=[],c=0;if(t.isVisible()&&(c=eL(t,r,o,a)),0<c){if(j.w(r.y,o.y))if(r.x<o.x)for(var p=0;p<c;){var d=Math.max(r.x,Math.min(a[p++]-h,o.x-l));e.lineTo(d+i,o.y+n);for(var m=d+i,x=Math.min(d+l,o.x);p<c&&(d=a[p],d<x+l);)p++,x=Math.min(d+h,o.x);d=o.y-l+n,x+=i;var v=o.y+n;t.curve===Wo?Mh(e,x,v,!1):zo(e,m,d,x,d,x,v)}else for(--c;0<=c;){for(p=Math.min(r.x,Math.max(a[c--]+h,o.x+l)),e.lineTo(p+i,o.y+n),m=p+i,d=Math.max(p-l,o.x);0<=c&&(p=a[c],p>d-l);)c--,d=Math.max(p-h,o.x);p=o.y-l+n,d+=i,x=o.y+n,t.curve===Wo?Mh(e,d,x,!1):zo(e,m,p,d,p,d,x)}else if(j.w(r.x,o.x))if(r.y<o.y)for(p=0;p<c;){for(d=Math.max(r.y,Math.min(a[p++]-h,o.y-l)),e.lineTo(o.x+i,d+n),m=d+n,d=Math.min(d+l,o.y);p<c&&(x=a[p],x<d+l);)p++,d=Math.min(x+h,o.y);x=o.x-l+i,v=o.x+i,d+=n,t.curve===Wo?Mh(e,v,d,!1):zo(e,x,m,x,d,v,d)}else for(--c;0<=c;){for(p=Math.min(r.y,Math.max(a[c--]+h,o.y+l)),e.lineTo(o.x+i,p+n),m=p+n,p=Math.max(p-l,o.y);0<=c&&(d=a[c],d>p-l);)c--,p=Math.max(d-h,o.y);d=o.x-l+i,x=o.x+i,p+=n,t.curve===Wo?Mh(e,x,p,!1):zo(e,d,m,d,p,x,p)}}}e.lineTo(o.x+i,o.y+n)}function eL(t,e,i,n){var r=t.diagram;if(r===null||e.A(i))return 0;for(r=r.layers;r.next();){var o=r.value;if(o!==null&&o.visible){o=o.Ha.m;for(var l=o.length,h=0;h<l;h++){var a=o[h];if(a instanceof H){if(a===t)return 0<n.length&&n.sort(function(p,d){return p-d}),n.length;if(a.isVisible()&&tl(a)){var c=a.routeBounds;c.u()&&t.routeBounds.Lc(c)&&!t.usesSamePort(a)&&(c=a.path,c!==null&&c.Ff()&&iL(e,i,n,a))}}}}}return 0<n.length&&n.sort(function(p,d){return p-d}),n.length}function iL(t,e,i,n){for(var r=j.w(t.y,e.y),o=n.pointsCount,l=n.i(0),h=N.alloc(),a=1;a<o;a++){var c=n.i(a);if(a<o-1){var p=n.i(a+1);if(l.y===c.y&&c.y===p.y){if(c.x>l.x&&p.x>=c.x||c.x<l.x&&p.x<=c.x)continue}else if(l.x===c.x&&c.x===p.x&&(c.y>l.y&&p.y>=c.y||c.y<l.y&&p.y<=c.y))continue}t:{p=t.x;var d=t.y,m=e.x,x=e.y,v=l.x;l=l.y;var S=c.x,P=c.y;if(j.w(p,m)){if(!j.w(d,x)&&j.w(l,P)&&Math.min(d,x)<l&&Math.max(d,x)>l&&Math.min(v,S)<p&&Math.max(v,S)>p&&!j.w(v,S)){h.x=p,h.y=l,p=!0;break t}}else if(j.w(d,x)&&j.w(v,S)&&Math.min(p,m)<v&&Math.max(p,m)>v&&Math.min(l,P)<d&&Math.max(l,P)>d&&!j.w(l,P)){h.x=v,h.y=d,p=!0;break t}h.x=0,h.y=0,p=!1}p&&(r?i.push(h.x):i.push(h.y)),l=c}N.free(h)}function tl(t){return t=t.curve,t===Ch||t===Wo}function D0(t,e){(e||tl(t))&&(e=t.diagram,e===null||e.animationManager.isTicking||e.Xh.contains(t)||t.wl.width===0&&t.wl.height===0||e.Xh.add(t,t.wl.copy()))}H.prototype.eq=function(t){var e=this.layer;if(e!==null&&e.visible&&!e.isTemporary){var i=e.diagram;if(i!==null&&!i.animationManager.isTicking){var n=!1;for(i=i.layers;i.next();){var r=i.value;if(r.visible){if(r===e){n=!0;var o=!1;r=r.Ha.m;for(var l=r.length,h=0;h<l;h++){var a=r[h];a instanceof H&&(a===this?o=!0:o&&hk(this,a,t))}}else if(n)for(o=r.Ha.m,r=o.length,l=0;l<r;l++)h=o[l],h instanceof H&&hk(this,h,t)}}}}};function hk(t,e,i){if(e!==null&&e.Bm&&e.td&&tl(e)){var n=e.routeBounds;n.u()&&(t.routeBounds.Lc(n)||i.Lc(n))&&(t.usesSamePort(e)||e.fc(!1))}}H.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),r=t.i(0);if(n.Ua(r)||(e=this.i(e-1),t=t.i(i-1),e.Ua(t)||n.Ua(t)||e.Ua(r)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},H.prototype.isVisible=function(){if(!ut.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this.fromNode,i!==null){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;n!==null;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(i=i.findVisibleNode(),i===null||i===t)return!1}if(i=this.toNode,i!==null){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;e!==null;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(e=i.findVisibleNode(),e===null||e===t)return!1}return!0},H.prototype.Ob=function(t){if(ut.prototype.Ob.call(this,t),this.Mf!==null&&this.Mf.cm(),this.nd!==null)for(var e=this.nd.iterator;e.next();)e.value.Ob(t)},H.prototype.computeAdjusting=function(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?mf:this.uk};function yf(t){var e=t.We;if(e!==null){var i=t.pf;if(i!==null&&isNaN(t.curviness)){for(var n=t.Xe,r=t.qf,o=t=null,l=e.ab.m,h=l.length,a=0;a<h;a++){var c=l[a];(c.We===e&&c.Xe===n&&c.pf===i&&c.qf===r||c.We===i&&c.Xe===r&&c.pf===e&&c.qf===n)&&(o===null?o=c:(t===null&&(t=[],t.push(o)),t.push(c)))}if(t!==null){for(o=QM(e,i,n,r),o===null&&(o=new hd(e,n,i,r),ZM(e,o),ZM(i,o)),o.links=t,e=0;e<t.length;e++)t[e].Mf=o;o.cm()}}}}function gf(t){var e=t.Mf;e!==null&&isNaN(t.curviness)&&(t.Mf=null,t=e.links.indexOf(t),0<=t&&(Ue(e.links,t),e.cm()))}H.prototype.Hh=function(){return!0},Y.Object.defineProperties(H.prototype,{fromNode:{get:function(){return this.We},set:function(t){var e=this.We;if(e!==t){var i=this.fromPort;e!==null&&(this.pf!==e&&td(e,this,i),gf(this),this.B(2)),this.We=t,t!==null&&this.Ob(t.isVisible()),this.Qf=null,this.Va();var n=this.diagram;n!==null&&n.Z&&n.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,o=this.fromPortChanged;if(o!==null){var l=!0;n!==null&&(l=n.Z,n.Z=!0),o(this,i,r),n!==null&&(n.Z=l)}t!==null&&(this.pf!==t&&bp(t,this,r),yf(this),this.B(1)),this.g("fromNode",e,t),kh(this)}}},fromPortId:{get:function(){return this.Xe},set:function(t){var e=this.Xe;if(e!==t){var i=this.fromPort;i!==null&&Wi(i),gf(this),this.Xe=t;var n=this.fromPort;n!==null&&Wi(n);var r=this.diagram;if(r!==null){var o=this.data,l=r.model;o!==null&&l.Pi()&&l.Hv(o,t)}i!==n&&(this.Qf=null,this.Va(),o=this.fromPortChanged,o!==null&&(l=!0,r!==null&&(l=r.Z,r.Z=!0),o(this,i,n),r!==null&&(r.Z=l))),yf(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.We;return t===null?null:t.rs(this.Xe)}},fromPortChanged:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.pf},set:function(t){var e=this.pf;if(e!==t){var i=this.toPort;e!==null&&(this.We!==e&&td(e,this,i),gf(this),this.B(2)),this.pf=t,t!==null&&this.Ob(t.isVisible()),this.Qf=null,this.Va();var n=this.diagram;n!==null&&n.Z&&n.partManager.setToNodeForLink(this,t,e);var r=this.toPort,o=this.toPortChanged;if(o!==null){var l=!0;n!==null&&(l=n.Z,n.Z=!0),o(this,i,r),n!==null&&(n.Z=l)}t!==null&&(this.We!==t&&bp(t,this,r),yf(this),this.B(1)),this.g("toNode",e,t),kh(this)}}},toPortId:{get:function(){return this.qf},set:function(t){var e=this.qf;if(e!==t){var i=this.toPort;i!==null&&Wi(i),gf(this),this.qf=t;var n=this.toPort;n!==null&&Wi(n);var r=this.diagram;if(r!==null){var o=this.data,l=r.model;o!==null&&l.Pi()&&l.Lv(o,t)}i!==n&&(this.Qf=null,this.Va(),o=this.toPortChanged,o!==null&&(l=!0,r!==null&&(l=r.Z,r.Z=!0),o(this,i,n),r!==null&&(r.Z=l))),yf(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.pf;return t===null?null:t.rs(this.qf)}},toPortChanged:{get:function(){return this.Cp},set:function(t){var e=this.Cp;e!==t&&(this.Cp=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return this.P!==null?this.P.Og:Pi},set:function(t){this.Kc();var e=this.P.Og;e.A(t)||(t=t.I(),this.P.Og=t,this.g("fromSpot",e,t),(e.Nc()||t.Nc())&&this.fromNode!==null&&Wi(this.fromPort),this.Va())}},fromEndSegmentLength:{get:function(){return this.P!==null?this.P.Mg:NaN},set:function(t){this.Kc();var e=this.P.Mg;e!==t&&(0>t&&st(t,">= 0",H,"fromEndSegmentLength"),this.P.Mg=t,this.g("fromEndSegmentLength",e,t),this.Va())}},fromShortLength:{get:function(){return this.P!==null?this.P.Ng:NaN},set:function(t){this.Kc();var e=this.P.Ng;e!==t&&(this.P.Ng=t,this.fc(!0),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return this.P!==null?this.P.th:Pi},set:function(t){this.Kc();var e=this.P.th;e.A(t)||(t=t.I(),this.P.th=t,this.g("toSpot",e,t),(e.Nc()||t.Nc())&&this.toNode!==null&&Wi(this.toPort),this.Va())}},toEndSegmentLength:{get:function(){return this.P!==null?this.P.rh:NaN},set:function(t){this.Kc();var e=this.P.rh;e!==t&&(0>t&&st(t,">= 0",H,"toEndSegmentLength"),this.P.rh=t,this.g("toEndSegmentLength",e,t),this.Va())}},toShortLength:{get:function(){return this.P!==null?this.P.sh:NaN},set:function(t){this.Kc();var e=this.P.sh;e!==t&&(this.P.sh=t,this.fc(!0),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return this.nd===null?!1:0<this.nd.count}},labelNodes:{get:function(){return this.nd===null?Vn:this.nd.iterator}},relinkableFrom:{get:function(){return(this.Ia&1)!==0},set:function(t){var e=(this.Ia&1)!==0;e!==t&&(this.Ia^=1,this.g("relinkableFrom",e,t),this.Lb())}},relinkableTo:{get:function(){return(this.Ia&2)!==0},set:function(t){var e=(this.Ia&2)!==0;e!==t&&(this.Ia^=2,this.g("relinkableTo",e,t),this.Lb())}},resegmentable:{get:function(){return(this.Ia&4)!==0},set:function(t){var e=(this.Ia&4)!==0;e!==t&&(this.Ia^=4,this.g("resegmentable",e,t),this.Lb())}},isTreeLink:{get:function(){return(this.Ia&8)!==0},set:function(t){var e=(this.Ia&8)!==0;e!==t&&(this.Ia^=8,this.g("isTreeLink",e,t),this.fromNode!==null&&df(this.fromNode),this.toNode!==null&&df(this.toNode))}},path:{get:function(){var t=this.pb();return t instanceof gt?t:null}},routeBounds:{get:function(){this.ug();var t=this.wl,e=1/0,i=1/0,n=this.pointsCount;if(n===0)t.h(NaN,NaN,0,0);else{if(n===1)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(n===2){n=this.i(0);var r=this.i(1);e=Math.min(n.x,r.x),i=Math.min(n.y,r.y),t.h(n.x,n.y,0,0),t.Oe(r)}else if(this.computeCurve()===tn&&3<=n&&!this.isOrthogonal)if(r=this.i(0),e=r.x,i=r.y,t.h(e,i,0,0),n===3){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var o=this.i(2);e=Math.min(o.x,e),i=Math.min(o.y,i),j.Tl(r.x,r.y,n.x,n.y,n.x,n.y,o.x,o.y,.5,t)}else for(o=3;o<n;o+=3){var l=this.i(o-2);o+3>=n&&(o=n-1);var h=this.i(o-1),a=this.i(o);j.Tl(r.x,r.y,l.x,l.y,h.x,h.y,a.x,a.y,.5,t),e=Math.min(a.x,e),i=Math.min(a.y,i),r=a}else for(r=this.i(0),o=this.i(1),e=Math.min(r.x,o.x),i=Math.min(r.y,o.y),t.h(r.x,r.y,0,0),t.Oe(o),r=2;r<n;r++)o=this.i(r),e=Math.min(o.x,e),i=Math.min(o.y,i),t.Oe(o);this.lu.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.ug(),this.computeMidPoint(new N)}},midAngle:{get:function(){return this.ug(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(this.cr===null){this.td||ed(this);for(var t=this.cr=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),r=this.i(i+1);j.aa(n.x,r.x)?(n=r.y-n.y,0>n&&(n=-n)):j.aa(n.y,r.y)?(n=r.x-n.x,0>n&&(n=-n)):n=Math.sqrt(n.xf(r)),t.push(n)}}return this.cr}},flattenedTotalLength:{get:function(){var t=this.Gt;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.Gt=t}return t}},points:{get:function(){return this.Cb},set:function(t){var e=this.Cb;if(e!==t){var i=null;if(Array.isArray(t)){var n=t.length%2===0;if(n){for(var r=0;r<t.length;r++)if(typeof t[r]!="number"||isNaN(t[r])){n=!1;break}}if(n)for(i=new it,n=0;n<t.length/2;n++)r=new N(t[2*n],t[2*n+1]).freeze(),i.add(r);else{for(n=!0,r=0;r<t.length;r++){var o=t[r];if(!ct(o)||typeof o.x!="number"||isNaN(o.x)||typeof o.y!="number"||isNaN(o.y)){n=!1;break}}if(n)for(i=new it,n=0;n<t.length;n++)r=t[n],i.add(new N(r.x,r.y).freeze())}}else if(t instanceof it)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else D("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.Cb=i,this.fc(!0),ed(this),t=this.diagram,t!==null&&(t.Oi||t.undoManager.isUndoingRedoing||t.Gs.add(this),t.animationManager.tb&&(t=t.animationManager,this.gf=i,t.yl.add(this))),this.g("points",e,i)}}},pointsCount:{get:function(){return this.Cb.count}},td:{get:function(){return(this.Ia&16)!==0},set:function(t){(this.Ia&16)!==0!==t&&(this.Ia^=16)}},suspendsRouting:{get:function(){return(this.Ia&32)!==0},set:function(t){(this.Ia&32)!==0!==t&&(this.Ia^=32)}},computingPoints:{get:function(){return(this.Ia&64)!==0},set:function(t){(this.Ia&64)!==0!==t&&(this.Ia^=64)}},defaultFromPoint:{get:function(){return this.o},set:function(t){this.o=t.copy()}},defaultToPoint:{get:function(){return this.D},set:function(t){this.D=t.copy()}},isOrthogonal:{get:function(){return(this.Cj.value&2)===2}},isAvoiding:{get:function(){return(this.Cj.value&4)===4}},Bm:{get:function(){return(this.Ia&128)!==0},set:function(t){(this.Ia&128)!==0!==t&&(this.Ia^=128)}},geometry:{get:function(){return this.Bm||(this.ug(),this.ma=this.makeGeometry()),this.ma}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Ph(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return t===0?0:2>=t?t-1:this.isOrthogonal||!Ph(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.uk},set:function(t){var e=this.uk;e!==t&&(this.uk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.fn},set:function(t){var e=this.fn;e!==t&&(this.fn=t,this.fc(!0),this.g("corner",e,t))}},curve:{get:function(){return this.hn},set:function(t){var e=this.hn;e!==t&&(this.hn=t,this.Va(),this.fc(!0),D0(this,e===Wo||e===Ch||t===Wo||t===Ch),this.g("curve",e,t))}},curviness:{get:function(){return this.jn},set:function(t){var e=this.jn;e!==t&&(this.jn=t,this.Va(),this.fc(!1),this.g("curviness",e,t))}},routing:{get:function(){return this.Cj},set:function(t){var e=this.Cj;e!==t&&(this.Cj=t,this.Qf=null,this.Va(),D0(this,(e.value&2)===2||(t.value&2)===2),this.g("routing",e,t))}},smoothness:{get:function(){return this.qp},set:function(t){var e=this.qp;e!==t&&(this.qp=t,this.fc(!0),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(t!==null&&t.model.Pi())return t.model.pc(this.data)}}}),H.prototype.invalidateOtherJumpOvers=H.prototype.eq,H.prototype.findClosestSegment=H.prototype.Dz,H.prototype.updateRoute=H.prototype.ug,H.prototype.invalidateRoute=H.prototype.Va,H.prototype.rollbackRoute=H.prototype.Cv,H.prototype.commitRoute=H.prototype.vf,H.prototype.startRoute=H.prototype.Lh,H.prototype.clearPoints=H.prototype.Pj,H.prototype.removePoint=H.prototype.Av,H.prototype.addPointAt=H.prototype.tf,H.prototype.addPoint=H.prototype.ee,H.prototype.insertPointAt=H.prototype.l,H.prototype.insertPoint=H.prototype.iA,H.prototype.setPointAt=H.prototype.M,H.prototype.setPoint=H.prototype.Pc,H.prototype.getPoint=H.prototype.i,H.prototype.getOtherPort=H.prototype.$z,H.prototype.getOtherNode=H.prototype.$p;var Kl=null,$l=null,I0=new K(H,"Normal",1),nL=new K(H,"Orthogonal",2),rL=new K(H,"AvoidsNodes",6),ak=new K(H,"AvoidsNodesStraight",7),Ti=new K(H,"None",0),tn=new K(H,"Bezier",9),Wo=new K(H,"JumpGap",10),Ch=new K(H,"JumpOver",11),mf=new K(H,"End",17),od=new K(H,"Scale",18),sd=new K(H,"Stretch",19),vf=new K(H,"OrientAlong",21),xf=new K(H,"OrientPlus90",22),wf=new K(H,"OrientMinus90",23),F0=new K(H,"OrientOpposite",24),ld=new K(H,"OrientUpright",25),Sf=new K(H,"OrientPlus90Upright",26),Mf=new K(H,"OrientMinus90Upright",27),ud=new K(H,"OrientUpright45",28),fk=16,ck=14,kf=8;H.className="Link",H.Normal=I0,H.Orthogonal=nL,H.AvoidsNodes=rL,H.AvoidsNodesStraight=ak,H.None=Ti,H.Bezier=tn,H.JumpGap=Wo,H.JumpOver=Ch,H.End=mf,H.Scale=od,H.Stretch=sd,H.OrientAlong=vf,H.OrientPlus90=xf,H.OrientMinus90=wf,H.OrientOpposite=F0,H.OrientUpright=ld,H.OrientPlus90Upright=Sf,H.OrientMinus90Upright=Mf,H.OrientUpright45=ud,H.EndSegmentStep=8,H.CurvinessStart=fk,H.SpacingMin=ck,H.OrthoShortCut=kf,H.AvoidanceCell=8,H.AvoidanceLimit=999;function hd(t,e,i,n){je(this),this.ue=this.ir=!1,this.Js=t,this.my=e,this.nv=i,this.ny=n,this.links=[]}hd.prototype.cm=function(){if(!this.ir){var t=this.links;0<t.length&&(t=t[0].diagram,t!==null&&(t.Ow.add(this),this.ue=t.undoManager.isUndoingRedoing))}this.ir=!0},hd.prototype.Xv=function(){if(this.ir){this.ir=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=i===null||i.Oi&&!this.ue,this.ue=!1,e.arrangeBundledLinks(t,i),t.length===1&&(e.Mf=null,t.length=0)}t.length===0&&(t=this.Js,this!==null&&t.Te!==null&&t.Te.remove(this),t=this.nv,this!==null&&t.Te!==null&&t.Te.remove(this))}},hd.className="LinkBundle";function Pf(){je(this),this.yy=this.group=null,this.zs=!0,this.abort=!1,this.zd=this.yd=1,this.po=this.oo=-1,this.hc=this.gc=8,this.Tb=null,this.zi=this.yi=0,this.zy=11,this.ey=124}Pf.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.yd=Math.floor((t.x-this.gc)/this.gc)*this.gc,this.zd=Math.floor((e-this.hc)/this.hc)*this.hc,this.oo=Math.ceil((i+2*this.gc)/this.gc)*this.gc,this.po=Math.ceil((n+2*this.hc)/this.hc)*this.hc,t=1+(Math.ceil((this.oo-this.yd)/this.gc)|0),e=1+(Math.ceil((this.po-this.zd)/this.hc)|0),this.Tb===null||this.yi<t-1||this.zi<e-1){for(i=[],n=0;n<=t;n++)i[n]=new Uint32Array(e);this.Tb=i,this.yi=t-1,this.zi=e-1}if(t=R0,this.Tb!==null)for(e=0;e<=this.yi;e++)if(i=this.Tb[e],i.fill)i.fill(t);else for(n=0;n<=this.zi;n++)i[n]=t}};function Nh(t,e,i){return t.yd<=e&&e<=t.oo&&t.zd<=i&&i<=t.po}function Fr(t,e,i){return Nh(t,e,i)?(e-=t.yd,e/=t.gc,i-=t.zd,i/=t.hc,t.Tb[e|0][i|0]):R0}function pk(t){if(t.Tb!==null)for(var e=0;e<=t.yi;e++)for(var i=t.Tb[e],n=0;n<=t.zi;n++)i[n]>=el&&(i[n]=R0)}Pf.prototype.dk=function(t,e,i,n){if(t>this.oo||t+i<this.yd||e>this.po||e+n<this.zd)return!0;t=(t-this.yd)/this.gc|0,e=(e-this.zd)/this.hc|0,i=Math.max(0,i)/this.gc+1|0;var r=Math.max(0,n)/this.hc+1|0;if(0>t&&(i+=t,t=0),0>e&&(r+=e,e=0),0>i||0>r)return!0;for(n=Math.min(t+i-1,this.yi)|0,i=Math.min(e+r-1,this.zi)|0;t<=n;t++){r=this.Tb[t];for(var o=e;o<=i;o++)if(r[o]===Ho)return!1}return!0};function Rr(t,e,i,n,r,o,l,h,a){if(!(e<o||e>l||i<h||i>a)){var c=e|0,p=i|0,d=t.Tb[c][p];if(d>=el&&d<Th)for(r?p+=n:c+=n,d+=1;o<=c&&c<=l&&h<=p&&p<=a&&!(d>=t.Tb[c][p]);)t.Tb[c][p]=d,d+=1,r?p+=n:c+=n;if(c=r?p:c,r)if(0<n)for(i+=n;i<c;i+=n)Rr(t,e,i,1,!r,o,l,h,a),Rr(t,e,i,-1,!r,o,l,h,a);else for(i+=n;i>c;i+=n)Rr(t,e,i,1,!r,o,l,h,a),Rr(t,e,i,-1,!r,o,l,h,a);else if(0<n)for(e+=n;e<c;e+=n)Rr(t,e,i,1,!r,o,l,h,a),Rr(t,e,i,-1,!r,o,l,h,a);else for(e+=n;e>c;e+=n)Rr(t,e,i,1,!r,o,l,h,a),Rr(t,e,i,-1,!r,o,l,h,a)}}function ad(t,e,i,n,r,o,l,h,a){e|=0,i|=0;var c=Ho,p=el;for(t.Tb[e][i]=p;c===Ho&&e>o&&e<l&&i>h&&i<a;)p+=1,t.Tb[e][i]=p,r?i+=n:e+=n,c=t.Tb[e][i]}function fd(t,e,i,n,r,o,l,h,a){e|=0,i|=0;var c=Ho,p=Th;for(t.Tb[e][i]=p;c===Ho&&e>o&&e<l&&i>h&&i<a;)t.Tb[e][i]=p,r?i+=n:e+=n,c=t.Tb[e][i]}function dk(t,e,i,n,r,o,l){if(t.Tb!==null){t.abort=!1;var h=e.x,a=e.y;if(Nh(t,h,a)){h-=t.yd,h/=t.gc,a-=t.zd,a/=t.hc;var c=n.x,p=n.y;if(Nh(t,c,p))if(c-=t.yd,c/=t.gc,p-=t.zd,p/=t.hc,1>=Math.abs(h-c)&&1>=Math.abs(a-p))t.abort=!0;else{var d=o.x;n=o.y,e=o.x+o.width;var m=o.y+o.height;d-=t.yd,d/=t.gc,n-=t.zd,n/=t.hc,e-=t.yd,e/=t.gc,m-=t.zd,m/=t.hc,o=Math.max(0,Math.min(t.yi,d|0)),e=Math.min(t.yi,Math.max(0,e|0)),d=Math.max(0,Math.min(t.zi,n|0)),m=Math.min(t.zi,Math.max(0,m|0)),n=t.Tb,h|=0,a|=0,c|=0,p|=0;var x=i===0||i===90?1:-1;if(i=i===90||i===270,n[h][a]===Ho?(ad(t,h,a,x,i,o,e,d,m),ad(t,h,a,1,!i,o,e,d,m),ad(t,h,a,-1,!i,o,e,d,m)):ad(t,h,a,x,i,h,a,h,a),n[c][p]===Ho?(fd(t,c,p,r===0||r===90?1:-1,r===90||r===270,o,e,d,m),fd(t,c,p,1,!(r===90||r===270),o,e,d,m),fd(t,c,p,-1,!(r===90||r===270),o,e,d,m)):fd(t,c,p,x,i,c,p,c,p),i=Et(),l&&yk(t,c,p,r,h,a,i))for((i[0]!==c||i[1]!==p)&&(i.unshift(p),i.unshift(c)),(i[i.length-2]!==h||i[i.length-1]!==a)&&(i.push(h),i.push(a)),t=el,r=i[i.length-2],l=i[i.length-1],n[r][l]=t++,o=i.length-4;0<=o;o-=2)for(r=i[o+2],l=i[o+3],e=i[o],c=i[o+1];e>r?r++:e<r?r--:c>l?l++:c<l&&l--,n[r][l]=t++,r!==e||l!==c;);else Rr(t,h,a,1,!1,o,e,d,m),Rr(t,h,a,-1,!1,o,e,d,m),Rr(t,h,a,1,!0,o,e,d,m),Rr(t,h,a,-1,!0,o,e,d,m);Ut(i)}}}}function yk(t,e,i,n,r,o,l){for(var h=t.Tb,a=e,c=i;;){if(a===r&&c===o)return!0;var p=a,d=c;if(n===0)if(p<r)p++;else break;else if(n===90)if(d<o)d++;else break;else if(n===180)if(p>r)p--;else break;else if(d>o)d--;else break;var m=h[p][d];if(m===0||m===B0)break;a=p,c=d}for(;;){if(p=n,d=a,m=c,n===0?m<o?(p=90,m++):m>o&&(p=270,m--):n===90?d<r?(p=0,d++):d>r&&(p=180,d--):n===180?m<o?(p=90,m++):m>o&&(p=270,m--):d<r?(p=0,d++):d>r&&(p=180,d--),d=h[d][m],p!==n&&d!==0&&d!==B0){if(l.push(a),l.push(c),yk(t,a,c,p,r,o,l))return!0;l.pop(),l.pop()}if(h[a][c]=B0,n===0){if(a===e)return!1;a--}else if(n===90){if(c===i)return!1;c--}else if(n===180){if(a===e)return!1;a++}else{if(c===i)return!1;c++}}}Y.Object.defineProperties(Pf.prototype,{bounds:{get:function(){return new _(this.yd,this.zd,this.oo-this.yd,this.po-this.zd)}},Qp:{get:function(){return this.gc},set:function(t){0<t&&t!==this.gc&&(this.gc=t,this.initialize(this.bounds))}},Pp:{get:function(){return this.hc},set:function(t){0<t&&t!==this.hc&&(this.hc=t,this.initialize(this.bounds))}}});var Ho=0,el=1,Th=999999,R0=Th+1,B0=Th+2;Pf.className="PositionArray";function Jl(){je(this),this.port=this.node=null,this.ge=[],this.hq=!1}Jl.prototype.toString=function(){for(var t=this.ge,e=this.node.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];n!==null&&(e+=`
  `+n.toString())}return e};function oL(t,e,i,n){switch(e=e.offsetY,e){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&e!==15&&(i-=15,0>i&&(i+=360)),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}Jl.prototype.cm=function(){this.ge.length=0};function gk(t,e){var i=t.ge;if(i.length===0){t:if(!t.hq){i=t.hq,t.hq=!0;var n=null,r=t.node,o=r instanceof dt?r:null;if(o===null||o.isSubGraphExpanded)var l=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.Mx();else{if(!o.actualBounds.u()){t.hq=i;break t}n=o,l=n.Mu()}o=t.ge.length=0;var h=t.port.da(di,N.alloc()),a=t.port.da(Er,N.alloc());for(r=_.allocAt(h.x,h.y,0,0),r.Oe(a),N.free(h),N.free(a),h=N.allocAt(r.x+r.width/2,r.y+r.height/2),a=t.port.Ki(),l=l.iterator;l.next();){var c=l.value;if(c.isVisible()&&c.fromPort!==c.toPort){var p=c.fromPort===t.port||c.fromNode!==null&&c.fromNode.Jd(n),d=c.computeSpot(p,t.port);if(d.Nc()){var m=p?c.toPort:c.fromPort;if(m!==null&&(p=m.part,p!==null)){var x=p.findVisibleNode();x!==null&&x!==p&&(p=x,m=p.port),p=c.computeOtherPoint(p,m),m=h.Pa(m.da(_t)),m+=(h.Pa(p)-m)/360,m-=a,0>m?m+=360:360<=m&&(m-=360),d=oL(r,d,m,c.isOrthogonal),d===0?(d=4,180<m&&(m-=360)):d===90?(d=8,270<m&&(m-=360)):d===180?d=2:(d=1,90>m&&(m+=360)),x=t.ge[o],x===void 0?(x=new V0(c,m,d),t.ge[o]=x):(x.link=c,x.angle=m,x.Ac=d),x.qv.set(p),o++}}}}for(N.free(h),t.ge.sort(Jl.prototype.j),a=t.ge.length,n=-1,o=h=0;o<a;o++)l=t.ge[o],l!==void 0&&(l.Ac!==n&&(n=l.Ac,h=0),l.aq=h,h++);for(n=-1,h=0,o=a-1;0<=o;o--)a=t.ge[o],a!==void 0&&(a.Ac!==n&&(n=a.Ac,h=a.aq+1),a.Wl=h);if(o=t.ge,d=t.port,n=t.node.portSpreading,h=N.alloc(),a=N.alloc(),l=N.alloc(),c=N.alloc(),d.da(di,h),d.da(Uu,a),d.da(Er,l),d.da(zu,c),x=m=p=d=0,n===N0)for(var v=0;v<o.length;v++){var S=o[v];if(S!==null){var P=S.link.computeThickness();switch(S.Ac){case 8:m+=P;break;case 2:x+=P;break;case 1:d+=P;break;default:case 4:p+=P}}}var k=v=0,L=1,T=S=0;for(P=0;P<o.length;P++){var O=o[P];if(O!==null){if(v!==O.Ac){switch(v=O.Ac,v){case 8:var E=l;k=c;break;case 2:E=c,k=h;break;case 1:E=h,k=a;break;default:case 4:E=a,k=l}switch(S=k.x-E.x,T=k.y-E.y,v){case 8:m>Math.abs(S)?(L=Math.abs(S)/m,m=Math.abs(S)):L=1;break;case 2:x>Math.abs(T)?(L=Math.abs(T)/x,x=Math.abs(T)):L=1;break;case 1:d>Math.abs(S)?(L=Math.abs(S)/d,d=Math.abs(S)):L=1;break;default:case 4:p>Math.abs(T)?(L=Math.abs(T)/p,p=Math.abs(T)):L=1}k=0}var V=O.gq;if(n===N0){switch(O=O.link.computeThickness(),O*=L,V.set(E),v){case 8:V.x=E.x+S/2+m/2-k-O/2;break;case 2:V.y=E.y+T/2+x/2-k-O/2;break;case 1:V.x=E.x+S/2-d/2+k+O/2;break;default:case 4:V.y=E.y+T/2-p/2+k+O/2}k+=O}else{var $=.5;n===C0&&($=(O.aq+1)/(O.Wl+1)),V.x=E.x+S*$,V.y=E.y+T*$}}}for(N.free(h),N.free(a),N.free(l),N.free(c),E=t.ge,o=0;o<E.length;o++)n=E[o],n!==null&&(n.Ju=t.computeEndSegmentLength(n));t.hq=i,_.free(r)}i=t.ge}for(t=0;t<i.length;t++)if(r=i[t],r!==null&&r.link===e)return r;return null}Jl.prototype.j=function(t,e){return t===e?0:t===null?-1:e===null?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},Jl.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,Ze,e.fromPort===this.port),n=t.aq;if(0>n)return i;var r=t.Wl;if(1>=r||!e.isOrthogonal)return i;e=t.qv;var o=t.gq;return(t.Ac===2||t.Ac===8)&&(n=r-1-n),((t=t.Ac===2||t.Ac===4)?e.y<o.y:e.x<o.x)?i+8*n:(t?e.y===o.y:e.x===o.x)?i:i+8*(r-1-n)},Jl.className="Knot";function V0(t,e,i){this.link=t,this.angle=e,this.Ac=i,this.qv=new N,this.Wl=this.aq=0,this.gq=new N,this.Ju=0}V0.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Ac.toString()+":"+this.aq.toString()+"/"+this.Wl.toString()+" "+this.gq.toString()+" "+this.Ju.toString()+" "+this.qv.toString()},V0.className="LinkInfo";function Cf(){this.th=this.Og=Pi,this.sh=this.Ng=this.rh=this.Mg=NaN,this.Ap=this.An=null,this.Bp=this.Bn=1/0}Cf.prototype.copy=function(){var t=new Cf;return t.Og=this.Og.I(),t.th=this.th.I(),t.Mg=this.Mg,t.rh=this.rh,t.Ng=this.Ng,t.sh=this.sh,t.An=this.An,t.Ap=this.Ap,t.Bn=this.Bn,t.Bp=this.Bp,t},Cf.className="LinkSettings";function Lt(t){je(this),this.o=this.C=null,this.$h=this.Un=!0,this.$n=!1,this.Qm=new N(0,0).freeze(),this.Xn=!0,this.Um=this.Wn=null,this.Zn=!1,this.j=null,this.D=0,this.qo=this.Hp=null,this.gs=!1,this.kg=this.Ej=null,this.Xr=!1,t&&Object.assign(this,t)}Lt.prototype.cloneProtected=function(t){t.Un=this.Un,t.$h=this.$h,t.$n=this.$n,t.Qm.assign(this.Qm),t.Xn=this.Xn,t.Wn=this.Wn,t.Um=this.Um,t.Zn=!0,t.qo=this.qo,t.Hp=this.Hp},Lt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Lt.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},Lt.prototype.deserializeLayoutProperties=function(t){t!==null&&(this.arrangementOrigin=new N(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},Lt.prototype.gb=function(){},Lt.prototype.toString=function(){var t=Gi(this.constructor);return t+="(",this.group!==null&&(t+=" in "+this.group),this.diagram!==null&&(t+=" for "+this.diagram),t+")"},Lt.prototype.B=function(){if(this.isValidLayout){var t=this.diagram;if(t!==null&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.qc(),this.isOngoing&&t.Oi||this.isInitial&&!t.Oi)&&(this.isValidLayout=!1,t.Fb())}}},Lt.prototype.createNetwork=function(){return new Xt(this)},Lt.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof I?(e.mg(t.nodes,!0),e.mg(t.links,!0)):t instanceof dt?e.mg(t.memberParts):e.mg(t.iterator),e},Lt.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(t===null&&this.network!==null)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(i!==null&&(t=i.diagram,t!==null))break}try{t!==null&&t.xa("Layout"),this.commitLayout()}finally{t!==null&&t.Xa("Layout")}}},Lt.prototype.commitLayout=function(){if(this.network!==null){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Lt.prototype.doLayout=function(t){var e=new Q;t instanceof I?(vs(this,e,t.nodes,!0,this.Jh,!0,!1,!0),vs(this,e,t.parts,!0,this.Jh,!0,!1,!0)):t instanceof dt?vs(this,e,t.memberParts,!1,this.Jh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(t=this.diagram,t!==null&&t.xa("Layout"),this.doMinimalNoNetworkLayout(e),t!==null&&t.Xa("Layout")),this.isValidLayout=!0},Lt.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,n=i,r=this.arrangementOrigin.y,o=0,l=0;for(t=t.iterator;t.next();){var h=t.value;Nf(h);var a=h.measuredBounds,c=a.width;a=a.height,h.moveTo(n,r),h instanceof dt&&(h.Jh=!1),n+=Math.max(c,50)+20,l=Math.max(l,Math.max(a,50)),o>=e-1?(o=0,n=i,r+=l+20,l=0):o++}},Lt.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,i=e,n=this.arrangementOrigin.y,r=0,o=0,l=this.network.vertexes.iterator;l.next();){var h=l.value.node;if(!(h===null||h instanceof H)&&(Nf(h),this.Jh(h))){var a=h.measuredBounds,c=a.width;a=a.height,h.moveTo(i,n),h instanceof dt&&(h.Jh=!1),i+=Math.max(c,50)+20,o=Math.max(o,Math.max(a,50)),r>=t-1?(r=0,i=e,n+=o+20,o=0):r++}}},Lt.prototype.Jh=function(t){return!!(!t.location.u()||t instanceof dt&&t.Jh)};function vs(t,e,i,n,r,o,l,h){for(i=i.iterator;i.next();){var a=i.value;n&&!a.isTopLevel||r!==null&&!r(a)||!a.canLayout()||(o&&a instanceof q?a.isLinkLabel||(a instanceof dt&&a.layout===null?vs(t,e,a.memberParts,!1,r,o,l,h):(Nf(a),e.add(a))):l&&a instanceof H?e.add(a):!h||!a.Mc()||a instanceof q||(Nf(a),e.add(a)))}}function Nf(t){var e=t.actualBounds;(e.width===0||e.height===0||isNaN(e.width)||isNaN(e.height))&&t.Ta()}Lt.prototype.Mi=function(t,e){var i=this.boundsComputation;return i!==null?(e||(e=new _),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Lt.prototype.Ax=function(t){var e=new Q;return t instanceof I?(vs(this,e,t.nodes,!0,null,!0,!0,!0),vs(this,e,t.links,!0,null,!0,!0,!0),vs(this,e,t.parts,!0,null,!0,!0,!0)):t instanceof dt?vs(this,e,t.memberParts,!1,null,!0,!0,!0):vs(this,e,t.iterator,!1,null,!0,!0,!0),e},Lt.prototype.initialOrigin=function(t){var e=this.group;if(e!==null){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),e=e.placeholder,e!==null&&(i=e.da(di),(isNaN(i.x)||isNaN(i.y))&&i.set(t),t=e.padding,i.x+=t.left,i.y+=t.top),i}return t},Lt.prototype.mayUseWorker=function(){return this.mayUseWorkerFunction?this.mayUseWorkerFunction(this):!1},Lt.prototype.workerLayout=function(){return!1};function cd(t,e){if(t.workerStateChanged!==null){var i={key:t.group?t.group.key:null};e!==void 0&&(i.time=e),t.Ej!==null&&(i.running=mk(t.Ej)),t.kg!==null&&(i.waiting=mk(t.kg)),t.workerStateChanged(i,t)}}function mk(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}Lt.prototype.jz=function(){var t=Tf(this.constructor);t&&(t.Pe!==null&&t.Pe.terminate(),t.Pe=null,t.em.iteratorValues.each(function(e){e.gs=!1,e.Ej=null,e.kg=null,e.Xr=!1,cd(e)}),t.em.clear())};function pd(t,e){var i=Tf(t);if(i){if(e)for(var n in e)i[n]=e[n]}else throw Error("Unknown Layout class: "+t)}function Tf(t){var e=null;if(typeof t=="function"){if(e=Lh.get(t),!e){var i=Gi(t);e=Lh.get(i),e||(e=new sL,e.Eu=t,e.name=i,e.j=t.name,e.Yx=Sk,Lh.set(i,e),Lh.set(t,e),Lh.set(t.name,e))}}else typeof t=="string"&&(e=Lh.get(t));return e}Lt.prototype.Wv=function(){if(typeof Worker=="undefined"||!Mk||typeof self=="undefined"||typeof self.DedicatedWorkerGlobalScope!="undefined")return!1;if(!this.mayUseWorker())return this.gs&&(this.Xr=!0,this.kg=this.Ej=null,cd(this)),!1;var t=Tf(this.constructor);return t===null?!1:(t.Pe===null&&(t.Pe=new Worker(Mk),t.Pe.onerror=function(e){e.preventDefault(),wt("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+`
  `+e.message)},t.Pe.j=function(e){wt("Worker serialization error: "+e)},t.Pe.onmessage=function(e){var i=e.data;if(i._GoJS==="_GoJS"){if(i.version&&I.version&&i.version!==I.version)wt("Failure: GoJS v"+I.version+"  Worker v"+i.version);else if(e=t.em.get(i.id)){if(t.em.remove(i.id),e.gs=!1,e.Ej=null,e.Xr)e.Xr=!1,e.kg=null;else{var n=wk(e,i,!1);e.network=n,e.updateParts(),e.network=null,e.isValidLayout=!0}if(cd(e,i.time),i=e.kg,i!==null)e.kg=null;else for(n=t.em.iteratorValues;n.next();){var r=n.value;if(i=r.kg,i!==null){r.kg=null;break}}i!==null&&vk(e,i)}}},t.Pe.postMessage({_GoJS:"_GoJS",url:t.Yx}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Pe.postMessage({_GoJS:"_GoJS",url:e})}),t.Pe.postMessage({_GoJS:"_GoJS",version:-1})),this.Ej!==null?this.kg=this.network:vk(this,this.network),cd(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)};function vk(t,e){t.gs=!0;var i=Tf(t.constructor),n=xk(t,e,!0);n._GoJS="_GoJS",i.Pe.postMessage(n),i.em.set(Ce(t),t),t.Ej=e}function xk(t,e,i){t.onNetworkSerialization(1,i,e,null);var n={};t.serializeLayoutProperties(n,i);var r=[];e.vertexes.each(function(l){var h={};l.serializeVertexProperties(h,i),r.push(h)});var o=[];return e.edges.each(function(l){var h={};l.serializeEdgeProperties(h,i),o.push(h)}),n={id:i?Ce(t):t.id,layout:Gi(t.constructor),p:n,XA:r,Bz:o},t.onNetworkSerialization(2,i,e,n),n}function wk(t,e,i){i&&(t.id=e.id);var n=t.diagram,r=t.createNetwork();t.onNetworkSerialization(3,i,r,e);var o=e.XA,l=new pt;o&&o.forEach(function(c){var p=null;c.key===null||n===null||i||(p=n.Eb(c.key)),p!==null?p=r.Nj(p):(p=r.createVertex(),r.ng(p)),i&&c.key!==null&&(p.data={di:c.key}),l.set(c.id,p)});var h=e.Bz,a=new pt;return h&&h.forEach(function(c){var p=null;c.key===null||n===null||i||(p=n.findLinkForKey(c.key));var d=r.createEdge();r.Rl(d),d.link=p,i&&c.key!==null&&(d.data={di:c.key}),a.set(c.id,d)}),o&&o.forEach(function(c){var p=l.get(c.id);p&&p.deserializeVertexProperties(c,l,a,i)}),h&&h.forEach(function(c){var p=a.get(c.id);p&&p.deserializeEdgeProperties(c,l,a,i)}),t.deserializeLayoutProperties(e.p,l,a,i,r),t.onNetworkSerialization(4,i,r,e),r}Lt.prototype.onNetworkSerialization=function(){},Y.Object.defineProperties(Lt.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},group:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,t!==null&&(this.C=t.diagram))}},isOngoing:{get:function(){return this.Un},set:function(t){this.Un!==t&&(this.Un=t)}},isInitial:{get:function(){return this.$h},set:function(t){this.$h=t,t||(this.Zn=!0)}},isViewportSized:{get:function(){return this.$n},set:function(t){this.$n!==t&&(this.$n=t)&&this.B()}},isRouting:{get:function(){return this.Xn},set:function(t){this.Xn!==t&&(this.Xn=t)}},isRealtime:{get:function(){return this.Wn},set:function(t){this.Wn!==t&&(this.Wn=t)}},isValidLayout:{get:function(){return this.Zn},set:function(t){this.Zn!==t&&(this.Zn=t,t||(t=this.diagram,t!==null&&(t.Oh=!0)))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,t!==null&&(t.layout=this))}},boundsComputation:{get:function(){return this.Um},set:function(t){this.Um!==t&&(this.Um=t,this.B())}},arrangementOrigin:{get:function(){return this.Qm},set:function(t){this.Qm.A(t)||(this.Qm.assign(t),this.B())}},id:{get:function(){return this.D},set:function(t){this.D=t}},mayUseWorkerFunction:{get:function(){return this.qo},set:function(t){this.qo!==t&&(this.qo=t)}},workerStateChanged:{get:function(){return this.Hp},set:function(t){this.Hp!==t&&(this.Hp=t)}}}),Lt.prototype.useWorker=Lt.prototype.Wv,Lt.declareWorkerLayout=pd,Lt.prototype.cancelWorker=Lt.prototype.jz,Lt.prototype.collectParts=Lt.prototype.Ax,Lt.prototype.getLayoutBounds=Lt.prototype.Mi,Lt.prototype.invalidateLayout=Lt.prototype.B;var Lh=new pt,Sk=typeof W.document=="object"&&W.document.currentScript?W.document.currentScript.src:"",Mk=typeof URL!="undefined"&&typeof URL.createObjectURL=="function"&&typeof Blob=="function"?URL.createObjectURL(new Blob([`self.onmessage=function(e){if(e.data.url){
importScripts(e.data.url);}}`],{type:"text/javascript"})):"";Lt.className="Layout",Lt.GoJSScriptURL=Sk,Lt.declareWorkerLayout=pd,typeof self!="undefined"&&typeof self.DedicatedWorkerGlobalScope!="undefined"&&typeof self!="undefined"&&typeof self.DedicatedWorkerGlobalScope!="undefined"&&(self.onmessage=function(t){if(t=t.data,t._GoJS==="_GoJS")if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:I.version},void 0);else{var e=performance.now(),i=null;t.layout&&(i=Tf(t.layout));var n=null;if(i&&i.Eu&&(n=new i.Eu),!n)throw Error("no registered Worker Layout: "+t.layout);n.network=wk(n,t,!0),n.workerLayout=function(){var r=xk(n,n.network,!1);return r._GoJS="_GoJS",r.time=performance.now()-e,self.postMessage(r,void 0),!0},n.doLayout(new it)}});function sL(){this.Eu=null,this.Yx=this.j=this.name="",this.scripts=[],this.Pe=null,this.em=new pt}function Xt(t){je(this),this.Dc=t,this.rf=new Q,this.oe=new Q,this.Ks=new pt,this.Fs=new pt}Xt.prototype.clear=function(){if(this.rf)for(var t=this.rf.iterator;t.next();)t.value.clear();if(this.oe)for(t=this.oe.iterator;t.next();)t.value.clear();this.rf=new Q,this.oe=new Q,this.Ks=new pt,this.Fs=new pt},Xt.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.rf.count+" edges: "+this.oe.count,1<t){for(var i=this.rf.iterator;i.next();)e+=`
    `+i.value.toString(t-1);for(i=this.oe.iterator;i.next();)e+=`
    `+i.value.toString(t-1)}return e},Xt.prototype.createVertex=function(){return new pe(this)},Xt.prototype.createEdge=function(){return new We(this)},Xt.prototype.mg=function(t,e,i){if(t!==null){for(e===void 0&&(e=!1),i===void 0&&(i=null),i===null&&(i=function(l){if(l instanceof q)return!l.isLinkLabel;if(l instanceof H){var h=l.fromNode;return h===null||h.isLinkLabel?!1:(l=l.toNode,!(l===null||l.isLinkLabel))}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof q&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)){if(n instanceof dt&&n.layout===null)this.mg(n.memberParts,!1);else if(this.Ji(n)===null){var r=this.createVertex();r.node=n,this.ng(r)}}}for(t.reset();t.next();)if(n=t.value,n instanceof H&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&this.Up(n)===null){var o=n.fromNode;r=n.toNode,o!==null&&r!==null&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),o!==null&&r!==null&&this.ek(o,r,n))}}},Xt.prototype.findGroupVertex=function(t){if(t===null)return null;var e=t.findVisibleNode();if(e===null)return null;if(t=this.Ji(e),t!==null)return t;for(e=e.containingGroup;e!==null;){if(t=this.Ji(e),t!==null)return t;e=e.containingGroup}return null},s=Xt.prototype,s.ng=function(t){if(t!==null){this.rf.add(t);var e=t.node;e!==null&&this.Ks.add(e,t),t.network=this}},s.Nj=function(t){if(t===null)return null;var e=this.Ji(t);return e===null&&(e=this.createVertex(),e.node=t,this.ng(e)),e},s.Iu=function(t){if(t!==null&&kk(this,t)){for(var e=t.sd,i=e.count-1;0<=i;i--){var n=e.J(i);this.Vj(n)}for(e=t.Fd,t=e.count-1;0<=t;t--)i=e.J(t),this.Vj(i)}};function kk(t,e){if(e===null)return!1;var i=t.rf.remove(e);return i&&(e=e.node,e!==null&&t.Ks.remove(e)),i}s.wz=function(t){t!==null&&(t=this.Ji(t),t!==null&&this.Iu(t))},s.Ji=function(t){return t===null?null:this.Ks.H(t)},s.Rl=function(t){if(t!==null){_0(this,t);var e=t.toVertex;e!==null&&e.uu(t),e=t.fromVertex,e!==null&&e.su(t)}};function _0(t,e){if(e!==null){t.oe.add(e);var i=e.link;i!==null&&t.Up(i)===null&&t.Fs.add(i,e),e.network=t}}s.$y=function(t){if(t===null)return null;var e=t.fromNode,i=t.toNode,n=this.Up(t);return n===null?(n=this.createEdge(),n.link=t,e!==null&&(n.fromVertex=this.Nj(e)),i!==null&&(n.toVertex=this.Nj(i)),this.Rl(n)):(e!==null?n.fromVertex=this.Nj(e):n.fromVertex=null,i!==null?n.toVertex=this.Nj(i):n.toVertex=null),n},s.Vj=function(t){if(t!==null){var e=t.toVertex;e!==null&&e.Hu(t),e=t.fromVertex,e!==null&&e.Gu(t),U0(this,t)}};function U0(t,e){e!==null&&t.oe.remove(e)&&(e=e.link,e!==null&&t.Fs.remove(e))}s.vz=function(t){t!==null&&(t=this.Up(t),t!==null&&this.Vj(t))},s.Up=function(t){return t===null?null:this.Fs.H(t)},s.ek=function(t,e,i){if(t===null||e===null)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.Rl(n),n}return null},s.qm=function(t){if(t!==null){var e=t.fromVertex,i=t.toVertex;e!==null&&i!==null&&(e.Gu(t),i.Hu(t),t.qm(),e.uu(t),i.su(t))}},s.Sp=function(){for(var t=Et(),e=this.oe.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Vj(t[i]);Ut(t)},Xt.prototype.deleteArtificialVertexes=function(){for(var t=Et(),e=this.rf.iterator;e.next();){var i=e.value;i.node===null&&i.data===null&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.Iu(t[e]);for(e=Et(),i=this.oe.iterator;i.next();){var n=i.value;n.link===null&&n.data===null&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.Vj(e[n]);Ut(t),Ut(e)};function lL(t){for(var e=Et(),i=t.oe.iterator;i.next();){var n=i.value;n.fromVertex!==null&&n.toVertex!==null||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Vj(e[n]);Ut(e)}Xt.prototype.Ay=function(t){t===void 0&&(t=!0),t&&(this.deleteArtificialVertexes(),lL(this),this.Sp()),t=new it;for(var e=!0;e;){e=!1;for(var i=this.rf.iterator;i.next();){var n=i.value;if(0<n.sd.count||0<n.Fd.count){e=this.layout.createNetwork(),t.add(e),z0(this,e,n),e=!0;break}}}return t.sort(function(r,o){return r===null||o===null||r===o?0:o.vertexes.count-r.vertexes.count}),t};function z0(t,e,i){if(i!==null&&i.network!==e){kk(t,i),e.ng(i);for(var n=i.sourceEdges;n.next();){var r=n.value;r.network!==e&&(U0(t,r),_0(e,r),z0(t,e,r.fromVertex))}for(n=i.destinationEdges;n.next();)i=n.value,i.network!==e&&(U0(t,i),_0(e,i),z0(t,e,i.toVertex))}}Xt.prototype.Cz=function(){for(var t=new Q,e=this.rf.iterator;e.next();)t.add(e.value.node);for(e=this.oe.iterator;e.next();)t.add(e.value.link);return t},Y.Object.defineProperties(Xt.prototype,{layout:{get:function(){return this.Dc},set:function(t){t!==null&&(this.Dc=t)}},vertexes:{get:function(){return this.rf}},edges:{get:function(){return this.oe}}}),Xt.prototype.findAllParts=Xt.prototype.Cz,Xt.prototype.splitIntoSubNetworks=Xt.prototype.Ay,Xt.prototype.deleteSelfEdges=Xt.prototype.Sp,Xt.prototype.reverseEdge=Xt.prototype.qm,Xt.prototype.linkVertexes=Xt.prototype.ek,Xt.prototype.findEdge=Xt.prototype.Up,Xt.prototype.deleteLink=Xt.prototype.vz,Xt.prototype.deleteEdge=Xt.prototype.Vj,Xt.prototype.addLink=Xt.prototype.$y,Xt.prototype.addEdge=Xt.prototype.Rl,Xt.prototype.findVertex=Xt.prototype.Ji,Xt.prototype.deleteNode=Xt.prototype.wz,Xt.prototype.deleteVertex=Xt.prototype.Iu,Xt.prototype.addNode=Xt.prototype.Nj,Xt.prototype.addVertex=Xt.prototype.ng,Xt.prototype.addParts=Xt.prototype.mg,Xt.className="LayoutNetwork";function pe(t){je(this),this.Rb=t,this.j=new _(0,0,10,10).freeze(),this.o=new N(5,5).freeze(),this.mi=this.jb=null,this.sd=new it,this.Fd=new it}pe.prototype.serializeVertexProperties=function(t){t.id=Ce(this),t.key=this.node?this.node.key:this.data?this.data.di:void 0,t.key===void 0&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.YA=this.bounds.width,t.fA=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.sd.each(function(n){e.push(Ce(n))}),t.xy=e;var i=[];this.Fd.each(function(n){i.push(Ce(n))}),t.Hx=i},pe.prototype.deserializeVertexProperties=function(t,e,i){if(t!==null){this.x=t.x,this.y=t.y,this.width=t.YA,this.height=t.fA,this.focusX=t.fx,this.focusY=t.fy;var n=this;t.xy&&t.xy.forEach(function(r){(r=i.get(r))&&n.sd.add(r)}),t.Hx&&t.Hx.forEach(function(r){(r=i.get(r))&&n.Fd.add(r)})}},pe.prototype.clear=function(){this.mi=this.jb=null,this.sd=new it,this.Fd=new it},pe.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutVertex#"+Ce(this);if(0<t&&(e+=this.node!==null?"("+this.node.toString()+")":"",1<t)){t="";for(var i=!0,n=this.sd.iterator;n.next();){var r=n.value;i?i=!1:t+=",",t+=r.toString(0)}for(r="",i=!0,n=this.Fd.iterator;n.next();){var o=n.value;i?i=!1:r+=",",r+=o.toString(0)}e+=" sources: "+t+" destinations: "+r}return e},pe.prototype.commit=function(){var t=this.jb;if(t!==null){var e=this.bounds,i=t.bounds;ct(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(t=this.node,t!==null){if(e=this.bounds,!(t instanceof dt)){i=_.alloc();var n=this.network.layout.Mi(t,i),r=t.locationObject.da(_t);if(n.u()&&r.u()){t.moveTo(e.x+this.focusX-(r.x-n.x),e.y+this.focusY-(r.y-n.y)),_.free(i);return}_.free(i)}t.moveTo(e.x,e.y)}},pe.prototype.uu=function(t){t!==null&&(this.sd.contains(t)||this.sd.add(t))},pe.prototype.Hu=function(t){t!==null&&this.sd.remove(t)},pe.prototype.su=function(t){t!==null&&(this.Fd.contains(t)||this.Fd.add(t))},pe.prototype.Gu=function(t){t!==null&&this.Fd.remove(t)};function G0(t,e){return t=t.mi,e=e.mi,t?e?(t=t.text,e=e.text,t<e?-1:t>e?1:0):1:e!==null?-1:0}Y.Object.defineProperties(pe.prototype,{sourceEdgesArrayAccess:{get:function(){return this.sd._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Fd._dataArray}},data:{get:function(){return this.jb},set:function(t){if(this.jb=t,t!==null&&t.bounds){var e=t.bounds;t=e.x;var i=e.y,n=e.width;e=e.height,this.o.h(n/2,e/2),this.j.h(t,i,n,e)}}},node:{get:function(){return this.mi},set:function(t){if(this.mi!==t){this.mi=t,t.Ta();var e=this.network.layout,i=_.alloc(),n=e.Mi(t,i);e=n.x;var r=n.y,o=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.j.h(e,r,o,n),_.free(i),!(t instanceof dt)&&(t=t.locationObject.da(_t),t.u())){this.o.h(t.x-e,t.y-r);return}this.o.h(o/2,n/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.A(t)||this.j.assign(t)}},focus:{get:function(){return this.o},set:function(t){this.o.A(t)||this.o.assign(t)}},centerX:{get:function(){return this.j.x+this.o.x},set:function(t){var e=this.j;e.x+this.o.x!==t&&(e.ea(),e.x=t-this.o.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.o.y},set:function(t){var e=this.j;e.y+this.o.y!==t&&(e.ea(),e.y=t-this.o.y,e.freeze())}},focusX:{get:function(){return this.o.x},set:function(t){var e=this.o;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},focusY:{get:function(){return this.o.y},set:function(t){var e=this.o;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ea(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ea(),e.height=t,e.freeze())}},network:{get:function(){return this.Rb},set:function(t){this.Rb=t}},sourceVertexes:{get:function(){for(var t=new Q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new Q,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new Q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.sd.iterator}},destinationEdges:{get:function(){return this.Fd.iterator}},edges:{get:function(){for(var t=new it,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.sd.count+this.Fd.count}}}),pe.prototype.deleteDestinationEdge=pe.prototype.Gu,pe.prototype.addDestinationEdge=pe.prototype.su,pe.prototype.deleteSourceEdge=pe.prototype.Hu,pe.prototype.addSourceEdge=pe.prototype.uu,pe.className="LayoutVertex",pe.standardComparer=G0,pe.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.mi;var i=e.mi;if(t!==null){if(i!==null){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),i=0;i<e.length;i++)if(t[i]!==""&&t[i]!==void 0){var n=parseFloat(e[i]),r=parseFloat(t[i]);if(isNaN(n))if(isNaN(r)){if(e[i].localeCompare(t[i])!==0)return e[i].localeCompare(t[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!==0)return n-r}}else if(e[i]!=="")return 1;return t[i]!==""&&t[i]!==void 0?-1:0}return 1}return i!==null?-1:0}return 1}return e!==null?-1:0};function We(t){je(this),this.Qb=t,this.cd=this.Uc=this.jl=this.jb=null}We.prototype.clear=function(){this.cd=this.Uc=this.jl=this.jb=null},We.prototype.serializeEdgeProperties=function(t){t.id=Ce(this),t.key=this.link?this.link.key:this.data?this.data.di:void 0,t.key===void 0&&(t.key=null),t.from=this.fromVertex?Ce(this.fromVertex):null,t.TA=this.toVertex?Ce(this.toVertex):null},We.prototype.deserializeEdgeProperties=function(t,e){if(t!==null){var i=e.get(t.from);i&&(this.fromVertex=i),(t=e.get(t.TA))&&(this.toVertex=t)}},We.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutEdge#"+Ce(this);return 0<t&&(e+=this.jl!==null?"("+this.jl.toString()+")":"",1<t&&(e+=" "+(this.Uc?this.Uc.toString():"null")+" --> "+(this.cd?this.cd.toString():"null"))),e},We.prototype.qm=function(){var t=this.Uc;this.Uc=this.cd,this.cd=t},We.prototype.commit=function(){},We.prototype.Vx=function(t){return this.cd===t?this.Uc:this.Uc===t?this.cd:null},Y.Object.defineProperties(We.prototype,{network:{get:function(){return this.Qb},set:function(t){this.Qb=t}},data:{get:function(){return this.jb},set:function(t){this.jb!==t&&(this.jb=t)}},link:{get:function(){return this.jl},set:function(t){this.jl!==t&&(this.jl=t)}},fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}}}),We.prototype.getOtherVertex=We.prototype.Vx,We.className="LayoutEdge";function Fe(t){Lt.call(this),this.isViewportSized=!0,this.Ip=this.Jp=NaN,this.yg=new yt(NaN,NaN).freeze(),this.jf=new yt(10,10).freeze(),this.yb=Lf,this.Hb=yd,this.$c=Ef,this.Sc=Pk,t&&Object.assign(this,t)}z(Fe,Lt),Fe.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.Jp=this.Jp,t.Ip=this.Ip,t.yg.assign(this.yg),t.jf.assign(this.jf),t.yb=this.yb,t.Hb=this.Hb,t.$c=this.$c,t.Sc=this.Sc},Fe.prototype.gb=function(t){t.classType===Fe?t===Ef||t===md||t===Y0||t===gd?this.sorting=t:t===yd||t===nr?this.arrangement=t:t===Lf||t===dd?this.alignment=t:D("Unknown enum value: "+t):Lt.prototype.gb.call(this,t)},Fe.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Ax(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.Hh()||n.fromNode===null&&n.toNode===null){if(n.Ta(),n instanceof dt)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var r=e.ya();if(r.length!==0){switch(this.sorting){case gd:r.reverse();break;case Ef:r.sort(this.comparer);break;case md:r.sort(this.comparer),r.reverse()}var o=this.wrappingColumn;isNaN(o)&&(o=0);var l=this.wrappingWidth;switch(isNaN(l)&&t!==null?(e=t.padding,l=Math.max(t.viewportBounds.width-e.left-e.right,0)):l=Math.max(this.wrappingWidth,0),0>=o&&0>=l&&(o=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),t!==null&&t.xa("Layout"),n=[],this.alignment){case dd:var h=e,a=i,c=_.alloc(),p=Math.max(this.cellSize.width,1);if(!isFinite(p))for(var d=p=0;d<r.length;d++){var m=this.Mi(r[d],c);p=Math.max(p,m.width)}if(p=Math.max(p+h,1),d=Math.max(this.cellSize.height,1),!isFinite(d))for(m=d=0;m<r.length;m++){var x=this.Mi(r[m],c);d=Math.max(d,x.height)}d=Math.max(d+a,1),m=this.arrangement;for(var v=x=this.arrangementOrigin.x,S=this.arrangementOrigin.y,P=0,k=0,L=0;L<r.length;L++){var T=r[L],O=this.Mi(T,c),E=Math.ceil((O.width+h)/p)*p,V=Math.ceil((O.height+a)/d)*d;switch(m){case nr:var $=Math.abs(v-O.width);break;default:$=v+O.width}switch((0<o&&P>o-1||0<l&&0<P&&$-x>l)&&(n.push(new _(0,S,l+h,k)),P=0,v=x,S+=k,k=0),k=Math.max(k,V),m){case nr:O=-O.width;break;default:O=0}switch(T.moveTo(v+O,S),m){case nr:v-=E;break;default:v+=E}P++}n.push(new _(0,S,l+h,k)),_.free(c);break;case Lf:for(a=l,p=o,d=e,m=i,l=_.alloc(),x=Math.max(this.cellSize.width,1),o=S=c=0,h=N.alloc(),v=0;v<r.length;v++)k=r[v],P=this.Mi(k,l),k=Go(k,k.locationObject,k.locationSpot,h),c=Math.max(c,k.x),S=Math.max(S,P.width-k.x),o=Math.max(o,k.y);switch(v=this.arrangement,v){case nr:c+=d;break;default:S+=d}x=isFinite(x)?Math.max(x+d,1):Math.max(c+S,1);var b=k=this.arrangementOrigin.x;for(L=this.arrangementOrigin.y,S=0,a>=c&&(a-=c),c=T=0,E=Math.max(this.cellSize.height,1),O=o=0,V=!0,P=N.alloc(),$=0;$<r.length;$++){var nt=r[$],et=this.Mi(nt,l),G=Go(nt,nt.locationObject,nt.locationSpot,h);if(0<S)switch(v){case nr:b=(b-k-(et.width-G.x))/x,b=j.aa(Math.round(b),b)?Math.round(b):Math.floor(b),b=b*x+k;break;default:b=(b-k+G.x)/x,b=j.aa(Math.round(b),b)?Math.round(b):Math.ceil(b),b=b*x+k}else switch(v){case nr:T=b+G.x+et.width;break;default:T=b-G.x}switch(v){case nr:var vt=-(b+G.x)+T;break;default:vt=b+et.width-G.x-T}if(0<p&&S>p-1||0<a&&0<S&&vt>a){for(n.push(new _(0,V?L-o:L,a+d,O+o+m)),b=0;b<S&&$!==S;b++){vt=r[$-S+b];var ft=Go(vt,vt.locationObject,vt.locationSpot,P);vt.moveTo(vt.position.x,vt.position.y+o-ft.y)}O+=m,L=V?L+O:L+(O+o),S=O=o=0,b=k,V=!1}switch(b===k&&(c=v===nr?Math.max(c,et.width-G.x):Math.min(c,-G.x)),o=Math.max(o,G.y),O=Math.max(O,et.height-G.y),isFinite(E)&&(O=Math.max(O,Math.max(et.height,E)-G.y)),V?nt.moveTo(b-G.x,L-G.y):nt.moveTo(b-G.x,L),v){case nr:b-=G.x+d;break;default:b+=et.width-G.x+d}S++}if(n.push(new _(0,L,a+d,(V?O:O+o)+m)),r.length!==S)for(a=0;a<S;a++)p=r[r.length-S+a],d=Go(p,p.locationObject,p.locationSpot,h),p.moveTo(p.position.x,p.position.y+o-d.y);if(N.free(h),N.free(P),v===nr)for(r=0;r<n.length;r++)o=n[r],o.width+=c,o.x-=c;else for(r=0;r<n.length;r++)o=n[r],o.x>c&&(o.width+=o.x-c,o.x=c);_.free(l)}for(h=o=l=r=0;h<n.length;h++)a=n[h],r=Math.min(r,a.x),l=Math.min(l,a.y),o=Math.max(o,a.x+a.width);this.arrangement===nr?this.commitLayers(n,new N(r+e/2-(o+r),l-i/2)):this.commitLayers(n,new N(r-e/2,l-i/2)),t!==null&&t.Xa("Layout"),this.isValidLayout=!0}},Fe.prototype.commitLayers=function(){};function Pk(t,e){return t=t.text,e=e.text,t<e?-1:t>e?1:0}Y.Object.defineProperties(Fe.prototype,{wrappingWidth:{get:function(){return this.Jp},set:function(t){this.Jp!==t&&(0<t||isNaN(t))&&(this.Jp=t,this.isViewportSized=isNaN(t),this.B())}},wrappingColumn:{get:function(){return this.Ip},set:function(t){this.Ip!==t&&(0<t||isNaN(t))&&(this.Ip=t,this.B())}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.A(t)||(this.yg.assign(t),this.B())}},spacing:{get:function(){return this.jf},set:function(t){this.jf.A(t)||(this.jf.assign(t),this.B())}},alignment:{get:function(){return this.yb},set:function(t){this.yb===t||t!==Lf&&t!==dd||(this.yb=t,this.B())}},arrangement:{get:function(){return this.Hb},set:function(t){this.Hb===t||t!==yd&&t!==nr||(this.Hb=t,this.B())}},sorting:{get:function(){return this.$c},set:function(t){this.$c===t||t!==Y0&&t!==gd&&t!==Ef&&t!==md||(this.$c=t,this.B())}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t,this.B())}}});var dd=new K(Fe,"Position",0),Lf=new K(Fe,"Location",1),yd=new K(Fe,"LeftToRight",2),nr=new K(Fe,"RightToLeft",3),Y0=new K(Fe,"Forward",4),gd=new K(Fe,"Reverse",5),Ef=new K(Fe,"Ascending",6),md=new K(Fe,"Descending",7);Fe.className="GridLayout",Fe.standardComparer=Pk,Fe.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var i=0;i<t.length;i++)if(e[i]!==""&&e[i]!==void 0){var n=parseFloat(t[i]),r=parseFloat(e[i]);if(isNaN(n))if(isNaN(r)){if(t[i].localeCompare(e[i])!==0)return t[i].localeCompare(e[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!==0)return n-r}}else if(t[i]!=="")return 1;return e[i]!==""&&e[i]!==void 0?-1:0}return 1}return e!==null?-1:0},Fe.Position=dd,Fe.Location=Lf,Fe.LeftToRight=yd,Fe.RightToLeft=nr,Fe.Forward=Y0,Fe.Reverse=gd,Fe.Ascending=Ef,Fe.Descending=md;function Dt(){this.Do=new Q,this.ko=new Q,this.Ha=new Q,this.Ve=new pt,this.Ue=new pt,this.pj=new pt,this.C=null,this.Aq=!1}s=Dt.prototype,s.clear=function(){this.Do.clear(),this.ko.clear(),this.Ha.clear(),this.Ve.clear(),this.Ue.clear(),this.pj.clear()},s.Ne=function(t){this.C=t},s.Ni=function(t){if(t instanceof q){if(this.Do.add(t),t instanceof dt){var e=t.containingGroup;e===null?this.C.wi.add(t):e.pl.add(t),e=t.layout,e!==null&&(e.diagram=this.C)}}else t instanceof H?this.ko.add(t):t instanceof Tt||this.Ha.add(t);e=t.data,e===null||t instanceof Tt||(t instanceof H?this.Ue.add(e,t):this.Ve.add(e,t))},s.ec=function(t){if(t.Oj(),t instanceof q){if(this.Do.remove(t),t instanceof dt){var e=t.containingGroup;e===null?this.C.wi.remove(t):e.pl.remove(t),e=t.layout,e!==null&&(e.diagram=null)}}else t instanceof H?this.ko.remove(t):t instanceof Tt||this.Ha.remove(t);e=t.data,e===null||t instanceof Tt||(t instanceof H?this.Ue.remove(e):this.Ve.remove(e))},s.Ld=function(){for(var t=this.C.nodeTemplateMap.iterator;t.next();){var e=t.value,i=t.key;(!e.Mc()||e instanceof dt)&&D('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.C.groupTemplateMap.iterator;t.next();)e=t.value,i=t.key,e instanceof dt||D('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+e);for(t=this.C.linkTemplateMap.iterator;t.next();)e=t.value,i=t.key,e instanceof H||D('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+e);for(t=Et(),e=this.C.selection.iterator;e.next();)(i=e.value.data)&&t.push(i);for(e=Et(),i=this.C.highlighteds.iterator;i.next();){var n=i.value.data;n&&e.push(n)}for(i=Et(),n=this.nodes.iterator;n.next();){var r=n.value;r.data!==null&&(i.push(r.data),i.push(r.location))}for(n=this.links.iterator;n.next();)r=n.value,r.data!==null&&(i.push(r.data),i.push(r.location));for(n=this.parts.iterator;n.next();)r=n.value,r.data!==null&&(i.push(r.data),i.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<t.length;n++)r=this.yc(t[n]),r!==null&&(r.isSelected=!0);for(n=0;n<e.length;n++)r=this.yc(e[n]),r!==null&&(r.isHighlighted=!0);for(n=0;n<i.length;n+=2)r=this.yc(i[n]),r!==null&&(r.location=i[n+1]);Ut(t),Ut(e),Ut(i)},Dt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Dt.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach(function(r){n.cb(r)&&Ck(i,r,!1)}),t.forEach(function(r){n.cb(r)&&i.resolveReferencesForData(r)}),e!==!1&&mp(this.diagram,!1)};function Ck(t,e,i){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){i===void 0&&(i=!0);t:{if(e!=null&&!t.C.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){var n=t.Yp(e),r=Nk(t,e,n);if(r!==null&&(Ln(r),r=r.copy(),r!==null)){var o=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Nf=n,r.jb=e,t.Aq&&(r.Tg="Tool"),t.diagram.add(r),r.jb=null,r.data=e,t.diagram.skipsModelSourceBindings=o,n=r;break t}}n=null}n!==null&&i&&t.resolveReferencesForData(e)}}Dt.prototype.insertLink=function(){return null},Dt.prototype.resolveReferencesForData=function(){},Dt.prototype.Yp=function(t){return this.C.model.Yp(t)};function Nk(t,e,i){t=t.C;var n=t.model;return n.ck()&&n.dv(e)?(e=t.groupTemplateMap.H(i),e===null&&(e=t.groupTemplateMap.H(""),e===null&&(Ek||(Ek=!0,wt('No Group template found for category "'+i+'"'),wt("  Using default group template")),e=t.Ky))):(e=t.nodeTemplateMap.H(i),e===null&&(e=t.nodeTemplateMap.H(""),e===null&&(Lk||(Lk=!0,wt('No Node template found for category "'+i+'"'),wt("  Using default node template")),e=t.My))),e}Dt.prototype.getLinkCategoryForData=function(){return""},Dt.prototype.setLinkCategoryForData=function(){},Dt.prototype.setFromNodeForLink=function(){},Dt.prototype.setToNodeForLink=function(){},Dt.prototype.findLinkTemplateForCategory=function(t){var e=this.C.linkTemplateMap.H(t);return e===null&&(e=this.C.linkTemplateMap.H(""),e===null&&(Ok||(Ok=!0,wt('No Link template found for category "'+t+'"'),wt("  Using default link template")),e=this.C.Ly)),e},Dt.prototype.removeAllModeledParts=function(){this.Os(this.diagram.model.nodeDataArray)},Dt.prototype.Os=function(t){var e=this;t.forEach(function(i){e.pq(i)})},Dt.prototype.pq=function(t){t=this.yc(t),t!==null&&(Pm(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Dt.prototype.unresolveReferencesForPart=function(){},Dt.prototype.removeDataForLink=function(){},Dt.prototype.findPartForKey=function(t){return t==null?null:(t=this.C.model.Yb(t),t!==null?this.Ve.H(t):null)},Dt.prototype.Eb=function(t){return t==null||(t=this.C.model.Yb(t),t===null)?null:(t=this.Ve.H(t),t instanceof q?t:null)},Dt.prototype.findLinkForKey=function(){return null},s=Dt.prototype,s.yc=function(t){if(t===null)return null;var e=this.Ve.H(t);return e!==null?e:e=this.Ue.H(t)},s.Gi=function(t){return t===null?null:(t=this.Ve.H(t),t instanceof q?t:null)},s.xc=function(t){return t===null?null:this.Ue.H(t)},s.qs=function(t){for(var e=0;e<arguments.length;++e);e=new Q;for(var i=this.Do.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var o=0;o<arguments.length;o++){var l=arguments[o];if(ct(l)&&X0(this,r,l)){e.add(n);break}}}return e.iterator},s.ps=function(t){for(var e=0;e<arguments.length;++e);e=new Q;for(var i=this.ko.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var o=0;o<arguments.length;o++){var l=arguments[o];if(ct(l)&&X0(this,r,l)){e.add(n);break}}}return e.iterator};function X0(t,e,i){for(var n in i){var r=e[n],o=i[n];if(mt(o)){if(!mt(r)||r.length<o.length)return!1;for(var l=0;l<r.length;l++){var h=o[l];if(h!==void 0&&!Tk(t,r[l],h))return!1}}else if(!Tk(t,r,o))return!1}return!0}function Tk(t,e,i){if(typeof i=="function"){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(ct(e)&&ct(i)){if(!X0(t,e,i))return!1}else if(e!==i)return!1;return!0}Dt.prototype.doModelChanged=function(t){if(this.C){var e=this.C;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var n=t.modelChange;if(n!=="")if(i===qt){if(n==="nodeCategory"){var r=this.yc(t.object),o=t.newValue;r!==null&&typeof o=="string"&&(r.category=o)}else n==="nodeDataArray"&&(this.Os(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===ve){var l=t.newValue;n==="nodeDataArray"&&ct(l)&&Ck(this,l),e.isModified=!0}else if(i===Ne){var h=t.oldValue;n==="nodeDataArray"&&ct(h)&&this.pq(h),e.isModified=!0}else i===bn&&(n==="SourceChanged"?t.object!==null?this.updateDataBindings(t.object,t.propertyName):(this.yq(),this.updateAllTargetBindings()):n==="ModelDisplaced"&&this.Ld());else if(i===qt){var a=t.propertyName,c=t.object;c===e.model?(a==="nodeKeyProperty"||a==="nodeCategoryProperty")&&(e.undoManager.isUndoingRedoing||this.Ld()):this.updateDataBindings(c,a),e.isModified=!0}else if(i===ve||i===Ne){var p=t.change===ve,d=p?t.newParam:t.oldParam,m=p?t.newValue:t.oldValue,x=this.pj.H(t.object);if(Array.isArray(x))for(t=0;t<x.length;t++){var v=x[t];if(p)Vp(v,m,d,!0);else if(!(0>d)){var S=d+uf(v);v.ec(S,!0),l0(v,S,d)}}e.isModified=!0}}finally{e.Z=!0}}}}},Dt.prototype.updateAllTargetBindings=function(t){t===void 0&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Fa(t);for(e=this.nodes.iterator;e.next();)e.value.Fa(t);for(e=this.links.iterator;e.next();)e.value.Fa(t)},Dt.prototype.yq=function(){for(var t=this.C.model,e=new Q,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var r=[];for(this.nodes.each(function(l){l.data===null||e.contains(l.data)||r.push(l.data)}),this.parts.each(function(l){l.data===null||e.contains(l.data)||r.push(l.data)}),r.forEach(function(l){_k(t,l,!1)}),n=0;n<i.length;n++){var o=i[n];this.yc(o)===null&&Vk(t,o,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},Dt.prototype.refreshDataBoundLinks=function(){},Dt.prototype.updateRelationshipsFromData=function(){},Dt.prototype.updateDataBindings=function(t,e){if(typeof e=="string"){var i=this.yc(t);if(i!==null)i.Fa(e);else{i=null;for(var n=this.pj.iterator;n.next();){for(var r=n.value,o=0;o<r.length;o++){var l=r[o].Nx(t);l!==null&&(i===null&&(i=Et()),i.push(l))}if(i!==null)break}if(i!==null){for(n=0;n<i.length;n++)i[n].Fa(e);Ut(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}};function W0(t,e){var i=e.ci;if(mt(i)){var n=t.pj.H(i);if(n===null)n=[],n.push(e),t.pj.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function H0(t,e,i){qs(e,function(l){l=l.T.m;for(var h=l.length,a=0;a<h;a++)Om(i,l[a])});var n=e.ci;if(mt(n)){var r=t.pj.H(n);if(r!==null){for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),r.length===0&&t.pj.remove(n);break}}}}Dt.prototype.Tj=function(t,e,i){i===void 0&&(i=!1);var n=new pt;if(mt(t))for(var r=0;r<t.length;r++)vd(this,t[r],e,n,i);else for(t=t.iterator;t.next();)vd(this,t.value,e,n,i);if(e!==null){i=e.model,t=e.toolManager.findTool("Dragging"),t=t!==null?t.dragOptions.dragsLink:e.on.dragsLink,r=new Q;for(var o=new pt,l=n.iterator;l.next();){var h=l.value;if(h instanceof H)t||h.fromNode!==null&&h.toNode!==null||r.add(h);else if(h instanceof q&&h.data!==null&&i.dm()){var a=h;h=l.key;var c=h.qg();c!==null&&(c=n.H(c),c!==null?(i.he(a.data,i.pa(c.data)),a=e.xc(a.data),h=h.Ii(),h!==null&&a!==null&&o.add(h,a)):i.he(a.data,void 0))}}if(0<r.count&&e.Ps(r,!1),0<o.count)for(i=o.iterator;i.next();)n.add(i.key,i.value)}if(e!==null&&this.C!==null&&(e=e.model,i=e.afterCopyFunction,i!==null)){var p=new pt;n.each(function(d){d.key.data!==null&&p.add(d.key.data,d.value.data)}),i(p,e,this.C.model)}for(e=n.iterator;e.next();)e.value.Fa();return n};function vd(t,e,i,n,r){if(e===null||r&&!e.canCopy())return null;if(n.contains(e))return n.H(e);var o=t.copyPartData(e,i);if(!(o instanceof ut))return null;if(o.isSelected=!1,o.isHighlighted=!1,n.add(e,o),e instanceof q){for(var l=e.linksConnected;l.next();){var h=l.value;if(h.fromNode===e){var a=n.H(h);a!==null&&(a.fromNode=o)}h.toNode===e&&(h=n.H(h),h!==null&&(h.toNode=o))}if(e instanceof dt&&o instanceof dt)for(e=e.memberParts;e.next();)l=vd(t,e.value,i,n,r),l instanceof H||l===null||(l.containingGroup=o)}else if(e instanceof H&&o instanceof H)for(l=e.fromNode,l!==null&&(l=n.H(l),l!==null&&(o.fromNode=l)),l=e.toNode,l!==null&&(l=n.H(l),l!==null&&(o.toNode=l)),e=e.labelNodes;e.next();)l=vd(t,e.value,i,n,r),l!==null&&l instanceof q&&(l.labeledLink=o);return o}Dt.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(n!==null&&e!==null){var r=e.model;t instanceof H||(n=r.copyNodeData(n),ct(n)&&(r.sf(n),i=e.yc(n)))}else Ln(t),i=t.copy(),i!==null&&(r=this.C,e!==null?e.add(i):n!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,i instanceof H||(r=e.copyNodeData(n)),ct(r)&&(i.data=r)));return i},Y.Object.defineProperties(Dt.prototype,{nodes:{get:function(){return this.Do}},links:{get:function(){return this.ko}},parts:{get:function(){return this.Ha}},diagram:{get:function(){return this.C}},addsToTemporaryLayer:{get:function(){return this.Aq},set:function(t){this.Aq=t}}}),Dt.prototype.updateAllRelationshipsFromData=Dt.prototype.yq,Dt.prototype.findLinksByExample=Dt.prototype.ps,Dt.prototype.findNodesByExample=Dt.prototype.qs,Dt.prototype.findLinkForData=Dt.prototype.xc,Dt.prototype.findNodeForData=Dt.prototype.Gi,Dt.prototype.findPartForData=Dt.prototype.yc,Dt.prototype.findNodeForKey=Dt.prototype.Eb,Dt.prototype.removeModeledPart=Dt.prototype.pq,Dt.prototype.removeModeledParts=Dt.prototype.Os,Dt.prototype.rebuildParts=Dt.prototype.Ld;var Lk=!1,Ek=!1,Ok=!1;Dt.className="PartManager";function Te(t){Dt.apply(this,arguments)}z(Te,Dt),Te.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),Ak(this,t.linkDataArray)},Te.prototype.addModeledParts=function(t){for(Dt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)kh(t.value);mp(this.diagram,!1)};function Ak(t,e){e.forEach(function(i){jk(t,i)}),mp(t.diagram,!1)}function jk(t,e){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ue.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(n!==null){Ln(n);var r=n.copy();if(r!==null){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Nf=i,r.jb=e,i=t.diagram.model;var o=Md(i,e,!0);o!==""&&(r.fromPortId=o),o=en(i,e,!0),o!==void 0&&(o=t.Eb(o),o instanceof q&&(r.fromNode=o)),o=Md(i,e,!1),o!==""&&(r.toPortId=o),o=en(i,e,!1),o!==void 0&&(o=t.Eb(o),o instanceof q&&(r.toNode=o)),i=i.Bf(e),Array.isArray(i)&&i.forEach(function(l){l=t.Eb(l),l!==null&&(l.labeledLink=r)}),t.Aq&&(r.Tg="Tool"),t.diagram.add(r),r.jb=null,r.data=e,t.diagram.skipsModelSourceBindings=n}}}}Te.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Dk(this,t.linkDataArray),this.Os(t.nodeDataArray)};function Dk(t,e){e.forEach(function(i){t.pq(i)})}Te.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ts(t)},Te.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.sq(t,e)},Te.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.Gv(t.data,i.pa(e!==null?e.data:null))},Te.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.Kv(t.data,i.pa(e!==null?e.data:null))},Te.prototype.removeDataForLink=function(t){this.diagram.model.lm(t.data)},Te.prototype.findPartForKey=function(t){var e=Dt.prototype.findPartForKey.call(this,t);return e===null&&(t=this.diagram.model.Dh(t),t!==null)?this.Ue.H(t):e},Te.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.Dh(t),t!==null?this.Ue.H(t):null)},Te.prototype.doModelChanged=function(t){var e=this;if(Dt.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.Z){i.Z=!1;try{var r=t.modelChange;if(r!==""){if(n===qt){if(r==="linkFromKey"){var o=this.xc(t.object);if(o!==null){var l=this.Eb(t.newValue);o.fromNode=l}}else if(r==="linkToKey"){var h=this.xc(t.object);if(h!==null){var a=this.Eb(t.newValue);h.toNode=a}}else if(r==="linkFromPortId"){var c=this.xc(t.object);if(c!==null){var p=t.newValue;typeof p=="string"&&(c.fromPortId=p)}}else if(r==="linkToPortId"){var d=this.xc(t.object);if(d!==null){var m=t.newValue;typeof m=="string"&&(d.toPortId=m)}}else if(r==="nodeGroupKey"){var x=this.yc(t.object);if(x!==null){var v=t.newValue;if(v!==void 0){var S=this.Eb(v);S instanceof dt?x.containingGroup=S:x.containingGroup=null}else x.containingGroup=null}}else if(r==="linkLabelKeys"){var P=this.xc(t.object);if(P!==null){var k=t.oldValue,L=t.newValue;Array.isArray(k)&&k.forEach(function(G){0<=L.indexOf(G)||(G=e.Eb(G),G!==null&&(G.labeledLink=null))}),Array.isArray(L)&&L.forEach(function(G){G=e.Eb(G),G!==null&&(G.labeledLink=P)})}}else if(r==="linkCategory"){var T=this.xc(t.object),O=t.newValue;T!==null&&typeof O=="string"&&(T.category=O)}else r==="linkDataArray"&&(Dk(this,t.oldValue),Ak(this,t.newValue));i.isModified=!0}else if(n===ve){var E=t.newValue;if(r==="linkDataArray"&&typeof E=="object"&&E!==null)jk(this,E);else if(r==="linkLabelKeys"&&ws(E)){var V=this.xc(t.object),$=this.Eb(E);V!==null&&$!==null&&($.labeledLink=V)}i.isModified=!0}else if(n===Ne){var b=t.oldValue;if(r==="linkDataArray"&&typeof b=="object"&&b!==null)this.pq(b);else if(r==="linkLabelKeys"&&ws(b)){var nt=this.Eb(b);nt!==null&&(nt.labeledLink=null)}i.isModified=!0}}else if(n===qt){var et=t.propertyName;t.object!==i.model||et!=="linkFromKeyProperty"&&et!=="linkToKeyProperty"&&et!=="linkFromPortIdProperty"&&et!=="linkToPortIdProperty"&&et!=="linkLabelKeysProperty"&&et!=="nodeIsGroupProperty"&&et!=="nodeGroupKeyProperty"&&et!=="linkCategoryProperty"||i.undoManager.isUndoingRedoing||this.Ld(),i.isModified=!0}}finally{i.Z=!0}}}}},Te.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new Q,n=e.linkDataArray;n.forEach(function(o){i.add(o)});var r=[];this.links.each(function(o){o.data===null||i.contains(o.data)||r.push(o.data)}),r.forEach(function(o){Wk(e,o,!1)}),n.forEach(function(o){t.xc(o)===null&&Xk(e,o,!1)})},Te.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;if(t instanceof H){var r=en(n,e,!0);if(r=i.Eb(r),t.fromNode=r,r=en(n,e,!1),r=i.Eb(r),t.toNode=r,e=n.Bf(e),0<e.length||0<t.labelNodes.count){if(e.length===1&&t.labelNodes.count===1){r=e[0];var o=t.labelNodes.first();if(n.pa(o.data)===r)return}r=new Q().addAll(e);var l=new Q;t.labelNodes.each(function(h){h.data!==null&&(h=n.pa(h.data),h!==void 0&&l.add(h))}),e=l.copy(),e.oq(r),r=r.copy(),r.oq(l),(0<e.count||0<r.count)&&(e.each(function(h){h=i.Eb(h),h!==null&&h.labeledLink===t&&(h.labeledLink=null)}),r.each(function(h){h=i.Eb(h),h!==null&&h.labeledLink!==t&&(h.labeledLink=t)}))}}else!(t instanceof Tt)&&(e=n.Eh(e),e=i.findPartForKey(e),e===null||e instanceof dt)&&(t.containingGroup=e)}}},Te.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.pa(t);if(i!==void 0){var n=Of(e,i),r=this.yc(t);if(n!==null&&r!==null){n=n.iterator;for(var o={};n.next();){var l=n.value;e.cb(l)?r instanceof dt&&e.Eh(l)===i&&(l=this.yc(l),l!==null&&(l.containingGroup=r)):(o.link=this.xc(l),o.link!==null&&r instanceof q&&(en(e,l,!0)===i&&(o.link.fromNode=r),en(e,l,!1)===i&&(o.link.toNode=r),l=e.Bf(l),Array.isArray(l)&&l.some(function(h){return function(a){return a===i?(r.labeledLink=h.link,!0):!1}}(o)))),o={link:o.link}}or(e,i)}t=e.Eh(t),t!==void 0&&(t=this.Eb(t),t instanceof dt&&(r.containingGroup=t))}},Te.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof q){var i=e.pa(t.data);if(i!==void 0){for(var n=t.linksConnected;n.next();)rr(e,i,n.value.data);if(t.isLinkLabel&&(n=t.labeledLink,n!==null&&rr(e,i,n.data)),t instanceof dt)for(t=t.memberParts;t.next();)n=t.value.data,e.cb(n)&&rr(e,i,n)}}},Te.prototype.copyPartData=function(t,e){var i=Dt.prototype.copyPartData.call(this,t,e);if(t instanceof H)if(t=t.data,t!==null&&e!==null){var n=e.model;t=n.Rp(t),typeof t=="object"&&t!==null&&(n.Bi(t),i=e.xc(t))}else i!==null&&(e=this.diagram,t!==null&&e!==null&&e.commandHandler!==null&&e.commandHandler.copiesClipboardData&&(e=e.model.Rp(t),typeof e=="object"&&e!==null&&(i.data=e)));return i},Te.prototype.insertLink=function(t,e,i,n){var r=this.diagram,o=r.model,l=r.toolManager.findTool("Linking"),h="";if(t!==null&&(e===null&&(e=t),h=e.portId,h===null&&(h="")),e="",i!==null&&(n===null&&(n=i),e=n.portId,e===null&&(e="")),n=l.archetypeLinkData,n instanceof H){if(Ln(n),o=n.copy(),o!==null)return o.fromNode=t,o.fromPortId=h,o.toNode=i,o.toPortId=e,r.add(o),t=l.archetypeLabelNodeData,t instanceof q&&(Ln(t),t=t.copy(),t!==null&&(t.labeledLink=o,r.add(t))),o}else if(n!==null&&(n=o.Rp(n),typeof n=="object"&&n!==null))return t!==null&&Oh(o,n,o.pa(t.data),!0),Ah(o,n,h,!0),i!==null&&Oh(o,n,o.pa(i.data),!1),Ah(o,n,e,!1),o.Bi(n),t=l.archetypeLabelNodeData,t===null||t instanceof q||(t=o.copyNodeData(t),typeof t=="object"&&t!==null&&(o.sf(t),t=o.pa(t),t!==void 0&&o.tu(n,t))),r.xc(n);return null},Te.prototype.findLinkForKey=Te.prototype.findLinkForKey,Te.prototype.findPartForKey=Te.prototype.findPartForKey,Te.prototype.removeAllModeledParts=Te.prototype.removeAllModeledParts,Te.prototype.addModeledParts=Te.prototype.addModeledParts,Te.prototype.addAllModeledParts=Te.prototype.addAllModeledParts,Te.className="GraphLinksPartManager";function yn(){Dt.apply(this,arguments),this.ih=null}z(yn,Dt);function xd(t,e,i){if(e!==null&&i!==null){var n=t.diagram.toolManager.findTool("Linking"),r=e,o=i;if(t.diagram.isTreePathToChildren){for(e=o.linksConnected;e.next();)if(e.value.toNode===o)return}else for(r=i,o=e,e=r.linksConnected;e.next();)if(e.value.fromNode===r)return;if((n===null||!Ba(n,r,o,null,!0))&&(n=t.getLinkCategoryForData(i.data),e=t.findLinkTemplateForCategory(n),e!==null&&(Ln(e),e=e.copy(),e!==null))){var l=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.Nf=n,e.jb=i.data,e.fromNode=r,e.toNode=o,t.diagram.add(e),e.jb=null,e.data=i.data,t.diagram.skipsModelSourceBindings=l}}}yn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ws(t)},yn.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Ts(t,e)},yn.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren)n.he(t.data,n.pa(e));else{var r=this.ih;this.ih=t,i!==null&&n.he(i.data,void 0),n.he(e,n.pa(t.toNode!==null?t.toNode.data:null)),this.ih=r}},yn.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren){var r=this.ih;this.ih=t,i!==null&&n.he(i.data,void 0),n.he(e,n.pa(t.fromNode!==null?t.fromNode.data:null)),this.ih=r}else n.he(t.data,n.pa(e))},yn.prototype.removeDataForLink=function(t){this.diagram.model.he(t.data,void 0)},yn.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.Yb(t),t!==null?this.Ue.H(t):null)},yn.prototype.doModelChanged=function(t){if(Dt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.Z){e.Z=!1;try{var n=t.modelChange;if(n!==""){if(i===qt){if(n==="nodeParentKey"){var r=t.object,o=this.Eb(t.newValue),l=this.Gi(r);if(this.ih!==null)o!==null&&(this.ih.data=r,this.ih.category=this.getLinkCategoryForData(r));else if(l!==null){var h=l.Ii();h!==null?o===null?e.remove(h):e.isTreePathToChildren?h.fromNode=o:h.toNode=o:xd(this,o,l)}}else if(n==="parentLinkCategory"){var a=this.Gi(t.object),c=t.newValue;if(a!==null&&typeof c=="string"){var p=a.Ii();p!==null&&(p.category=c)}}e.isModified=!0}}else if(i===qt){var d=t.propertyName;t.object===e.model&&d==="nodeParentKeyProperty"&&(e.undoManager.isUndoingRedoing||this.Ld()),e.isModified=!0}}finally{e.Z=!0}}}}},yn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;t instanceof q&&(e=n.Fh(e),e=i.Eb(e),n=t.qg(),e!==n&&(n=t.Ii(),e!==null?n!==null?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:xd(this,e,t):n!==null&&Pm(i,n,!1)))}}},yn.prototype.updateDataBindings=function(t,e){Dt.prototype.updateDataBindings.call(this,t,e),typeof e=="string"&&this.yc(t)!==null&&(t=this.xc(t),t!==null&&t.Fa(e))},yn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.pa(t);if(i!==void 0){var n=Of(e,i),r=this.yc(t);if(n!==null&&r!==null){for(n=n.iterator;n.next();){var o=n.value;e.cb(o)&&r instanceof q&&e.Fh(o)===i&&xd(this,r,this.Gi(o))}or(e,i)}t=e.Fh(t),t!==void 0&&r instanceof q&&(t=this.Eb(t),xd(this,t,r))}},yn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof q){var i=e.pa(t.data),n=this.xc(t.data);if(n!==null){n.isSelected=!1,n.isHighlighted=!1;var r=n.layer;if(r!==null){var o=r.ec(-1,n,!1);0<=o&&this.diagram.Wa(Ne,"parts",r,n,null,o,null),o=n.layerChanged,o!==null&&o(n,r,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,r=(n?r.toNode:r.fromNode).data,e.cb(r)&&rr(e,i,r)}},yn.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,r=i;return this.diagram.isTreePathToChildren||(n=i,r=t),n!==null&&r!==null?(e.he(r.data,e.pa(n.data)),r.Ii()):null},yn.prototype.findLinkForKey=yn.prototype.findLinkForKey,yn.className="TreePartManager";function ot(t,e){this.tl=new Q,this.rl=new Q,this.ww=`,
  "insertedNodeKeys": `,this.Iy=`,
  "modifiedNodeData": `,this.yw=`,
  "removedNodeKeys": `,this.Mh=null,je(this),this.kn=this.na="",this.Rg=!1,this.j={},this.Fc=[],this.bb=new pt,this.ni="key",this.Ik=this.ll=null,this.an=this.bn=!1,this.dn=!0,this.Nm=null,this.yj="category",this.Pf=new pt,this.Ot=new it,this.kh=!1,this.o=null,this.undoManager=new le,t!==void 0&&(mt(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}ot.prototype.cloneProtected=function(t){t.na=this.na,t.kn=this.kn,t.Rg=this.Rg,t.ni=this.ni,t.ll=this.ll,t.Ik=this.Ik,t.bn=this.bn,t.an=this.an,t.dn=this.dn,t.Nm=this.Nm,t.yj=this.yj},ot.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},ot.prototype.clear=function(){this.Fc=[],this.bb.clear(),this.Pf.clear(),this.undoManager.clear()},ot.prototype.toString=function(t){if(t===void 0&&(t=0),1<t)return this.uq();var e=(this.name!==""?this.name:"")+" Model";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.pa(r)+":"+ii(r)}}return e},ot.prototype.UA=function(t){t.change!==bn&&D("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof _e?(Fk(this,e),t=this.aw(e,t.propertyName==="FinishedUndo"),this.Mh=null,t):null},ot.prototype.aw=function(t,e){var i=this,n=!1,r=new Q,o=new Q,l=new Q,h=this.Mh;t.changes.each(function(d){d.model===i&&(d.modelChange==="nodeDataArray"?d.change===ve?r.add(d.newValue):d.change===Ne&&l.add(d.oldValue):i.cb(d.object)?o.add(d.object):d.change!==qt||i.modelData!==d.object&&d.propertyName!=="modelData"?d.object!==null&&(h&&h.contains(d.object)?h.get(d.object).each(function(m){i.cb(m)&&o.add(m)}):d.object instanceof ot||i.Pi()&&i.wc(d.object)||Rk(i,d.object).each(function(m){o.add(m)})):n=!0)});var a=this.rl;a.clear(),r.each(function(d){a.add(i.pa(d)),e||o.add(d)});var c=this.tl;c.clear(),l.each(function(d){c.add(i.pa(d)),e&&o.add(d)}),t=i.cloneDeep(o.ya());var p=null;return n&&(p===null&&(p={}),p.modelData=this.cloneDeep(this.modelData)),0<a.count&&(p===null&&(p={}),e?p.removedNodeKeys=a.ya():p.insertedNodeKeys=a.ya()),0<t.length&&(p===null&&(p={}),p.modifiedNodeData=t),0<c.count&&(p===null&&(p={}),e?p.insertedNodeKeys=c.ya():p.removedNodeKeys=c.ya()),c.clear(),a.clear(),p},ot.prototype.cloneDeep=function(t){return Eh(this,t,!0)};function Eh(t,e,i,n,r,o){function l(d,m){h?(d.__gohashid===void 0&&o.push(d),n.set(d,m)):(d=as++,n.set(d,m),r.set(d,e))}if(!ct(e))return e;o||(o=[]);var h=Object.isExtensible(e);if(n||(n=new pt),h){var a=n.get(e);if(a)return a}else for(r||(r=new pt),a=r.iterator;a.next();){var c=a.key;if(a.value===e&&(c=n.get(c)))return c}if(Array.isArray(e)){a=[],l(e,a);for(var p=0;p<e.length;p++)a.push(Eh(t,e[p],!1,n,r,o))}else if(e instanceof N||e instanceof yt||e instanceof _||e instanceof Ft||e instanceof at)a=e.copy(),l(e,a);else{if(e instanceof Ot||e instanceof tt||e instanceof K)return e;if(e instanceof it)a=new it().addAll(Eh(t,e.ya(),!1,n,r,o)),l(e,a);else if(e instanceof Q)a=new Q().addAll(Eh(t,e.ya(),!1,n,r,o)),l(e,a);else if(e instanceof pt)a=new pt().addAll(Eh(t,e.ya(),!1,n,r,o)),l(e,a);else if(e instanceof Date)a=new Date(e.getTime()),l(e,a);else if(e instanceof RegExp)a=new RegExp(e),l(e,a),a.lastIndex=e.lastIndex;else if(typeof e.copy=="function")a=e.copy(),l(e,a);else for(p in a={},l(e,a),e)p!=="__gohashid"&&(a[p]=Eh(t,e[p],!1,n,r,o))}return i&&o.forEach(function(d){delete d.__gohashid}),a}s=ot.prototype,s.quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},s.Dm=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.dataFormat!==""&&(t+=`,
  "dataFormat": `+this.quote(this.dataFormat)),this.isReadOnly&&(t+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(t+=`,
  "copiesArrayObjects": true`),this.copiesKey||(t+=`,
  "copiesKey": false`),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.nodeCategoryProperty)),t},s.mq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),t.copiesKey===!1&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)};function Ik(t,e){e=e.modelData,ct(e)&&(t.nm(e),t.modelData=e)}s.bw=function(){var t=this.modelData,e=!1,i;for(i in t)if(!Bk(i,t[i])){e=!0;break}return t="",e&&(t=`,
  "modelData": `+K0(this,this.modelData)),t+`,
  "nodeDataArray": `+xs(this,this.nodeDataArray,!0)},s.wv=function(t){Ik(this,t),t=t.nodeDataArray,mt(t)&&(this.nm(t),this.nodeDataArray=t)};function Fk(t,e){function i(r,o){if((o=o.part)&&(o=o.data,r!==o)){var l=n.get(r);l===null?(l=new Q,l.add(o),n.add(r,l)):l.add(o)}}var n=t.Mh;n===null&&(n=new pt,e.changes.each(function(r){if(r.diagram!==null){var o=r.change;o===qt?(r=r.object.panel)&&(o=r.data)&&i(o,r):(o===ve||o===Ne)&&(r=r.object,(o=r.itemArray)&&i(o,r))}}),t.Mh=n)}function Rk(t,e){for(var i=new Q,n=0;n<t.nodeDataArray.length;n++){var r=t.nodeDataArray[n];wd(t,e,r,r,i)}return i}function wd(t,e,i,n,r){if(Array.isArray(i))for(var o=0;o<i.length;o++){var l=i[o];if(l===e)return r.add(n),!0;if(wd(t,e,l,n,r))return!0}else if(ct(i)&&Object.getPrototypeOf(i)===Object.prototype)for(o in i){if(l=i[o],l===e)return r.add(n),!0;if(wd(t,e,l,n,r))return!0}return!1}s.$v=function(t,e){var i=this,n=!1,r=new Q,o=new Q,l=new Q,h=this.Mh;t.changes.each(function(p){p.model===i&&(p.modelChange==="nodeDataArray"?p.change===ve?r.add(p.newValue):p.change===Ne&&l.add(p.oldValue):i.cb(p.object)?o.add(p.object):p.change!==qt||i.modelData!==p.object&&p.propertyName!=="modelData"?p.object!==null&&(h&&h.contains(p.object)?h.get(p.object).each(function(d){i.cb(d)&&o.add(d)}):p.object instanceof ot||i.Pi()&&i.wc(p.object)||Rk(i,p.object).each(function(d){o.add(d)})):n=!0)});var a=this.rl;a.clear(),r.each(function(p){a.add(i.pa(p)),e||o.add(p)});var c=this.tl;return c.clear(),l.each(function(p){c.add(i.pa(p)),e&&o.add(p)}),t="",n&&(t+=`,
  "modelData": `+K0(this,this.modelData)),0<a.count&&(t+=(e?this.yw:this.ww)+xs(this,a.ya(),!0)),0<o.count&&(t+=this.Iy+xs(this,o.ya(),!0)),0<c.count&&(t+=(e?this.ww:this.yw)+xs(this,c.ya(),!0)),c.clear(),a.clear(),t},s.lq=function(t){(t.name!==void 0&&t.name!==this.name||t.dataFormat!==void 0&&t.dataFormat!==this.dataFormat||t.isReadOnly!==void 0&&t.isReadOnly!==this.isReadOnly||t.nodeKeyProperty!==void 0&&t.nodeKeyProperty!==this.nodeKeyProperty||t.copiesArrays!==void 0&&t.copiesArrays!==this.copiesArrays||t.copiesArrayObjects!==void 0&&t.copiesArrayObjects!==this.copiesArrayObjects||t.copiesKey!==void 0&&t.copiesKey!==this.copiesKey||t.nodeCategoryProperty!==void 0&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&D("applyIncrementalJson cannot change Model properties"),Ik(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new pt;if(Array.isArray(i))for(var r=0;r<i.length;r++){var o=i[r],l=this.pa(o);l!=null&&n.set(l,o)}if(Array.isArray(e))for(r=e.length,o=0;o<r;o++){l=e[o];var h=this.Yb(l);h===null&&(h=(h=n.get(l))?h:this.copyNodeData({}),this.um(h,l),this.sf(h))}if(Array.isArray(i)){for(e=i.length,n=0;n<e;n++)if(r=i[n],o=this.pa(r),o=this.Yb(o),o!==null){for(var a in r)a==="__gohashid"||a===this.nodeKeyProperty||this.bk()&&a===this.nodeIsGroupProperty||this.setDataProperty(o,a,r[a]);this.vm(r,o)}}if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,a=0;a<i;a++)e=this.Yb(t[a]),e!==null&&this.mm(e)},s.By=function(t,e){t.change!==bn&&D("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof _e?(e===void 0&&(e=Af(this,this)),Fk(this,i),t=this.$v(i,t.propertyName==="FinishedUndo"),this.Mh=null,e==="2"?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.Dm()+t+"}"):'{ "incremental": 0 }'},s.VA=function(t,e){return this.By(t,e)},s.uq=function(t){return t===void 0&&(t=Af(this,this)),'{ "class": '+this.quote(t)+this.Dm()+this.bw()+"}"},s.toJSON=function(t){return this.uq(t)},s.wx=function(t){var e=null;if(typeof t=="string")try{e=W.JSON.parse(t)}catch{}else typeof t=="object"?e=t:D("Unable to modify a Model from: "+t);var i=e.incremental;typeof i!="number"&&D("Unable to apply non-incremental changes to Model: "+t),i!==0&&(this.xa("applyIncrementalJson"),this.lq(e),this.Xa("applyIncrementalJson"))},s.fz=function(t){return this.wx(t)},ot.constructGraphLinksModel=function(){return new ot},s=ot.prototype,s.nm=function(t){if(mt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(ct(n)){var r=i;n=this.nm(n),Array.isArray(t)?t[r]=n:D("Cannot replace an object in an HTMLCollection or NodeList at "+r)}}else if(ct(t)){for(e in t)if(i=t[e],ct(i)&&(i=this.nm(i),t[e]=i,e==="points"&&Array.isArray(i))){for(r=i.length%2===0,n=0;n<i.length;n++)if(typeof i[n]!="number"){r=!1;break}if(r){for(r=new it,n=0;n<i.length/2;n++)r.add(new N(i[2*n],i[2*n+1]));r.freeze(),t[e]=r}}return uL(t)}return t},s.Em=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Em(t.valueOf()):mt(t)?xs(this,t):ct(t)?K0(this,t):typeof t=="function"?"null":t.toString()};function xs(t,e,i){i===void 0&&(i=!1);var n=e.length;if(0>=n)return"[]";var r=new Lr;r.add("["),i&&1<n&&r.add(`
`);for(var o=0;o<n;o++){var l=e[o];l!==void 0&&(0<o&&(r.add(","),i&&r.add(`
`)),r.add(t.Em(l)))}return i&&1<n&&r.add(`
`),r.add("]"),r.toString()}function Bk(t,e){return e===void 0||t==="__gohashid"||t[0]==="_"||typeof e=="function"}function vi(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function K0(t,e){var i=e;if(i instanceof N)e={class:"go.Point",x:vi(i.x),y:vi(i.y)};else if(i instanceof yt)e={class:"go.Size",width:vi(i.width),height:vi(i.height)};else if(i instanceof _)e={class:"go.Rect",x:vi(i.x),y:vi(i.y),width:vi(i.width),height:vi(i.height)};else if(i instanceof Ft)e={class:"go.Margin",top:vi(i.top),right:vi(i.right),bottom:vi(i.bottom),left:vi(i.left)};else if(i instanceof at)i.hb()?e={class:"go.Spot",x:vi(i.x),y:vi(i.y),offsetX:vi(i.offsetX),offsetY:vi(i.offsetY)}:e={class:"go.Spot",enum:i.toString()};else if(i instanceof Ot){if(e={class:"go.Brush",type:i.type.name},i.type===Uo?e.color=i.color:(i.type===po||i.type===bi)&&(e.start=i.start,e.end=i.end,i.type===bi&&(i.startRadius!==0&&(e.startRadius=vi(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=vi(i.endRadius)))),i.colorStops!==null){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof tt?(e={class:"go.Geometry",type:i.type.name},i.startX!==0&&(e.startX=vi(i.startX)),i.startY!==0&&(e.startY=vi(i.startY)),i.endX!==0&&(e.endX=vi(i.endX)),i.endY!==0&&(e.endY=vi(i.endY)),i.spot1.A(di)||(e.spot1=i.spot1),i.spot2.A(Er)||(e.spot2=i.spot2),i.type===tt.o&&(e.path=tt.wa(i))):i instanceof K&&(e={class:"go.EnumValue",classType:Af(t,i.classType),name:i.name});n="{",i=!0;for(var r in e){var o=ue(e,r);if(!Bk(r,o))if(i?i=!1:n+=",",n+=t.quote(r)+":",r==="points"&&o instanceof it){var l="[";for(o=o.iterator;o.next();){var h=o.value;1<l.length&&(l+=","),l+=t.Em(h.x),l+=",",l+=t.Em(h.y)}l+="]",n+=l}else n+=t.Em(o)}return n+"}"}function xi(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}function uL(t){if(typeof t!="object")return t;var e=t.class||"";if(e==="NaN")return NaN;if(e==="Date")return new Date(t.value);if(e.indexOf("go.")!==0)return t;e=e.substr(3);var i=t;if(e==="Point")i=new N(xi(t.x),xi(t.y));else if(e==="Size")i=new yt(xi(t.width),xi(t.height));else if(e==="Rect")i=new _(xi(t.x),xi(t.y),xi(t.width),xi(t.height));else if(e==="Margin")i=new Ft(xi(t.top),xi(t.right),xi(t.bottom),xi(t.left));else if(e==="Spot")typeof t.enum=="string"?i=Jg(t.enum):i=new at(xi(t.x),xi(t.y),xi(t.offsetX),xi(t.offsetY));else if(e==="Brush"){if(i=new Ot,i.type=Oe(Ot,t.type),typeof t.color=="string"&&(i.color=t.color),t.start instanceof at&&(i.start=t.start),t.end instanceof at&&(i.end=t.end),typeof t.startRadius=="number"&&(i.startRadius=xi(t.startRadius)),typeof t.endRadius=="number"&&(i.endRadius=xi(t.endRadius)),t=t.colorStops,ct(t))for(var n in t)i.addColorStop(parseFloat(n),t[n])}else e==="Geometry"?(i=null,typeof t.path=="string"?i=tt.parse(t.path):i=new tt,i.type=Oe(tt,t.type),typeof t.startX=="number"&&(i.startX=xi(t.startX)),typeof t.startY=="number"&&(i.startY=xi(t.startY)),typeof t.endX=="number"&&(i.endX=xi(t.endX)),typeof t.endY=="number"&&(i.endY=xi(t.endY)),t.spot1 instanceof at&&(i.spot1=t.spot1),t.spot2 instanceof at&&(i.spot2=t.spot2)):e==="EnumValue"&&(n=t.classType,n.indexOf("go.")===0&&(n=n.substr(3)),n=J0(n),typeof n=="function"&&(i=Oe(n,t.name)));return i}s.yh=function(t){return this.Ot.add(t),this},s.pk=function(t){this.Ot.remove(t)},s.js=function(t){this.skipsUndoManager||this.undoManager.Yu(t);for(var e=this.Ot,i=e.length,n=0;n<i;n++)e.J(n)(t)},s.Wa=function(t,e,i,n,r,o,l){de(this,"",t,e,i,n,r,o,l)},s.g=function(t,e,i,n,r){de(this,"",qt,t,this,e,i,n,r)},s.Ns=function(t,e,i,n,r,o){de(this,"",qt,e,t,i,n,r,o)};function de(t,e,i,n,r,o,l,h,a){h===void 0&&(h=null),a===void 0&&(a=null);var c=new te;c.model=t,c.change=i,c.modelChange=e,c.propertyName=n,c.object=r,c.oldValue=o,c.oldParam=h,c.newValue=l,c.newParam=a,t.js(c)}ot.prototype.changeState=function(t,e){if(t!==null&&t.model===this)if(t.change===qt){var i=t.object,n=t.propertyName,r=t.H(e);n===this.nodeKeyProperty&&this.cb(i)&&(e=t.H(!e),e!==void 0&&this.bb.remove(e),r!==void 0&&this.bb.add(r,i)),Ht(i,n,r)}else t.change===ve?(i=t.newParam,t.modelChange==="nodeDataArray"?(t=t.newValue,ct(t)&&typeof i=="number"&&(n=this.pa(t),e?(this.Fc[i]===t&&Ue(this.Fc,i),n!==void 0&&this.bb.remove(n)):(this.Fc[i]!==t&&zi(this.Fc,i,t),n!==void 0&&this.bb.add(n,t)))):t.modelChange===""?((n=t.object)&&!mt(n)&&t.propertyName&&(n=ue(t.object,t.propertyName)),mt(n)&&typeof i=="number"&&(t=t.newValue,e?Ue(n,i):zi(n,i,t))):D("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Ne?(i=t.oldParam,t.modelChange==="nodeDataArray"?(t=t.oldValue,ct(t)&&typeof i=="number"&&(n=this.pa(t),e?(this.Fc[i]!==t&&zi(this.Fc,i,t),n!==void 0&&this.bb.add(n,t)):(this.Fc[i]===t&&Ue(this.Fc,i),n!==void 0&&this.bb.remove(n)))):t.modelChange===""?((n=t.object)&&!mt(n)&&t.propertyName&&(n=ue(t.object,t.propertyName)),mt(n)&&typeof i=="number"&&(t=t.oldValue,e?zi(n,i,t):Ue(n,i))):D("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==bn&&D("unknown ChangedEvent: "+t.toString())},ot.prototype.xa=function(t){return this.undoManager.xa(t)},ot.prototype.Xa=function(t){return this.undoManager.Xa(t)},ot.prototype.Hf=function(){return this.undoManager.Hf()},ot.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.xa(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.Xa(e):this.undoManager.Hf(),this.skipsUndoManager=i}},s=ot.prototype,s.Fa=function(t,e){e===void 0&&(e=""),de(this,"SourceChanged",bn,e,t,null,null)},s.pa=function(t){if(t!==null){var e=this.ni;if(e!==""&&(e=ue(t,e),e!==void 0)){if(ws(e))return e;D("Key value for node data "+t+" is not a number or a string: "+e)}}},s.um=function(t,e){if(t!==null){var i=this.ni;if(i!=="")if(this.cb(t)){var n=ue(t,i);n!==e&&this.Yb(e)===null&&(Ht(t,i,e),n!==void 0&&this.bb.remove(n),this.bb.add(e,t),de(this,"nodeKey",qt,i,t,n,e),typeof i=="string"&&this.Fa(t,i),this.qq(n,e))}else Ht(t,i,e)}};function ws(t){return typeof t=="number"||typeof t=="string"}s.cb=function(t){var e=this.pa(t);return e===void 0?!1:this.bb.H(e)===t},s.Yb=function(t){return t===null&&D("Model.findNodeDataForKey:key must not be null"),t!==void 0&&ws(t)?this.bb.H(t):null},s.jv=function(t){if(t!==null){var e=this.ni;if(e!==""){var i=this.pa(t);if(i===void 0||this.bb.contains(i)){var n=this.ll;if(n!==null&&(i=n(this,t),i!=null&&!this.bb.contains(i))){Ht(t,e,i);return}if(typeof i=="string"){for(n=2;this.bb.contains(i+n);)n++;Ht(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.bb.count-1;this.bb.contains(i);)i--;Ht(t,e,i)}}}}},s.sf=function(t){t!==null&&(Ll(t),this.cb(t)||Vk(this,t,!0))};function Vk(t,e,i){var n=t.pa(e);(n===void 0||t.bb.H(n)!==e)&&(t.jv(e),n=t.pa(e),n===void 0&&D("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.bb.add(n,e),n=null,i&&(n=t.Fc.length,zi(t.Fc,n,e)),de(t,"nodeDataArray",ve,"nodeDataArray",t,null,e,null,n),t.pm(e),t.om(e))}s.bz=function(t){if(mt(t))for(var e=t.length,i=0;i<e;i++)this.sf(t[i]);else for(t=t.iterator;t.next();)this.sf(t.value)},s.mm=function(t){t!==null&&_k(this,t,!0)};function _k(t,e,i){var n=t.pa(e);if(n!==void 0&&t.bb.remove(n),n=null,i){t:if(i=t.Fc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var r=0;r<n;r++)if(i[r]===e){n=r;break t}n=-1}if(0>n)return;Ue(t.Fc,n)}de(t,"nodeDataArray",Ne,"nodeDataArray",t,e,null,n,null),t.xq(e)}s.JA=function(t){if(mt(t))for(var e=t.length,i=0;i<e;i++)this.mm(t[i]);else for(t=t.iterator;t.next();)this.mm(t.value)},s.wA=function(t){if(t!==this.nodeDataArray&&mt(t)){var e=this.tl;e.clear(),e.addAll(this.bb.iteratorKeys);var i=this.rl;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],l=this.pa(o);if(l!==void 0){i.add(l);var h=this.Yb(l);h!==o&&(h!==null?(this.Mp(h,o),this.vm(o,h)):(o=this.cloneDeep(o),this.um(o,l),this.sf(o)))}else l=this.cloneDeep(o),this.sf(l),i.add(this.pa(l))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.Yb(n))&&this.mm(n);e.clear(),i.clear()}},s.qq=function(t,e){e!==void 0&&(t=Of(this,t),t instanceof Q&&this.Pf.add(e,t))},s.Uv=function(){},s.pm=function(){},s.om=function(){},s.xq=function(){};function rr(t,e,i){if(e!==void 0){var n=t.Pf.H(e);n===null&&(n=new Q,t.Pf.add(e,n)),n.add(i)}}function or(t,e,i){if(e!==void 0){var n=t.Pf.H(e);n instanceof Q&&(i==null?t.Pf.remove(e):(n.remove(i),n.count===0&&t.Pf.remove(e)))}}function Of(t,e){return e===void 0?null:(t=t.Pf.H(e),t instanceof Q?t:null)}s.mz=function(t){t===void 0?this.Pf.clear():this.Pf.remove(t)},ot.prototype.copyNodeData=function(t){if(t===null)return null;var e=this.Ik;return t=e!==null?e(t,this):Sd(this,t,!0),ct(t)&&je(t),t};function Sd(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var r=Sd(t,e[i],t.copiesArrayObjects);n.push(r)}return je(n),n}if(i&&ct(e)){i=(i=e.constructor)?new i:{},r=t.copiesKey||typeof t.nodeKeyProperty!="string"?null:t.nodeKeyProperty;for(n in e)if(n==="__gohashid")i.__gohashid=void 0;else if(n===r)i[r]=void 0;else{var o=ue(e,n),l=Af(t,o);l==="GraphObject"||l==="Diagram"||l==="Layer"||l==="RowColumnDefinition"||l==="AnimationManager"||l==="Tool"||l==="CommandHandler"||l==="Layout"||l==="InputEvent"||l==="DiagramEvent"||o instanceof ot||o instanceof le||o instanceof _e||o instanceof te||(o=Sd(t,o,!1)),Ht(i,n,o)}return je(i),i}return e instanceof N||e instanceof yt||e instanceof _||e instanceof at||e instanceof Ft?e.copy():e}ot.prototype.setDataProperty=function(t,e,i){if(this.cb(t)){if(e===this.nodeKeyProperty){this.um(t,i);return}if(e===this.nodeCategoryProperty){this.tm(t,i);return}}else!Uk&&t instanceof ht&&(Uk=!0,wt('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),wt("  Is that really your intent?"));var n=ue(t,e);n!==i&&(Ht(t,e,i),this.Ns(t,e,n,i))},s=ot.prototype,s.set=function(t,e,i){this.setDataProperty(t,e,i)},s.Mp=function(t,e){if(e){var i=this.cb(t),n;for(n in e)n==="__gohashid"||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},s.Yy=function(t,e){this.xs(t,-1,e)},s.xs=function(t,e,i){0>e&&(e=t.length),zi(t,e,i),de(this,"",ve,"",t,null,i,null,e)},s.zv=function(t,e){e===void 0&&(e=-1),t===this.Fc&&D("Model.removeArrayItem should not be called on the Model.nodeDataArray"),e===-1&&(e=t.length-1);var i=t[e];Ue(t,e),de(this,"",Ne,"",t,i,null,e,null)},s.Yp=function(t){if(t===null)return"";var e=this.yj;if(e===""||(e=ue(t,e),e===void 0))return"";if(typeof e=="string")return e;D("getCategoryForNodeData found a non-string category for "+t+": "+e)},s.tm=function(t,e){if(t!==null){var i=this.yj;if(i!=="")if(this.cb(t)){var n=ue(t,i);n===void 0&&(n=""),n!==e&&(Ht(t,i,e),de(this,"nodeCategory",qt,i,t,n,e))}else Ht(t,i,e)}},s.vm=function(t,e){this.tm(e,this.Yp(t))},s.dm=function(){return!1},s.bk=function(){return!1},s.Pi=function(){return!1},s.Cs=function(){return!1},s.ck=function(){return!1};function $0(){return new ot}function Af(t,e){if(typeof e=="function"){if(e.className)return e.className;if(e.name)return e.name}else if(typeof e=="object"&&e!==null&&e.constructor)return Af(t,e.constructor);return typeof e}function J0(t){return Yn[t]?Yn[t]:W.go!==void 0&&W.go[t]?W.go[t]:null}function ue(t,e){if(!t||!e)return null;try{if(typeof e=="function")var i=e(t);else typeof t.getAttribute=="function"?(i=t.getAttribute(e),i===null&&(i=void 0)):i=t[e]}catch{}return i}function Ht(t,e,i){if(t&&e)try{typeof e=="function"?e(t,i):typeof t.setAttribute=="function"?t.setAttribute(e,i):t[e]=i}catch{}}Y.Object.defineProperties(ot.prototype,{name:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.kn},set:function(t){var e=this.kn;e!==t&&(this.kn=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Rg},set:function(t){var e=this.Rg;e!==t&&(this.Rg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Fa(t))}},undoManager:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(e!==null&&e.py(this),this.o=t,t!==null&&t.ux(this))}},skipsUndoManager:{get:function(){return this.kh},set:function(t){this.kh=t}},nodeKeyProperty:{get:function(){return this.ni},set:function(t){var e=this.ni;e!==t&&(t===""&&D("Model.nodeKeyProperty may not be the empty string"),0<this.bb.count&&D("Cannot set Model.nodeKeyProperty when there is existing node data"),this.ni=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.ll},set:function(t){var e=this.ll;e!==t&&(this.ll=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Fc},set:function(t){var e=this.Fc;if(e!==t){this.bb.clear(),this.Uv();for(var i=t.length,n=0;n<i;n++){var r=t[n];ct(r)||D("Model.nodeDataArray must only contain Objects, not: "+r),Ll(r)}for(this.Fc=t,n=new it,r=0;r<i;r++){var o=t[r],l=this.pa(o);l===void 0||this.bb.H(l)!==null?n.add(o):this.bb.add(l,o)}for(n=n.iterator;n.next();)r=n.value,this.jv(r),o=this.pa(r),o!==void 0&&this.bb.add(o,r);for(de(this,"nodeDataArray",qt,"nodeDataArray",this,e,t),e=0;e<i;e++)n=t[e],this.pm(n),this.om(n);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Ik},set:function(t){var e=this.Ik;e!==t&&(this.Ik=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.bn},set:function(t){var e=this.bn;e!==t&&(this.bn=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.an},set:function(t){var e=this.an;e!==t&&(this.an=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.dn},set:function(t){var e=this.dn;e!==t&&(this.dn=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.Nm},set:function(t){var e=this.Nm;e!==t&&(this.Nm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.yj},set:function(t){var e=this.yj;e!==t&&(this.yj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),ot.prototype.setCategoryForNodeData=ot.prototype.tm,ot.prototype.getCategoryForNodeData=ot.prototype.Yp,ot.prototype.removeArrayItem=ot.prototype.zv,ot.prototype.insertArrayItem=ot.prototype.xs,ot.prototype.addArrayItem=ot.prototype.Yy,ot.prototype.assignAllDataProperties=ot.prototype.Mp,ot.prototype.set=ot.prototype.set,ot.prototype.clearUnresolvedReferences=ot.prototype.mz,ot.prototype.mergeNodeDataArray=ot.prototype.wA,ot.prototype.removeNodeDataCollection=ot.prototype.JA,ot.prototype.removeNodeData=ot.prototype.mm,ot.prototype.addNodeDataCollection=ot.prototype.bz,ot.prototype.addNodeData=ot.prototype.sf,ot.prototype.makeNodeDataKeyUnique=ot.prototype.jv,ot.prototype.findNodeDataForKey=ot.prototype.Yb,ot.prototype.containsNodeData=ot.prototype.cb,ot.prototype.setKeyForNodeData=ot.prototype.um,ot.prototype.getKeyForNodeData=ot.prototype.pa,ot.prototype.updateTargetBindings=ot.prototype.Fa,ot.prototype.commit=ot.prototype.commit,ot.prototype.rollbackTransaction=ot.prototype.Hf,ot.prototype.commitTransaction=ot.prototype.Xa,ot.prototype.startTransaction=ot.prototype.xa,ot.prototype.raiseDataChanged=ot.prototype.Ns,ot.prototype.raiseChanged=ot.prototype.g,ot.prototype.raiseChangedEvent=ot.prototype.Wa,ot.prototype.removeChangedListener=ot.prototype.pk,ot.prototype.addChangedListener=ot.prototype.yh,ot.prototype.writeJsonValue=ot.prototype.Em,ot.prototype.replaceJsonObjects=ot.prototype.nm,ot.prototype.applyIncrementalJSON=ot.prototype.fz,ot.prototype.applyIncrementalJson=ot.prototype.wx,ot.prototype.toJSON=ot.prototype.toJSON,ot.prototype.toJson=ot.prototype.uq,ot.prototype.toIncrementalJSON=ot.prototype.VA,ot.prototype.toIncrementalJson=ot.prototype.By,ot.prototype.toIncrementalData=ot.prototype.UA,ot.prototype.clear=ot.prototype.clear;var Uk=!1,Yn={};ot.className="Model",ot.fromJSON=ot.fromJson=function(t,e){e===void 0&&(e=null);var i=null;if(typeof t=="string")try{i=W.JSON.parse(t)}catch{}else typeof t=="object"?i=t:D("Unable to construct a Model from: "+t);if(e===null){t=null;var n=i.class;if(typeof n=="string")try{var r=null;n.indexOf("go.")===0?(n=n.substr(3),r=J0(n)):(r=J0(n),r===null&&(r=W[n])),typeof r=="function"&&(t=new r)}catch{}t===null||t instanceof ot?e=t:D("Unable to construct a Model of declared class: "+i.class)}return e===null&&(e=ot.constructGraphLinksModel()),e.mq(i),e.wv(i),e},ot.safePropertyValue=ue,ot.safePropertySet=Ht,Yn.Brush=Ot,Yn.ChangedEvent=te,Yn.Geometry=tt,Yn.Margin=Ft,Yn.Panel=X,Yn.Point=N,Yn.Rect=_,Yn.Size=yt,Yn.Spot=at,Yn.Transaction=_e,Yn.UndoManager=le;function ae(t,e,i,n){je(this),this.v=!1,t===void 0&&(t=""),e===void 0&&(e=t),i===void 0&&(i=null),this.j=-1,this.od=null,this.Ol=t,this.Nl=this.xp=0,this.Tr=null,this.Yn=!1,this.Gl=e,this.$m=i,n===void 0?(this.ol=Gk,this.Bk=null):(this.ol=jf,this.Bk=n),this.Et=new Q}ae.prototype.copy=function(){var t=new ae;return t.Ol=this.Ol,t.xp=this.xp,t.Nl=this.Nl,t.Tr=this.Tr,t.Yn=this.Yn,t.Gl=this.Gl,t.$m=this.$m,t.ol=this.ol,t.Bk=this.Bk,t},s=ae.prototype,s.gb=function(t){t.classType===ae&&(this.mode=t)},s.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.Xi!==-1?" "+this.Xi:"")+" "+this.mode.name+")"},s.freeze=function(){return this.v=!0,this},s.ea=function(){return this.v=!1,this},s.hy=function(t){return t===void 0&&(t=null),this.mode=jf,this.backConverter=t,this},s.jq=function(t){return t===void 0&&(t=""),this.sourceName=t,this.isToModel=!1,this},s.zA=function(){return this.sourceName=null,this.isToModel=!0,this};function zk(t,e,i){return t=t.sourceName,t===null||t===""?e:t==="/"?i.part:t==="."?i:t===".."?i.panel:e.Ya(t)}s.Vv=function(t,e,i){var n=this.Gl;if(i===void 0||n===""||n===i){i=this.Ol;var r=this.$m;if(r===null&&i==="")wt("Binding error: target property is the empty string: "+this.toString());else{var o=e;if(n!==""&&(o=ue(e,n)),o!==void 0)if(r===null)i!==""&&Ht(t,i,o);else try{if(i!==""){var l=r(o,t);Ht(t,i,l)}else r(o,t)}catch{}}}},s.zq=function(t,e,i,n){if(this.ol===jf){var r=this.Ol;if(i===void 0||r===i){i=this.Gl;var o=this.Bk,l=t;if(r!==""&&(l=ue(t,r)),l!==void 0&&!this.Et.contains(t))try{this.Et.add(t);var h=n!==null?n.diagram:null,a=h!==null?h.model:null;if(o===null){if(i!=="")a!==null?a.setDataProperty(e,i,l):Ht(e,i,l);else if(a!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var c=n.itemIndex,p=n.panel.itemArray;a.zv(p,c),a.xs(p,c,l)}}else try{if(i!==""){var d=o(l,e,a);a!==null?a.setDataProperty(e,i,d):Ht(e,i,d)}else{var m=o(l,e,a);if(m!==void 0&&a!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var x=n.itemIndex,v=n.panel.itemArray;a.zv(v,x),a.xs(v,x,m)}}}catch{}}finally{this.Et.remove(t)}}}},Y.Object.defineProperties(ae.prototype,{Xi:{get:function(){return this.j},set:function(t){this.v&&rt(this),this.j=t}},targetProperty:{get:function(){return this.Ol},set:function(t){this.v&&rt(this),this.Ol=t}},sourceName:{get:function(){return this.Tr},set:function(t){this.v&&rt(this),this.Tr=t,t!==null&&(this.Yn=!1)}},isToModel:{get:function(){return this.Yn},set:function(t){this.v&&rt(this),this.Yn=t}},sourceProperty:{get:function(){return this.Gl},set:function(t){this.v&&rt(this),this.Gl=t}},converter:{get:function(){return this.$m},set:function(t){this.v&&rt(this),this.$m=t}},backConverter:{get:function(){return this.Bk},set:function(t){this.v&&rt(this),this.Bk=t}},mode:{get:function(){return this.ol},set:function(t){this.v&&rt(this),this.ol=t}}}),ae.prototype.updateSource=ae.prototype.zq,ae.prototype.updateTarget=ae.prototype.Vv,ae.prototype.ofModel=ae.prototype.zA,ae.prototype.ofObject=ae.prototype.jq,ae.prototype.makeTwoWay=ae.prototype.hy;var hL="Binding",Gk=new K(ae,"OneWay",1),jf=new K(ae,"TwoWay",2);ae.className="Binding",ae.parseEnum=function(t,e){return function(i){return i=Oe(t,i),i===null?e:i}},ae.toString=ii,ae.OneWay=Gk,ae.TwoWay=jf;function Ct(t,e,i){ot.call(this),this.vw=`,
  "insertedLinkKeys": `,this.Hy=`,
  "modifiedLinkData": `,this.xw=`,
  "removedLinkKeys": `,this.Yc=[],this.Vf=new Q,this.kb=new pt,this.hi="",this.bj=this.Hk=this.ml=null,this.af="from",this.bf="to",this.uj=this.tj="",this.sj="category",this.ce="",this.sl="isGroup",this.Ae="group",this.cn=!1,e!==void 0&&(this.linkDataArray=e),t!==void 0&&(mt(t)?this.nodeDataArray=t:Object.assign(this,t)),i&&Object.assign(this,i)}z(Ct,ot),Ct.constructGraphLinksModel=ot.constructGraphLinksModel,Ct.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.hi=this.hi,t.ml=this.ml,t.Hk=this.Hk,t.af=this.af,t.bf=this.bf,t.tj=this.tj,t.uj=this.uj,t.sj=this.sj,t.ce=this.ce,t.sl=this.sl,t.Ae=this.Ae,t.cn=this.cn},s=Ct.prototype,s.clear=function(){ot.prototype.clear.call(this),this.Yc=[],this.kb.clear(),this.Vf.clear()},s.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.uq();var e=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;var i=t.length,n;for(n=0;n<i;n++){var r=t[n];e+=" "+this.pa(r)+":"+ii(r)}for(e+=`
 link data:`,t=this.linkDataArray,i=t.length,n=0;n<i;n++)r=t[n],e+=" "+en(this,r,!0)+"-->"+en(this,r,!1)}return e},s.aw=function(t,e){this.linkKeyProperty===""&&D("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var i=ot.prototype.aw.call(this,t,e),n=this,r=new Q,o=new Q,l=new Q,h=this.Mh;t.changes.each(function(p){p.model===n&&(p.modelChange==="linkDataArray"?p.change===ve?r.add(p.newValue):p.change===Ne&&l.add(p.oldValue):n.wc(p.object)?o.add(p.object):p.object!==null&&(p.object!==null&&h&&h.contains(p.object)?h.get(p.object).each(function(d){n.wc(d)&&o.add(d)}):p.object instanceof ot||n.cb(p.object)||Yk(n,p.object).each(function(d){o.add(d)})))});var a=this.rl;a.clear(),r.each(function(p){a.add(n.pc(p)),e||o.add(p)});var c=this.tl;return c.clear(),l.each(function(p){c.add(n.pc(p)),e&&o.add(p)}),t=n.cloneDeep(o.ya()),0<a.count&&(i===null&&(i={}),e?i.removedLinkKeys=a.ya():i.insertedLinkKeys=a.ya()),0<t.length&&(i===null&&(i={}),i.modifiedLinkData=t),0<c.count&&(i===null&&(i={}),e?i.insertedLinkKeys=c.ya():i.removedLinkKeys=c.ya()),c.clear(),a.clear(),i},s.Dm=function(){var t=ot.prototype.Dm.call(this),e="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(e+=`,
  "linkCategoryProperty": `+this.quote(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(e+=`,
  "linkKeyProperty": `+this.quote(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(e+=`,
  "linkFromKeyProperty": `+this.quote(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(e+=`,
  "linkToKeyProperty": `+this.quote(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(e+=`,
  "linkFromPortIdProperty": `+this.quote(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(e+=`,
  "linkToPortIdProperty": `+this.quote(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(e+=`,
  "linkLabelKeysProperty": `+this.quote(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(e+=`,
  "nodeIsGroupProperty": `+this.quote(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(e+=`,
  "nodeGroupKeyProperty": `+this.quote(this.nodeGroupKeyProperty)),t+e},s.mq=function(t){ot.prototype.mq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},s.bw=function(){var t=ot.prototype.bw.call(this),e=`,
  "linkDataArray": `+xs(this,this.linkDataArray,!0);return t+e},s.wv=function(t){ot.prototype.wv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.nm(t),this.linkDataArray=t)};function Yk(t,e){for(var i=new Q,n=0;n<t.linkDataArray.length;n++){var r=t.linkDataArray[n];wd(t,e,r,r,i)}return i}s.$v=function(t,e){this.linkKeyProperty===""&&D("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=ot.prototype.$v.call(this,t,e),n=this,r=new Q,o=new Q,l=new Q,h=this.Mh;t.changes.each(function(p){p.model===n&&(p.modelChange==="linkDataArray"?p.change===ve?r.add(p.newValue):p.change===Ne&&l.add(p.oldValue):n.wc(p.object)?o.add(p.object):p.object!==null&&(p.object!==null&&h&&h.contains(p.object)?h.get(p.object).each(function(d){n.wc(d)&&o.add(d)}):p.object instanceof ot||n.cb(p.object)||Yk(n,p.object).each(function(d){o.add(d)})))});var a=this.rl;a.clear(),r.each(function(p){a.add(n.pc(p)),e||o.add(p)});var c=this.tl;return c.clear(),l.each(function(p){c.add(n.pc(p)),e&&o.add(p)}),t=i,0<a.count&&(t+=(e?this.xw:this.vw)+xs(this,a.ya(),!0)),0<o.count&&(t+=this.Hy+xs(this,o.ya(),!0)),0<c.count&&(t+=(e?this.vw:this.xw)+xs(this,c.ya(),!0)),c.clear(),a.clear(),t},s.lq=function(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&D("applyIncrementalJson cannot change Model properties"),ot.prototype.lq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.Dh(r);o===null&&(o=this.Rp({}),this.Rs(o,r),this.Bi(o))}if(e=t.modifiedLinkData,Array.isArray(e)){for(i=e.length,n=0;n<i;n++)if(r=e[n],o=this.pc(r),o=this.Dh(o),o!==null){for(var l in r)l!=="__gohashid"&&l!==this.linkKeyProperty&&this.setDataProperty(o,l,r[l]);Hk(this,r,o)}}if(t=t.removedLinkKeys,Array.isArray(t))for(l=t.length,e=0;e<l;e++)i=this.Dh(t[e]),i!==null&&this.lm(i)},Ct.prototype.changeState=function(t,e){if(t!==null&&t.model===this){if(t.change===qt){var i=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.wc(i)){var r=t.H(e);e=t.H(!e),e!==void 0&&this.kb.remove(e),r!==void 0&&this.kb.add(r,i),Ht(i,n,r);return}}else if(t.change===ve){if(i=t.newParam,t.modelChange==="linkDataArray"){t=t.newValue,ct(t)&&typeof i=="number"&&(n=this.pc(t),e?(this.Vf.remove(t),this.Yc[i]===t&&this.Yc.splice(i,1),n!==void 0&&this.kb.remove(n)):(this.Vf.add(t),this.Yc[i]!==t&&this.Yc.splice(i,0,t),n!==void 0&&this.kb.add(n,t)));return}if(t.modelChange==="linkLabelKeys"){n=this.Bf(t.object),Array.isArray(n)&&typeof i=="number"&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue));return}}else if(t.change===Ne){if(i=t.oldParam,t.modelChange==="linkDataArray"){t=t.oldValue,ct(t)&&typeof i=="number"&&(n=this.pc(t),e?(this.Vf.add(t),this.Yc[i]!==t&&this.Yc.splice(i,0,t),n!==void 0&&this.kb.add(n,t)):(this.Vf.remove(t),this.Yc[i]===t&&this.Yc.splice(i,1),n!==void 0&&this.kb.remove(n)));return}if(t.modelChange==="linkLabelKeys"){n=this.Bf(t.object),Array.isArray(n)&&typeof i=="number"&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)));return}}ot.prototype.changeState.call(this,t,e)}},s=Ct.prototype,s.fm=function(t){if(t!==void 0){var e=this.bj;if(e!==null){var i=this.Yb(t);i===null&&(i=this.copyNodeData(e),Ht(i,this.nodeKeyProperty,t),this.sf(i))}return t}},s.Tx=function(t){return en(this,t,!0)},s.Gv=function(t,e){Oh(this,t,e,!0)},s.Wx=function(t){return en(this,t,!1)},s.Kv=function(t,e){Oh(this,t,e,!1)};function en(t,e,i){if(e!==null&&(t=i?t.af:t.bf,t!==""&&(t=ue(e,t),t!==void 0))){if(ws(t))return t;D((i?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Oh(t,e,i,n){if(i===null&&(i=void 0),e!==null){var r=n?t.af:t.bf;if(r!=="")if(i=t.fm(i),t.wc(e)){var o=ue(e,r);o!==i&&(or(t,o,e),Ht(e,r,i),t.Yb(i)===null&&rr(t,i,e),de(t,n?"linkFromKey":"linkToKey",qt,r,e,o,i),typeof r=="string"&&t.Fa(e,r))}else Ht(e,r,i)}}s.Ux=function(t){return Md(this,t,!0)},s.Hv=function(t,e){Ah(this,t,e,!0)},s.Xx=function(t){return Md(this,t,!1)},s.Lv=function(t,e){Ah(this,t,e,!1)};function Md(t,e,i){return e===null||(t=i?t.tj:t.uj,t==="")?"":(e=ue(e,t),e===void 0?"":e)}function Ah(t,e,i,n){if(e!==null){var r=n?t.tj:t.uj;if(r!=="")if(t.wc(e)){var o=ue(e,r);o===void 0&&(o=""),o!==i&&(Ht(e,r,i),de(t,n?"linkFromPortId":"linkToPortId",qt,r,e,o,i),typeof r=="string"&&t.Fa(e,r))}else Ht(e,r,i)}}s.Bf=function(t){if(t===null)return kd;var e=this.ce;return e===""?kd:(t=ue(t,e),t===void 0?kd:t)},s.Ss=function(t,e){if(t!==null){var i=this.ce;if(i!=="")if(this.wc(t)){var n=ue(t,i);if(n===void 0&&(n=kd),n!==e){if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)or(this,n[o],t);for(Ht(t,i,e),r=e.length,o=0;o<r;o++){var l=e[o];this.Yb(l)===null&&rr(this,l,t)}de(this,"linkLabelKeys",qt,i,t,n,e),typeof i=="string"&&this.Fa(t,i)}}else Ht(t,i,e)}},s.tu=function(t,e){if(e!=null&&t!==null){var i=this.ce;if(i!==""){var n=ue(t,i);if(n===void 0)i=[],i.push(e),this.Ss(t,i);else if(Array.isArray(n)){var r=n.indexOf(e);0<=r||(r=n.length,n.push(e),this.wc(t)&&(this.Yb(e)===null&&rr(this,e,t),de(this,"linkLabelKeys",ve,i,t,null,e,null,r)))}else D(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},s.oy=function(t,e){if(e!=null&&t!==null){var i=this.ce;if(i!==""){var n=ue(t,i);if(Array.isArray(n)){var r=n.indexOf(e);0>r||(n.splice(r,1),this.wc(t)&&(or(this,e,t),de(this,"linkLabelKeys",Ne,i,t,e,null,r,null)))}else n!==void 0&&D(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},s.pc=function(t){if(t!==null){var e=this.hi;if(e!==""&&(e=ue(t,e),e!==void 0)){if(ws(e))return e;D("Key value for link data "+t+" is not a number or a string: "+e)}}},s.Rs=function(t,e){if(t!==null){var i=this.hi;if(i!=="")if(this.wc(t)){var n=ue(t,i);n!==e&&this.Dh(e)===null&&(Ht(t,i,e),n!==void 0&&this.kb.remove(n),this.kb.add(e,t),de(this,"linkKey",qt,i,t,n,e),typeof i=="string"&&this.Fa(t,i))}else Ht(t,i,e)}},s.Dh=function(t){return t===null&&D("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&ws(t)?this.kb.H(t):null},s.Hs=function(t){if(t!==null){var e=this.hi;if(e!==""){var i=this.pc(t);if(i===void 0||this.kb.contains(i)){var n=this.ml;if(n!==null&&(i=n(this,t),i!=null&&!this.kb.contains(i))){Ht(t,e,i);return}if(typeof i=="string"){for(n=2;this.kb.contains(i+n);)n++;Ht(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.kb.count-1;this.kb.contains(i);)i--;Ht(t,e,i)}}}}},s.wc=function(t){return t===null?!1:this.Vf.contains(t)},s.Bi=function(t){t!==null&&(Ll(t),this.wc(t)||Xk(this,t,!0))};function Xk(t,e,i){if(t.linkKeyProperty!==""){var n=t.pc(e);if(n!==void 0&&t.kb.H(n)===e)return;t.Hs(e),n=t.pc(e),n===void 0&&D("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.kb.add(n,e)}t.Vf.add(e),n=null,i&&(n=t.Yc.length,t.Yc.splice(n,0,e)),de(t,"linkDataArray",ve,"linkDataArray",t,null,e,null,n),Z0(t,e)}s.az=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.Bi(t[i]);else for(t=t.iterator;t.next();)this.Bi(t.value)},s.lm=function(t){t!==null&&Wk(this,t,!0)};function Wk(t,e,i){t.Vf.remove(e);var n=t.pc(e);if(n!==void 0&&t.kb.remove(n),n=null,i){if(n=t.Yc.indexOf(e),0>n)return;t.Yc.splice(n,1)}if(de(t,"linkDataArray",Ne,"linkDataArray",t,e,null,n,null),i=en(t,e,!0),or(t,i,e),i=en(t,e,!1),or(t,i,e),n=t.Bf(e),Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],or(t,i,e)}s.HA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.lm(t[i]);else for(t=t.iterator;t.next();)this.lm(t.value)},s.vA=function(t){if(this.linkKeyProperty===""&&D("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&mt(t)){var e=this.tl;e.clear(),e.addAll(this.kb.iteratorKeys);var i=this.rl;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],l=this.pc(o);if(l!==void 0){i.add(l);var h=this.Dh(l);h!==o&&(h!==null?(this.Mp(h,o),Hk(this,o,h)):(o=this.cloneDeep(o),this.Rs(o,l),this.Bi(o)))}else l=this.cloneDeep(o),this.Bi(l),i.add(this.pc(l))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.Dh(n))&&this.lm(n);e.clear(),i.clear()}};function Z0(t,e){var i=en(t,e,!0);i=t.fm(i),t.Yb(i)===null&&rr(t,i,e),i=en(t,e,!1),i=t.fm(i),t.Yb(i)===null&&rr(t,i,e);var n=t.Bf(e);if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],t.Yb(i)===null&&rr(t,i,e)}s.Rp=function(t){if(t===null)return null;var e=this.Hk;return t=e!==null?e(t,this):Sd(this,t,!0),ct(t)&&(je(t),this.af!==""&&Ht(t,this.af,void 0),this.bf!==""&&Ht(t,this.bf,void 0),this.ce!==""&&Ht(t,this.ce,[])),t},s.dv=function(t){if(t===null)return!1;var e=this.sl;return e===""?!1:!!ue(t,e)},s.Eh=function(t){if(t!==null){var e=this.Ae;if(e!==""&&(e=ue(t,e),e!==void 0)){if(ws(e))return e;D("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},s.tq=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.Ae;if(i!=="")if(this.cb(t)){var n=ue(t,i);n!==e&&(or(this,n,t),Ht(t,i,e),this.Yb(e)===null&&rr(this,e,t),de(this,"nodeGroupKey",qt,i,t,n,e),typeof i=="string"&&this.Fa(t,i))}else Ht(t,i,e)}},Ct.prototype.copyNodeData=function(t){return t===null?null:(t=ot.prototype.copyNodeData.call(this,t),this.Rj||this.Ae===""||ue(t,this.Ae)===void 0||Ht(t,this.Ae,void 0),t)},Ct.prototype.setDataProperty=function(t,e,i){if(this.cb(t)){if(e===this.nodeKeyProperty){this.um(t,i);return}if(e===this.nodeCategoryProperty){this.tm(t,i);return}if(e===this.nodeGroupKeyProperty){this.tq(t,i);return}}else if(this.wc(t)){if(e===this.linkFromKeyProperty){Oh(this,t,i,!0);return}if(e===this.linkToKeyProperty){Oh(this,t,i,!1);return}if(e===this.linkFromPortIdProperty){Ah(this,t,i,!0);return}if(e===this.linkToPortIdProperty){Ah(this,t,i,!1);return}if(e===this.linkKeyProperty){this.Rs(t,i);return}if(e===this.linkCategoryProperty){this.sq(t,i);return}if(e===this.linkLabelKeysProperty){this.Ss(t,i);return}}var n=ue(t,e);n!==i&&(Ht(t,e,i),this.Ns(t,e,n,i))},s=Ct.prototype,s.Mp=function(t,e){if(e){var i=this.cb(t),n=this.wc(t),r;for(r in e)r==="__gohashid"||i&&r===this.nodeKeyProperty||i&&r===this.nodeIsGroupProperty&&ue(t,r)===e[r]||n&&r===this.linkKeyProperty||this.setDataProperty(t,r,e[r])}},s.qq=function(t,e){ot.prototype.qq.call(this,t,e);for(var i=this.bb.iterator;i.next();)this.Bv(i.value,t,e);for(i=this.Vf.iterator;i.next();){var n=i.value,r=t,o=e;if(en(this,n,!0)===r){var l=this.af;Ht(n,l,o),de(this,"linkFromKey",qt,l,n,r,o),typeof l=="string"&&this.Fa(n,l)}if(en(this,n,!1)===r&&(l=this.bf,Ht(n,l,o),de(this,"linkToKey",qt,l,n,r,o),typeof l=="string"&&this.Fa(n,l)),l=this.Bf(n),Array.isArray(l))for(var h=l.length,a=this.ce,c=0;c<h;c++)l[c]===r&&(l[c]=o,de(this,"linkLabelKeys",ve,a,n,r,o,c,c))}},s.Bv=function(t,e,i){if(this.Eh(t)===e){var n=this.Ae;Ht(t,n,i),de(this,"nodeGroupKey",qt,n,t,e,i),typeof n=="string"&&this.Fa(t,n)}},s.Uv=function(){ot.prototype.Uv.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)Z0(this,t[i])},s.pm=function(t){ot.prototype.pm.call(this,t),t=this.pa(t);var e=Of(this,t);if(e!==null){var i=Et();for(e=e.iterator;e.next();){var n=e.value;if(this.cb(n)){if(this.Eh(n)===t){var r=this.Ae;de(this,"nodeGroupKey",qt,r,n,t,t),typeof r=="string"&&this.Fa(n,r),i.push(n)}}else if(en(this,n,!0)===t&&(r=this.af,de(this,"linkFromKey",qt,r,n,t,t),typeof r=="string"&&this.Fa(n,r),i.push(n)),en(this,n,!1)===t&&(r=this.bf,de(this,"linkToKey",qt,r,n,t,t),typeof r=="string"&&this.Fa(n,r),i.push(n)),r=this.Bf(n),Array.isArray(r))for(var o=r.length,l=this.ce,h=0;h<o;h++)r[h]===t&&(de(this,"linkLabelKeys",ve,l,n,t,t,h,h),i.push(n))}for(e=0;e<i.length;e++)or(this,t,i[e]);Ut(i)}},s.om=function(t){ot.prototype.om.call(this,t);var e=this.Eh(t);this.Yb(e)===null&&rr(this,e,t)},s.xq=function(t){ot.prototype.xq.call(this,t);var e=this.Eh(t);or(this,e,t)},s.ts=function(t){if(t===null)return"";var e=this.sj;if(e===""||(e=ue(t,e),e===void 0))return"";if(typeof e=="string")return e;D("getCategoryForLinkData found a non-string category for "+t+": "+e)},Ct.prototype.getLinkCategoryForData=function(t){return this.ts(t)},Ct.prototype.sq=function(t,e){if(t!==null){var i=this.sj;if(i!=="")if(this.wc(t)){var n=ue(t,i);n===void 0&&(n=""),n!==e&&(Ht(t,i,e),de(this,"linkCategory",qt,i,t,n,e),typeof i=="string"&&this.Fa(t,i))}else Ht(t,i,e)}},Ct.prototype.setLinkCategoryForData=function(t,e){this.sq(t,e)},s=Ct.prototype,s.vm=function(t,e){ot.prototype.vm.call(this,t,e),this.tq(e,this.Eh(t))};function Hk(t,e,i){t.sq(i,t.ts(e)),t.Gv(i,t.Tx(e)),t.Kv(i,t.Wx(e)),t.Ss(i,t.Bf(e)),t.Hv(i,t.Ux(e)),t.Lv(i,t.Xx(e))}s.bk=function(){return!0},s.Pi=function(){return!0},s.Cs=function(){return!0},s.ck=function(){return!0},Y.Object.defineProperties(Ct.prototype,{archetypeNodeData:{get:function(){return this.bj},set:function(t){var e=this.bj;e!==t&&(this.bj=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.af},set:function(t){var e=this.af;e!==t&&(this.af=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.bf},set:function(t){var e=this.bf;e!==t&&(this.bf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.tj},set:function(t){var e=this.tj;e!==t&&(this.tj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.uj},set:function(t){var e=this.uj;e!==t&&(this.uj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.ce},set:function(t){var e=this.ce;e!==t&&(this.ce=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.Yc},set:function(t){var e=this.Yc;if(e!==t){this.kb.clear();for(var i=t.length,n=0;n<i;n++){var r=t[n];ct(r)||D("GraphLinksModel.linkDataArray must only contain Objects, not: "+r),Ll(r)}if(this.Yc=t,this.linkKeyProperty!==""){for(n=new it,r=0;r<i;r++){var o=t[r],l=this.pc(o);l===void 0||this.kb.H(l)!==null?n.add(o):this.kb.add(l,o)}for(n=n.iterator;n.next();)r=n.value,this.Hs(r),o=this.pc(r),o!==void 0&&this.kb.add(o,r)}for(n=new Q,r=0;r<i;r++)n.add(t[r]);for(this.Vf=n,de(this,"linkDataArray",qt,"linkDataArray",this,e,t),e=0;e<i;e++)Z0(this,t[e])}}},linkKeyProperty:{get:function(){return this.hi},set:function(t){var e=this.hi;if(e!==t){this.hi=t,this.kb.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var r=this.linkDataArray[n],o=this.pc(r);o===void 0&&(this.Hs(r),o=this.pc(r)),o!==void 0&&this.kb.add(o,r)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.ml},set:function(t){var e=this.ml;e!==t&&(this.ml=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.Hk},set:function(t){var e=this.Hk;e!==t&&(this.Hk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.sl},set:function(t){var e=this.sl;e!==t&&(this.sl=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.Ae},set:function(t){var e=this.Ae;e!==t&&(this.Ae=t,this.g("nodeGroupKeyProperty",e,t))}},Rj:{get:function(){return this.cn},set:function(t){this.cn!==t&&(this.cn=t)}},linkCategoryProperty:{get:function(){return this.sj},set:function(t){var e=this.sj;e!==t&&(this.sj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Ct.prototype.setCategoryForLinkData=Ct.prototype.sq,Ct.prototype.getCategoryForLinkData=Ct.prototype.ts,Ct.prototype.assignAllDataProperties=Ct.prototype.Mp,Ct.prototype.setGroupKeyForNodeData=Ct.prototype.tq,Ct.prototype.getGroupKeyForNodeData=Ct.prototype.Eh,Ct.prototype.isGroupForNodeData=Ct.prototype.dv,Ct.prototype.copyLinkData=Ct.prototype.Rp,Ct.prototype.mergeLinkDataArray=Ct.prototype.vA,Ct.prototype.removeLinkDataCollection=Ct.prototype.HA,Ct.prototype.removeLinkData=Ct.prototype.lm,Ct.prototype.addLinkDataCollection=Ct.prototype.az,Ct.prototype.addLinkData=Ct.prototype.Bi,Ct.prototype.containsLinkData=Ct.prototype.wc,Ct.prototype.makeLinkDataKeyUnique=Ct.prototype.Hs,Ct.prototype.findLinkDataForKey=Ct.prototype.Dh,Ct.prototype.setKeyForLinkData=Ct.prototype.Rs,Ct.prototype.getKeyForLinkData=Ct.prototype.pc,Ct.prototype.removeLabelKeyForLinkData=Ct.prototype.oy,Ct.prototype.addLabelKeyForLinkData=Ct.prototype.tu,Ct.prototype.setLabelKeysForLinkData=Ct.prototype.Ss,Ct.prototype.getLabelKeysForLinkData=Ct.prototype.Bf,Ct.prototype.setToPortIdForLinkData=Ct.prototype.Lv,Ct.prototype.getToPortIdForLinkData=Ct.prototype.Xx,Ct.prototype.setFromPortIdForLinkData=Ct.prototype.Hv,Ct.prototype.getFromPortIdForLinkData=Ct.prototype.Ux,Ct.prototype.setToKeyForLinkData=Ct.prototype.Kv,Ct.prototype.getToKeyForLinkData=Ct.prototype.Wx,Ct.prototype.setFromKeyForLinkData=Ct.prototype.Gv,Ct.prototype.getFromKeyForLinkData=Ct.prototype.Tx,Ct.prototype.clear=Ct.prototype.clear;var kd=Object.freeze([]);Ct.className="GraphLinksModel",Yn.GraphLinksModel=Ct,ot.constructGraphLinksModel=ot.constructGraphLinksModel=function(){return new Ct},ot.initDiagramModel=$0=function(){return new Ct};function wi(t,e){ot.call(this),this.Be="parent",this.en=!1,this.Aj="parentLinkCategory",t!==void 0&&(mt(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}z(wi,ot),wi.constructGraphLinksModel=ot.constructGraphLinksModel,wi.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.Be=this.Be,t.en=this.en,t.Aj=this.Aj},s=wi.prototype,s.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.uq();var e=(this.name!==""?this.name:"")+" TreeModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.pa(r)+":"+ii(r)}}return e},s.Dm=function(){var t=ot.prototype.Dm.call(this),e="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(e+=`,
  "nodeParentKeyProperty": `+this.quote(this.nodeParentKeyProperty)),t+e},s.mq=function(t){ot.prototype.mq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},s.lq=function(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&D("applyIncrementalJson cannot change Model properties"),ot.prototype.lq.call(this,t)},s.fm=function(t){return t},s.Fh=function(t){if(t!==null){var e=this.Be;if(e!==""&&(e=ue(t,e),e!==void 0)){if(ws(e))return e;D("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},s.he=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.Be;if(i!=="")if(e=this.fm(e),this.cb(t)){var n=ue(t,i);n!==e&&(or(this,n,t),Ht(t,i,e),this.Yb(e)===null&&rr(this,e,t),de(this,"nodeParentKey",qt,i,t,n,e),typeof i=="string"&&this.Fa(t,i))}else Ht(t,i,e)}},s.ws=function(t){if(t===null)return"";var e=this.Aj;return e===""||(e=ue(t,e),e===void 0)?"":typeof e=="string"?e:(D("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},wi.prototype.getLinkCategoryForData=function(t){return this.ws(t)},wi.prototype.Ts=function(t,e){if(t!==null){var i=this.Aj;if(i!=="")if(this.cb(t)){var n=ue(t,i);n===void 0&&(n=""),n!==e&&(Ht(t,i,e),de(this,"parentLinkCategory",qt,i,t,n,e),typeof i=="string"&&this.Fa(t,i))}else Ht(t,i,e)}},wi.prototype.setLinkCategoryForData=function(t,e){this.Ts(t,e)},wi.prototype.copyNodeData=function(t){return t===null?null:(t=ot.prototype.copyNodeData.call(this,t),this.Sj||this.Be===""||ue(t,this.Be)===void 0||Ht(t,this.Be,void 0),t)},wi.prototype.setDataProperty=function(t,e,i){if(this.cb(t)){if(e===this.nodeKeyProperty){this.um(t,i);return}if(e===this.nodeCategoryProperty){this.tm(t,i);return}if(e===this.nodeParentKeyProperty){this.he(t,i);return}}var n=ue(t,e);n!==i&&(Ht(t,e,i),this.Ns(t,e,n,i))},s=wi.prototype,s.qq=function(t,e){ot.prototype.qq.call(this,t,e);for(var i=this.bb.iterator;i.next();)this.Bv(i.value,t,e)},s.Bv=function(t,e,i){if(this.Fh(t)===e){var n=this.Be;Ht(t,n,i),de(this,"nodeParentKey",qt,n,t,e,i),typeof n=="string"&&this.Fa(t,n)}},s.pm=function(t){ot.prototype.pm.call(this,t),t=this.pa(t);var e=Of(this,t);if(e!==null){var i=Et();for(e=e.iterator;e.next();){var n=e.value;if(this.cb(n)&&this.Fh(n)===t){var r=this.Be;de(this,"nodeParentKey",qt,r,n,t,t),typeof r=="string"&&this.Fa(n,r),i.push(n)}}for(e=0;e<i.length;e++)or(this,t,i[e]);Ut(i)}},s.om=function(t){ot.prototype.om.call(this,t);var e=this.Fh(t);e=this.fm(e),this.Yb(e)===null&&rr(this,e,t)},s.xq=function(t){ot.prototype.xq.call(this,t);var e=this.Fh(t);or(this,e,t)},s.vm=function(t,e){ot.prototype.vm.call(this,t,e),this.Ts(e,this.ws(t)),this.he(e,this.Fh(t))},s.dm=function(){return!0},s.Cs=function(){return!0},Y.Object.defineProperties(wi.prototype,{nodeParentKeyProperty:{get:function(){return this.Be},set:function(t){var e=this.Be;e!==t&&(this.Be=t,this.g("nodeParentKeyProperty",e,t))}},Sj:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t)}},parentLinkCategoryProperty:{get:function(){return this.Aj},set:function(t){var e=this.Aj;e!==t&&(this.Aj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),wi.prototype.setParentLinkCategoryForNodeData=wi.prototype.Ts,wi.prototype.getParentLinkCategoryForNodeData=wi.prototype.ws,wi.prototype.setParentKeyForNodeData=wi.prototype.he,wi.prototype.getParentKeyForNodeData=wi.prototype.Fh,wi.className="TreeModel",Yn.TreeModel=wi;function bt(t){Lt.call(this),this.Kw=this.sn=this.bc=0,this.Vq=360,this.Jw=Xn,this.fj=0,this.zw=new N,this.Nq=this.de=0,this.es=new Rf,this.tt=this.zj=0,this.Ry=600,this.So=NaN,this.Sm=1,this.tp=0,this.Ll=360,this.Hb=Xn,this.K=Si,this.$c=Dh,this.Sc=G0,this.jf=6,this.Co=Od,t&&Object.assign(this,t)}z(bt,Lt),bt.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.So=this.So,t.Sm=this.Sm,t.tp=this.tp,t.Ll=this.Ll,t.Hb=this.Hb,t.K=this.K,t.$c=this.$c,t.Sc=this.Sc,t.jf=this.jf,t.Co=this.Co},bt.prototype.gb=function(t){t.classType===bt?t===Ld||t===Ed||t===Nd||t===Td||t===Dh?this.sorting=t:t===il||t===jh||t===Si||t===Ms?this.direction=t:t===Ko||t===Ss||t===Xn||t===Wn?this.arrangement=t:(t===Zl||t===Od)&&(this.nodeDiameterFormula=t):Lt.prototype.gb.call(this,t)},bt.prototype.createNetwork=function(){return new Ih(this)},bt.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.centerX=0,t.centerY=0);else{var e=new it;e.addAll(t.iterator),t=new it;var i=new it,n=this.sort(e),r,o,l=this.Nq,h=this.arrangement,a=this.nodeDiameterFormula,c=this.radius;(!isFinite(c)||0>=c)&&(c=NaN);var p=this.aspectRatio;(!isFinite(p)||0>=p)&&(p=1);var d=this.startAngle;isFinite(d)||(d=0);var m=this.sweepAngle;if((!isFinite(m)||360<m||1>m)&&(m=360),e=this.spacing,isFinite(e)||(e=NaN),h===Wn&&a===Zl?h=Xn:h===Wn&&a!==Zl&&(h=this.arrangement),(this.direction===il||this.direction===jh)&&this.sorting!==Dh){for(a=0;!(a>=n.length)&&(t.add(n.J(a)),!(a+1>=n.length));a+=2)i.add(n.J(a+1));this.direction===il?(this.arrangement===Wn&&t.reverse(),n=new it,n.addAll(t),n.addAll(i)):(this.arrangement===Wn&&i.reverse(),n=new it,n.addAll(i),n.addAll(t))}a=n.length;for(var x=o=r=0;x<n.length;x++){var v=d+m*o*(this.direction===Si?1:-1)/a,S=n.J(x).diameter;isNaN(S)&&(S=ks(n.J(x),v)),360>m&&(x===0||x===n.length-1)&&(S/=2),r+=S,o++}if(isNaN(c)||h===Wn){if(isNaN(e)&&(e=6),h!==Xn&&h!==Wn){for(o=-1/0,l=0;l<a;l++)x=n.J(l),r=n.J(l===a-1?0:l+1),isNaN(x.diameter)&&ks(x,0),isNaN(r.diameter)&&ks(r,0),o=Math.max(o,(x.diameter+r.diameter)/2);l=o+e,h===Ko?c=(o+e)/(2*Math.PI/a):c=Pd(this,l*(360<=m?a:a-1),p,d*Math.PI/180,m*Math.PI/180)}else c=Pd(this,r+(360<=m?a:a-1)*(h!==Wn?e:1.6*e),p,d*Math.PI/180,m*Math.PI/180);o=c*p}else if(o=c*p,x=Q0(this,c,o,d*Math.PI/180,m*Math.PI/180),isNaN(e))(h===Xn||h===Wn)&&(e=(x-r)/(360<=m?a:a-1));else if(h===Xn||h===Wn)x=(x-r)/(360<=m?a:a-1),x<e?(c=Pd(this,r+e*(360<=m?a:a-1),p,d*Math.PI/180,m*Math.PI/180),o=c*p):e=x;else{for(l=-1/0,r=0;r<a;r++)v=n.J(r),S=n.J(r===a-1?0:r+1),isNaN(v.diameter)&&ks(v,0),isNaN(S.diameter)&&ks(S,0),l=Math.max(l,(v.diameter+S.diameter)/2);l+=e,r=Pd(this,l*(360<=m?a:a-1),p,d*Math.PI/180,m*Math.PI/180),r>c?(c=r,o=c*p):l=x/(360<=m?a:a-1)}if(this.Jw=h,this.bc=c,this.sn=p,this.Kw=d,this.Vq=m,this.fj=e,this.de=o,this.Nq=l,e=n,n=this.Jw,h=this.bc,c=this.Kw,p=this.Vq,d=this.fj,m=this.de,a=this.Nq,this.direction!==il&&this.direction!==jh||n!==Wn)if(this.direction===il||this.direction===jh){switch(l=0,n){case Ss:l=180*Cd(this,h,m,c,a)/Math.PI;break;case Xn:a=e=0,l=t.first(),l!==null&&(e=ks(l,Math.PI/2)),l=i.first(),l!==null&&(a=ks(l,Math.PI/2)),l=180*Cd(this,h,m,c,d+(e+a)/2)/Math.PI;break;case Ko:l=p/e.length}if(this.direction===il){switch(n){case Ss:Ff(this,t,c,Ms);break;case Xn:If(this,t,c,Ms);break;case Ko:Df(this,t,p/2,c,Ms)}switch(n){case Ss:Ff(this,i,c+l,Si);break;case Xn:If(this,i,c+l,Si);break;case Ko:Df(this,i,p/2,c+l,Si)}}else{switch(n){case Ss:Ff(this,i,c,Ms);break;case Xn:If(this,i,c,Ms);break;case Ko:Df(this,i,p/2,c,Ms)}switch(n){case Ss:Ff(this,t,c+l,Si);break;case Xn:If(this,t,c+l,Si);break;case Ko:Df(this,t,p/2,c+l,Si)}}}else switch(n){case Ss:Ff(this,e,c,this.direction);break;case Xn:If(this,e,c,this.direction);break;case Ko:Df(this,e,p,c,this.direction);break;case Wn:Kk(this,e,p,c,this.direction)}else Kk(this,e,p,c-p/2,Si)}this.updateParts(),this.network=null,this.isValidLayout=!0};function Df(t,e,i,n,r){var o=t.Vq,l=t.bc;t=t.de,n=n*Math.PI/180,i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var c=n+(r===Si?a*i/(360<=o?h:h-1):-(a*i)/h),p=e.J(a),d=l*Math.tan(c)/t;d=Math.sqrt((l*l+t*t*d*d)/(1+d*d)),p.centerX=d*Math.cos(c),p.centerY=d*Math.sin(c),p.actualAngle=180*c/Math.PI}}function If(t,e,i,n){var r=t.bc,o=t.de,l=t.fj;i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var c=e.J(a),p=e.J(a===h-1?0:a+1),d=o*Math.sin(i);c.centerX=r*Math.cos(i),c.centerY=d,c.actualAngle=180*i/Math.PI,isNaN(c.diameter)&&ks(c,0),isNaN(p.diameter)&&ks(p,0),c=Cd(t,r,o,n===Si?i:-i,(c.diameter+p.diameter)/2+l),i+=n===Si?c:-c}}function Ff(t,e,i,n){var r=t.bc,o=t.de,l=t.Nq;i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var c=e.J(a);c.centerX=r*Math.cos(i),c.centerY=o*Math.sin(i),c.actualAngle=180*i/Math.PI,c=Cd(t,r,o,n===Si?i:-i,l),i+=n===Si?c:-c}}function Kk(t,e,i,n,r){var o=t.Vq;if(t.zj=0,t.es=new Rf,360>i){for(o=n+(r===Si?o:-o);0>o;)o+=360;o%=360,180<o&&(o-=360),o*=Math.PI/180,t.tt=o,Jk(t,e,i,n,r)}else $k(t,e,i,n,r);t.es.commit(e)}function $k(t,e,i,n,r){var o=t.bc,l=t.fj,h=t.sn,a=o*Math.cos(n*Math.PI/180),c=t.de*Math.sin(n*Math.PI/180),p=e.ya();if(p.length===3)p[0].centerX=o,p[0].centerY=0,p[1].centerX=p[0].centerX-p[0].width/2-p[1].width/2-l,p[1].y=p[0].y,p[2].centerX=(p[0].centerX+p[1].centerX)/2,p[2].y=p[0].y-p[2].height-l;else if(p.length===4)p[0].centerX=o,p[0].centerY=0,p[2].centerX=-p[0].centerX,p[2].centerY=p[0].centerY,p[1].centerX=0,p[1].y=Math.min(p[0].y,p[2].y)-p[1].height-l,p[3].centerX=0,p[3].y=Math.max(p[0].y+p[0].height+l,p[2].y+p[2].height+l);else{o=N.alloc();for(var d=0;d<p.length&&(p[d].centerX=a,p[d].centerY=c,!(d>=p.length-1));d++)Zk(t,a,c,p,d,r,o)||Qk(t,a,c,p,d,r,o),a=o.x,c=o.y;if(N.free(o),t.zj++,!(23<t.zj)){a=p[0].centerX,c=p[0].centerY,o=p[p.length-1].centerX,d=p[p.length-1].centerY;var m=Math.abs(a-o)-((p[0].width+p[p.length-1].width)/2+l),x=Math.abs(c-d)-((p[0].height+p[p.length-1].height)/2+l);l=0,1>Math.abs(x)?Math.abs(a-o)<(p[0].width+p[p.length-1].width)/2&&(l=0):l=0<x?x:1>Math.abs(m)?0:m,a=Math.abs(o)>Math.abs(d)?0<o!=c>d:0<d!=a<o,(a=r===Si?a:!a)&&(l=-Math.abs(l),l=Math.min(l,-p[p.length-1].width),l=Math.min(l,-p[p.length-1].height)),t.es.compare(l,p),1<Math.abs(l)&&(t.bc=8>t.zj?t.bc-l/(2*Math.PI):5>p.length&&10<l?t.bc/2:t.bc-(0<l?1.7:-2.3),t.de=t.bc*h,$k(t,e,i,n,r))}}}function Jk(t,e,i,n,r){for(var o=t.bc,l=t.de,h=t.sn,a=o*Math.cos(n*Math.PI/180),c=l*Math.sin(n*Math.PI/180),p=N.alloc(),d=e.ya(),m=0;m<d.length&&(d[m].centerX=a,d[m].centerY=c,!(m>=d.length-1));m++)Zk(t,a,c,d,m,r,p)||Qk(t,a,c,d,m,r,p),a=p.x,c=p.y;if(N.free(p),t.zj++,!(23<t.zj)){if(a=Math.atan2(c,a),a=r===Si?t.tt-a:a-t.tt,a=Math.abs(a)<Math.abs(a-2*Math.PI)?a:a-2*Math.PI,o=a*(o+l)/2,l=t.es,Math.abs(o)<Math.abs(l.$l))for(l.$l=o,l.qk=[],l.Fm=[],a=0;a<d.length;a++)l.qk[a]=d[a].bounds.x,l.Fm[a]=d[a].bounds.y;1<Math.abs(o)&&(t.bc=8>t.zj?t.bc-o/(2*Math.PI):t.bc-(0<o?1.7:-2.3),t.de=t.bc*h,Jk(t,e,i,n,r))}}function Zk(t,e,i,n,r,o,l){var h=t.bc,a=t.de,c=0;t=(n[r].width+n[r+1].width)/2+t.fj;var p=!1;if(0<=i!=(o===Si)){if(o=e+t,o>h){if(o=e-t,o<-h)return l.x=o,l.y=c,!1;p=!0}}else if(o=e-t,o<-h){if(o=e+t,o>h)return l.x=o,l.y=c,!1;p=!0}return c=Math.sqrt(1-Math.min(1,o*o/(h*h)))*a,0>i!==p&&(c=-c),Math.abs(i-c)>(n[r].height+n[r+1].height)/2?(l.x=o,l.y=c,!1):(l.x=o,l.y=c,!0)}function Qk(t,e,i,n,r,o,l){var h=t.bc,a=t.de,c=0;if(t=(n[r].height+n[r+1].height)/2+t.fj,n=!1,0<=e!=(o===Si)){if(o=i-t,o<-a){if(o=i+t,o>a){l.x=c,l.y=o;return}n=!0}}else if(o=i+t,o>a){if(o=i-t,o<-a){l.x=c,l.y=o;return}n=!0}c=Math.sqrt(1-Math.min(1,o*o/(a*a)))*h,0>e!==n&&(c=-c),l.x=c,l.y=o}bt.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},bt.prototype.commitNodes=function(){var t=this.group!==null&&this.group.placeholder!==null&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new N(0,0):(i.x=this.arrangementOrigin.x+this.bc,i.y=this.arrangementOrigin.y+this.de);for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;r.x+=i.x,r.y+=i.y,r.commit()}t&&(this.group.Ta(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.ie(i.ie(t)),this.group.move(e),this.zw=e.ie(t))},bt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()};function Q0(t,e,i,n,r){var o=t.Ry;if(.001>Math.abs(t.sn-1))return n!==void 0&&r!==void 0?r*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var l=0,h=n!==void 0&&r!==void 0?r/(o+1):Math.PI/(2*(o+1)),a=0,c=0;c<=o;c++){n!==void 0&&r!==void 0?a=n+c*r/o:a=c*Math.PI/(2*o);var p=Math.sin(a);l+=Math.sqrt(1-t*t*p*p)*h}return n!==void 0&&r!==void 0?(e>i?e:i)*l:4*(e>i?e:i)*l}function Pd(t,e,i,n,r){return e/(n!==void 0&&r!==void 0?Q0(t,1,i,n,r):Q0(t,1,i))}function Cd(t,e,i,n,r){if(.001>Math.abs(t.sn-1))return r/e;var o=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,l=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var h=0;;h++){var a=Math.sin(n+h*t);if(l+=(e>i?e:i)*Math.sqrt(1-o*o*a*a)*t,l>=r)return h*t}}bt.prototype.sort=function(t){switch(this.sorting){case Nd:break;case Td:t.reverse();break;case Ld:t.sort(this.comparer);break;case Ed:t.sort(this.comparer),t.reverse();break;case Dh:return this.Ms(aL(t));default:D("Invalid sorting type.")}return t};function aL(t){for(var e=[],i=0;i<t.length;i++)e.push(0);i=new it;for(var n=0;n<t.length;n++){var r=-1,o=-1;if(n===0)for(var l=0;l<t.length;l++){var h=t.J(l).edgesCount;h>r&&(r=h,o=l)}else for(l=0;l<t.length;l++)h=e[l],h>r&&(r=h,o=l);for(i.add(t.J(o)),e[o]=-1,o=t.J(o),l=o.sourceEdges;l.next();)r=t.indexOf(l.value.fromVertex),0>r||0<=e[r]&&e[r]++;for(o=o.destinationEdges;o.next();)r=t.indexOf(o.value.toVertex),0>r||0<=e[r]&&e[r]++}return i}bt.prototype.Ms=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.J(i);e[i]=[];for(var r,o=n.destinationEdges;o.next();)r=t.indexOf(o.value.toVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r);for(n=n.sourceEdges;n.next();)r=t.indexOf(n.value.fromVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r)}for(o=[],i=0;i<e.length;i++)o[i]=0;i=[];var l=[],h=[];n=[],r=new it;for(var a=0,c=0;c<e.length;c++){var p=e[c].length;if(p===1)n.push(c);else if(p===0)r.add(t.J(c));else{if(a===0)i.push(c);else{for(var d=p=1/0,m=-1,x=[],v=0;v<i.length;v++)0>e[i[v]].indexOf(i[v===i.length-1?0:v+1])&&x.push(v===i.length-1?0:v+1);if(x.length===0)for(v=0;v<i.length;v++)x.push(v);for(v=0;v<x.length;v++){for(var S=x[v],P=e[c],k=0,L=0;L<l.length;L++){var T=o[l[L]],O=o[h[L]];if(T<O){var E=T;T=O}else E=O;if(E<S&&S<=T)for(O=0;O<P.length;O++){var V=P[O];0>i.indexOf(V)||E<o[V]&&o[V]<T||E===o[V]||T===o[V]||k++}else for(O=0;O<P.length;O++)V=P[O],0>i.indexOf(V)||E<o[V]&&o[V]<T&&E!==o[V]&&T!==o[V]&&k++}for(P=k,L=k=0;L<e[c].length;L++)E=i.indexOf(e[c][L]),0<=E&&(E=Math.abs(S-(E>=S?E+1:E)),k+=E<i.length+1-E?E:i.length+1-E);for(L=0;L<l.length;L++)E=o[l[L]],T=o[h[L]],E>=S&&E++,T>=S&&T++,E>T&&(O=T,T=E,E=O),T-E<(i.length+2)/2==(E<S&&S<=T)&&k++;(P<p||P===p&&k<d)&&(p=P,d=k,m=S)}for(i.splice(m,0,c),p=0;p<i.length;p++)o[i[p]]=p;for(p=0;p<e[c].length;p++)d=e[c][p],0<=i.indexOf(d)&&(l.push(c),h.push(d))}a++}}for(l=i.length;;){for(o=!0,h=0;h<n.length;h++)if(a=n[h],c=e[a][0],p=i.indexOf(c),0<=p){for(m=d=0;m<e[c].length;m++)x=i.indexOf(e[c][m]),0>x||x===p||(v=x>p?x-p:p-x,d+=x<p!=v>l-v?1:-1);i.splice(0>d?p:p+1,0,a),n.splice(h,1),h--}else o=!1;if(o)break;i.push(n[0]),n.splice(0,1)}for(e=0;e<i.length;e++)r.add(t.J(i[e]));return r},Y.Object.defineProperties(bt.prototype,{radius:{get:function(){return this.So},set:function(t){this.So!==t&&(0<t||isNaN(t))&&(this.So=t,this.B())}},aspectRatio:{get:function(){return this.Sm},set:function(t){this.Sm!==t&&0<t&&(this.Sm=t,this.B())}},startAngle:{get:function(){return this.tp},set:function(t){this.tp!==t&&(this.tp=t,this.B())}},sweepAngle:{get:function(){return this.Ll},set:function(t){this.Ll!==t&&(0<t&&360>=t?this.Ll=t:this.Ll=360,this.B())}},arrangement:{get:function(){return this.Hb},set:function(t){this.Hb===t||t!==Wn&&t!==Xn&&t!==Ss&&t!==Ko||(this.Hb=t,this.B())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==Si&&t!==Ms&&t!==il&&t!==jh||(this.K=t,this.B())}},sorting:{get:function(){return this.$c},set:function(t){this.$c===t||t!==Nd&&t!==Td&&t!==Ld&&!Ed&&t!==Dh||(this.$c=t,this.B())}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t,this.B())}},spacing:{get:function(){return this.jf},set:function(t){this.jf!==t&&(this.jf=t,this.B())}},nodeDiameterFormula:{get:function(){return this.Co},set:function(t){this.Co===t||t!==Od&&t!==Zl||(this.Co=t,this.B())}},actualXRadius:{get:function(){return this.bc}},actualYRadius:{get:function(){return this.de}},actualSpacing:{get:function(){return this.fj}},actualCenter:{get:function(){return this.zw}}});var Xn=new K(bt,"ConstantSpacing",0),Ss=new K(bt,"ConstantDistance",1),Ko=new K(bt,"ConstantAngle",2),Wn=new K(bt,"Packed",3),Si=new K(bt,"Clockwise",4),Ms=new K(bt,"Counterclockwise",5),il=new K(bt,"BidirectionalLeft",6),jh=new K(bt,"BidirectionalRight",7),Nd=new K(bt,"Forwards",8),Td=new K(bt,"Reverse",9),Ld=new K(bt,"Ascending",10),Ed=new K(bt,"Descending",11),Dh=new K(bt,"Optimized",12),Od=new K(bt,"Pythagorean",13),Zl=new K(bt,"Circular",14);bt.className="CircularLayout",bt.ConstantSpacing=Xn,bt.ConstantDistance=Ss,bt.ConstantAngle=Ko,bt.Packed=Wn,bt.Clockwise=Si,bt.Counterclockwise=Ms,bt.BidirectionalLeft=il,bt.BidirectionalRight=jh,bt.Forwards=Nd,bt.Reverse=Td,bt.Ascending=Ld,bt.Descending=Ed,bt.Optimized=Dh,bt.Pythagorean=Od,bt.Circular=Zl;function Rf(){this.$l=-1/0,this.Fm=this.qk=null}Rf.prototype.compare=function(t,e){if(0<t&&0>this.$l||Math.abs(t)<Math.abs(this.$l)&&!(0>t&&0<this.$l))for(this.$l=t,this.qk=[],this.Fm=[],t=0;t<e.length;t++)this.qk[t]=e[t].bounds.x,this.Fm[t]=e[t].bounds.y},Rf.prototype.commit=function(t){if(this.qk!==null&&this.Fm!==null)for(var e=0;e<this.qk.length;e++){var i=t.J(e);i.x=this.qk[e],i.y=this.Fm[e]}},Rf.className="VertexArrangement";function Ih(t){Xt.call(this,t)}z(Ih,Xt),Ih.prototype.createVertex=function(){return new Bf(this)},Ih.prototype.createEdge=function(){return new Ad(this)},Ih.className="CircularNetwork";function Bf(t){pe.call(this,t),this.D=this.ej=NaN}z(Bf,pe);function ks(t,e){var i=t.network;if(i===null)return NaN;if(i=i.layout,i===null)return NaN;if(i.arrangement===Wn)if(i.nodeDiameterFormula===Zl)t.ej=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),i===0)return t.width;if(e===0)return t.height;t.ej=Math.min(t.height/i,t.width/e)}else t.ej=i.nodeDiameterFormula===Zl?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.ej}Y.Object.defineProperties(Bf.prototype,{diameter:{get:function(){return this.ej},set:function(t){this.ej!==t&&(this.ej=t)}},actualAngle:{get:function(){return this.D},set:function(t){this.D!==t&&(this.D=t)}}}),Bf.className="CircularVertex";function Ad(t){We.call(this,t)}z(Ad,We),Ad.className="CircularEdge";function De(t){Lt.call(this),this.wh=null,this.bo=0,this.Qd=new yt(100,100).freeze(),this.Rm=!1,this.hf=!0,this.jd=!1,this.nl=100,this.vn=1,this.Tf=1e3,this.xo=10,this.To=Math,this.Ok=.05,this.Nk=50,this.Lk=150,this.Mk=0,this.nn=10,this.mn=5,t&&Object.assign(this,t)}z(De,Lt),De.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.Qd.assign(this.Qd),t.Rm=this.Rm,t.hf=this.hf,t.jd=this.jd,t.nl=this.nl,t.vn=this.vn,t.Tf=this.Tf,t.xo=this.xo,t.To=this.To,t.Ok=this.Ok,t.Nk=this.Nk,t.Lk=this.Lk,t.Mk=this.Mk,t.nn=this.nn,t.mn=this.mn},De.prototype.serializeLayoutProperties=function(t,e){Lt.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},De.prototype.deserializeLayoutProperties=function(t,e,i,n,r){Lt.prototype.deserializeLayoutProperties.call(this,t,e,i,n,r),this.arrangementSpacing=new yt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},De.prototype.createNetwork=function(){return new Ql(this)},De.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),!this.Wv()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.Sp();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)i=e.value,i.stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.vu(),this.bo=0,this.needsClusterLayout()){e=this.network,i=e.Ay();for(var n=i.iterator;n.next();){this.network=n.value;for(var r=this.network.vertexes.iterator;r.next();){var o=r.value;o.Kd=o.vertexes.count,o.Kh=1,o.Qj=null,o.Me=null}qk(this,0,t)}this.network=e;var l=n=i.iterator;n=this.arrangementSpacing;var h=l.count,a=!0;o=r=0;for(var c=Et(),p=0;p<h+e.vertexes.count+2;p++)c[p]=null;h=0,l.reset();for(var d=_.alloc();l.next();)if(p=l.value,this.computeBounds(p,d),a)a=!1,r=d.x+d.width/2,o=d.y+d.height/2,c[0]=new N(d.x+d.width+n.width,d.y),c[1]=new N(d.x,d.y+d.height+n.height),h=2;else{var m=bk(c,h,r,o,d.width,d.height,n),x=c[m],v=new N(x.x+d.width+n.width,x.y),S=new N(x.x,x.y+d.height+n.height);for(m+1<h&&c.splice(m+1,0,null),c[m]=v,c[m+1]=S,h++,m=x.x-d.x,x=x.y-d.y,p=p.vertexes.iterator;p.next();)v=p.value,v.centerX+=m,v.centerY+=x}for(_.free(d),p=e.vertexes.iterator;p.next();)l=p.value,m=l.bounds,2>h?(r=m.x+m.width/2,o=m.y+m.height/2,c[0]=new N(m.x+m.width+n.width,m.y),c[1]=new N(m.x,m.y+m.height+n.height),h=2):(a=bk(c,h,r,o,m.width,m.height,n),d=c[a],x=new N(d.x+m.width+n.width,d.y),m=new N(d.x,d.y+m.height+n.height),a+1<h&&c.splice(a+1,0,null),c[a]=x,c[a+1]=m,h++,l.centerX=d.x+l.width/2,l.centerY=d.y+l.height/2);for(Ut(c),n=i.iterator;n.next();){for(i=n.value,r=i.vertexes.iterator;r.next();)e.ng(r.value);for(i=i.edges.iterator;i.next();)e.Rl(i.value)}}eP(this,t),this.updateParts()}this.nl=t,this.network=null,this.isValidLayout=!0}},De.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Lc(i)&&(t++,2<t))return!0;if(10<e)break;e++}return!1},De.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.Qc(n.bounds)}return e};function qk(t,e,i){if(fL(t,e)){var n=t.Tf;t.Tf*=1+1/(e+1);var r=cL(t,e),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=o,qk(t,e+1,i),eP(t,o),pL(t,r),e=r.vertexes.ya(),e.sort(function(l,h){return l===null||h===null||l===h?0:h.Kd-l.Kd}),i=0;i<e.length;i++)dL(t,e[i]);t.Tf=n}}function fL(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.wh=t.network.vertexes.ya(),t=t.wh,t.sort(function(i,n){return i===null||n===null||i===n?0:n.Kd-i.Kd}),e=t.length-1;0<=e&&1>=t[e].Kd;)e--;return 1<t.length-e}function cL(t,e){for(var i=t.network,n=new Ql(t),r=0;r<t.wh.length;r++){var o=t.wh[r];if(1<o.Kd){n.ng(o);var l=new iP;l.ht=o.Kd,l.lt=o.width,l.gt=o.height,l.ew=o.focus.x,l.fw=o.focus.y,o.Me===null&&(o.Me=new it),o.Me.add(l),o.Ev=o.Me.count-1}else break}for(o=i.edges.iterator;o.next();){var h=o.value;r=h.fromVertex,l=h.toVertex,r.network===n&&l.network===n?n.Rl(h):r.network===n?(h=r.Qj,h===null&&(h=new it,r.Qj=h),h.add(l),r.Kd--,r.Kh+=l.Kh):l.network===n&&(h=l.Qj,h===null&&(h=new it,l.Qj=h),h.add(r),l.Kd--,l.Kh+=r.Kh)}for(r=n.edges.iterator;r.next();)o=r.value,o.length*=Math.max(1,j.sqrt((o.fromVertex.Kh+o.toVertex.Kh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){r=e.value;var a=r.Qj;if(a!==null&&0<a.count&&(l=r.Me.J(r.Me.count-1).ht-r.Kd,!(0>=l))){for(var c=h=0,p=a.count-l;p<a.count;p++){var d=a.J(p),m=null;for(o=d.edges.iterator;o.next();){var x=o.value;if(x.Vx(d)===r){m=x;break}}m!==null&&(c+=m.length,h+=d.width*d.height)}o=r.centerX,a=r.centerY,p=r.width,d=r.height,m=r.focus,x=p*d,1>x&&(x=1),h=j.sqrt((h+x+c*c*4/(l*l))/x),l=(h-1)*p/2,h=(h-1)*d/2,r.bounds=new _(o-m.x-l,a-m.y-h,p+2*l,d+2*h),r.focus=new N(m.x+l,m.y+h)}}return t.network=n,i}function pL(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,n.Me!==null){var r=n.Me.J(n.Ev);n.Kd=r.ht;var o=r.ew,l=r.fw;n.bounds=new _(n.centerX-o,n.centerY-l,r.lt,r.gt),n.focus=new N(o,l),n.Ev--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}function dL(t,e){var i=e.Qj;if(i!==null&&i.count!==0){var n=e.centerX,r=e.centerY,o=e.width,l=e.height;e.Me!==null&&0<e.Me.count&&(l=e.Me.J(0),o=l.lt,l=l.gt),o=j.sqrt(o*o+l*l)/2;for(var h=!1,a=l=0,c=0,p=e.vertexes.iterator;p.next();){var d=p.value;1>=d.Kd?a++:(h=!0,c++,l+=Math.atan2(e.centerY-d.centerY,e.centerX-d.centerX))}if(a!==0){for(0<c&&(l/=c),c=e=0,e=h?2*Math.PI/(a+1):2*Math.PI/a,a%2===0&&(c=e/2),1<i.count&&i.sort(function(x,v){return x===null||v===null||x===v?0:v.width*v.height-x.width*x.height}),h=a%2===0?0:1,i=i.iterator;i.next();)if(a=i.value,!(1<a.Kd||t.isFixed(a))){for(p=null,d=a.edges.iterator;d.next();){p=d.value;break}d=a.width;var m=a.height;d=j.sqrt(d*d+m*m)/2,p=o+p.length+d,d=l+(e*(h/2>>1)+c)*(h%2===0?1:-1),a.centerX=n+p*Math.cos(d),a.centerY=r+p*Math.sin(d),h++}}}}function bk(t,e,i,n,r,o,l){var h=9e19,a=-1,c=0;t:for(;c<e;c++){var p=t[c],d=p.x-i,m=p.y-n;if(d=d*d+m*m,d<h){for(m=c-1;0<=m;m--)if(t[m].y>p.y&&t[m].x-p.x<r+l.width)continue t;for(m=c+1;m<e;m++)if(t[m].x>p.x&&t[m].y-p.y<o+l.height)continue t;a=c,h=d}}return a}De.prototype.vu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},De.prototype.addComments=function(t){var e=t.node;if(e!==null)for(e=e.Nu();e.next();){var i=e.value;if(i.category==="Comment"&&i.isVisible()){var n=this.network.Ji(i);n===null&&(n=this.network.Nj(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var r=n.destinationEdges;r.next();){var o=r.value;if(o.toVertex===t){i=o;break}}if(i===null){for(r=n.sourceEdges;r.next();)if(o=r.value,o.fromVertex===t){i=o;break}}i===null&&(i=this.network.ek(t,n,null)),i.length=this.defaultCommentSpringLength}}};function tP(t,e){var i=t.bounds,n=i.x;t=i.y;var r=i.width;i=i.height;var o=e.bounds,l=o.x;e=o.y;var h=o.width;return o=o.height,n+r<l?t>e+o?(i=n+r-l,t=t-e-o,j.sqrt(i*i+t*t)):t+i<e?(n=n+r-l,t=t+i-e,j.sqrt(n*n+t*t)):l-(n+r):n>l+h?t>e+o?(i=n-l-h,t=t-e-o,j.sqrt(i*i+t*t)):t+i<e?(n=n-l-h,t=t+i-e,j.sqrt(n*n+t*t)):n-(l+h):t>e+o?t-(e+o):t+i<e?e-(t+i):.1}function eP(t,e){for(t.wh=null,e=t.bo+e;t.bo<e&&(t.bo++,yL(t)););t.wh=null}function yL(t){t.wh===null&&(t.wh=t.network.vertexes.ya());var e=t.wh;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,r=n,o=i=i.centerY,l=1;l<e.length;l++){var h=e[l];h.forceX=0,h.forceY=0;var a=h.centerX;h=h.centerY,n=Math.min(n,a),r=Math.max(r,a),i=Math.min(i,h),o=Math.max(o,h)}(r=r-n>o-i)?e.sort(function(S,P){return S===null||P===null||S===P?0:S.centerX-P.centerX}):e.sort(function(S,P){return S===null||P===null||S===P?0:S.centerY-P.centerY}),i=t.Tf;var c=n=h=0;for(o=0;o<e.length;o++){l=e[o],n=l.bounds,h=l.focus,a=n.x+h.x;var p=n.y+h.y;n=l.charge*t.electricalFieldX(a,p),c=l.charge*t.electricalFieldY(a,p),n+=l.mass*t.gravitationalFieldX(a,p),c+=l.mass*t.gravitationalFieldY(a,p),l.forceX+=n,l.forceY+=c;for(var d=o+1;d<e.length;d++){var m=e[d];if(m!==l){n=m.bounds,h=m.focus,c=n.x+h.x;var x=n.y+h.y;if(a-c>i||c-a>i){if(r)break}else if(p-x>i||x-p>i){if(!r)break}else{var v=tP(l,m);1>v?(n=t.randomNumberGenerator,n===null&&(t.randomNumberGenerator=n=new jd),v=n.random(),h=n.random(),a>c?(n=Math.abs(m.bounds.right-l.bounds.x),n=(1+n)*v):a<c?(n=Math.abs(m.bounds.x-l.bounds.right),n=-(1+n)*v):(n=Math.max(m.width,l.width),n=(1+n)*v-n/2),p>x?(c=Math.abs(m.bounds.bottom-l.bounds.y),c=(1+c)*h):a<c?(c=Math.abs(m.bounds.y-l.bounds.bottom),c=-(1+c)*h):(c=Math.max(m.height,l.height),c=(1+c)*h-c/2)):(h=-(l.charge*m.charge)/(v*v),n=(c-a)/v*h,c=(x-p)/v*h),l.forceX+=n,l.forceY+=c,m.forceX-=n,m.forceY-=c}}}}for(r=t.network.edges.iterator;r.next();)h=r.value,i=h.fromVertex,o=h.toVertex,l=i.bounds,a=i.focus,n=l.x+a.x,l=l.y+a.y,p=o.bounds,d=o.focus,a=p.x+d.x,p=p.y+d.y,d=tP(i,o),1>d?(d=t.randomNumberGenerator,d===null&&(t.randomNumberGenerator=d=new jd),h=d.random(),d=d.random(),n=(n>a?1:-1)*(1+(o.width>i.width?o.width:i.width))*h,c=(l>p?1:-1)*(1+(o.height>i.height?o.height:i.height))*d):(h=h.stiffness*(d-h.length),n=(a-n)/d*h,c=(p-l)/d*h),i.forceX+=n,i.forceY+=c,o.forceX-=n,o.forceY-=c;for(r=n=0;r<e.length;r++)i=e[r],t.isFixed(i)?t.moveFixedVertex(i):n=Math.max(n,t.moveVertex(i)||0);return n>t.epsilonDistance*t.epsilonDistance}De.prototype.moveVertex=function(t){var e=t.forceX,i=t.forceY,n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i},De.prototype.moveFixedVertex=function(){},De.prototype.commitLayout=function(){this.Iv(),this.commitNodes(),this.isRouting&&this.commitLinks()},De.prototype.Iv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e!==null&&(e.fromSpot=Pi,e.toSpot=Pi)}},De.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=_.alloc();this.computeBounds(this.network,i),e=this.arrangementOrigin,t=e.x-i.x,e=e.y-i.y,_.free(i)}i=_.alloc();for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;(t!==0||e!==0)&&(i.assign(r.bounds),i.x+=t,i.y+=e,r.bounds=i),r.commit()}_.free(i)},De.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},De.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Ok:t},De.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Nk:t},De.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Lk:t},De.prototype.electricalFieldX=function(){return 0},De.prototype.electricalFieldY=function(){return 0},De.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Mk:t},De.prototype.gravitationalFieldX=function(){return 0},De.prototype.gravitationalFieldY=function(){return 0},De.prototype.isFixed=function(t){return t.isFixed},Y.Object.defineProperties(De.prototype,{currentIteration:{get:function(){return this.bo}},arrangementSpacing:{get:function(){return this.Qd},set:function(t){this.Qd.A(t)||(this.Qd.assign(t),this.B())}},arrangesToOrigin:{get:function(){return this.Rm},set:function(t){this.Rm!==t&&(this.Rm=t,this.B())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.B())}},comments:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t,this.B())}},maxIterations:{get:function(){return this.nl},set:function(t){this.nl!==t&&0<=t&&(this.nl=t,this.B())}},epsilonDistance:{get:function(){return this.vn},set:function(t){this.vn!==t&&0<t&&(this.vn=t,this.B())}},infinityDistance:{get:function(){return this.Tf},set:function(t){this.Tf!==t&&1<t&&(this.Tf=t,this.B())}},moveLimit:{get:function(){return this.xo},set:function(t){this.xo!==t&&1<t&&(this.xo=t,this.B())}},randomNumberGenerator:{get:function(){return this.To},set:function(t){this.To!==t&&(t!==null&&typeof t.random!="function"&&D('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.To=t)}},defaultSpringStiffness:{get:function(){return this.Ok},set:function(t){this.Ok!==t&&(this.Ok=t,this.B())}},defaultSpringLength:{get:function(){return this.Nk},set:function(t){this.Nk!==t&&(this.Nk=t,this.B())}},defaultElectricalCharge:{get:function(){return this.Lk},set:function(t){this.Lk!==t&&(this.Lk=t,this.B())}},defaultGravitationalMass:{get:function(){return this.Mk},set:function(t){this.Mk!==t&&(this.Mk=t,this.B())}},defaultCommentSpringLength:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t,this.B())}},defaultCommentElectricalCharge:{get:function(){return this.mn},set:function(t){this.mn!==t&&(this.mn=t,this.B())}}}),De.className="ForceDirectedLayout";function iP(){this.fw=this.ew=this.gt=this.lt=this.ht=0}iP.className="ForceDirectedSubnet";function Ql(t){Xt.call(this,t)}z(Ql,Xt),Ql.prototype.createVertex=function(){return new ql(this)},Ql.prototype.createEdge=function(){return new bl(this)},Ql.className="ForceDirectedNetwork";function ql(t){pe.call(this,t),this.Ba=!1,this.Ma=this.D=NaN,this.Kh=this.Kd=this.wa=this.L=0,this.Me=this.Qj=null,this.Ev=0}z(ql,pe),ql.prototype.serializeVertexProperties=function(t,e){pe.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},ql.prototype.deserializeVertexProperties=function(t,e,i,n){pe.prototype.deserializeVertexProperties.call(this,t,e,i,n),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},Y.Object.defineProperties(ql.prototype,{isFixed:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},charge:{get:function(){return this.D},set:function(t){this.D!==t&&(this.D=t)}},mass:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},forceX:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}},forceY:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}}}),ql.className="ForceDirectedVertex";function bl(t){We.call(this,t),this.j=this.o=NaN}z(bl,We),bl.prototype.serializeEdgeProperties=function(t,e){We.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},bl.prototype.deserializeEdgeProperties=function(t,e,i,n){We.prototype.deserializeEdgeProperties.call(this,t,e,i,n),this.stiffness=t.stiffness,this.length=t.length},Y.Object.defineProperties(bl.prototype,{stiffness:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),bl.className="ForceDirectedEdge";function jd(){var t=0;this.seed=t,this.Cy=48271,this.Ey=2147483647,this.Q=44488.07041494893,this.Fy=3399,this.Dy=1/2147483647,this.random()}jd.prototype.random=function(){var t=this.seed%this.Q*this.Cy-this.seed/this.Q*this.Fy;return 0<t?this.seed=t:this.seed=t+this.Ey,this.seed*this.Dy},jd.className="RandomNumberGenerator";function Rt(t){Lt.call(this),this.ac=this.be=25,this.K=0,this.Kk=Rd,this.il=Bd,this.Zk=Vd,this.qj=4,this.vk=_d,this.ag=15,this.hf=!0,this.jo=4,this.Ea=this.ji=this.ra=-1,this.tc=this.Vg=0,this.Ka=this.wd=this.xd=this.ae=this.Ab=null,this.bh=0,this.yo=this.xj=null,this.Ec=0,this.zo=null,this.Rc=new N,this.ye=[],this.ye.length=100,t&&Object.assign(this,t)}z(Rt,Lt),Rt.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.be=this.be,t.ac=this.ac,t.K=this.K,t.Kk=this.Kk,t.il=this.il,t.Zk=this.Zk,t.qj=this.qj,t.vk=this.vk,t.ag=this.ag,t.hf=this.hf,t.jo=this.jo},Rt.prototype.serializeLayoutProperties=function(t,e){Lt.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.ra=this.ra,t.ji=this.ji,t.Ea=this.Ea,t.Vg=this.Vg,t.tc=this.tc,t.Ab=this.Ab,t.bh=this.bh,t.Ec=this.Ec,t.Rc={x:this.Rc.x,y:this.Rc.y}},Rt.prototype.deserializeLayoutProperties=function(t,e,i,n,r){Lt.prototype.deserializeLayoutProperties.call(this,t,e,i,n,r),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=Oe(Rt,t.cycleRemoveOption),this.layeringOption=Oe(Rt,t.layeringOption),this.initializeOption=Oe(Rt,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=Oe(Rt,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.ra=t.ra,this.ji=t.ji,this.Ea=t.Ea,this.Vg=t.Vg,this.tc=t.tc,this.Ab=t.Ab,this.bh=t.bh,this.Ec=t.Ec,this.Rc=new N(this.Rc.x,this.Rc.y),r&&!n&&r.edges.each(function(o){if(!o.link&&o.fromVertex&&o.toVertex&&(o.fromVertex.node===null||o.toVertex.node===null)){for(var l=o.fromVertex;l!==null&&l.node===null&&0<l.sd.count;){var h=l.sd.J(0);if(h.link){o.link=h.link;break}l=h.fromVertex}if(!o.link){for(h=o.toVertex;h!==null&&h.node===null&&0<h.Fd.count;){var a=h.Fd.J(0);if(a.link){o.link=a.link;break}h=a.toVertex}if(!o.link){for(h=h.sd.iterator;h.next();)if(a=h.value,a.link&&a.fromVertex===l){o.link=a.link;break}}}}})},Rt.prototype.gb=function(t){t.classType===Rt?t.name.indexOf("Aggressive")===0?this.aggressiveOption=t:t.name.indexOf("Cycle")===0?this.cycleRemoveOption=t:t.name.indexOf("Init")===0?this.initializeOption=t:t.name.indexOf("Layer")===0?this.layeringOption=t:D("Unknown enum value: "+t):Lt.prototype.gb.call(this,t)},Rt.prototype.createNetwork=function(){return new Rh(this)},Rt.prototype.doLayout=function(t){for(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.ji=-1,this.tc=this.Vg=0,this.zo=this.yo=this.xj=null,t=0;t<this.ye.length;t++)this.ye[t]=null;if(0<this.network.vertexes.count){if(this.network.Sp(),this.Wv())return;for(this.cycleRemoveOption!==_f&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ra=-1,this.assignLayers(),t.reset();t.next();)this.ra=Math.max(this.ra,t.value.layer);this.cycleRemoveOption===_f&&this.removeCycles(),t=this.network;for(var e=[],i=t.edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){n=e[i];var r=n.fromVertex,o=n.toVertex;if(!(n.valid||(r.node===null&&r.data===null||o.node===null&&o.data===null)&&r.layer===o.layer)){var l=0,h=0,a=0,c=0;if(n.link!==null){if(h=n.link,h===null)continue;var p=r.node;if(l=o.node,p===null||l===null)continue;var d=h.fromNode;a=h.toNode;var m=h.fromPort;if(h=h.toPort,n.rev){c=d;var x=m;d=a,m=h,a=c,h=x}var v=r.focus;c=o.focus;var S=n.rev?o.bounds:r.bounds;x=N.alloc(),p!==d?S.u()&&d.isVisible()?d.actualBounds.u()?(Go(d,m,_t,x),x.x+=d.actualBounds.x-S.x,x.y+=d.actualBounds.y-S.y):(Go(d,m,_t,x),x.u()||x.assign(v)):x.assign(v):S.u()?(Go(d,m,_t,x),x.u()||x.assign(v)):x.assign(v),d=n.rev?r.bounds:o.bounds,p=N.alloc(),l!==a?d.u()&&a.isVisible()?a.actualBounds.u()?(Go(a,h,_t,p),p.x+=a.actualBounds.x-d.x,p.y+=a.actualBounds.y-d.y):(Go(a,h,_t,p),p.u()||p.assign(c)):p.assign(c):d.u()?(Go(a,h,_t,p),p.u()||p.assign(c)):p.assign(c),this.K===90||this.K===270?(l=Math.round((x.x-v.x)/this.ac),a=x.x,h=Math.round((p.x-c.x)/this.ac),c=p.x):(l=Math.round((x.y-v.y)/this.ac),a=x.y,h=Math.round((p.y-c.y)/this.ac),c=p.y),N.free(x),N.free(p),n.portFromColOffset=l,n.portFromPos=a,n.portToColOffset=h,n.portToPos=c}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(x=r.layer,p=o.layer,d=0,S=n.link,S!==null){var P=S.fromPort,k=S.toPort;if(P!==null&&k!==null){var L=S.fromNode;if(m=S.toNode,L!==null&&m!==null){var T=Fd(this,!0),O=Fd(this,!1),E=this.setsPortSpots?T:S.computeSpot(!0,P);v=this.setsPortSpots?O:S.computeSpot(!1,k);var V=S.isOrthogonal;E.Nc()&&E.Df(O)&&v.Nc()&&v.Df(T)?d=0:(T=S.getLinkPoint(L,P,E,!0,V,m,k,N.alloc()),O=S.getLinkDirection(L,P,T,E,!0,V,m,k),N.free(T),E.Ds()||O!==fP(this,n,!0)?this.setsPortSpots&&L!==null&&L.ports.count===1&&n.rev&&(d+=1):d+=1,E=S.getLinkPoint(m,k,v,!1,V,L,P,N.alloc()),S=S.getLinkDirection(m,k,E,v,!1,V,L,P),N.free(E),v.Ds()||S!==fP(this,n,!1)?this.setsPortSpots&&m!==null&&m.ports.count===1&&n.rev&&(d+=2):d+=2)}}}if(m=d,d=m===1||m===3,(m=m===2||m===3)&&(v=t.createVertex(),v.node=null,v.uf=1,v.layer=x,v.near=r,t.ng(v),r=t.ek(r,v,n.link),r.valid=!1,r.rev=n.rev,r.portFromColOffset=l,r.portToColOffset=0,r.portFromPos=a,r.portToPos=0,r=v),S=1,d&&S--,x-p>S&&0<x){for(n.valid=!1,v=t.createVertex(),v.node=null,v.uf=2,v.layer=x-1,t.ng(v),r=t.ek(r,v,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=m?0:l,r.portToColOffset=0,r.portFromPos=m?0:a,r.portToPos=0,r=v,x--;x-p>S&&0<x;)v=t.createVertex(),v.node=null,v.uf=3,v.layer=x-1,t.ng(v),r=t.ek(r,v,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=v,x--;r=t.ek(v,o,n.link),r.valid=!d,d&&(v.near=o),r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=h,r.portFromPos=0,r.portToPos=c}else n.valid=!0}}for(t=this.Ab=[],e=0;e<=this.ra;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.ji=-1,i=this.tc=this.Vg=0;i<=this.ra;i++)t[i]>t[this.tc]&&(this.ji=t[i]-1,this.tc=i),t[i]<t[this.Vg]&&(this.Vg=i);for(this.zo=[],i=0;i<t.length;i++)this.zo[i]=[];for(e.reset();e.next();)t=e.value,this.zo[t.layer][t.index]=t;for(this.Ea=-1,t=0;t<=this.ra;t++){for(e=Ps(this,t),i=0,n=this.Ab[t],o=0;o<n;o++)r=e[o],i+=this.nodeMinColumnSpace(r,!0),r.column=i,i+=1,i+=this.nodeMinColumnSpace(r,!1);this.Ea=Math.max(this.Ea,i-1),Cs(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Rt.prototype.linkMinLength=function(){return 1};function q0(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,e===null&&t===null?8:e===null||t===null?4:1}Rt.prototype.nodeMinLayerSpace=function(t,e){return t.node===null&&t.data===null?0:this.K===90||this.K===270?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Rt.prototype.nodeMinColumnSpace=function(t,e){if(t.node===null&&t.data===null)return 0;var i=e?t.ik:t.hk;return i!==null?i:(i=this.K,i===90||i===270?e?t.ik=t.focus.x/this.ac+1|0:t.hk=(t.bounds.width-t.focus.x)/this.ac+1|0:e?t.ik=t.focus.y/this.ac+1|0:t.hk=(t.bounds.height-t.focus.y)/this.ac+1|0)};function Li(t){t.xj===null&&(t.xj=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.xj[e]=n.layer,e++,t.xj[e]=n.column,e++,t.xj[e]=n.index,e++}return t.xj}function gn(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function nP(t,e,i){var n=Ps(t,e),r=t.Ab[e];(t.yo===null||t.yo.length<r*r)&&(t.yo=[]);for(var o=t.yo,l=0;l<r;l++){var h=0,a=n[l],c=a.near;if(c!==null&&c.layer===a.layer)if(a=c.index,a>l)for(var p=l+1;p<a;p++){var d=n[p];d.near===c&&d.uf===c.uf||h++}else for(p=l-1;p>a;p--)d=n[p],d.near===c&&d.uf===c.uf||h++;var m;if(0<=i)for(a=n[l].sourceEdgesArrayAccess,c=0;c<a.length;c++){var x=a[c];if(x.valid&&x.fromVertex.layer!==e)for(d=x.fromVertex.index,p=x.portToPos,x=x.portFromPos,m=c+1;m<a.length;m++){var v=a[m];if(v.valid&&v.fromVertex.layer!==e){var S=v.fromVertex.index,P=v.portToPos;v=v.portFromPos,p<P&&(d>S||d===S&&x>v)&&h++,P<p&&(S>d||S===d&&v>x)&&h++}}}if(0>=i){for(a=n[l].destinationEdgesArrayAccess,c=0;c<a.length;c++)if(x=a[c],x.valid&&x.toVertex.layer!==e)for(d=x.toVertex.index,p=x.portToPos,x=x.portFromPos,m=c+1;m<a.length;m++)v=a[m],v.valid&&v.toVertex.layer!==e&&(S=v.toVertex.index,P=v.portToPos,v=v.portFromPos,x<v&&(d>S||d===S&&p>P)&&h++,v<x&&(S>d||S===d&&P>p)&&h++)}for(o[l*r+l]=h,a=l+1;a<r;a++){var k=0,L=0;if(0<=i){h=n[l].sourceEdgesArrayAccess;var T=n[a].sourceEdgesArrayAccess;for(c=0;c<h.length;c++)if(x=h[c],x.valid&&x.fromVertex.layer!==e)for(d=x.fromVertex.index,x=x.portFromPos,m=0;m<T.length;m++)v=T[m],v.valid&&v.fromVertex.layer!==e&&(S=v.fromVertex.index,v=v.portFromPos,(d<S||d===S&&x<v)&&L++,(S<d||S===d&&v<x)&&k++)}if(0>=i){for(h=n[l].destinationEdgesArrayAccess,T=n[a].destinationEdgesArrayAccess,c=0;c<h.length;c++)if(x=h[c],x.valid&&x.toVertex.layer!==e)for(d=x.toVertex.index,p=x.portToPos,m=0;m<T.length;m++)v=T[m],v.valid&&v.toVertex.layer!==e&&(S=v.toVertex.index,P=v.portToPos,(d<S||d===S&&p<P)&&L++,(S<d||S===d&&P<p)&&k++)}o[l*r+a]=k,o[a*r+l]=L}}return Cs(t,e,n),o}Rt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ra;e++)for(var i=nP(this,e,1),n=this.Ab[e],r=0;r<n;r++)for(var o=r;o<n;o++)t+=i[r*n+o];return t};function Dd(t){for(var e=0,i=0;i<=t.ra;i++){for(var n=t,r=i,o=Ps(n,r),l=n.Ab[r],h=0,a=0;a<l;a++){var c=o[a].destinationEdgesArrayAccess;if(c!==null)for(var p=0;p<c.length;p++){var d=c[p];if(d.valid&&d.toVertex.layer!==r){var m=d.fromVertex.column+d.portFromColOffset,x=d.toVertex.column+d.portToColOffset;h+=(Math.abs(m-x)+1)*q0(d)}}}Cs(n,r,o),e+=h}return e}Rt.prototype.normalize=function(){var t=1/0;this.Ea=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Ea=Math.max(this.Ea,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ea-=t};function b0(t,e,i){for(var n=Ps(t,e),r=t.Ab[e],o=[],l=0;l<r;l++){var h=n[l],a=null;0>=i&&(a=h.sourceEdgesArrayAccess);var c=null;0<=i&&(c=h.destinationEdgesArrayAccess);var p=0,d=0,m=h.near;if(m!==null&&m.layer===h.layer&&(p+=m.column-1,d++),a!==null)for(m=0;m<a.length;m++){h=a[m];var x=h.fromVertex;h.valid&&!h.rev&&x.layer!==e&&(p+=x.column,d++)}if(c!==null)for(a=0;a<c.length;a++)h=c[a],m=h.toVertex,h.valid&&!h.rev&&m.layer!==e&&(p+=m.column,d++);o[l]=d===0?-1:p/d}return Cs(t,e,n),o}function rP(t,e,i){for(var n=Ps(t,e),r=t.Ab[e],o=[],l=0;l<r;l++){var h=n[l],a=null;0>=i&&(a=h.sourceEdgesArrayAccess);var c=null;0<=i&&(c=h.destinationEdgesArrayAccess);var p=0,d=[],m=h.near;if(m!==null&&m.layer===h.layer&&(d[p]=m.column-1,p++),h=void 0,a!==null)for(m=0;m<a.length;m++){h=a[m];var x=h.fromVertex;h.valid&&!h.rev&&x.layer!==e&&(d[p]=x.column+h.portFromColOffset,p++)}if(c!==null)for(a=0;a<c.length;a++)h=c[a],m=h.toVertex,h.valid&&!h.rev&&m.layer!==e&&(d[p]=m.column+h.portToColOffset,p++);p===0?o[l]=-1:(d.sort(function(v,S){return v-S}),c=p>>1,o[l]=(p&1)!==0?d[c]:d[c-1]+d[c]>>1)}return Cs(t,e,n),o}function Vf(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var l=e.destinationEdges;l.next();){var h=l.value,a=h.toVertex,c=e.layer-a.layer;h=t.linkMinLength(h),c===h&&Vf(t,a,i,n,r,o)}if(o)for(l=e.sourceEdges;l.next();)h=l.value,a=h.fromVertex,c=a.layer-e.layer,h=t.linkMinLength(h),c===h&&Vf(t,a,i,n,r,o)}}function tv(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var l=e.destinationEdges;l.next();)tv(t,l.value.toVertex,i,n,r,o);if(o)for(e=e.sourceEdges;e.next();)tv(t,e.value.fromVertex,i,n,r,o)}}Rt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Kk){default:case nv:t=this.network;var e=0,i=t.vertexes.count-1,n=[];n.length=i+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;gL(t)!==null;){for(r=oP(t);r!==null;)n[i]=r,i--,r.valid=!1,r=oP(t);for(r=sP(t);r!==null;)n[e]=r,e++,r.valid=!1,r=sP(t);r=null;for(var o=0,l=this.network.vertexes.iterator;l.next();){var h=l.value;if(h.valid){for(var a=0,c=h.destinationEdges;c.next();)c.value.toVertex.valid&&a++;c=0;for(var p=h.sourceEdges;p.next();)p.value.fromVertex.valid&&c++;(r===null||o<a-c)&&(r=h,o=a-c)}}r!==null&&(n[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.index>e.toVertex.index&&(t.qm(e),e.rev=!0);break;case Rd:for(n=this.network.vertexes.iterator;n.next();)t=n.value,t.og=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.bh=0,n.reset();n.next();)e=n.value,e.sourceEdges.count===0&&ev(this,e);for(n.reset();n.next();)e=n.value,e.og===-1&&ev(this,e);for(t.reset();t.next();)n=t.value,n.forest||(e=n.fromVertex,i=e.finish,r=n.toVertex,o=r.finish,r.og<e.og&&i<o&&(this.network.qm(n),n.rev=!0));break;case _f:for(t=this.network,e=t.vertexes.iterator,n=1/0;e.next();)n=Math.min(n,e.value.layer);if(1/0>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)i=e.value,r=n[i.layer],r===void 0?n[i.layer]=[i]:r.push(i);for(i=e=0;i<n.length;i++)if(r=n[i],!r||r.length===0)e++;else if(0<i)for(o=0;o<r.length;o++)r[o].layer-=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.layer<e.toVertex.layer&&(t.qm(e),e.rev=!0)}}};function gL(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function oP(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function sP(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function ev(t,e){e.og=t.bh,t.bh++;for(var i=e.destinationEdges;i.next();){var n=i.value,r=n.toVertex;r.og===-1&&(n.forest=!0,ev(t,r))}e.finish=t.bh,t.bh++}Rt.prototype.assignLayers=function(){switch(this.il){case rv:lP(this);break;case ov:for(var t,e=this.network.vertexes.iterator;e.next();)t=hP(this,e.value),this.ra=Math.max(t,this.ra);for(e.reset();e.next();)t=e.value,t.layer=this.ra-t.layer;break;default:case Bd:for(lP(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,t.sourceEdges.count===0&&aP(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ra=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.ra=Math.max(this.ra,i.layer)}}};function lP(t){for(var e=t.network.vertexes.iterator;e.next();){var i=uP(t,e.value);t.ra=Math.max(i,t.ra)}}function uP(t,e){var i=0;if(e.layer===-1){for(var n=e.destinationEdges;n.next();){var r=n.value,o=r.toVertex;r=t.linkMinLength(r),i=Math.max(i,uP(t,o)+r)}e.layer=i}else i=e.layer;return i}function hP(t,e){var i=0;if(e.layer===-1){for(var n=e.sourceEdges;n.next();){var r=n.value,o=r.fromVertex;r=t.linkMinLength(r),i=Math.max(i,hP(t,o)+r)}e.layer=i}else i=e.layer;return i}function aP(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)aP(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,r=n.length,o=0;o<r;o++){var l=n[o],h=l.fromVertex,a=l.toVertex;l=t.linkMinLength(l),h.layer-a.layer>l&&Vf(t,h,0,-1,!0,!1)}for(Vf(t,e,1,-1,!0,!0);e.component!==0;){for(o=0,n=1/0,h=0,a=null,l=t.network.vertexes.iterator;l.next();){var c=l.value;if(c.component===1){var p=0,d=!1,m=c.sourceEdgesArrayAccess;r=m.length;for(var x=0;x<r;x++){var v=m[x],S=v.fromVertex;p+=1,S.component!==1&&(o+=1,S=S.layer-c.layer,v=t.linkMinLength(v),n=Math.min(n,S-v))}for(m=c.destinationEdgesArrayAccess,r=m.length,x=0;x<r;x++)v=m[x].toVertex,--p,v.component!==1?--o:d=!0;(a===null||p<h)&&!d&&(a=c,h=p)}}if(0<o){for(i.reset();i.next();)r=i.value,r.component===1&&(r.layer+=n);e.component=0}else a.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(Vf(t,e,1,-1,!0,!1);e.component!==0;){for(n=0,r=1/0,o=0,h=null,a=t.network.vertexes.iterator;a.next();)if(l=a.value,l.component===1){for(c=0,p=!1,m=l.sourceEdgesArrayAccess,d=m.length,x=0;x<d;x++)v=m[x].fromVertex,c+=1,v.component!==1?n+=1:p=!0;for(m=l.destinationEdgesArrayAccess,d=m.length,x=0;x<d;x++)v=m[x],S=v.toVertex,--c,S.component!==1&&(--n,S=l.layer-S.layer,v=t.linkMinLength(v),r=Math.min(r,S-v));(h===null||c>o)&&!p&&(h=l,o=c)}if(0>n){for(i.reset();i.next();)n=i.value,n.component===1&&(n.layer-=r);e.component=0}else h.component=0}}}function fP(t,e,i){return t.K===90?i&&!e.rev||!i&&e.rev?270:90:t.K===180?i&&!e.rev||!i&&e.rev?0:180:t.K===270?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}Rt.prototype.initializeIndices=function(){switch(this.Zk){default:case lv:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;e.index=this.Ab[i],this.Ab[i]++}break;case Vd:for(t=this.network.vertexes.iterator,e=this.ra;0<=e;e--)for(t.reset();t.next();)i=t.value,i.layer===e&&i.index===-1&&cP(this,i);break;case sv:for(t=this.network.vertexes.iterator,e=0;e<=this.ra;e++)for(t.reset();t.next();)i=t.value,i.layer===e&&i.index===-1&&pP(this,i)}};function cP(t,e){var i=e.layer;for(e.index=t.Ab[i],t.Ab[i]++,e=e.destinationEdgesArrayAccess,i=!0;i;){i=!1;for(var n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];r.portFromColOffset>o.portFromColOffset&&(i=!0,e[n]=o,e[n+1]=r)}}for(i=0;i<e.length;i++)n=e[i],n.valid&&(n=n.toVertex,n.index===-1&&cP(t,n))}function pP(t,e){var i=e.layer;e.index=t.Ab[i],t.Ab[i]++,e=e.sourceEdgesArrayAccess;for(var n=!0;n;)for(n=!1,i=0;i<e.length-1;i++){var r=e[i],o=e[i+1];r.portToColOffset>o.portToColOffset&&(n=!0,e[i]=o,e[i+1]=r)}for(i=0;i<e.length;i++)n=e[i],n.valid&&(n=n.fromVertex,n.index===-1&&pP(t,n))}Rt.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=Li(this),i,n;for(i=0;i<this.qj;i++){for(n=0;n<=this.ra;n++)Id(this,n,1),En(this,n,1);var r=this.countCrossings();for(r<t&&(t=r,e=Li(this)),n=this.ra;0<=n;n--)Id(this,n,-1),En(this,n,-1);r=this.countCrossings(),r<t&&(t=r,e=Li(this))}for(gn(this,e),i=0;i<this.qj;i++){for(n=0;n<=this.ra;n++)Id(this,n,0),En(this,n,0);for(r=this.countCrossings(),r<t&&(t=r,e=Li(this)),n=this.ra;0<=n;n--)Id(this,n,0),En(this,n,0);r=this.countCrossings(),r<t&&(t=r,e=Li(this))}gn(this,e);var o,l,h;switch(this.vk){case uv:break;case hv:for(h=t+1;(n=this.countCrossings())<h;)for(h=n,i=this.ra;0<=i;i--)for(l=0;l<=i;l++){for(o=!0;o;)for(o=!1,n=i;n>=l;n--)o=En(this,n,-1)||o;for(r=this.countCrossings(),r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=En(this,n,1)||o;for(r=this.countCrossings(),r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=En(this,n,1)||o;for(r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=En(this,n,-1)||o;for(r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=En(this,n,0)||o;for(r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=En(this,n,0)||o;r>=t?gn(this,e):(t=r,e=Li(this))}break;default:case _d:for(i=this.ra,l=0,h=t+1;(n=this.countCrossings())<h;){for(h=n,o=!0;o;)for(o=!1,n=i;n>=l;n--)o=En(this,n,-1)||o;for(r=this.countCrossings(),r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=En(this,n,1)||o;for(r=this.countCrossings(),r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=En(this,n,1)||o;for(r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=En(this,n,-1)||o;for(r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=En(this,n,0)||o;for(r>=t?gn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=En(this,n,0)||o;r>=t?gn(this,e):(t=r,e=Li(this))}}gn(this,e)};function Id(t,e,i){var n=Ps(t,e),r=t.Ab[e],o=rP(t,e,i),l=b0(t,e,i);for(i=0;i<r;i++)l[i]===-1&&(l[i]=n[i].column),o[i]===-1&&(o[i]=n[i].column);for(var h=!0,a;h;)for(h=!1,i=0;i<r-1;i++)(o[i+1]<o[i]||o[i+1]===o[i]&&l[i+1]<l[i])&&(h=!0,a=o[i],o[i]=o[i+1],o[i+1]=a,a=l[i],l[i]=l[i+1],l[i+1]=a,a=n[i],n[i]=n[i+1],n[i+1]=a);for(i=o=0;i<r;i++)a=n[i],a.index=i,o+=t.nodeMinColumnSpace(a,!0),a.column=o,o+=1,o+=t.nodeMinColumnSpace(a,!1);Cs(t,e,n)}function En(t,e,i){var n=Ps(t,e),r=t.Ab[e];i=nP(t,e,i);var o,l=[];for(o=0;o<r;o++)l[o]=-1;var h=[];for(o=0;o<r;o++)h[o]=-1;for(var a=!1,c=!0;c;)for(c=!1,o=0;o<r-1;o++){var p=i[n[o].index*r+n[o+1].index],d=i[n[o+1].index*r+n[o].index],m=0,x=0,v=n[o].column,S=n[o+1].column,P=t.nodeMinColumnSpace(n[o],!0),k=t.nodeMinColumnSpace(n[o],!1),L=t.nodeMinColumnSpace(n[o+1],!0),T=t.nodeMinColumnSpace(n[o+1],!1);P=v-P+L,k=S-k+T;var O=n[o].sourceEdges.iterator;for(O.reset();O.next();)if(L=O.value,T=L.fromVertex,L.valid&&T.layer===e){for(L=0;n[L]!==T;)L++;L<o&&(m+=2*(o-L),x+=2*(o+1-L)),L===o+1&&(m+=1),L>o+1&&(m+=4*(L-o),x+=4*(L-(o+1)))}for(O=n[o].destinationEdges.iterator,O.reset();O.next();)if(L=O.value,T=L.toVertex,L.valid&&T.layer===e){for(L=0;n[L]!==T;)L++;L===o+1&&(x+=1)}for(O=n[o+1].sourceEdges.iterator,O.reset();O.next();)if(L=O.value,T=L.fromVertex,L.valid&&T.layer===e){for(L=0;n[L]!==T;)L++;L<o&&(m+=2*(o+1-L),x+=2*(o-L)),L===o&&(x+=1),L>o+1&&(m+=4*(L-(o+1)),x+=4*(L-o))}for(O=n[o+1].destinationEdges.iterator,O.reset();O.next();)if(L=O.value,T=L.toVertex,L.valid&&T.layer===e){for(L=0;n[L]!==T;)L++;L===o&&(m+=1)}L=T=0,O=l[n[o].index];var E=h[n[o].index],V=l[n[o+1].index],$=h[n[o+1].index];O!==-1&&(T+=Math.abs(O-v),L+=Math.abs(O-k)),E!==-1&&(T+=Math.abs(E-v),L+=Math.abs(E-k)),V!==-1&&(T+=Math.abs(V-S),L+=Math.abs(V-P)),$!==-1&&(T+=Math.abs($-S),L+=Math.abs($-P)),(x<m-.5||x===m&&d<p-.5||x===m&&d===p&&L<T-.5)&&(c=a=!0,n[o].column=k,n[o+1].column=P,p=n[o],n[o]=n[o+1],n[o+1]=p)}for(o=0;o<r;o++)n[o].index=o;return Cs(t,e,n),a}Rt.prototype.straightenAndPack=function(){var t=(this.ag&1)!==0,e=(this.ag&wL)!==0;if(1e3<this.network.edges.count&&e&&(t=!1),t){var i=[];for(e=0;e<=this.ra;e++)i[e]=0;for(var n,r=this.network.vertexes.iterator;r.next();){var o=r.value;e=o.layer,n=o.column,o=this.nodeMinColumnSpace(o,!1),i[e]=Math.max(i[e],n+o)}for(r.reset();r.next();)o=r.value,e=o.layer,n=o.column,o.column=(8*(this.Ea-i[e])>>1)+8*n;this.Ea*=8}if((this.ag&2)!==0)for(i=!0;i;){for(i=!1,e=this.tc+1;e<=this.ra;e++)i=Fh(this,e,1)||i;for(e=this.tc-1;0<=e;e--)i=Fh(this,e,-1)||i;i=Fh(this,this.tc,0)||i}if((this.ag&4)!==0){for(e=this.tc+1;e<=this.ra;e++)iv(this,e,1);for(e=this.tc-1;0<=e;e--)iv(this,e,-1);iv(this,this.tc,0)}if(t&&(dP(this,-1),dP(this,1)),(this.ag&2)!==0)for(i=!0;i;){for(i=!1,i=Fh(this,this.tc,0)||i,e=this.tc+1;e<=this.ra;e++)i=Fh(this,e,0)||i;for(e=this.tc-1;0<=e;e--)i=Fh(this,e,0)||i}};function Fh(t,e,i){for(var n=!1;mL(t,e,i);)n=!0;return n}function mL(t,e,i){var n,r=Ps(t,e),o=t.Ab[e],l=b0(t,e,-1);if(0<i)for(n=0;n<o;n++)l[n]=-1;var h=b0(t,e,1);if(0>i)for(n=0;n<o;n++)h[n]=-1;for(var a=!1,c=!0;c;)for(c=!1,n=0;n<o;n++){var p=r[n].column,d=t.nodeMinColumnSpace(r[n],!0),m=t.nodeMinColumnSpace(r[n],!1),x=0;0>n-1||p-r[n-1].column-1>d+t.nodeMinColumnSpace(r[n-1],!1)?x=p-1:x=p,d=n+1>=o||r[n+1].column-p-1>m+t.nodeMinColumnSpace(r[n+1],!0)?p+1:p;var v=m=0,S=0;if(0>=i)for(var P=r[n].sourceEdges.iterator;P.next();){var k=P.value,L=k.fromVertex;if(k.valid&&L.layer!==e){var T=q0(k),O=k.portFromColOffset;k=k.portToColOffset,L=L.column,m+=(Math.abs(p+k-(L+O))+1)*T,v+=(Math.abs(x+k-(L+O))+1)*T,S+=(Math.abs(d+k-(L+O))+1)*T}}if(0<=i)for(P=r[n].destinationEdges.iterator;P.next();)k=P.value,L=k.toVertex,k.valid&&L.layer!==e&&(T=q0(k),O=k.portFromColOffset,k=k.portToColOffset,L=L.column,m+=(Math.abs(p+O-(L+k))+1)*T,v+=(Math.abs(x+O-(L+k))+1)*T,S+=(Math.abs(d+O-(L+k))+1)*T);k=O=T=0,P=l[r[n].index],L=h[r[n].index],P!==-1&&(T+=Math.abs(P-p),O+=Math.abs(P-x),k+=Math.abs(P-d)),L!==-1&&(T+=Math.abs(L-p),O+=Math.abs(L-x),k+=Math.abs(L-d)),v<m||v===m&&O<T?(c=a=!0,r[n].column=x):(S<m||S===m&&k<T)&&(c=a=!0,r[n].column=d)}return Cs(t,e,r),t.normalize(),a}function iv(t,e,i){var n=Ps(t,e),r=t.Ab[e],o=rP(t,e,i),l=[];for(i=0;i<r;i++)l[i]=o[i];for(o=!0;o;)for(o=!1,i=0;i<r;i++){var h=n[i].column,a=t.nodeMinColumnSpace(n[i],!0),c=t.nodeMinColumnSpace(n[i],!1),p=0;if(l[i]===-1)if(i===0&&i===r-1)p=h;else if(i===0){var d=n[i+1].column;d-h===c+t.nodeMinColumnSpace(n[i+1],!0)?p=h-1:p=h}else i===r-1?(d=n[i-1].column,p=h-d===a+t.nodeMinColumnSpace(n[i-1],!1)?h+1:h):(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,d=n[i+1].column,c=d-t.nodeMinColumnSpace(n[i+1],!0)-c-1,p=(a+c)/2|0);else i===0&&i===r-1?p=l[i]:i===0?(d=n[i+1].column,c=d-t.nodeMinColumnSpace(n[i+1],!0)-c-1,p=Math.min(l[i],c)):i===r-1?(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,p=Math.max(l[i],a)):(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,d=n[i+1].column,c=d-t.nodeMinColumnSpace(n[i+1],!0)-c-1,a<l[i]&&l[i]<c?p=l[i]:a>=l[i]?p=a:c<=l[i]&&(p=c));p!==h&&(o=!0,n[i].column=p)}Cs(t,e,n),t.normalize()}function vL(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var r=n.value,o=t.nodeMinColumnSpace(r,!0),l=t.nodeMinColumnSpace(r,!1);if(r.column-o<=e&&r.column+l>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)i=n.value,i.column>e&&(--i.column,t=!0);return t}function xL(t,e){var i=e+1,n,r=[],o=[];for(n=0;n<=t.ra;n++)r[n]=!1,o[n]=!1;for(var l=t.network.vertexes.iterator;l.next();){n=l.value;var h=n.column-t.nodeMinColumnSpace(n,!0),a=n.column+t.nodeMinColumnSpace(n,!1);h<=e&&a>=e&&(r[n.layer]=!0),h<=i&&a>=i&&(o[n.layer]=!0)}for(h=!0,i=!1,n=0;n<=t.ra;n++)h=h&&!(r[n]&&o[n]);if(h)for(l.reset();l.next();)t=l.value,t.column>e&&(--t.column,i=!0);return i}function dP(t,e){for(var i=0;i<=t.Ea;i++)for(;vL(t,i););for(t.normalize(),i=0;i<t.Ea;i++)for(;xL(t,i););t.normalize();var n;if(0<e)for(i=0;i<=t.Ea;i++){var r=Li(t),o=Dd(t);for(n=o+1;o<n;){n=o,yP(t,i,1);var l=Dd(t);l>o?gn(t,r):l<o&&(o=l,r=Li(t))}}if(0>e)for(i=t.Ea;0<=i;i--)for(r=Li(t),o=Dd(t),n=o+1;o<n;)n=o,yP(t,i,-1),l=Dd(t),l>o?gn(t,r):l<o&&(o=l,r=Li(t));t.normalize()}function yP(t,e,i){t.Ec=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var r=n.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.Ec)}if(0>i)for(n.reset();n.next();)r=n.value,r.column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.Ec);for(t.Ec++,n.reset();n.next();)e=n.value,e.component===-1&&(tv(t,e,t.Ec,-1,!0,!0),t.Ec++);var o;for(e=[],o=0;o<t.Ec*t.Ec;o++)e[o]=!1;for(r=[],o=0;o<(t.ra+1)*(t.Ea+1);o++)r[o]=-1;for(n.reset();n.next();){o=n.value;for(var l=o.layer,h=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),a=Math.min(t.Ea,o.column+t.nodeMinColumnSpace(o,!1));h<=a;h++)r[l*(t.Ea+1)+h]=o.component}for(o=0;o<=t.ra;o++){if(0<i)for(l=0;l<t.Ea;l++)r[o*(t.Ea+1)+l]!==-1&&r[o*(t.Ea+1)+l+1]!==-1&&r[o*(t.Ea+1)+l]!==r[o*(t.Ea+1)+l+1]&&(e[r[o*(t.Ea+1)+l]*t.Ec+r[o*(t.Ea+1)+l+1]]=!0);if(0>i)for(l=t.Ea;0<l;l--)r[o*(t.Ea+1)+l]!==-1&&r[o*(t.Ea+1)+l-1]!==-1&&r[o*(t.Ea+1)+l]!==r[o*(t.Ea+1)+l-1]&&(e[r[o*(t.Ea+1)+l]*t.Ec+r[o*(t.Ea+1)+l-1]]=!0)}for(r=[],o=0;o<t.Ec;o++)r[o]=!0;for(l=[],l.push(0);l.length!==0;)if(a=l[l.length-1],l.pop(),r[a])for(r[a]=!1,o=0;o<t.Ec;o++)e[a*t.Ec+o]&&l.splice(0,0,o);if(0<i)for(n.reset();n.next();)t=n.value,r[t.component]&&--t.column;if(0>i)for(n.reset();n.next();)i=n.value,r[i.component]&&(i.column+=1)}Rt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=Fd(this,!0),e=Fd(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;n!==null&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.Bu(),this.isRouting&&this.commitLinks()};function Fd(t,e){return t.K===270?e?Mn:Pn:t.K===90?e?Pn:Mn:t.K===180?e?kn:Xi:e?Xi:kn}Rt.prototype.commitNodes=function(){this.ae=[],this.xd=[],this.wd=[],this.Ka=[];for(var t=0;t<=this.ra;t++)this.ae[t]=0,this.xd[t]=0,this.wd[t]=0,this.Ka[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.ae[i]=Math.max(this.ae[i],this.nodeMinLayerSpace(e,!0)),this.xd[i]=Math.max(this.xd[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.be;for(var n=0;n<=this.ra;n++){var r=i;0>=this.ae[n]+this.xd[n]&&(r=0),0<n&&(e+=r/2),this.K===90||this.K===0?(e+=this.xd[n],this.wd[n]=e,e+=this.ae[n]):(e+=this.ae[n],this.wd[n]=e,e+=this.xd[n]),n<this.ra&&(e+=r/2),this.Ka[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.ra;n++)this.K===270?this.wd[n]=e.y+this.wd[n]:this.K===90?(this.wd[n]=e.y+i-this.wd[n],this.Ka[n]=i-this.Ka[n]):this.K===180?this.wd[n]=e.x+this.wd[n]:(this.wd[n]=e.x+i-this.wd[n],this.Ka[n]=i-this.Ka[n]);for(t.reset(),i=n=1/0;t.next();){r=t.value;var o=r.layer,l=r.column|0;if(this.K===270||this.K===90){var h=e.x+this.ac*l;o=this.wd[o]}else h=this.wd[o],o=e.y+this.ac*l;r.centerX=h,r.centerY=o,n=Math.min(r.x,n),i=Math.min(r.y,i)}for(n=e.x-n,e=e.y-i,this.Rc=new N(n,e),t.reset();t.next();)i=t.value,i.x+=n,i.y+=e,i.commit()},Rt.prototype.Bu=function(){for(var t=0,e=this.be,i=0;i<=this.ra;i++)t+=this.ae[i],t+=this.xd[i];t+=this.ra*e,e=[],i=this.ac*this.Ea;for(var n=this.maxLayer;0<=n;n--)this.K===270?n===0?e.push(new _(0,0,i,Math.abs(this.Ka[0]))):e.push(new _(0,this.Ka[n-1],i,Math.abs(this.Ka[n-1]-this.Ka[n]))):this.K===90?n===0?e.push(new _(0,this.Ka[0],i,Math.abs(this.Ka[0]-t))):e.push(new _(0,this.Ka[n],i,Math.abs(this.Ka[n-1]-this.Ka[n]))):this.K===180?n===0?e.push(new _(0,0,Math.abs(this.Ka[0]),i)):e.push(new _(this.Ka[n-1],0,Math.abs(this.Ka[n-1]-this.Ka[n]),i)):n===0?e.push(new _(this.Ka[0],0,Math.abs(this.Ka[0]-t),i)):e.push(new _(this.Ka[n],0,Math.abs(this.Ka[n-1]-this.Ka[n]),i));this.commitLayers(e,this.Rc)},Rt.prototype.commitLayers=function(){},Rt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator,e;t.next();)e=t.value.link,e!==null&&(e.Lh(),e.Pj(),e.vf());for(t.reset();t.next();)e=t.value.link,e!==null&&e.ug();for(t.reset();t.next();){var i=t.value;if(e=i.link,e!==null){e.Lh();var n=e,r=n.fromNode,o=n.toNode,l=n.fromPort,h=n.toPort;if(r!==null){var a=r.findVisibleNode();a!==null&&a!==r&&(r=a,l=a.port)}o!==null&&(a=o.findVisibleNode(),a!==null&&a!==o&&(o=a,h=a.port));var c=e.computeSpot(!0,l);a=e.computeSpot(!1,h);var p=i.fromVertex,d=i.toVertex;if(i.valid){if(e.curve===tn&&e.pointsCount===4)if(p.column===d.column)i=e.getLinkPoint(r,l,c,!0,!1,o,h),l=e.getLinkPoint(o,h,a,!1,!1,r,l),i.u()||i.set(r.actualBounds.center),l.u()||l.set(o.actualBounds.center),e.Pj(),e.tf(i.x,i.y),e.tf((2*i.x+l.x)/3,(2*i.y+l.y)/3),e.tf((i.x+2*l.x)/3,(i.y+2*l.y)/3),e.tf(l.x,l.y);else{var m=!1,x=!1;if(l!==null&&c===Ze&&(m=!0),h!==null&&a===Ze&&(x=!0),m||x){var v=e.i(0).x;if(i=e.i(0).y,p=e.i(3).x,n=e.i(3).y,m){if(this.K===90||this.K===270){m=v;var S=(i+n)/2}else m=(v+p)/2,S=i;e.M(1,m,S),c=e.getLinkPoint(r,l,c,!0,!1,o,h),c.u()||c.set(r.actualBounds.center),e.M(0,c.x,c.y)}x&&(this.K===90||this.K===270?(c=p,i=(i+n)/2):(c=(v+p)/2,i=n),e.M(2,c,i),r=e.getLinkPoint(o,h,a,!1,!1,r,l),r.u()||r.set(o.actualBounds.center),e.M(3,r.x,r.y))}}e.vf()}else if(p.layer===d.layer)e.vf();else{if(m=x=!1,S=this.be,v=e.firstPickIndex+1,e.isOrthogonal){m=!0;var P=e.pointsCount;4<P&&e.points.removeRange(2,P-3)}else if(e.curve===tn)x=!0,P=e.pointsCount,4<P&&e.points.removeRange(2,P-3),P===4&&(v=2);else{P=e.pointsCount;var k=c===Ze,L=a===Ze;2<P&&k&&L?e.points.removeRange(1,P-2):3<P&&k&&!L?e.points.removeRange(1,P-3):3<P&&!k&&L?e.points.removeRange(2,P-2):4<P&&!k&&!L&&e.points.removeRange(2,P-3)}if(i.rev){for(;d!==null&&p!==d;){var T=P=null;for(k=d.sourceEdges.iterator;k.next()&&(L=k.value,L.link!==i.link||(P=L.fromVertex,T=L.toVertex,P.node!==null)););if(P===null)break;if(P!==p){k=e.i(v-1).x,L=e.i(v-1).y;var O=P.centerX,E=P.centerY;if(m)this.K===180||this.K===0?v===e.firstPickIndex+1?(e.l(v++,k,L),e.l(v++,k,E)):(T!==null?T.centerY:L)!==E&&(T=this.Ka[P.layer-1]+this.Rc.x,e.l(v++,T,L),e.l(v++,T,E)):v===e.firstPickIndex+1?(e.l(v++,k,L),e.l(v++,O,L)):(T!==null?T.centerX:k)!==O&&(T=this.Ka[P.layer-1]+this.Rc.y,e.l(v++,k,T),e.l(v++,O,T));else if(v===e.firstPickIndex+1){T=Math.max(10,this.ae[d.layer]);var V=Math.max(10,this.xd[d.layer]);if(x)this.K===180?O<=d.bounds.x?(d=d.bounds.x,e.l(v++,d-T,E),e.l(v++,d,E),e.l(v++,d+V,E)):(e.l(v++,O-T,E),e.l(v++,O,E),e.l(v++,O+V,E)):this.K===90?E>=d.bounds.bottom?(d=d.bounds.y+d.bounds.height,e.l(v++,O,d+V),e.l(v++,O,d),e.l(v++,O,d-T)):(e.l(v++,O,E+V),e.l(v++,O,E),e.l(v++,O,E-T)):this.K===270?E<=d.bounds.y?(d=d.bounds.y,e.l(v++,O,d-T),e.l(v++,O,d),e.l(v++,O,d+V)):(e.l(v++,O,E-T),e.l(v++,O,E),e.l(v++,O,E+V)):this.K===0&&(O>=d.bounds.right?(d=d.bounds.x+d.bounds.width,e.l(v++,d+V,E),e.l(v++,d,E),e.l(v++,d-T,E)):(e.l(v++,O+V,E),e.l(v++,O,E),e.l(v++,O-T,E)));else{e.l(v++,k,L);var $=0;this.K===180||this.K===0?((this.K===180?O>=d.bounds.right:O<=d.bounds.x)&&($=(this.K===0?-T:V)/2),e.l(v++,k+$,E)):((this.K===270?E>=d.bounds.bottom:E<=d.bounds.y)&&($=(this.K===90?-T:V)/2),e.l(v++,O,L+$)),e.l(v++,O,E)}}else T=Math.max(10,this.ae[P.layer]),V=Math.max(10,this.xd[P.layer]),x?this.K===180?(e.l(v++,O-T-S,E),e.l(v++,Math.min(O-T+S/2,O),E),e.l(v++,O,E),e.l(v++,O,E),e.l(v++,Math.max(O+V-S/2,O),E),e.l(v++,O+V+S,E)):this.K===90?(e.l(v++,O,E+V+S),e.l(v++,O,Math.max(E+V-S/2,E)),e.l(v++,O,E),e.l(v++,O,E),e.l(v++,O,Math.min(E-T+S/2,E)),e.l(v++,O,E-T-S)):this.K===270?(e.l(v++,O,E-T-S),e.l(v++,O,Math.min(E-T+S/2,E)),e.l(v++,O,E),e.l(v++,O,E),e.l(v++,O,Math.max(E+V-S/2,E)),e.l(v++,O,E+V+S)):(e.l(v++,O+V+S,E),e.l(v++,Math.max(O+V-S/2,O),E),e.l(v++,O,E),e.l(v++,O,E),e.l(v++,Math.min(O-T+S/2,O),E),e.l(v++,O-T-S,E)):e.l(v++,O,E)}d=P}(h===null||c!==Ze||m)&&(k=e.i(v-1).x,L=e.i(v-1).y,O=e.i(v).x,E=e.i(v).y,m?(S=this.xd[p.layer],this.K===180||this.K===0?(m=L,m>=p.bounds.y&&m<=p.bounds.bottom&&(this.K===180?O>=p.bounds.x:O<=p.bounds.right)&&(d=p.centerX+(this.K===180?-S:S),m<p.bounds.y+p.bounds.height/2?m=p.bounds.y-this.ac/2:m=p.bounds.bottom+this.ac/2,e.l(v++,d,L),e.l(v++,d,m)),e.l(v++,O,m)):(m=k,m>=p.bounds.x&&m<=p.bounds.right&&(this.K===270?E>=p.bounds.y:E<=p.bounds.bottom)&&(d=p.centerY+(this.K===270?-S:S),m<p.bounds.x+p.bounds.width/2?m=p.bounds.x-this.ac/2:m=p.bounds.right+this.ac/2,e.l(v++,k,d),e.l(v++,m,d)),e.l(v++,m,E)),e.l(v++,O,E)):x?(T=Math.max(10,this.ae[p.layer]),V=Math.max(10,this.xd[p.layer]),this.K===180&&O>=p.bounds.x?(d=p.bounds.x+p.bounds.width,e.M(v-2,d,L),e.M(v-1,d+V,L)):this.K===90&&E<=p.bounds.bottom?(d=p.bounds.y,e.M(v-2,k,d),e.M(v-1,k,d-T)):this.K===270&&E>=p.bounds.y?(d=p.bounds.y+p.bounds.height,e.M(v-2,k,d),e.M(v-1,k,d+V)):this.K===0&&O<=p.bounds.right&&(d=p.bounds.x,e.M(v-2,d,L),e.M(v-1,d-T,L))):(T=Math.max(10,this.ae[p.layer]),V=Math.max(10,this.xd[p.layer]),m=0,this.K===180||this.K===0?((this.K===180?O<=p.bounds.x:O>=p.bounds.right)&&(m=(this.K===0?V:-T)/2),e.l(v++,O+m,L)):((this.K===270?E<=p.bounds.y:E>=p.bounds.bottom)&&(m=(this.K===90?V:-T)/2),e.l(v++,k,E+m)),e.l(v++,O,E)))}else{for(;p!==null&&p!==d;){for(T=P=null,p=p.destinationEdges.iterator;p.next()&&(k=p.value,k.link!==i.link||(P=k.toVertex,T=k.fromVertex,T.node!==null&&(T=null),P.node!==null)););if(P===null)break;P!==d&&(k=e.i(v-1).x,L=e.i(v-1).y,O=P.centerX,E=P.centerY,m?this.K===180||this.K===0?(T!==null?T.centerY:L)!==E&&(T=this.Ka[P.layer]+this.Rc.x,v===e.firstPickIndex+1&&(T=this.K===0?Math.max(T,k):Math.min(T,k)),e.l(v++,T,L),e.l(v++,T,E)):(T!==null?T.centerX:k)!==O&&(T=this.Ka[P.layer]+this.Rc.y,v===e.firstPickIndex+1&&(T=this.K===90?Math.max(T,L):Math.min(T,L)),e.l(v++,k,T),e.l(v++,O,T)):(T=Math.max(10,this.ae[P.layer]),V=Math.max(10,this.xd[P.layer]),x?this.K===180?(e.l(v++,O+V+S,E),e.l(v++,Math.max(O+V-S/2,O),E),e.l(v++,O,E),e.l(v++,O,E),e.l(v++,Math.min(O-T+S/2,O),E),e.l(v++,O-T-S,E)):this.K===90?(e.l(v++,O,E-T-S),e.l(v++,O,Math.min(E-T+S/2,E)),e.l(v++,O,E),e.l(v++,O,E),e.l(v++,O,Math.max(E+V-S/2,E)),e.l(v++,O,E+V+S)):this.K===270?(e.l(v++,O,E+V+S),e.l(v++,O,Math.max(E+V-S/2,E)),e.l(v++,O,E),e.l(v++,O,E),e.l(v++,O,Math.min(E-T+S/2,E)),e.l(v++,O,E-T-S)):(e.l(v++,O-T-S,E),e.l(v++,Math.min(O-T+S/2,O),E),e.l(v++,O,E),e.l(v++,O,E),e.l(v++,Math.max(O+V-S/2,O),E),e.l(v++,O+V+S,E)):this.K===180?(e.l(v++,O+V,E),e.l(v++,O-T,E)):this.K===90?(e.l(v++,O,E-T),e.l(v++,O,E+V)):this.K===270?(e.l(v++,O,E+V),e.l(v++,O,E-T)):(e.l(v++,O-T,E),e.l(v++,O+V,E)))),p=P}m&&(k=e.i(v-1).x,L=e.i(v-1).y,O=e.i(v).x,E=e.i(v).y,this.K===180||this.K===0?L!==E&&(T=this.K===0?Math.min(Math.max((O+k)/2,this.Ka[d.layer]+this.Rc.x),O):Math.max(Math.min((O+k)/2,this.Ka[d.layer]+this.Rc.x),O),e.l(v++,T,L),e.l(v++,T,E)):k!==O&&(T=this.K===90?Math.min(Math.max((E+L)/2,this.Ka[d.layer]+this.Rc.y),E):Math.max(Math.min((E+L)/2,this.Ka[d.layer]+this.Rc.y),E),e.l(v++,k,T),e.l(v++,O,T)))}n!==null&&x&&(l!==null&&(c===Ze&&(c=e.i(0),n=e.i(2),c.A(n)||e.M(1,(c.x+n.x)/2,(c.y+n.y)/2)),c=e.getLinkPoint(r,l,Ze,!0,!1,o,h),c.u()||c.set(r.actualBounds.center),e.M(0,c.x,c.y)),h!==null&&(a===Ze&&(a=e.i(e.pointsCount-1),c=e.i(e.pointsCount-3),a.A(c)||e.M(e.pointsCount-2,(a.x+c.x)/2,(a.y+c.y)/2)),r=e.getLinkPoint(o,h,Ze,!1,!1,r,l),r.u()||r.set(o.actualBounds.center),e.M(e.pointsCount-1,r.x,r.y))),e.vf(),i.commit()}}}this.avoidOrthogonalOverlaps()},Rt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new it,e=this.network.edges.iterator;e.next();){var i=e.value.link;i!==null&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(this.K===90||this.K===270){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(n!==null&&n.isOrthogonal)for(var r=2;r<n.pointsCount-3;r++){var o=n.i(r),l=n.i(r+1);if(this.w(o.y,l.y)&&!this.w(o.x,l.x)){var h=new Ns;h.layer=Math.floor(o.y/2);var a=n.i(0),c=n.i(n.pointsCount-1);if(h.first=a.x*a.x+a.y,h.$b=c.x*c.x+c.y,h.ed=Math.min(o.x,l.x),h.vc=Math.max(o.x,l.x),h.index=r,h.link=n,r+2<n.pointsCount){a=n.i(r-1),c=n.i(r+2);var p=0;a.y<o.y?p=c.y<o.y?3:o.x<l.x?2:1:a.y>o.y&&(p=c.y>o.y?0:l.x<o.x?2:1),h.j=p}i.push(h)}}}if(1<i.length)for(i.sort(this.uy),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(l=i[o].vc,r=t+1;r<n&&i[r].ed<l;)l=Math.max(l,i[r].vc),r++;if(l=r-o,1<l){for(this.Vi(i,this.Qs,o,o+l),p=1,h=i[o].$b,a=o;a<r;a++)c=i[a],c.$b!==h&&(p++,h=c.$b);this.Vi(i,this.ty,o,o+l);var d=1;for(h=i[o].first,a=o;a<r;a++)c=i[a],c.first!==h&&(d++,h=c.first);for(a=!0,c=d,p<d?(a=!1,c=p,h=i[o].$b,this.Vi(i,this.Qs,o,o+l)):h=i[o].first,p=0,d=o;d<r;d++){var m=i[d];(a?m.first:m.$b)!==h&&(p++,h=a?m.first:m.$b);var x=m.link;o=x.i(m.index),l=x.i(m.index+1);var v=this.linkSpacing*(p-(c-1)/2);e++,x.Lh(),x.M(m.index,o.x,o.y+v),x.M(m.index+1,l.x,l.y+v),x.vf()}}o=r}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(n=t.value,n!==null&&n.isOrthogonal)for(r=2;r<n.pointsCount-3;r++)o=n.i(r),l=n.i(r+1),this.w(o.x,l.x)&&!this.w(o.y,l.y)&&(h=new Ns,h.layer=Math.floor(o.x/2),a=n.i(0),c=n.i(n.pointsCount-1),h.first=a.x+a.y*a.y,h.$b=c.x+c.y*c.y,h.ed=Math.min(o.y,l.y),h.vc=Math.max(o.y,l.y),h.index=r,h.link=n,r+2<n.pointsCount&&(a=n.i(r-1),c=n.i(r+2),p=0,a.x<o.x?p=c.x<o.x?3:o.y<l.y?2:1:a.x>o.x&&(p=c.x>o.x?0:l.y<o.y?2:1),h.j=p),i.push(h));if(1<i.length)for(i.sort(this.uy),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(l=i[o].vc,r=t+1;r<n&&i[r].ed<l;)l=Math.max(l,i[r].vc),r++;if(l=r-o,1<l){for(this.Vi(i,this.Qs,o,o+l),p=1,h=i[o].$b,a=o;a<r;a++)c=i[a],c.$b!==h&&(p++,h=c.$b);for(this.Vi(i,this.ty,o,o+l),d=1,h=i[o].first,a=o;a<r;a++)c=i[a],c.first!==h&&(d++,h=c.first);for(a=!0,c=d,p<d?(a=!1,c=p,h=i[o].$b,this.Vi(i,this.Qs,o,o+l)):h=i[o].first,p=0,d=o;d<r;d++)m=i[d],(a?m.first:m.$b)!==h&&(p++,h=a?m.first:m.$b),x=m.link,o=x.i(m.index),l=x.i(m.index+1),v=this.linkSpacing*(p-(c-1)/2),e++,x.Lh(),x.M(m.index,o.x+v,o.y),x.M(m.index+1,l.x+v,l.y),x.vf()}o=r}t=n}}}},s=Rt.prototype,s.uy=function(t,e){return t instanceof Ns&&e instanceof Ns&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ed<e.ed?-1:t.ed>e.ed?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},s.ty=function(t,e){return t instanceof Ns&&e instanceof Ns&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.ed<e.ed?-1:t.ed>e.ed?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},s.Qs=function(t,e){return t instanceof Ns&&e instanceof Ns&&t!==e?t.$b<e.$b?-1:t.$b>e.$b||t.j<e.j?1:t.j>e.j||t.ed<e.ed?-1:t.ed>e.ed?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},s.w=function(t,e){return t-=e,-1<t&&1>t},s.Vi=function(t,e,i,n){var r=t.length,o=n-i;if(!(1>=o))if((0>i||i>=r-1)&&D("not in range 0 <= from < length: "+i),o===2)n=t[i],r=t[i+1],0<e(n,r)&&(t[i]=r,t[i+1]=n);else if(i===0)if(n>=r)t.sort(e);else for(i=t.slice(0,n),i.sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=r)for(n=t.slice(i),n.sort(e),e=i;e<r;e++)t[e]=n[e-i];else for(r=t.slice(i,n),r.sort(e),e=i;e<n;e++)t[e]=r[e-i]};function Ps(t,e){var i=t.Ab[e];if(i>=t.ye.length){for(var n=[],r=0;r<t.ye.length;r++)n[r]=t.ye[r];t.ye=n}for(t.ye[i]===void 0||t.ye[i]===null?n=[]:(n=t.ye[i],t.ye[i]=null),t=t.zo[e],e=0;e<t.length;e++)i=t[e],n[i.index]=i;return n}function Cs(t,e,i){t.ye[t.Ab[e]]=i}Y.Object.defineProperties(Rt.prototype,{layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&0<=t&&(this.be=t,this.B())}},columnSpacing:{get:function(){return this.ac},set:function(t){this.ac!==t&&0<t&&(this.ac=t,this.B())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(t===0||t===90||t===180||t===270?(this.K=t,this.B()):D("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Kk},set:function(t){this.Kk===t||t!==nv&&t!==Rd&&t!==_f||(this.Kk=t,this.B())}},layeringOption:{get:function(){return this.il},set:function(t){this.il===t||t!==Bd&&t!==rv&&t!==ov||(this.il=t,this.B())}},initializeOption:{get:function(){return this.Zk},set:function(t){this.Zk===t||t!==Vd&&t!==sv&&t!==lv||(this.Zk=t,this.B())}},iterations:{get:function(){return this.qj},set:function(t){this.qj!==t&&0<=t&&(this.qj=t,this.B())}},aggressiveOption:{get:function(){return this.vk},set:function(t){this.vk===t||t!==uv&&t!==_d&&t!==hv||(this.vk=t,this.B())}},packOption:{get:function(){return this.ag},set:function(t){this.ag!==t&&0<=t&&8>t&&(this.ag=t,this.B())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.B())}},linkSpacing:{get:function(){return this.jo},set:function(t){this.jo!==t&&0<=t&&(this.jo=t,this.B())}},maxLayer:{get:function(){return this.ra}},maxIndex:{get:function(){return this.ji}},maxColumn:{get:function(){return this.Ea}},minIndexLayer:{get:function(){return this.Vg}},maxIndexLayer:{get:function(){return this.tc}}});var Rd=new K(Rt,"CycleDepthFirst",0),nv=new K(Rt,"CycleGreedy",1),_f=new K(Rt,"CycleFromLayers",2),Bd=new K(Rt,"LayerOptimalLinkLength",0),rv=new K(Rt,"LayerLongestPathSink",1),ov=new K(Rt,"LayerLongestPathSource",2),Vd=new K(Rt,"InitDepthFirstOut",0),sv=new K(Rt,"InitDepthFirstIn",1),lv=new K(Rt,"InitNaive",2),uv=new K(Rt,"AggressiveNone",0),_d=new K(Rt,"AggressiveLess",1),hv=new K(Rt,"AggressiveMore",2),wL=8;Rt.className="LayeredDigraphLayout",Rt.CycleDepthFirst=Rd,Rt.CycleGreedy=nv,Rt.CycleFromLayers=_f,Rt.LayerOptimalLinkLength=Bd,Rt.LayerLongestPathSink=rv,Rt.LayerLongestPathSource=ov,Rt.InitDepthFirstOut=Vd,Rt.InitDepthFirstIn=sv,Rt.InitNaive=lv,Rt.AggressiveNone=uv,Rt.AggressiveLess=_d,Rt.AggressiveMore=hv,Rt.PackNone=0,Rt.PackExpand=1,Rt.PackStraighten=2,Rt.PackMedian=4,Rt.PackAll=15;function Ns(){this.index=this.vc=this.ed=this.$b=this.first=this.layer=0,this.link=null,this.j=0}Ns.className="SegInfo";function Rh(t){Xt.call(this,t)}z(Rh,Xt),Rh.prototype.createVertex=function(){return new tu(this)},Rh.prototype.createEdge=function(){return new eu(this)},Rh.className="LayeredDigraphNetwork";function tu(t){pe.call(this,t),this.Ra=this.Bg=this.fi=-1,this.D=NaN,this.L=null,this.valid=!1,this.finish=this.og=NaN,this.uf=0,this.hk=this.ik=null}z(tu,pe),tu.prototype.serializeVertexProperties=function(t,e){pe.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?Ce(this.near):null,t.valid=this.valid,t.og=this.og,t.finish=this.finish,t.uf=this.uf,t.ik=this.ik,t.hk=this.hk},tu.prototype.deserializeVertexProperties=function(t,e,i,n){pe.prototype.deserializeVertexProperties.call(this,t,e,i,n),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.og=t.og,this.finish=t.finish,this.uf=t.uf,this.ik=t.ik,this.hk=t.hk},Y.Object.defineProperties(tu.prototype,{layer:{get:function(){return this.fi},set:function(t){this.fi!==t&&(this.fi=t)}},column:{get:function(){return this.Bg},set:function(t){this.Bg!==t&&(this.Bg=t)}},index:{get:function(){return this.Ra},set:function(t){this.Ra!==t&&(this.Ra=t)}},component:{get:function(){return this.D},set:function(t){this.D!==t&&(this.D=t)}},near:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}}}),tu.className="LayeredDigraphVertex";function eu(t){We.call(this,t),this.j=this.Ba=this.Ma=!1,this.wa=this.D=NaN,this.L=this.o=0}z(eu,We),eu.prototype.serializeEdgeProperties=function(t,e){We.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},eu.prototype.deserializeEdgeProperties=function(t,e,i,n){We.prototype.deserializeEdgeProperties.call(this,t,e,i,n),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},Y.Object.defineProperties(eu.prototype,{fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},valid:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},rev:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.D},set:function(t){this.D!==t&&(this.D=t)}},portToPos:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}},portFromColOffset:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},portToColOffset:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}}}),eu.className="LayeredDigraphEdge";function Pt(t){Lt.call(this),this.Kb=new Q,this.Mo=Yd,this.ld=Br,this.Ep=Wd,this.tr=wv,this.Aw=[],this.jd=!0,this.Hb=Hd,this.Qd=new yt(10,10).freeze();var e=new ou(this);this.V=new On(e),this.W=new On(e),this.ku=[],t&&Object.assign(this,t)}z(Pt,Lt),Pt.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.Mo=this.Mo,t.Ep=this.Ep,t.tr=this.tr,t.jd=this.jd,t.Hb=this.Hb,t.Qd.assign(this.Qd),t.V.copyInheritedPropertiesFrom(this.V),t.W.copyInheritedPropertiesFrom(this.W)},Pt.prototype.gb=function(t){t.classType===Pt?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.arrangement=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.treeStyle=t:D("Unknown enum value: "+t):Lt.prototype.gb.call(this,t)},Pt.prototype.createNetwork=function(){return new ou(this)},Pt.prototype.makeNetwork=function(t){function e(n){if(n instanceof q)return!n.isLinkLabel&&n.category!=="Comment";if(n instanceof H){var r=n.fromNode;return r===null||r.isLinkLabel||r.category==="Comment"?!1:(n=n.toNode,!(n===null||n.isLinkLabel||n.category==="Comment"))}return!1}var i=this.createNetwork();return t instanceof I?(i.mg(t.nodes,!0,e),i.mg(t.links,!0,e)):t instanceof dt?i.mg(t.memberParts,!1,e):i.mg(t.iterator,!1,e),i},Pt.prototype.doLayout=function(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==Kd&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(e===null&&t instanceof I&&(e=t),this.path===Yd&&e!==null?this.ld=e.isTreePathToChildren?Br:nu:this.ld=this.path===Yd?Br:this.path,0<this.network.vertexes.count){for(this.network.Sp(),t=this.network.vertexes.iterator;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Kb.count){for(t=new Q,e=this.Kb.iterator;e.next();){var i=e.value;i instanceof q?(i=this.network.Ji(i),i!==null&&t.add(i)):i instanceof On&&t.add(i)}this.Kb=t}for(this.Kb.count===0&&this.findRoots(),t=this.Kb.copy().iterator;t.next();)e=t.value,e.initialized||(e.initialized=!0,av(this,e));for(e=this.network.vertexes,t=null;t=SL(e),0<t.count;)e=gP(this,t),e!==null&&this.Kb.add(e),e.initialized=!0,av(this,e),e=t;for(t=this.Kb.iterator;t.next();)e=t.value,e instanceof On&&vP(this,e);for(t=this.Kb.iterator;t.next();)e=t.value,e instanceof On&&xP(this,e);for(t=this.Kb.iterator;t.next();)e=t.value,e instanceof On&&wP(this,e);if(this.vu(),this.layerStyle===$d){for(t=[],e=this.network.vertexes.iterator;e.next();){i=e.value;var n=i.parent;n===null&&(n=i),n=n.angle===0||n.angle===180;var r=t[i.level];r===void 0&&(r=0),t[i.level]=Math.max(r,n?i.width:i.height)}for(e=0;e<t.length;e++)t[e]===void 0&&(t[e]=0);for(this.Aw=t,e=this.network.vertexes.iterator;e.next();)i=e.value,n=i.parent,n===null&&(n=i),n.angle===0||n.angle===180?(n.angle===180&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(n.angle===270&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===Sv)for(t=this.network.vertexes.iterator;t.next();){for(e=t.value,i=e.angle===0||e.angle===180,n=-1,r=0;r<e.children.length;r++){var o=e.children[r];n=Math.max(n,i?o.width:o.height)}if(0<=n)for(r=0;r<e.children.length;r++)o=e.children[r],i?(e.angle===180&&(o.focusX+=n-o.width),o.width=n):(e.angle===270&&(o.focusY+=n-o.height),o.height=n)}for(t=this.Kb.iterator;t.next();)e=t.value,e instanceof On&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Kb=new Q,this.isValidLayout=!0};function SL(t){var e=new Q;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}Pt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.ld){case Br:i.sourceEdges.count===0&&this.Kb.add(i);break;case nu:i.destinationEdges.count===0&&this.Kb.add(i);break;default:D("Unhandled path value "+this.ld.toString())}}this.Kb.count===0&&(t=gP(this,t),t!==null&&this.Kb.add(t))};function gP(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.ld){case Br:r.sourceEdges.count<i&&(i=r.sourceEdges.count,n=r);break;case nu:r.destinationEdges.count<i&&(i=r.destinationEdges.count,n=r);break;default:D("Unhandled path value "+t.ld.toString())}}return n}function av(t,e){if(e!==null){switch(t.ld){case Br:if(0<e.destinationEdges.count){for(var i=new it,n=e.destinationVertexes;n.next();){var r=n.value;mP(t,e,r)&&i.add(r)}0<i.count&&(e.children=i.ya())}break;case nu:if(0<e.sourceEdges.count){for(i=new it,n=e.sourceVertexes;n.next();)r=n.value,mP(t,e,r)&&i.add(r);0<i.count&&(e.children=i.ya())}break;default:D("Unhandled path value"+t.ld.toString())}for(i=e.children,n=i.length,r=0;r<n;r++){var o=i[r];o.initialized=!0,o.level=e.level+1,o.parent=e,t.Kb.remove(o)}for(e=0;e<n;e++)av(t,i[e])}}function mP(t,e,i){if(i.initialized){if(e===null)var n=!1;else{for(n=e.parent;n!==null&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}Pt.prototype.removeChild=function(t,e){if(t!==null&&e!==null){for(var i=t.children,n=0,r=0;r<i.length;r++)i[r]===e&&n++;if(0<n){n=Array(i.length-n);for(var o=r=0;o<i.length;o++)i[o]!==e&&(n[r++]=i[o]);t.children=n}}};function vP(t,e){if(e!==null){t.initializeTreeVertexValues(e),e.alignment===Ur&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,r=0,o=e.children,l=o.length,h=0;h<l;h++){var a=o[h];vP(t,a),i+=a.descendantCount+1,n=Math.max(n,a.maxChildrenCount),r=Math.max(r,a.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?r+1:0}}function ML(t,e){switch(t.Ep){default:case Wd:return e.parent!==null?e.parent:t.V;case vv:return e.parent===null?t.V:e.parent.parent===null?t.W:e.parent;case mv:return e.parent!==null?e.parent.parent!==null?e.parent.parent:t.W:t.V;case gv:var i=!0;if(e.childrenCount===0)i=!1;else for(var n=e.children,r=n.length,o=0;o<r;o++)if(0<n[o].childrenCount){i=!1;break}return i&&e.parent!==null?t.W:e.parent!==null?e.parent:t.V}}Pt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(ML(this,t)),t.parent!==null&&t.parent.alignment===Ur){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;n%2===0?n!==i.length-1&&(e=e===90?180:e===180?270:e===270?180:270):e=e===90?0:e===180?90:e===270?0:90,t.angle=e}t.initialized=!0};function xP(t,e){if(e!==null){t.assignTreeVertexValues(e),e=e.children;for(var i=e.length,n=0;n<i;n++)xP(t,e[n])}}Pt.prototype.assignTreeVertexValues=function(){};function wP(t,e){if(e!==null){e.alignment!==Ur&&t.sortTreeVertexChildren(e),e=e.children;for(var i=e.length,n=0;n<i;n++)wP(t,e[n])}}Pt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case Vh:break;case zf:t.children.reverse();break;case Gf:t.children.sort(t.comparer);break;case Yf:t.children.sort(t.comparer),t.children.reverse();break;default:D("Unhandled sorting value "+t.sorting.toString())}},Pt.prototype.vu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Pt.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,r=!1;i!==null&&(n=i.angle,r=i.alignment,r=Ts(r)),e=e===90||e===270,n=n===90||n===270,i=t.childrenCount===0;var o=0,l=0,h=0,a=t.commentSpacing;if(t.node!==null)for(var c=t.node.Nu();c.next();){var p=c.value;p.category==="Comment"&&p.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(p),p.Ta(),p=p.measuredBounds,e&&!i||!r&&!n&&i||r&&n&&i?(o=Math.max(o,p.width),l+=p.height+Math.abs(h)):(o+=p.width+Math.abs(h),l=Math.max(l,p.height)),h=a)}t.comments!==null&&(e&&!i||!r&&!n&&i||r&&n&&i?(o+=Math.abs(t.commentMargin),l=Math.max(0,l-t.height)):(l+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),r=_.allocAt(0,0,t.bounds.width+o,t.bounds.height+l),t.bounds=r,_.free(r))};function Ts(t){return t===Jo||t===Ur||t===Zo||t===go}function Uf(t){return t===Jo||t===Ur}function fv(t){var e=t.parent;if(e!==null){var i=e.alignment;if(Ts(i)){if(Uf(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return i%2===0}if(i===Zo)return!0}}return!1}Pt.prototype.layoutComments=function(t){if(t.comments!==null){var e=t.node.measuredBounds,i=t.parent,n=t.angle,r=0,o=!1;i!==null&&(r=i.angle,o=i.alignment,o=Ts(o)),n=n===90||n===270,i=r===90||r===270;for(var l=t.childrenCount===0,h=fv(t),a=0,c=t.comments,p=c.length,d=N.alloc(),m=0;m<p;m++){var x=c[m],v=x.measuredBounds;if(n&&!l||!o&&!i&&l||o&&i&&l){if(135<r&&!o||i&&h)if(0<=t.commentMargin)for(d.h(t.bounds.x-t.commentMargin-v.width,t.bounds.y+a),x.move(d),x=x.Gd();x.next();){var S=x.value;S.fromSpot=kn,S.toSpot=Xi}else for(d.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+a),x.move(d),x=x.Gd();x.next();)S=x.value,S.fromSpot=Xi,S.toSpot=kn;else if(0<=t.commentMargin)for(d.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+a),x.move(d),x=x.Gd();x.next();)S=x.value,S.fromSpot=Xi,S.toSpot=kn;else for(d.h(t.bounds.x+t.commentMargin-v.width,t.bounds.y+a),x.move(d),x=x.Gd();x.next();)S=x.value,S.fromSpot=kn,S.toSpot=Xi;a=0<=t.commentSpacing?a+(v.height+t.commentSpacing):a+(t.commentSpacing-v.height)}else{if(135<r&&!o||!i&&h)if(0<=t.commentMargin)for(d.h(t.bounds.x+a,t.bounds.y-t.commentMargin-v.height),x.move(d),x=x.Gd();x.next();)S=x.value,S.fromSpot=Mn,S.toSpot=Pn;else for(d.h(t.bounds.x+a,t.bounds.y+2*t.focus.y-t.commentMargin),x.move(d),x=x.Gd();x.next();)S=x.value,S.fromSpot=Pn,S.toSpot=Mn;else if(0<=t.commentMargin)for(d.h(t.bounds.x+a,t.bounds.y+2*t.focus.y+t.commentMargin),x.move(d),x=x.Gd();x.next();)S=x.value,S.fromSpot=Pn,S.toSpot=Mn;else for(d.h(t.bounds.x+a,t.bounds.y+t.commentMargin-v.height),x.move(d),x=x.Gd();x.next();)S=x.value,S.fromSpot=Mn,S.toSpot=Pn;a=0<=t.commentSpacing?a+(v.width+t.commentSpacing):a+(t.commentSpacing-v.width)}}if(N.free(d),e=a-t.commentSpacing-(n?e.height:e.width),this.ld===Br)for(t=t.destinationEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},Pt.prototype.layoutTree=function(t){if(t!==null){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case Xd:SP(this,t);break;case Xf:if(t.alignment===Ur)SP(this,t);else if(t.childrenCount===0)n=t.parent,i=!1,e=0,n!==null&&(e=n.angle,i=n.alignment,i=Ts(i)),n=fv(t),t.U.h(0,0),t.va.h(t.width,t.height),t.parent===null||t.comments===null||(e!==180&&e!==270||i)&&!n?t.fa.h(0,0):e===180&&!i||(e===90||e===270)&&n?t.fa.h(t.width-2*t.focus.x,0):t.fa.h(0,t.height-2*t.focus.y),t.fq=null,t.rq=null;else{var r=Hn(t);e=r===90||r===270;var o=0,l=t.children,h=l.length;for(i=0;i<h;i++)n=l[i],o=Math.max(o,e?n.va.width:n.va.height);var a=t.alignment,c=a===_r,p=Ts(a),d=Math.max(0,t.breadthLimit);i=Bh(t);var m=t.nodeSpacing,x=$o(t),v=t.rowSpacing,S=0;(a===Vr||c||t.rm||t.sm&&t.maxGenerationCount===1)&&(S=Math.max(0,t.rowIndent)),n=t.width;var P=t.height,k=0,L=0,T=0,O=null,E=null,V=0,$=0,b=0,nt=0,et=0,G=0,vt=0,ft=0;if(p&&!Uf(a)&&135<r&&l.reverse(),Uf(a))if(1<h)for(var It=0;It<h;It++)It%2===0&&It!==h-1&&(ft=Math.max(ft,e?l[It].va.width:l[It].va.height));else h===1&&(ft=e?l[0].va.width:l[0].va.height);if(p){switch(a){case Jo:L=135>r?MP(t,l,ft,k,L):kP(t,l,ft,k,L),ft=L.x,k=L.width,L=L.height;break;case Zo:for(O=0;O<h;O++)E=l[O],d=E.va,T=G===0?0:v,e?(E.U.h(o-d.width,nt+T),k=Math.max(k,d.width),L=Math.max(L,nt+T+d.height),nt+=T+d.height):(E.U.h(b+T,o-d.height),k=Math.max(k,b+T+d.width),L=Math.max(L,d.height),b+=T+d.width),G++;break;case go:for(O=0;O<h;O++)E=l[O],o=E.va,d=G===0?0:v,e?(E.U.h(m/2+t.focus.x,nt+d),k=Math.max(k,o.width),L=Math.max(L,nt+d+o.height),nt+=d+o.height):(E.U.h(b+d,m/2+t.focus.y),k=Math.max(k,b+d+o.width),L=Math.max(L,o.height),b+=d+o.width),G++}O=Ri(this,2),E=Ri(this,2),e?(O[0].h(0,0),O[1].h(0,L),E[0].h(k,0)):(O[0].h(0,0),O[1].h(k,0),E[0].h(0,L)),E[1].h(k,L)}else for(It=0;It<h;It++){var Kt=l[It],Se=Kt.va;if(e){0<d&&0<G&&b+m+Se.width>d&&(b<o&&nl(t,a,o-b,0,vt,It-1),et++,G=0,vt=It,T=L,b=0,nt=135<r?-L-v:L+v),zd(this,Kt,0,nt);var Qt=0;if(G===0)O=Kt.fq,E=Kt.rq,V=Se.width,$=Se.height,(O===null||E===null||r!==Hn(Kt))&&(O=Ri(this,2),E=Ri(this,2),O[0].h(0,0),O[1].h(0,$),E[0].h(V,0),E[1].h(V,$));else{var $t=Et();$=PP(this,t,Kt,O,E,V,$,$t),Qt=$.x,O=$t[0],E=$t[1],V=$.width,$=$.height,Ut($t),b<Se.width&&0>Qt&&(iu(t,-Qt,0,vt,It-1),Gd(O,-Qt,0),Gd(E,-Qt,0),Qt=0)}Kt.U.h(Qt,nt),k=Math.max(k,V),L=Math.max(L,T+(et===0?0:v)+Se.height),b=V}else 0<d&&0<G&&nt+m+Se.height>d&&(nt<o&&nl(t,a,0,o-nt,vt,It-1),et++,G=0,vt=It,T=k,nt=0,b=135<r?-k-v:k+v),zd(this,Kt,b,0),Qt=0,G===0?(O=Kt.fq,E=Kt.rq,V=Se.width,$=Se.height,(O===null||E===null||r!==Hn(Kt))&&(O=Ri(this,2),E=Ri(this,2),O[0].h(0,0),O[1].h(V,0),E[0].h(0,$),E[1].h(V,$))):($t=Et(),$=PP(this,t,Kt,O,E,V,$,$t),Qt=$.x,O=$t[0],E=$t[1],V=$.width,$=$.height,Ut($t),nt<Se.height&&0>Qt&&(iu(t,0,-Qt,vt,It-1),Gd(O,0,-Qt),Gd(E,0,-Qt),Qt=0)),Kt.U.h(b,Qt),L=Math.max(L,$),k=Math.max(k,T+(et===0?0:v)+Se.width),nt=$;G++}switch(0<et&&(e?(L+=Math.max(0,i),b<k&&nl(t,a,k-b,0,vt,h-1),0<S&&(c||iu(t,S,0,0,h-1),k+=S)):(k+=Math.max(0,i),nt<L&&nl(t,a,0,L-nt,vt,h-1),0<S&&(c||iu(t,0,S,0,h-1),L+=S))),S=c=0,a){case _h:e?c+=k/2-t.focus.x-x/2:S+=L/2-t.focus.y-x/2;break;case ru:0<et?e?c+=k/2-t.focus.x-x/2:S+=L/2-t.focus.y-x/2:e?(ft=l[0].U.x+l[0].fa.x,c+=ft+(l[h-1].U.x+l[h-1].fa.x+2*l[h-1].focus.x-ft)/2-t.focus.x-x/2):(ft=l[0].U.y+l[0].fa.y,S+=ft+(l[h-1].U.y+l[h-1].fa.y+2*l[h-1].focus.y-ft)/2-t.focus.y-x/2);break;case Vr:e?(c-=x,k+=x):(S-=x,L+=x);break;case _r:e?(c+=k-t.width+x,k+=x):(S+=L-t.height+x,L+=x);break;case Jo:e?1<h?c+=ft+m/2-t.focus.x:c+=l[0].focus.x-t.focus.x+l[0].fa.x:1<h?S+=ft+m/2-t.focus.y:S+=l[0].focus.y-t.focus.y+l[0].fa.y;break;case Zo:e?c+=k+m/2-t.focus.x:S+=L+m/2-t.focus.y;break;case go:break;default:D("Unhandled alignment value "+a.toString())}for(x=0;x<h;x++)ft=l[x],e?ft.U.h(ft.U.x+ft.fa.x-c,ft.U.y+(135<r?(p?-L:-ft.va.height)+ft.fa.y-i:P+i+ft.fa.y)):ft.U.h(ft.U.x+(135<r?(p?-k:-ft.va.width)+ft.fa.x-i:n+i+ft.fa.x),ft.U.y+ft.fa.y-S);if(h=l=0,p?e?(k=cv(t,k,c),0>c&&(c=0),135<r&&(S+=L+i),L+=P+i,a===go&&(l+=m/2+t.focus.x),h+=P+i):(135<r&&(c+=k+i),k+=n+i,L=pv(t,L,S),0>S&&(S=0),a===go&&(h+=m/2+t.focus.y),l+=n+i):e?(t.comments===null?n>k&&(k=dv(a,n-k,0),l=k.x,h=k.y,k=n,c=0):k=cv(t,k,c),0>c&&(l-=c,c=0),135<r&&(S+=L+i),L=Math.max(Math.max(L,P),L+P+i),h+=P+i):(135<r&&(c+=k+i),k=Math.max(Math.max(k,n),k+n+i),t.comments===null?P>L&&(L=dv(a,0,P-L),l=L.x,h=L.y,L=P,S=0):L=pv(t,L,S),0>S&&(h-=S,S=0),l+=n+i),0<et)r=Ri(this,4),et=Ri(this,4),e?(r[2].h(0,P+i),r[3].h(r[2].x,L),et[2].h(k,r[2].y),et[3].h(et[2].x,r[3].y)):(r[2].h(n+i,0),r[3].h(k,r[2].y),et[2].h(r[2].x,L),et[3].h(r[3].x,et[2].y));else{for(r=Ri(this,O.length+2),et=Ri(this,E.length+2),a=0;a<O.length;a++)p=O[a],r[a+2].h(p.x+l,p.y+h);for(a=0;a<E.length;a++)p=E[a],et[a+2].h(p.x+l,p.y+h)}e?(r[0].h(c,0),r[1].h(r[0].x,P),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),et[0].h(c+n,0),et[1].h(et[0].x,P),et[2].y<et[1].y&&(et[2].x<et[0].x?et[2].assign(et[1]):et[1].assign(et[2])),et[3].y<et[2].y&&(et[3].x<et[0].x?et[3].assign(et[2]):et[2].assign(et[3])),r[2].y-=i/2,et[2].y-=i/2):(r[0].h(0,S),r[1].h(n,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),et[0].h(0,S+P),et[1].h(n,et[0].y),et[2].x<et[1].x&&(et[2].y<et[0].y?et[2].assign(et[1]):et[1].assign(et[2])),et[3].x<et[2].x&&(et[3].y<et[0].y?et[3].assign(et[2]):et[2].assign(et[3])),r[2].x-=i/2,et[2].x-=i/2),sr(this,O),sr(this,E),t.fq=r,t.rq=et,t.fa.h(c,S),t.va.h(k,L)}break;default:D("Unhandled compaction value "+t.compaction.toString())}}};function SP(t,e){if(e.childrenCount===0){var i=!1,n=0;e.parent!==null&&(n=e.parent.angle,i=e.parent.alignment,i=Ts(i));var r=fv(e);e.U.h(0,0),e.va.h(e.width,e.height),e.parent===null||e.comments===null||(n!==180&&n!==270||i)&&!r?e.fa.h(0,0):n===180&&!i||(n===90||n===270)&&r?e.fa.h(e.width-2*e.focus.x,0):e.fa.h(0,e.height-2*e.focus.y)}else{n=Hn(e),i=n===90||n===270;var o=0;r=e.children;for(var l=r.length,h=0;h<l;h++){var a=r[h];o=Math.max(o,i?a.va.width:a.va.height)}var c=e.alignment,p=c===Vr,d=c===_r;h=Ts(c);var m=Math.max(0,e.breadthLimit);a=Bh(e);var x=e.nodeSpacing,v=$o(e),S=p||d?0:v/2,P=e.rowSpacing,k=0;(p||d||e.rm||e.sm&&e.maxGenerationCount===1)&&(k=Math.max(0,e.rowIndent)),p=e.width;var L=e.height,T=0,O=0,E=0,V=0,$=0,b=0,nt=0,et=0,G=0;if(h&&!Uf(c)&&135<n&&r.reverse(),Uf(c))if(1<l)for(var vt=0;vt<l;vt++){var ft=r[vt],It=ft.va;vt%2===0&&vt!==l-1&&(G=Math.max(G,(i?It.width:It.height)+Ls(ft)-x))}else l===1&&(G=i?r[0].va.width:r[0].va.height);if(h)switch(c){case Jo:case Ur:O=135>n?MP(e,r,G,T,O):kP(e,r,G,T,O),G=O.x,T=O.width,O=O.height;break;case Zo:for(t=0;t<l;t++)m=r[t],S=m.va,E=nt===0?0:P,i?(m.U.h(o-S.width,$+E),T=Math.max(T,S.width),O=Math.max(O,$+E+S.height),$+=E+S.height):(m.U.h(V+E,o-S.height),T=Math.max(T,V+E+S.width),O=Math.max(O,S.height),V+=E+S.width),nt++;break;case go:for(o=0;o<l;o++)t=r[o],m=t.va,S=nt===0?0:P,i?(t.U.h(x/2+e.focus.x,$+S),T=Math.max(T,m.width),O=Math.max(O,$+S+m.height),$+=S+m.height):(t.U.h(V+S,x/2+e.focus.y),T=Math.max(T,V+S+m.width),O=Math.max(O,m.height),V+=S+m.width),nt++}else for(vt=0;vt<l;vt++){if(ft=r[vt],It=ft.va,i){0<m&&0<nt&&V+x+It.width>m&&(V<o&&nl(e,c,o-V,0,et,vt-1),b++,nt=0,et=vt,E=O,V=0,$=135<n?-O-P:O+P);var Kt=nt===0?S:x;zd(t,ft,0,$),ft.U.h(V+Kt,$),T=Math.max(T,V+Kt+It.width),O=Math.max(O,E+(b===0?0:P)+It.height),V+=Kt+It.width}else 0<m&&0<nt&&$+x+It.height>m&&($<o&&nl(e,c,0,o-$,et,vt-1),b++,nt=0,et=vt,E=T,$=0,V=135<n?-T-P:T+P),Kt=nt===0?S:x,zd(t,ft,V,0),ft.U.h(V,$+Kt),O=Math.max(O,$+Kt+It.height),T=Math.max(T,E+(b===0?0:P)+It.width),$+=Kt+It.height;nt++}switch(0<b&&(i?(O+=Math.max(0,a),V<T&&nl(e,c,T-V,0,et,l-1),0<k&&(d||iu(e,k,0,0,l-1),T+=k)):(T+=Math.max(0,a),$<O&&nl(e,c,0,O-$,et,l-1),0<k&&(d||iu(e,0,k,0,l-1),O+=k))),k=d=0,c){case _h:i?d+=T/2-e.focus.x-v/2:k+=O/2-e.focus.y-v/2;break;case ru:0<b?i?d+=T/2-e.focus.x-v/2:k+=O/2-e.focus.y-v/2:i?(c=r[0].U.x+r[0].fa.x,d+=c+(r[l-1].U.x+r[l-1].fa.x+2*r[l-1].focus.x-c)/2-e.focus.x-v/2):(c=r[0].U.y+r[0].fa.y,k+=c+(r[l-1].U.y+r[l-1].fa.y+2*r[l-1].focus.y-c)/2-e.focus.y-v/2);break;case Vr:i?(d-=v,T+=v):(k-=v,O+=v);break;case _r:i?(d+=T-e.width+v,T+=v):(k+=O-e.height+v,O+=v);break;case Jo:case Ur:i?1<l?d+=G+x/2-e.focus.x:d+=r[0].focus.x-e.focus.x+r[0].fa.x:1<l?k+=G+x/2-e.focus.y:k+=r[0].focus.y-e.focus.y+r[0].fa.y;break;case Zo:i?d+=T+x/2-e.focus.x:k+=O+x/2-e.focus.y;break;case go:break;default:D("Unhandled alignment value "+c.toString())}for(v=0;v<l;v++)c=r[v],i?c.U.h(c.U.x+c.fa.x-d,c.U.y+(135<n?(h?-O:-c.va.height)+c.fa.y-a:L+a+c.fa.y)):c.U.h(c.U.x+(135<n?(h?-T:-c.va.width)+c.fa.x-a:p+a+c.fa.x),c.U.y+c.fa.y-k);i?(T=cv(e,T,d),0>d&&(d=0),135<n&&(k+=O+a),O=Math.max(Math.max(O,L),O+L+a)):(135<n&&(d+=T+a),T=Math.max(Math.max(T,p),T+p+a),O=pv(e,O,k),0>k&&(k=0)),e.fa.h(d,k),e.va.h(T,O)}}function MP(t,e,i,n,r){var o=e.length;if(o===0)return new _(i,0,n,r);if(o===1)return t=e[0],n=t.va.width,r=t.va.height,new _(i,0,n,r);for(var l=t.nodeSpacing,h=t.rowSpacing,a=Hn(t)===90,c=0,p=0,d=0,m=0;m<o;m++)if(!(m%2!==0||1<o&&m===o-1)){var x=e[m],v=x.va,S=c===0?0:h;if(a){var P=Ls(x)-l;x.U.h(i-(v.width+P),d+S),n=Math.max(n,v.width+P),r=Math.max(r,d+S+v.height),d+=S+v.height}else P=Ls(x)-l,x.U.h(p+S,i-(v.height+P)),r=Math.max(r,v.height+P),n=Math.max(n,p+S+v.width),p+=S+v.width;c++}for(c=0,x=p,m=d,a?(p=i+l,d=0):(p=0,d=i+l),v=0;v<o;v++)if(v%2!==0){S=e[v],P=S.va;var k=c===0?0:h;if(a){var L=Ls(S)-l;S.U.h(p+L,d+k),n=Math.max(n,p+P.width+L),r=Math.max(r,d+k+P.height),d+=k+P.height}else L=Ls(S)-l,S.U.h(p+k,d+L),n=Math.max(n,p+k+P.width),r=Math.max(r,d+P.height+L),p+=k+P.width;c++}return 1<o&&o%2===1&&(e=e[o-1],o=e.va,h=e.parent===null?0:e.parent.rowSpacing,a?(e.U.h(i+l/2-e.focus.x-e.fa.x,r+h),a=i+l/2-e.focus.x-e.fa.x,n=Math.max(n,a+o.width),0>a&&(n-=a),r=Math.max(r,Math.max(m,d)+h+o.height),0>e.U.x&&(i=Ud(t,e.U.x,!1,i,l))):(e.U.h(n+h,i+l/2-e.focus.y-e.fa.y),n=Math.max(n,Math.max(x,p)+h+o.width),d=i+l/2-e.focus.y-e.fa.y,r=Math.max(r,d+o.height),0>d&&(r-=d),0>e.U.y&&(i=Ud(t,e.U.y,!0,i,l)))),new _(i,0,n,r)}function kP(t,e,i,n,r){var o=e.length;if(o===0)return new _(i,0,n,r);if(o===1)return e=e[0],n=e.va.width,r=e.va.height,new _(i,0,n,r);for(var l=t.nodeSpacing,h=t.rowSpacing,a=Hn(t)===270,c=0,p=0,d=0,m=0;m<o;m++)if(!(m%2!==0||1<o&&m===o-1)){var x=e[m],v=x.va,S=c===0?0:h;if(a){var P=Ls(x)-l;d-=S+v.height,x.U.h(i-(v.width+P),d),n=Math.max(n,v.width+P),r=Math.max(r,Math.abs(d))}else P=Ls(x)-l,p-=S+v.width,x.U.h(p,i-(v.height+P)),r=Math.max(r,v.height+P),n=Math.max(n,Math.abs(p));c++}for(c=0,x=p,m=d,a?(p=i+l,d=0):(p=0,d=i+l),v=0;v<o;v++)if(v%2!==0){S=e[v],P=S.va;var k=c===0?0:h;if(a){var L=Ls(S)-l;d-=k+P.height,S.U.h(p+L,d),n=Math.max(n,p+P.width+L),r=Math.max(r,Math.abs(d))}else L=Ls(S)-l,p-=k+P.width,S.U.h(p,d+L),r=Math.max(r,d+P.height+L),n=Math.max(n,Math.abs(p));c++}for(1<o&&o%2===1&&(h=e[o-1],c=h.va,v=h.parent===null?0:h.parent.rowSpacing,a?(h.U.h(i+l/2-h.focus.x-h.fa.x,-r-c.height-v),p=i+l/2-h.focus.x-h.fa.x,n=Math.max(n,p+c.width),0>p&&(n-=p),r=Math.max(r,Math.abs(Math.min(m,d))+v+c.height),0>h.U.x&&(i=Ud(t,h.U.x,!1,i,l))):(h.U.h(-n-c.width-v,i+l/2-h.focus.y-h.fa.y),n=Math.max(n,Math.abs(Math.min(x,p))+v+c.width),d=i+l/2-h.focus.y-h.fa.y,r=Math.max(r,d+c.height),0>d&&(r-=d),0>h.U.y&&(i=Ud(t,h.U.y,!0,i,l)))),t=0;t<o;t++)l=e[t],a?l.U.h(l.U.x,l.U.y+r):l.U.h(l.U.x+n,l.U.y);return new _(i,0,n,r)}function Ls(t){return t.parent===null?0:t.parent.nodeSpacing}function Ud(t,e,i,n,r){t=t.children;for(var o=t.length,l=0;l<o;l++)i?t[l].U.h(t[l].U.x,t[l].U.y-e):t[l].U.h(t[l].U.x-e,t[l].U.y);return e=t[o-1],Math.max(n,i?e.fa.y+e.focus.y-r/2:e.fa.x+e.focus.x-r/2)}function cv(t,e,i){switch(t.alignment){case ru:case _h:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case Vr:return t.width>e?t.width:e;case _r:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case Jo:case Ur:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case Zo:return t.width-t.focus.x+t.nodeSpacing/2+e;case go:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function pv(t,e,i){switch(t.alignment){case ru:case _h:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case Vr:return t.height>e?t.height:e;case _r:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case Jo:case Ur:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case Zo:return t.height-t.focus.y+t.nodeSpacing/2+e;case go:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function dv(t,e,i){switch(t){case _h:e/=2,i/=2;break;case ru:e/=2,i/=2;break;case Vr:i=e=0;break;case _r:break;default:D("Unhandled alignment value "+t.toString())}return new N(e,i)}function nl(t,e,i,n,r,o){e=dv(e,i,n),iu(t,e.x,e.y,r,o)}function iu(t,e,i,n,r){if(e!==0||i!==0)for(t=t.children;n<=r;n++){var o=t[n].U;o.x+=e,o.y+=i}}function zd(t,e,i,n){var r=e.parent;switch(t.ld){case Br:for(t=e.sourceEdges;t.next();)e=t.value,e.fromVertex===r&&e.relativePoint.h(i,n);break;case nu:for(t=e.destinationEdges;t.next();)e=t.value,e.toVertex===r&&e.relativePoint.h(i,n);break;default:D("Unhandled path value "+t.ld.toString())}}function Gd(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];r.x+=e,r.y+=i}}function PP(t,e,i,n,r,o,l,h){var a=Hn(e),c=a===90||a===270,p=e.nodeSpacing;e=n;var d=r;n=o;var m=l,x=i.fq,v=i.rq;l=i.va;var S=c?Math.max(m,l.height):Math.max(n,l.width);if((x===null||a!==Hn(i))&&(x=Ri(t,2),v=Ri(t,2),c?(x[0].h(0,0),x[1].h(0,l.height),v[0].h(l.width,0),v[1].h(v[0].x,x[1].y)):(x[0].h(0,0),x[1].h(l.width,0),v[0].h(0,l.height),v[1].h(x[1].x,v[0].y))),c){if(m=9999999,!(d===null||2>d.length||x===null||2>x.length))for(r=i=0;i<d.length&&r<x.length;){o=d[i];var P=x[r];a=P.x,c=P.y,a+=n;var k=o;i+1<d.length&&(k=d[i+1]);var L=P;P=L.x,L=L.y,r+1<x.length&&(L=x[r+1],P=L.x,L=L.y,P+=n);var T=m;o.y===c?T=a-o.x:o.y>c&&o.y<L?T=a+(o.y-c)/(L-c)*(P-a)-o.x:c>o.y&&c<k.y&&(T=a-(o.x+(c-o.y)/(k.y-o.y)*(k.x-o.x))),T<m&&(m=T),k.y<=o.y?i++:L<=c?r++:(k.y<=L&&i++,L<=k.y&&r++)}if(m=n-m,m+=p,i=x,r=m,e===null||2>e.length||i===null||2>i.length)n=null;else{for(p=Ri(t,e.length+i.length),n=o=a=0;o<i.length&&i[o].y<e[0].y;)c=i[o++],p[n++].h(c.x+r,c.y);for(;a<e.length;)c=e[a++],p[n++].h(c.x,c.y);for(a=e[e.length-1].y;o<i.length&&i[o].y<=a;)o++;for(;o<i.length&&i[o].y>a;)c=i[o++],p[n++].h(c.x+r,c.y);for(i=Ri(t,n),a=0;a<n;a++)i[a].assign(p[a]);sr(t,p),n=i}if(o=v,a=m,d===null||2>d.length||o===null||2>o.length)r=null;else{for(p=Ri(t,d.length+o.length),r=c=i=0;i<d.length&&d[i].y<o[0].y;)k=d[i++],p[r++].h(k.x,k.y);for(;c<o.length;)k=o[c++],p[r++].h(k.x+a,k.y);for(o=o[o.length-1].y;i<d.length&&d[i].y<=o;)i++;for(;i<d.length&&d[i].y>o;)a=d[i++],p[r++].h(a.x,a.y);for(o=Ri(t,r),i=0;i<r;i++)o[i].assign(p[i]);sr(t,p),r=o}return o=Math.max(0,m)+l.width,l=S,sr(t,e),sr(t,x),sr(t,d),sr(t,v),h[0]=n,h[1]=r,new _(m,0,o,l)}if(n=9999999,!(d===null||2>d.length||x===null||2>x.length))for(r=i=0;i<d.length&&r<x.length;)o=d[i],P=x[r],a=P.x,c=P.y,c+=m,k=o,i+1<d.length&&(k=d[i+1]),L=P,P=L.x,L=L.y,r+1<x.length&&(L=x[r+1],P=L.x,L=L.y,L+=m),T=n,o.x===a?T=c-o.y:o.x>a&&o.x<P?T=c+(o.x-a)/(P-a)*(L-c)-o.y:a>o.x&&a<k.x&&(T=c-(o.y+(a-o.x)/(k.x-o.x)*(k.y-o.y))),T<n&&(n=T),k.x<=o.x?i++:P<=a?r++:(k.x<=P&&i++,P<=k.x&&r++);if(m-=n,m+=p,i=x,r=m,e===null||2>e.length||i===null||2>i.length)n=null;else{for(p=Ri(t,e.length+i.length),n=o=a=0;o<i.length&&i[o].x<e[0].x;)c=i[o++],p[n++].h(c.x,c.y+r);for(;a<e.length;)c=e[a++],p[n++].h(c.x,c.y);for(a=e[e.length-1].x;o<i.length&&i[o].x<=a;)o++;for(;o<i.length&&i[o].x>a;)c=i[o++],p[n++].h(c.x,c.y+r);for(i=Ri(t,n),a=0;a<n;a++)i[a].assign(p[a]);sr(t,p),n=i}if(o=v,a=m,d===null||2>d.length||o===null||2>o.length)r=null;else{for(p=Ri(t,d.length+o.length),r=c=i=0;i<d.length&&d[i].x<o[0].x;)k=d[i++],p[r++].h(k.x,k.y);for(;c<o.length;)k=o[c++],p[r++].h(k.x,k.y+a);for(o=o[o.length-1].x;i<d.length&&d[i].x<=o;)i++;for(;i<d.length&&d[i].x>o;)a=d[i++],p[r++].h(a.x,a.y);for(o=Ri(t,r),i=0;i<r;i++)o[i].assign(p[i]);sr(t,p),r=o}return o=S,l=Math.max(0,m)+l.height,sr(t,e),sr(t,x),sr(t,d),sr(t,v),h[0]=n,h[1]=r,new _(m,0,o,l)}function Ri(t,e){if(t=t.ku[e],t!==void 0&&(t=t.pop(),t!==void 0))return t;t=[];for(var i=0;i<e;i++)t[i]=new N;return t}function sr(t,e){var i=e.length,n=t.ku[i];n===void 0&&(n=[],t.ku[i]=n),n.push(e)}Pt.prototype.arrangeTrees=function(){if(this.Hb===Kd)for(var t=this.Kb.iterator;t.next();){var e=t.value;if(e instanceof On){var i=e.node;if(i!==null){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),yv(this,e,i,n)}}}else{for(t=[],e=this.Kb.iterator;e.next();)i=e.value,i instanceof On&&t.push(i);switch(this.sorting){case Vh:break;case zf:t.reverse();break;case Gf:t.sort(this.comparer);break;case Yf:t.sort(this.comparer),t.reverse();break;default:D("Unhandled sorting value "+this.sorting.toString())}for(i=this.arrangementOrigin,e=i.x,i=i.y,n=0;n<t.length;n++){var r=t[n];switch(yv(this,r,e+r.fa.x,i+r.fa.y),this.Hb){case Hd:i+=r.va.height+this.Qd.height;break;case xv:e+=r.va.width+this.Qd.width;break;default:D("Unhandled arrangement value "+this.Hb.toString())}}}};function yv(t,e,i,n){if(e!==null){e.x=i,e.y=n,e=e.children;for(var r=e.length,o=0;o<r;o++){var l=e[o];yv(t,l,i+l.U.x,n+l.U.y)}}}Pt.prototype.commitLayout=function(){this.Iv(),this.commitNodes(),this.Bu(),this.isRouting&&this.commitLinks()},Pt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Pt.prototype.Bu=function(){if(this.layerStyle===$d){for(var t=this.Aw,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var r=n.value;i===null?i=r.bounds.copy():i.Qc(r.bounds);var o=e[r.level];o===void 0?o=Bh(r):o=Math.max(o,Bh(r)),e[r.level]=o}for(n=0;n<e.length;n++)e[n]===void 0&&(e[n]=0);if(this.angle===90||this.angle===270?(i.Jc(this.nodeSpacing/2,this.layerSpacing),n=new N(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Jc(this.layerSpacing,this.nodeSpacing/2),n=new N(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],i=this.angle===90||this.angle===270?i.width:i.height,o=0,this.angle===180||this.angle===270)for(var l=0;l<t.length;l++)o+=t[l]+e[l];for(l=0;l<t.length;l++){var h=t[l]+e[l];this.angle===270?(o-=h,r.push(new _(0,o,i,h))):this.angle===90?(r.push(new _(0,o,i,h)),o+=h):this.angle===180?(o-=h,r.push(new _(o,0,h,i))):(r.push(new _(o,0,h,i)),o+=h)}this.commitLayers(r,n)}},Pt.prototype.commitLayers=function(){},Pt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Pt.prototype.Iv=function(){for(var t=this.Kb.iterator;t.next();){var e=t.value;e instanceof On&&CP(this,e)}};function CP(t,e){if(e!==null){t.setPortSpots(e),e=e.children;for(var i=e.length,n=0;n<i;n++)CP(t,e[n])}}Pt.prototype.setPortSpots=function(t){var e=t.alignment;if(Ts(e)){var i=this.ld===Br,n=Hn(t);switch(n){case 0:var r=Xi;break;case 90:r=Pn;break;case 180:r=kn;break;default:r=Mn}var o=t.children,l=o.length;switch(e){case Jo:case Ur:for(e=0;e<l;e++){var h=o[e];if(h=(i?h.sourceEdges:h.destinationEdges).first(),h!==null&&(h=h.link,h!==null)){var a=n===90||n===270?kn:Mn;if(l===1||e===l-1&&l%2===1)switch(n){case 0:a=kn;break;case 90:a=Mn;break;case 180:a=Xi;break;default:a=Pn}else e%2===0&&(a=n===90||n===270?Xi:Pn);i?(t.setsPortSpot&&(h.fromSpot=r),t.setsChildPortSpot&&(h.toSpot=a)):(t.setsPortSpot&&(h.fromSpot=a),t.setsChildPortSpot&&(h.toSpot=r))}}break;case Zo:for(n=n===90||n===270?Xi:Pn,o=i?t.destinationEdges:t.sourceEdges;o.next();)l=o.value.link,l!==null&&(i?(t.setsPortSpot&&(l.fromSpot=r),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=r)));break;case go:for(n=n===90||n===270?kn:Mn,o=i?t.destinationEdges:t.sourceEdges;o.next();)l=o.value.link,l!==null&&(i?(t.setsPortSpot&&(l.fromSpot=r),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=r)))}}else if(i=Hn(t),this.ld===Br){for(r=t.destinationEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.Mb())switch(i){case 0:n.fromSpot=Xi;break;case 90:n.fromSpot=Pn;break;case 180:n.fromSpot=kn;break;default:n.fromSpot=Mn}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(i){case 0:n.toSpot=kn;break;case 90:n.toSpot=Mn;break;case 180:n.toSpot=Xi;break;default:n.toSpot=Pn}else n.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.Mb())switch(i){case 0:n.toSpot=Xi;break;case 90:n.toSpot=Pn;break;case 180:n.toSpot=kn;break;default:n.toSpot=Mn}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(i){case 0:n.fromSpot=kn;break;case 90:n.fromSpot=Mn;break;case 180:n.fromSpot=Xi;break;default:n.fromSpot=Pn}else n.fromSpot=t.childPortSpot}};function Hn(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function Bh(t){var e=Hn(t);e=e===90||e===270;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i}function $o(t){var e=Hn(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=e===90||e===270?t.width*n:t.height*n}return i=Math.max(0,i)}Y.Object.defineProperties(Pt.prototype,{roots:{get:function(){return this.Kb},set:function(t){this.Kb!==t&&(this.Kb=t,this.B())}},path:{get:function(){return this.Mo},set:function(t){this.Mo!==t&&(this.Mo=t,this.B())}},treeStyle:{get:function(){return this.Ep},set:function(t){this.Hb===t||t!==Wd&&t!==mv&&t!==gv&&t!==vv||(this.Ep=t,this.B())}},layerStyle:{get:function(){return this.tr},set:function(t){this.Hb===t||t!==wv&&t!==Sv&&t!==$d||(this.tr=t,this.B())}},comments:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t,this.B())}},arrangement:{get:function(){return this.Hb},set:function(t){this.Hb===t||t!==Hd&&t!==xv&&t!==Kd||(this.Hb=t,this.B())}},arrangementSpacing:{get:function(){return this.Qd},set:function(t){this.Qd.A(t)||(this.Qd.assign(t),this.B())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.B())}},alternateDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.B())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==Vh&&t!==zf&&t!==Gf&&!Yf||(this.V.sorting=t,this.B())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.B())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(t===0||t===90||t===180||t===270?(this.V.angle=t,this.B()):D("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.B())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.B())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.B())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.B())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.B())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.B())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==Xd&&t!==Xf||(this.V.compaction=t,this.B())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.B())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.B())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.B())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.B())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.B())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.B())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.A(t)||(this.V.portSpot=t,this.B())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.B())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.A(t)||(this.V.childPortSpot=t,this.B())}},alternateSorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==Vh&&t!==zf&&t!==Gf&&!Yf||(this.W.sorting=t,this.B())}},alternateComparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.B())}},alternateAngle:{get:function(){return this.W.angle},set:function(t){this.W.angle===t||t!==0&&t!==90&&t!==180&&t!==270||(this.W.angle=t,this.B())}},alternateAlignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.B())}},alternateNodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.B())}},alternateNodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.B())}},alternateNodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.B())}},alternateLayerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.B())}},alternateLayerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.B())}},alternateCompaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==Xd&&t!==Xf||(this.W.compaction=t,this.B())}},alternateBreadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.B())}},alternateRowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.B())}},alternateRowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.B())}},alternateCommentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.B())}},alternateCommentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.B())}},alternateSetsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.B())}},alternatePortSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.A(t)||(this.W.portSpot=t,this.B())}},alternateSetsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.B())}},alternateChildPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.A(t)||(this.W.childPortSpot=t,this.B())}}});var Yd=new K(Pt,"PathDefault",-1),Br=new K(Pt,"PathDestination",0),nu=new K(Pt,"PathSource",1),Vh=new K(Pt,"SortingForwards",10),zf=new K(Pt,"SortingReverse",11),Gf=new K(Pt,"SortingAscending",12),Yf=new K(Pt,"SortingDescending",13),_h=new K(Pt,"AlignmentCenterSubtrees",20),ru=new K(Pt,"AlignmentCenterChildren",21),Vr=new K(Pt,"AlignmentStart",22),_r=new K(Pt,"AlignmentEnd",23),Jo=new K(Pt,"AlignmentBus",24),Ur=new K(Pt,"AlignmentBusBranching",25),Zo=new K(Pt,"AlignmentTopLeftBus",26),go=new K(Pt,"AlignmentBottomRightBus",27),Xd=new K(Pt,"CompactionNone",30),Xf=new K(Pt,"CompactionBlock",31),Wd=new K(Pt,"StyleLayered",40),gv=new K(Pt,"StyleLastParents",41),mv=new K(Pt,"StyleAlternating",42),vv=new K(Pt,"StyleRootOnly",43),Hd=new K(Pt,"ArrangementVertical",50),xv=new K(Pt,"ArrangementHorizontal",51),Kd=new K(Pt,"ArrangementFixedRoots",52),wv=new K(Pt,"LayerIndividual",60),Sv=new K(Pt,"LayerSiblings",61),$d=new K(Pt,"LayerUniform",62);Pt.className="TreeLayout",Pt.PathDefault=Yd,Pt.PathDestination=Br,Pt.PathSource=nu,Pt.SortingForwards=Vh,Pt.SortingReverse=zf,Pt.SortingAscending=Gf,Pt.SortingDescending=Yf,Pt.AlignmentCenterSubtrees=_h,Pt.AlignmentCenterChildren=ru,Pt.AlignmentStart=Vr,Pt.AlignmentEnd=_r,Pt.AlignmentBus=Jo,Pt.AlignmentBusBranching=Ur,Pt.AlignmentTopLeftBus=Zo,Pt.AlignmentBottomRightBus=go,Pt.CompactionNone=Xd,Pt.CompactionBlock=Xf,Pt.StyleLayered=Wd,Pt.StyleLastParents=gv,Pt.StyleAlternating=mv,Pt.StyleRootOnly=vv,Pt.ArrangementVertical=Hd,Pt.ArrangementHorizontal=xv,Pt.ArrangementFixedRoots=Kd,Pt.LayerIndividual=wv,Pt.LayerSiblings=Sv,Pt.LayerUniform=$d;function ou(t){Xt.call(this,t)}z(ou,Xt),ou.prototype.createVertex=function(){return new On(this)},ou.prototype.createEdge=function(){return new Uh(this)},ou.className="TreeNetwork";function On(t){pe.call(this,t),this.wa=!1,this.Gb=null,this.D=[],this.Qb=this.Ma=this.L=this.Ba=0,this.jd=null,this.U=new N(0,0),this.va=new yt(0,0),this.fa=new N(0,0),this.sm=this.rm=this.MA=!1,this.rq=this.fq=null,this.$c=Vh,this.Sc=G0,this.zb=0,this.yb=ru,this.Cr=this.Br=0,this.Dr=20,this.be=50,this.sr=0,this.Lq=Xf,this.Eq=0,this.Mr=25,this.Kq=this.Lr=10,this.Jq=20,this.Qr=!0,this.Ir=Pi,this.Pr=!0,this.Hq=Pi}z(On,pe),On.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.$c=t.sorting,this.Sc=t.comparer,this.zb=t.angle,this.yb=t.alignment,this.Br=t.nodeIndent,this.Cr=t.nodeIndentPastParent,this.Dr=t.nodeSpacing,this.be=t.layerSpacing,this.sr=t.layerSpacingParentOverlap,this.Lq=t.compaction,this.Eq=t.breadthLimit,this.Mr=t.rowSpacing,this.Lr=t.rowIndent,this.Kq=t.commentSpacing,this.Jq=t.commentMargin,this.Qr=t.setsPortSpot,this.Ir=t.portSpot,this.Pr=t.setsChildPortSpot,this.Hq=t.childPortSpot)},Y.Object.defineProperties(On.prototype,{initialized:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}},parent:{get:function(){return this.Gb},set:function(t){this.Gb!==t&&(this.Gb=t)}},children:{get:function(){return this.D},set:function(t){if(this.D!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.D=t}}},level:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},descendantCount:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}},maxChildrenCount:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},maxGenerationCount:{get:function(){return this.Qb},set:function(t){this.Qb!==t&&(this.Qb=t)}},comments:{get:function(){return this.jd},set:function(t){if(this.jd!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.jd=t}}},sorting:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t)}},angle:{get:function(){return this.zb},set:function(t){this.zb!==t&&(this.zb=t)}},alignment:{get:function(){return this.yb},set:function(t){this.yb!==t&&(this.yb=t)}},nodeIndent:{get:function(){return this.Br},set:function(t){this.Br!==t&&(this.Br=t)}},nodeIndentPastParent:{get:function(){return this.Cr},set:function(t){this.Cr!==t&&(this.Cr=t)}},nodeSpacing:{get:function(){return this.Dr},set:function(t){this.Dr!==t&&(this.Dr=t)}},layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&(this.be=t)}},layerSpacingParentOverlap:{get:function(){return this.sr},set:function(t){this.sr!==t&&(this.sr=t)}},compaction:{get:function(){return this.Lq},set:function(t){this.Lq!==t&&(this.Lq=t)}},breadthLimit:{get:function(){return this.Eq},set:function(t){this.Eq!==t&&(this.Eq=t)}},rowSpacing:{get:function(){return this.Mr},set:function(t){this.Mr!==t&&(this.Mr=t)}},rowIndent:{get:function(){return this.Lr},set:function(t){this.Lr!==t&&(this.Lr=t)}},commentSpacing:{get:function(){return this.Kq},set:function(t){this.Kq!==t&&(this.Kq=t)}},commentMargin:{get:function(){return this.Jq},set:function(t){this.Jq!==t&&(this.Jq=t)}},setsPortSpot:{get:function(){return this.Qr},set:function(t){this.Qr!==t&&(this.Qr=t)}},portSpot:{get:function(){return this.Ir},set:function(t){this.Ir.A(t)||(this.Ir=t)}},setsChildPortSpot:{get:function(){return this.Pr},set:function(t){this.Pr!==t&&(this.Pr=t)}},childPortSpot:{get:function(){return this.Hq},set:function(t){this.Hq.A(t)||(this.Hq=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.U},set:function(t){this.U.set(t)}},subtreeSize:{get:function(){return this.va},set:function(t){this.va.set(t)}},subtreeOffset:{get:function(){return this.fa},set:function(t){this.fa.set(t)}}}),On.className="TreeVertex";function Uh(t){We.call(this,t),this.Xt=new N(0,0)}z(Uh,We),Uh.prototype.commit=function(){var t=this.link;if(t!==null&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.ld){case Br:i=this.fromVertex,n=this.toVertex;break;case nu:i=this.toVertex,n=this.fromVertex;break;default:D("Unhandled path value "+e.ld.toString())}if(i!==null&&n!==null)if(e=this.Xt,e.x!==0||e.y!==0||i.MA){n=i.bounds;var r=Hn(i),o=Bh(i),l=i.rowSpacing;t.ug();var h=t.curve===tn,a=t.isOrthogonal,c;if(t.Lh(),a||h){for(c=2;4<t.pointsCount;)t.Av(2);var p=t.i(1),d=t.i(2)}else{for(c=1;3<t.pointsCount;)t.Av(1);p=t.i(0),d=t.i(t.pointsCount-1)}var m=t.i(t.pointsCount-1);r===0?(i.alignment===_r?(r=n.bottom+e.y,e.y===0&&p.y>m.y+i.rowIndent&&(r=Math.min(r,Math.max(p.y,r-$o(i))))):i.alignment===Vr?(r=n.top+e.y,e.y===0&&p.y<m.y-i.rowIndent&&(r=Math.max(r,Math.min(p.y,r+$o(i))))):r=i.rm||i.sm&&i.maxGenerationCount===1?n.top-i.fa.y+e.y:n.y+n.height/2+e.y,h?(t.l(c,p.x,r),c++,t.l(c,n.right+o,r),c++,t.l(c,n.right+o+(e.x-l)/3,r),c++,t.l(c,n.right+o+2*(e.x-l)/3,r),c++,t.l(c,n.right+o+(e.x-l),r),c++,t.l(c,d.x,r)):(a&&(t.l(c,n.right+o/2,p.y),c++),t.l(c,n.right+o/2,r),c++,t.l(c,n.right+o+e.x-(a?l/2:l),r),c++,a&&t.l(c,t.i(c-1).x,d.y))):r===90?(i.alignment===_r?(r=n.right+e.x,e.x===0&&p.x>m.x+i.rowIndent&&(r=Math.min(r,Math.max(p.x,r-$o(i))))):i.alignment===Vr?(r=n.left+e.x,e.x===0&&p.x<m.x-i.rowIndent&&(r=Math.max(r,Math.min(p.x,r+$o(i))))):r=i.rm||i.sm&&i.maxGenerationCount===1?n.left-i.fa.x+e.x:n.x+n.width/2+e.x,h?(t.l(c,r,p.y),c++,t.l(c,r,n.bottom+o),c++,t.l(c,r,n.bottom+o+(e.y-l)/3),c++,t.l(c,r,n.bottom+o+2*(e.y-l)/3),c++,t.l(c,r,n.bottom+o+(e.y-l)),c++,t.l(c,r,d.y)):(a&&(t.l(c,p.x,n.bottom+o/2),c++),t.l(c,r,n.bottom+o/2),c++,t.l(c,r,n.bottom+o+e.y-(a?l/2:l)),c++,a&&t.l(c,d.x,t.i(c-1).y))):r===180?(i.alignment===_r?(r=n.bottom+e.y,e.y===0&&p.y>m.y+i.rowIndent&&(r=Math.min(r,Math.max(p.y,r-$o(i))))):i.alignment===Vr?(r=n.top+e.y,e.y===0&&p.y<m.y-i.rowIndent&&(r=Math.max(r,Math.min(p.y,r+$o(i))))):r=i.rm||i.sm&&i.maxGenerationCount===1?n.top-i.fa.y+e.y:n.y+n.height/2+e.y,h?(t.l(c,p.x,r),c++,t.l(c,n.left-o,r),c++,t.l(c,n.left-o+(e.x+l)/3,r),c++,t.l(c,n.left-o+2*(e.x+l)/3,r),c++,t.l(c,n.left-o+(e.x+l),r),c++,t.l(c,d.x,r)):(a&&(t.l(c,n.left-o/2,p.y),c++),t.l(c,n.left-o/2,r),c++,t.l(c,n.left-o+e.x+(a?l/2:l),r),c++,a&&t.l(c,t.i(c-1).x,d.y))):r===270?(i.alignment===_r?(r=n.right+e.x,e.x===0&&p.x>m.x+i.rowIndent&&(r=Math.min(r,Math.max(p.x,r-$o(i))))):i.alignment===Vr?(r=n.left+e.x,e.x===0&&p.x<m.x-i.rowIndent&&(r=Math.max(r,Math.min(p.x,r+$o(i))))):r=i.rm||i.sm&&i.maxGenerationCount===1?n.left-i.fa.x+e.x:n.x+n.width/2+e.x,h?(t.l(c,r,p.y),c++,t.l(c,r,n.top-o),c++,t.l(c,r,n.top-o+(e.y+l)/3),c++,t.l(c,r,n.top-o+2*(e.y+l)/3),c++,t.l(c,r,n.top-o+(e.y+l)),c++,t.l(c,r,d.y)):(a&&(t.l(c,p.x,n.top-o/2),c++),t.l(c,r,n.top-o/2),c++,t.l(c,r,n.top-o+e.y+(a?l/2:l)),c++,a&&t.l(c,d.x,t.i(c-1).y))):D("Invalid angle "+r),t.vf()}else t=this.link,o=Hn(i),o!==Hn(n)&&(l=Bh(i),h=i.bounds,i=n.bounds,o===0&&i.left-h.right<l+1||o===90&&i.top-h.bottom<l+1||o===180&&h.left-i.right<l+1||o===270&&h.top-i.bottom<l+1||(t.ug(),i=t.curve===tn,e=t.isOrthogonal,n=Ts(this.fromVertex.alignment),t.Lh(),o===0?(o=h.right+l/2,i?t.pointsCount===4&&(i=t.i(3).y,t.M(1,o-20,t.i(1).y),t.l(2,o-20,i),t.l(3,o,i),t.l(4,o+20,i),t.M(5,t.i(5).x,i)):e?n?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,o,t.i(2).y),t.M(3,o,t.i(3).y)):t.pointsCount===4?t.l(2,o,t.i(2).y):t.pointsCount===3?t.M(1,o,t.i(2).y):t.pointsCount===2&&t.l(1,o,t.i(1).y)):o===90?(o=h.bottom+l/2,i?t.pointsCount===4&&(i=t.i(3).x,t.M(1,t.i(1).x,o-20),t.l(2,i,o-20),t.l(3,i,o),t.l(4,i,o+20),t.M(5,i,t.i(5).y)):e?n?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,o),t.M(3,t.i(3).x,o)):t.pointsCount===4?t.l(2,t.i(2).x,o):t.pointsCount===3?t.M(1,t.i(2).x,o):t.pointsCount===2&&t.l(1,t.i(1).x,o)):o===180?(o=h.left-l/2,i?t.pointsCount===4&&(i=t.i(3).y,t.M(1,o+20,t.i(1).y),t.l(2,o+20,i),t.l(3,o,i),t.l(4,o-20,i),t.M(5,t.i(5).x,i)):e?n?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,o,t.i(2).y),t.M(3,o,t.i(3).y)):t.pointsCount===4?t.l(2,o,t.i(2).y):t.pointsCount===3?t.M(1,o,t.i(2).y):t.pointsCount===2&&t.l(1,o,t.i(1).y)):o===270&&(o=h.top-l/2,i?t.pointsCount===4&&(i=t.i(3).x,t.M(1,t.i(1).x,o+20),t.l(2,i,o+20),t.l(3,i,o),t.l(4,i,o-20),t.M(5,i,t.i(5).y)):e?n?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,o),t.M(3,t.i(3).x,o)):t.pointsCount===4?t.l(2,t.i(2).x,o):t.pointsCount===3?t.M(1,t.i(2).x,o):t.pointsCount===2&&t.l(1,t.i(1).x,o)),t.vf()))}},Y.Object.defineProperties(Uh.prototype,{fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},relativePoint:{get:function(){return this.Xt},set:function(t){this.Xt.set(t)}}}),Uh.className="TreeEdge",ee.prototype.initializeStandardTools=function(){this.Za("Action",new Ao,this.mouseDownTools),this.Za("Relinking",new Cn,this.mouseDownTools),this.Za("LinkReshaping",new xe,this.mouseDownTools),this.Za("Rotating",new an,this.mouseDownTools),this.Za("Resizing",new Ci,this.mouseDownTools),this.Za("Linking",new Di,this.mouseMoveTools),this.Za("Dragging",new ie,this.mouseMoveTools),this.Za("DragSelecting",new Or,this.mouseMoveTools),this.Za("Panning",new Ar,this.mouseMoveTools),this.Za("ContextMenu",new Ji,this.mouseUpTools),this.Za("TextEditing",new Jt,this.mouseUpTools),this.Za("ClickCreating",new Xs,this.mouseUpTools),this.Za("ClickSelecting",new Zu,this.mouseUpTools)},Sr("Horizontal",new Tp),Sr("Spot",new Ep),Sr("Table",new Ap),Sr("Viewbox",new Ip),Sr("TableRow",new jp),Sr("TableColumn",new Dp),Sr("Graduated",new lf),Sr("Grid",new sf),vp.add("GraphLinksModel",Te),vp.add("TreeModel",yn),pd(De,null),pd(Rt,null);var Jd=W.go,Zd={get licenseKey(){return I.licenseKey},set licenseKey(t){I.licenseKey=t},get version(){return I.version},Group:dt,EnumValue:K,List:it,Set:Q,Map:pt,Point:N,Size:yt,Rect:_,Margin:Ft,Spot:at,Geometry:tt,PathFigure:Qe,PathSegment:Vt,InputEvent:hn,DiagramEvent:Al,ChangedEvent:te,Model:ot,GraphLinksModel:Ct,TreeModel:wi,Binding:ae,Transaction:_e,UndoManager:le,CommandHandler:Gt,Tool:jt,DraggingTool:ie,DraggingInfo:ds,DraggingOptions:uh,LinkingBaseTool:qe,LinkingTool:Di,RelinkingTool:Cn,LinkReshapingTool:xe,ResizingTool:Ci,RotatingTool:an,ClickSelectingTool:Zu,ActionTool:Ao,ClickCreatingTool:Xs,HTMLInfo:jo,ContextMenuTool:Ji,DragSelectingTool:Or,PanningTool:Ar,TextEditingTool:Jt,ToolManager:ee,Animation:ri,AnimationManager:fn,AnimationTrigger:jr,Layer:oi,Diagram:I,Palette:wp,Overview:lo,Brush:Ot,GraphObject:ht,Panel:X,RowColumnDefinition:we,Shape:gt,TextBlock:Yt,Picture:Ii,Part:ut,Adornment:Tt,Node:q,Link:H,Placeholder:mi,Layout:Lt,LayoutNetwork:Xt,LayoutVertex:pe,LayoutEdge:We,GridLayout:Fe,PanelLayout:ge,CircularLayout:bt,CircularNetwork:Ih,CircularVertex:Bf,CircularEdge:Ad,ForceDirectedLayout:De,ForceDirectedNetwork:Ql,ForceDirectedVertex:ql,ForceDirectedEdge:bl,LayeredDigraphLayout:Rt,LayeredDigraphNetwork:Rh,LayeredDigraphVertex:tu,LayeredDigraphEdge:eu,TreeLayout:Pt,TreeNetwork:ou,TreeVertex:On,TreeEdge:Uh};typeof Jd=="object"&&Jd.version&&D("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Jd?"debug ":"")+"version: "+Jd.version+", replaced with version: "+Zd.version),I.prototype.go=Zd,W.go=Zd,(typeof W=="undefined"||typeof W.module=="undefined"||typeof W.module.exports!="object")&&W.define&&typeof W.define=="function"&&W.define.amd&&W.define(Zd),typeof Vy!="undefined"&&typeof Vy.exports=="object"&&(Vy.exports=typeof global!="undefined"?global.go:self.go)})();const kt=typeof global!="undefined"?global.go:self.go,WO=kt.Group;kt.EnumValue;const HO=kt.List,KO=kt.Set,i1=kt.Map,Lo=kt.Point,ti=kt.Size,wy=kt.Rect,Sy=kt.Margin,Ui=kt.Spot,$O=kt.Geometry,JO=kt.PathFigure,$2=kt.PathSegment;kt.InputEvent;kt.DiagramEvent;kt.ChangedEvent;const rT=kt.Model,ZO=kt.GraphLinksModel;kt.TreeModel;const Ke=kt.Binding;kt.Transaction;kt.UndoManager;kt.CommandHandler;const QO=kt.Tool;kt.DraggingTool;kt.DraggingInfo;kt.LinkingBaseTool;kt.LinkingTool;kt.RelinkingTool;kt.LinkReshapingTool;kt.ResizingTool;kt.RotatingTool;kt.ClickSelectingTool;kt.ActionTool;kt.ClickCreatingTool;const qO=kt.HTMLInfo;kt.ContextMenuTool;kt.DragSelectingTool;kt.PanningTool;kt.TextEditingTool;kt.ToolManager;kt.Animation;kt.AnimationManager;kt.AnimationTrigger;kt.Layer;const bO=kt.Diagram,tA=kt.Palette;kt.Overview;kt.Brush;const $1=kt.GraphObject,ow=kt.Panel;kt.RowColumnDefinition;const Ye=kt.Shape,J1=kt.TextBlock;kt.TextBlockMetrics;kt.Picture;const js=kt.Part,Lg=kt.Adornment,oT=kt.Node,Ry=kt.Link,sT=kt.Placeholder;kt.Layout;kt.LayoutNetwork;kt.LayoutVertex;kt.LayoutEdge;kt.GridLayout;kt.PanelLayout;kt.CircularLayout;kt.CircularNetwork;kt.CircularVertex;kt.CircularEdge;kt.ForceDirectedLayout;kt.ForceDirectedNetwork;kt.ForceDirectedVertex;kt.ForceDirectedEdge;kt.LayeredDigraphLayout;kt.LayeredDigraphNetwork;kt.LayeredDigraphVertex;kt.LayeredDigraphEdge;kt.TreeLayout;kt.TreeNetwork;kt.TreeVertex;kt.TreeEdge;kt.version;class xu{constructor(u,f,y){this._inspectedObject=null,this._inspectSelection=!0,this._includesOwnProperties=!0,this._properties={},this._propertyModified=null,this._multipleSelection=!1,this._showUnionProperties=!1,this._showLimit=0,this.inspectedProperties={},this.multipleProperties={};const g=document.getElementById(u);g.className="inspector",g.innerHTML="",this._div=g,this._diagram=f,this.tabIndex=0,y!==void 0&&(y.inspectSelection!==void 0&&(this._inspectSelection=y.inspectSelection),y.includesOwnProperties!==void 0&&(this._includesOwnProperties=y.includesOwnProperties),y.properties!==void 0&&(this._properties=y.properties),y.propertyModified!==void 0&&(this._propertyModified=y.propertyModified),y.multipleSelection!==void 0&&(this._multipleSelection=y.multipleSelection),y.showUnionProperties!==void 0&&(this._showUnionProperties=y.showUnionProperties),y.showLimit!==void 0&&(this._showLimit=y.showLimit));const w=this;this.inspectOnModelChanged=M=>{M.isTransactionFinished&&w.inspectObject()},this.inspectOnSelectionChanged=M=>{w.inspectObject()},this._diagram.addModelChangedListener(this.inspectOnModelChanged),this._inspectSelection&&this._diagram.addDiagramListener("ChangedSelection",this.inspectOnSelectionChanged)}get div(){return this._div}get diagram(){return this._diagram}set diagram(u){u!==this._diagram&&(this._diagram.removeModelChangedListener(this.inspectOnModelChanged),this._diagram.removeDiagramListener("ChangedSelection",this.inspectOnSelectionChanged),this._diagram=u,this._diagram.addModelChangedListener(this.inspectOnModelChanged),this._inspectSelection?(this._diagram.addDiagramListener("ChangedSelection",this.inspectOnSelectionChanged),this.inspectObject()):this.inspectObject(null))}get inspectedObject(){return this._inspectedObject}get inspectSelection(){return this._inspectSelection}set inspectSelection(u){u!==this._inspectSelection&&(this._inspectSelection=u,this._inspectSelection?(this._diagram.addDiagramListener("ChangedSelection",this.inspectOnSelectionChanged),this.inspectObject()):(this._diagram.removeDiagramListener("ChangedSelection",this.inspectOnSelectionChanged),this.inspectObject(null)))}get includesOwnProperties(){return this._includesOwnProperties}set includesOwnProperties(u){u!==this._includesOwnProperties&&(this._includesOwnProperties=u,this.inspectObject())}get properties(){return this._properties}set properties(u){u!==this._properties&&(this._properties=u,this.inspectObject())}get propertyModified(){return this._propertyModified}set propertyModified(u){u!==this._propertyModified&&(this._propertyModified=u)}get multipleSelection(){return this._multipleSelection}set multipleSelection(u){u!==this._multipleSelection&&(this._multipleSelection=u,this.inspectObject())}get showUnionProperties(){return this._showUnionProperties}set showUnionProperties(u){u!==this._showUnionProperties&&(this._showUnionProperties=u,this.inspectObject())}get showLimit(){return this._showLimit}set showLimit(u){u!==this._showLimit&&(this._showLimit=u,this.inspectObject())}static showIfNode(u){return u instanceof oT}static showIfLink(u){return u instanceof Ry}static showIfGroup(u){return u instanceof WO}static showIfPresent(u,f){return u instanceof js&&(u=u.data),typeof u=="object"&&u[f]!==void 0}inspectObject(u){let f=null,y=null;if(u!==null){if(u===void 0?this._inspectSelection?this._multipleSelection?(y=this._diagram.selection,this._inspectedObject=y.first()):f=this._diagram.selection.first():f=this._inspectedObject:f=u,!y&&f&&(y=new KO,y.add(f)),!y||y.count<1){this.updateAllHTML();return}if(y){const g=this._div;g.innerHTML="";const w=new i1,M=new i1,C=new i1,A=y.iterator;let R=2;const z=document.createElement("table"),Y=document.createElement("tbody");this.inspectedProperties={},this.tabIndex=0;const Z=this._properties;A.next(),f=A.value,this._inspectedObject=f;let lt=f instanceof js?f.data:f;if(lt){for(const B in Z){const U=Z[B];if(!this.canShowProperty(B,U,f))continue;const F=this.findValue(B,U,lt);F===""&&this._properties[B]&&this._properties[B].type==="checkbox"?(w.add(B,!1),C.add(B,!1)):(w.add(B,F),C.add(B,F))}if(this._includesOwnProperties)for(const B in lt)B!=="__gohashid"&&(this.inspectedProperties[B]||Z[B]&&!this.canShowProperty(B,Z[B],f)||(w.add(B,lt[B]),C.add(B,lt[B])))}for(;A.next()&&(this._showLimit<1||R<=this._showLimit);){if(M.clear(),f=A.value,f&&(lt=f instanceof js?f.data:f,lt)){for(const B in Z){const U=Z[B];if(!this.canShowProperty(B,U,f))continue;const F=this.findValue(B,U,lt);F===""&&this._properties[B]&&this._properties[B].type==="checkbox"?M.add(B,!1):M.add(B,F)}if(this._includesOwnProperties)for(const B in lt)B!=="__gohashid"&&(this.inspectedProperties[B]||Z[B]&&!this.canShowProperty(B,Z[B],f)||M.add(B,lt[B]))}if(this._showUnionProperties){let B=M.iterator;for(;B.next();)if(C.has(B.key)){if(Z[B.key]&&Z[B.key].type!=="color"&&Z[B.key].type!=="checkbox"&&Z[B.key].type!=="select"||!Z[B.key]){const U=C.get(B.key)+"|"+M.get(B.key);C.set(B.key,U)}}else{let U="";for(let F=0;F<R-1;F++)U+="|";U+=M.get(B.key),C.set(B.key,U)}for(B=C.iterator;B.next();)if(!M.has(B.key)&&(Z[B.key]&&Z[B.key].type!=="color"&&Z[B.key].type!=="checkbox"&&Z[B.key].type!=="select"||!Z[B.key])){const U=C.get(B.key)+"|";C.set(B.key,U)}}else{const B=w.iterator,U=[];for(;B.next();)if(M.has(B.key)){let F=C.get(B.key)+"|"+M.get(B.key);C.set(B.key,F),(Z[B.key]&&Z[B.key].type!=="color"&&Z[B.key].type!=="checkbox"&&Z[B.key].type!=="select"||!Z[B.key])&&(F=w.get(B.key)+"|"+M.get(B.key),w.set(B.key,F))}else U.push(B.key);for(let F=0;F<U.length;F++)w.remove(U[F]),C.remove(U[F])}R++}let xt;for(this._showUnionProperties?xt=C.iterator:xt=w.iterator;xt.next();)Y.appendChild(this.buildPropertyRow(xt.key,xt.value));z.appendChild(Y),g.appendChild(z);const W=C.iterator;for(;W.next();)this.multipleProperties[W.key]=W.value}}}canShowProperty(u,f,y){const g=f;return g.show===!1?!1:typeof g.show=="function"?g.show(y,u):!0}canEditProperty(u,f,y){if(this._diagram.isReadOnly||this._diagram.isModelReadOnly||y===null||typeof(y instanceof js?y.data:y)[u]==="function")return!1;if(f){const M=f;if(M.readOnly===!0)return!1;if(typeof M.readOnly=="function")return!M.readOnly(y,u)}return!0}findValue(u,f,y){let g="";return f&&f.defaultValue!==void 0&&(g=f.defaultValue),y[u]!==void 0&&(g=y[u]),g===void 0?"":g}buildPropertyRow(u,f){const y=document.createElement("tr"),g=document.createElement("td");let w;this._properties[u]&&this._properties[u].name!==void 0?w=this._properties[u].name:w=u,g.textContent=w,y.appendChild(g);const M=document.createElement("td"),C=this._properties[u];let A=null;const R=this;function z(){R._diagram.selection.count===1||!R.multipleSelection?R.updateAllProperties():R.updateAllObjectsProperties()}if(C&&C.type==="select"){const Y=A=document.createElement("select");this.updateSelect(C,Y,u,f),Y.addEventListener("change",z)}else{const Y=A=document.createElement("input");if(Y&&Y.setPointerCapture&&Y.addEventListener("pointerdown",Z=>Y.setPointerCapture(Z.pointerId)),Y.value=this.convertToString(f),C){const Z=C.type;Z!=="string"&&Z!=="number"&&Z!=="boolean"&&Z!=="arrayofnumber"&&Z!=="point"&&Z!=="size"&&Z!=="rect"&&Z!=="spot"&&Z!=="margin"&&Y.setAttribute("type",C.type),C.type==="color"&&Y.type==="color"&&(Y.value=this.convertToColor(f),Y.addEventListener("change",z)),C.type==="checkbox"&&(Y.checked=!!f,Y.addEventListener("change",z))}Y.type!=="color"&&Y.addEventListener("blur",z)}return A&&(A.tabIndex=this.tabIndex++,A.disabled=!this.canEditProperty(u,C,this._inspectedObject),M.appendChild(A)),y.appendChild(M),this.inspectedProperties[u]=A,y}convertToColor(u){const f=document.createElement("canvas").getContext("2d");return f===null?"#000000":(f.fillStyle=u,f.fillStyle)}convertToArrayOfNumber(u){if(u==="null")return null;const f=u.split(" "),y=[];for(let g=0;g<f.length;g++){const w=f[g];!w||y.push(parseFloat(w))}return y}convertToString(u){if(u===void 0)return"undefined";if(u===null)return"null";if(u instanceof Lo)return Lo.stringify(u);if(u instanceof ti)return ti.stringify(u);if(u instanceof wy)return wy.stringify(u);if(u instanceof Ui)return Ui.stringify(u);if(u instanceof Sy)return Sy.stringify(u);if(u instanceof HO)return this.convertToString(u.toArray());if(Array.isArray(u)){let f="";for(let y=0;y<u.length;y++){y>0&&(f+=" ");const g=u[y];f+=this.convertToString(g)}return f}return u.toString()}updateAllHTML(){const u=this.inspectedProperties,y=this._inspectedObject instanceof js?this._inspectedObject.data:this._inspectedObject;if(y)for(const g in u){const w=u[g],M=y[g];if(w instanceof HTMLSelectElement){const C=this._properties[g];this.updateSelect(C,w,g,M)}else w.type==="color"?w.value=this.convertToColor(M):w.type==="checkbox"?w.checked=!!M:w.value=this.convertToString(M)}else for(const g in u){const w=u[g];w instanceof HTMLSelectElement?w.innerHTML="":w.type==="color"?w.value="#000000":w.type==="checkbox"?w.checked=!1:w.value=""}}updateSelect(u,f,y,g){f.innerHTML="";let w=u.choices;typeof w=="function"&&(w=w(this._inspectedObject,y)),Array.isArray(w)||(w=[]),u.choicesArray=w;for(let M=0;M<w.length;M++){const C=w[M],A=document.createElement("option");A.text=this.convertToString(C),f.add(A)}f.value=this.convertToString(g)}parseValue(u,f,y,g){let w="";switch(u!==void 0&&u.type!==void 0&&(w=u.type),w===""&&(typeof g=="boolean"?w="boolean":typeof g=="number"?w="number":g instanceof Lo?w="point":g instanceof ti?w="size":g instanceof wy?w="rect":g instanceof Ui?w="spot":g instanceof Sy&&(w="margin")),w){case"boolean":f=!(f===!1||f==="false"||f==="0");break;case"number":f=parseFloat(f);break;case"arrayofnumber":f=this.convertToArrayOfNumber(f);break;case"point":f=Lo.parse(f);break;case"size":f=ti.parse(f);break;case"rect":f=wy.parse(f);break;case"spot":f=Ui.parse(f);break;case"margin":f=Sy.parse(f);break;case"checkbox":f=y.checked;break;case"select":f=u.choicesArray[y.selectedIndex];break}return f}updateAllObjectsProperties(){const u=this.inspectedProperties,f=this._diagram;f.startTransaction("set all properties");for(const y in u){const g=u[y];let w=g.value;const M=w.split("|");let C=[];this.multipleProperties[y]&&(this._properties[y]&&this._properties[y].type==="checkbox"&&this._showUnionProperties?C.push(this.multipleProperties[y]):this._properties[y]&&(C=this.multipleProperties[y].toString().split("|")));const A=f.selection.iterator;let R=!1;if(this._properties[y]&&this._properties[y].type==="checkbox"&&(R=!0),M.length<C.length&&(!this._properties[y]||!(this._properties[y]&&(this._properties[y].type==="color"||this._properties[y].type==="checkbox"||this._properties[y].type==="choices"))))R=!0;else for(let z=0;z<M.length&&z<C.length;z++)M[z]!==C[z]&&!(this._properties[y]&&this._properties[y].type==="color"&&M[z].toLowerCase()===C[z].toLowerCase())&&(R=!0);if(R)for(let z=0;z<f.selection.count;z++){A.next();const Z=A.value instanceof js?A.value.data:A.value;if(Z){z<M.length?w=M[z]:w=M[0];const lt=this._properties[y];if(!this.canEditProperty(y,lt,A.value))continue;const xt=Z[y];w=this.parseValue(lt,w,g,xt),g.value=w,f.model.setDataProperty(Z,y,w),this.propertyModified!==null&&this.propertyModified(y,w,this)}}}f.commitTransaction("set all properties")}updateAllProperties(){const u=this.inspectedProperties,f=this._diagram,g=this.inspectedObject instanceof js?this.inspectedObject.data:this.inspectedObject;if(!!g){f.startTransaction("set all properties");for(const w in u){const M=u[w];let C=M.value;const A=this._properties[w];if(!this.canEditProperty(w,A,this.inspectedObject))continue;const R=g[w];C=this.parseValue(A,C,M,R),M.value=C,f.model.setDataProperty(g,w,C),this.propertyModified!==null&&this.propertyModified(w,C,this)}f.commitTransaction("set all properties")}}}class eA extends QO{constructor(){super();this._temporaryShape=$1.make(Ye,{name:"SHAPE",fill:null,strokeWidth:1.5}),this._archetypePartData={},this._isBackgroundOnly=!0,this.temp=$1.make(js,{layerName:"Tool"},this._temporaryShape),this.name="FreehandDrawing"}get temporaryShape(){return this._temporaryShape}set temporaryShape(u){if(this._temporaryShape!==u&&u!==null){u.name="SHAPE";const f=this._temporaryShape.panel;f!==null&&(f.remove(this._temporaryShape),this._temporaryShape=u,f.add(this._temporaryShape))}}get archetypePartData(){return this._archetypePartData}set archetypePartData(u){this._archetypePartData=u}get isBackgroundOnly(){return this._isBackgroundOnly}set isBackgroundOnly(u){this._isBackgroundOnly=u}canStart(){if(!this.isEnabled)return!1;const u=this.diagram;return!(u.isReadOnly||u.isModelReadOnly||!u.allowInsert||u.currentTool!==this&&this.isBackgroundOnly&&u.findPartAt(u.lastInput.documentPoint,!0)!==null)}doActivate(){super.doActivate(),this.diagram.isMouseCaptured=!0,this.diagram.currentCursor="crosshair"}doDeactivate(){super.doDeactivate(),this.temporaryShape!==null&&this.temporaryShape.part!==null&&this.diagram.remove(this.temporaryShape.part),this.diagram.currentCursor="",this.diagram.isMouseCaptured=!1}addPoint(u){const f=this.temporaryShape;if(f===null)return;const y=f.part;if(y===null)return;const g=this.diagram.viewportBounds.position,w=new Lo(u.x-g.x,u.y-g.y);if(y.diagram===null){const C=new JO(w.x,w.y,!0),A=new $O().add(C);f.geometry=A,y.position=new Lo(g.x-f.strokeWidth/2,g.y-f.strokeWidth/2),this.diagram.add(y)}const M=f.geometry;if(M!==null){const C=M.figures.first();if(C!==null){const A=C.segments,R=A.count-1;if(R>=0){const Z=A.elt(R);if(Math.abs(w.x-Z.endX)<.5&&Math.abs(w.y-Z.endY)<.5)return}const z=M.copy(),Y=z.figures.first();Y!==null&&(Y.add(new $2($2.Line,w.x,w.y)),f.geometry=z)}}}doMouseDown(){this.isActive||(this.doActivate(),this.addPoint(this.diagram.lastInput.documentPoint))}doMouseMove(){this.isActive&&this.addPoint(this.diagram.lastInput.documentPoint)}doMouseUp(){const u=this.diagram;let f=!1;if(this.isActive){f=!0,this.addPoint(u.lastInput.documentPoint);const y=u.viewportBounds.position;if(this.temporaryShape.geometry!==null){const g=this.temporaryShape.geometry.copy(),w=g.normalize();w.x=y.x-w.x,w.y=y.y-w.y,u.startTransaction(this.name);const M=u.model.copyNodeData(this.archetypePartData);if(M!==null){u.model.addNodeData(M);const C=u.findPartForData(M);if(C!==null){C.location=new Lo(w.x+g.bounds.width/2,w.y+g.bounds.height/2);const A=C.findObject("SHAPE");A!==null&&(A.geometry=g)}}}}this.stopTool(),f&&u.commitTransaction(this.name)}}class iA{constructor(){Qf(this,"ref",null)}bind(u){this.ref=u}info(u,f,y=3e3){var g;(g=this.ref)==null||g.show({severity:"info",summary:f,detail:u,life:y})}success(u,f,y=3e3){var g;(g=this.ref)==null||g.show({severity:"success",summary:f,detail:u,life:y})}warn(u,f,y=3e3){var g;(g=this.ref)==null||g.show({severity:"warn",summary:f,detail:u,life:y})}error(u,f,y=3e3){var g;(g=this.ref)==null||g.show({severity:"error",summary:f,detail:u,life:y})}clear(){var u;(u=this.ref)==null||u.clear()}replyCancel(){this.info("Think twice before you press your mouse!")}}const nA=new iA,cr=()=>nA,rA=["Rectangle","Square","RoundedRectangle","Border","Ellipse","Circle","TriangleRight","TriangleDown","TriangleLeft","TriangleUp","Triangle","Diamond","LineH","LineV","None","BarH","BarV","MinusLine","PlusLine","XLine"],oA=["Times New Roman","Consolas","helvetica","lab","Microsoft YaHei"],ne=$1.make,My=(s,u,f,y)=>ne(Ye,"Circle",{fill:null,stroke:null,desiredSize:new ti(7,7),alignment:u,alignmentFocus:u,portId:s,fromSpot:u,toSpot:u,fromLinkable:f,toLinkable:y,cursor:"pointer"}),J2=(s,u)=>{s.ports.each(f=>{f.portId!==""&&(f.fill=u?"rgba(0, 0, 0, 0.3)":null)})},sA=()=>{const s=rT.fromJson(JSON.stringify({class:"GraphLinkModel",linkFromPortIdProperty:"fromPort",linkToPortIdProperty:"toPort",nodeDataArray:[],linkDataArray:[]}));return s.name="diagram",s},lA=s=>ne(bO,s,{grid:ne(ow,"Grid",ne(Ye,"LineH",{stroke:"lightgray",strokeWidth:.5}),ne(Ye,"LineH",{stroke:"gray",strokeWidth:.5,interval:10}),ne(Ye,"LineV",{stroke:"lightgray",strokeWidth:.5}),ne(Ye,"LineV",{stroke:"gray",strokeWidth:.5,interval:10})),"draggingTool.dragsLink":!1,"draggingTool.isGridSnapEnabled":!0,"linkingTool.isUnconnectedLinkValid":!1,"linkingTool.portGravity":20,"relinkingTool.isUnconnectedLinkValid":!1,"relinkingTool.portGravity":20,"relinkingTool.fromHandleArchetype":ne(Ye,"Diamond",{segmentIndex:0,cursor:"pointer",desiredSize:new ti(8,8),fill:"lightblue",stroke:"lightblue"}),"relinkingTool.toHandleArchetype":ne(Ye,"Diamond",{segmentIndex:-1,cursor:"pointer",desiredSize:new ti(8,8),fill:"lightblue",stroke:"lightblue"}),"linkReshapingTool.handleArchetype":ne(Ye,"Diamond",{desiredSize:new ti(7,7),fill:"lightblue",stroke:"lightblue"}),"rotatingTool.handleAngle":270,"rotatingTool.handleDistance":30,"rotatingTool.snapAngleMultiple":15,"rotatingTool.snapAngleEpsilon":15,"undoManager.isEnabled":!0}),lT=()=>ne(Lg,"Auto",ne(Ye,{fill:null,stroke:"deepskyblue",strokeWidth:1,strokeDashArray:[4,2]}),ne(sT)),uA=()=>ne(Lg,"Spot",{locationSpot:Ui.Center},ne(sT),ne(Ye,{alignment:Ui.TopLeft,cursor:"nw-resize",desiredSize:new ti(6,6),fill:"lightblue",stroke:"deepskyblue"}),ne(Ye,{alignment:Ui.Top,cursor:"n-resize",desiredSize:new ti(6,6),fill:"lightblue",stroke:"deepskyblue"}),ne(Ye,{alignment:Ui.TopRight,cursor:"ne-resize",desiredSize:new ti(6,6),fill:"lightblue",stroke:"deepskyblue"}),ne(Ye,{alignment:Ui.Right,cursor:"e-resize",desiredSize:new ti(6,6),fill:"lightblue",stroke:"deepskyblue"}),ne(Ye,{alignment:Ui.BottomRight,cursor:"sw-resize",desiredSize:new ti(6,6),fill:"lightblue",stroke:"deepskyblue"}),ne(Ye,{alignment:Ui.Bottom,cursor:"s-resize",desiredSize:new ti(6,6),fill:"lightblue",stroke:"deepskyblue"}),ne(Ye,{alignment:Ui.BottomLeft,cursor:"se-resize",desiredSize:new ti(6,6),fill:"lightblue",stroke:"deepskyblue"}),ne(Ye,{alignment:Ui.Left,cursor:"w-resize",desiredSize:new ti(6,6),fill:"lightblue",stroke:"deepskyblue"})),hA=()=>ne(Lg,{locationSpot:Ui.Center,locationObjectName:"CIRCLE"},ne(Ye,"Circle",{name:"CIRCLE",cursor:"pointer",desiredSize:new ti(7,7),fill:"lightblue",stroke:"deepskyblue"}),ne(Ye,{geometryString:"M3.5 7 L3.5 30",isGeometryPositioned:!0,stroke:"deepskyblue",strokeWidth:1,strokeDashArray:[4,2]})),aA=s=>ne(oT,"Spot",{contextMenu:s,locationSpot:Ui.Center,selectable:!0,selectionAdornmentTemplate:lT(),resizable:!0,resizeObjectName:"PANEL",resizeAdornmentTemplate:uA(),rotatable:!0,rotateAdornmentTemplate:hA()},new Ke("location","loc",Lo.parse).makeTwoWay(Lo.stringify),new Ke("angle").makeTwoWay(),ne(ow,"Auto",{name:"PANEL"},new Ke("desiredSize","size",ti.parse).makeTwoWay(ti.stringify),ne(Ye,"Rectangle",{portId:"",fromLinkable:!0,fromLinkableSelfNode:!0,fromLinkableDuplicates:!0,toLinkable:!0,toLinkableSelfNode:!0,toLinkableDuplicates:!0,cursor:"pointer",fill:"white",strokeWidth:2},new Ke("fill"),new Ke("stroke"),new Ke("figure"),new Ke("strokeWidth")),ne(J1,{font:'bold 11pt "Times New Roman", Times, serif',margin:8,maxSize:new ti(160,NaN),wrap:J1.WrapFit,editable:!0},new Ke("text").makeTwoWay(),new Ke("stroke","textColor"),new Ke("font","fontFamily",u=>`bold 11pt ${u}`))),My("T",Ui.Top,!0,!0),My("R",Ui.Right,!0,!0),My("B",Ui.Bottom,!0,!0),My("L",Ui.Left,!0,!0),{mouseEnter:(u,f)=>{J2(f,!0)},mouseLeave:(u,f)=>{J2(f,!1)}}),fA=()=>ne(Lg,"Link",ne(Ye,{isPanelMain:!0,fill:"transparent",stroke:"deepskyblue",strokeWidth:0})),cA=s=>ne(Ry,{contextMenu:s,routing:Ry.AvoidsNodes,curve:Ry.JumpOver,corner:5,toShortLength:4,cursor:"pointer",selectable:!0,selectionAdornmentTemplate:fA(),relinkableFrom:!0,relinkableTo:!0,reshapable:!0},new Ke("points").makeTwoWay(),ne(Ye,{isPanelMain:!0,strokeWidth:2,stroke:"#999999"},new Ke("fill","stroke"),new Ke("stroke")),ne(Ye,{toArrow:"Standard",stroke:"#999999",fill:"#999999"},new Ke("fill","stroke"),new Ke("stroke")),ne(ow,"Auto",ne(Ye,"Rectangle",{fill:null,stroke:"#343434",strokeWidth:.5,minSize:new ti(40,NaN)},new Ke("visible","isSelected").ofObject()),ne(J1,{textAlign:"center",font:'10pt "Times New Roman", Times, serif',stroke:"#999999",margin:5,minSize:new ti(40,NaN),editable:!0},new Ke("text").makeTwoWay(),new Ke("stroke","textColor"),new Ke("font","fontFamily",u=>`bold 11pt ${u}`)))),pA=[{isNode:!0,text:"Start",textColor:"#777777",fontFamily:"Times New Roman",figure:"Circle",fill:"#ffffff",stroke:"#000000",strokeWidth:2},{isNode:!0,text:"Progress",textColor:"#777777",fontFamily:"Times New Roman",figure:"Rectangle",fill:"#ffffff",stroke:"#000000",strokeWidth:2},{isNode:!0,text:"Branch",textColor:"#777777",fontFamily:"Times New Roman",figure:"Diamond",fill:"#ffffff",stroke:"#000000",strokeWidth:2},{isNode:!0,text:"Comment",textColor:"#777777",fontFamily:"Times New Roman",figure:"RoundedRectangle",fill:"#ffffff",stroke:"#000000",strokeWidth:2},{isNode:!0,text:"Text",textColor:"#777777",fontFamily:"Times New Roman",figure:"Rectangle",fill:"transparent",stroke:"transparent",strokeWidth:0,hidden:["fill","figure","stroke","strokeWidth"]},{isNode:!0,text:"Port",textColor:"#777777",fontFamily:"Times New Roman",figure:"Triangle",fill:"#ffffff",stroke:"#000000",strokeWidth:2}],dA=s=>ne(qO,{show:s.show,hide:s.hide}),yA=(s,u)=>{const f=lA(s);return f.nodeTemplate=aA(u),f.linkTemplate=cA(u),f.contextMenu=u,f},gA=(s,u,f)=>ne(tA,s,{name:"palette",contextMenu:u,maxSelectionCount:1,nodeTemplateMap:f.nodeTemplateMap,model:new ZO(pA,[],{name:"palette"})}),mA=(s,u)=>{let f=s.id;return(!f||f.trim()==="")&&(s.id=`inspector-${Date.now()}`,f=s.id),new xu(f,u,{properties:{isNode:{show:!1},size:{show:!1},loc:{show:!1},points:{show:!1},geo:{show:!1},category:{show:!1},hidden:{show:!1},key:{show:xu.showIfPresent,readOnly:!0},text:{show:xu.showIfPresent,type:"string"},textColor:{show:xu.showIfPresent,type:"color"},fontFamily:{show:xu.showIfPresent,type:"select",choices:oA},fill:{show:y=>y.data.fill&&(!y.data.hidden||!y.data.hidden.includes("fill")),type:"color"},stroke:{show:y=>y.data.stroke&&(!y.data.hidden||!y.data.hidden.includes("strokeWidth")),type:"color"},strokeWidth:{show:y=>y.data.strokeWidth&&(!y.data.hidden||!y.data.hidden.includes("strokeWidth")),type:"number"},figure:{show:y=>y.data.figure&&(!y.data.hidden||!y.data.hidden.includes("figure")),type:"select",choices:rA},fromPort:{show:xu.showIfPresent,type:"select",choices:["","T","R","B","L"]},toPort:{show:xu.showIfPresent,type:"select",choices:["","T","R","B","L"]}}})},vA=s=>{const u=ne(js,{locationSpot:Ui.Center,isLayoutPositioned:!1,selectionAdorned:!0,selectionObjectName:"SHAPE",selectionAdornmentTemplate:lT(),resizable:!0,resizeObjectName:"SHAPE",rotatable:!0,rotateObjectName:"SHAPE",reshapable:!0,cursor:"pointer"},new Ke("location","loc",Lo.parse).makeTwoWay(Lo.stringify),ne(Ye,{name:"SHAPE",fill:null,strokeWidth:2},new Ke("desiredSize","size",ti.parse).makeTwoWay(ti.stringify),new Ke("angle").makeTwoWay(),new Ke("geometryString","geo").makeTwoWay(),new Ke("stroke"),new Ke("strokeWidth")));s.nodeTemplateMap.add("FreehandDrawing",u);const f=new eA;return f.isBackgroundOnly=!1,f.archetypePartData={category:"FreehandDrawing",stroke:"#777777",strokeWidth:2,angle:0},f.isEnabled=!1,s.toolManager.mouseMoveTools.insertAt(0,f),f};class xA{constructor(u,f,y,g){Qf(this,"diagram");Qf(this,"palette");Qf(this,"drawTool");const w=dA({show:(M,C,A)=>{var Y,Z;if(C.model.name==="palette"){(Z=(Y=C.contextMenu)==null?void 0:Y.hide)==null||Z.call(Y,C,A);return}const z=C.lastInput.viewPoint;M===null?g("blank",[z.x,z.y]):M.data.isNode?g("node",[z.x,z.y]):g("link",[z.x,z.y])},hide:()=>{g("hide",[-1e3,-1e3])}});this.diagram=yA(u,w),this.model=sA(),this.palette=gA(f,w,this.diagram),mA(y,this.diagram),this.drawTool=vA(this.diagram),this.diagram.addDiagramListener("LinkDrawn",M=>{M.subject.data.text="",M.subject.data.textColor="#999999",M.subject.data.stroke="#999999",M.subject.data.fontFamily="Times New Roman"})}get model(){return this.diagram.model}set model(u){this.diagram.model=u}doCut(){this.diagram.commandHandler.canCutSelection()&&this.diagram.commandHandler.cutSelection()}doCopy(){this.diagram.commandHandler.canCopySelection()&&this.diagram.commandHandler.copySelection()}doPaste(){this.diagram.commandHandler.canPasteSelection()?this.diagram.commandHandler.pasteSelection(this.diagram.lastInput.documentPoint):cr().warn("Paste cannot be performed because there is no source")}doDelete(){this.diagram.commandHandler.deleteSelection()}doDrawMode(){this.drawTool.isEnabled?cr().warn("already in draw mode"):cr().success("switch mode: DRAW"),this.drawTool.isEnabled=!0}doSelectMode(){this.drawTool.isEnabled?cr().success("switch mode: SELECT"):cr().warn("already in select mode"),this.drawTool.isEnabled=!1}doZoomToFit(){this.diagram.commandHandler.canZoomToFit()&&this.diagram.commandHandler.zoomToFit()}doClear(){this.diagram.clear()}doDownload(){this.diagram.makeImageData({callback:u=>{const f=document.createElement("a");f.download=`canvas_${Date.now()}.png`,f.href=u,f.click()}})}doLoad(){const u=document.createElement("input");u.type="file",u.onchange=()=>{var y;const f=(y=u.files)==null?void 0:y[0];if(f)if(f.name.split(".").reverse()[0]!=="fc")cr().warn("Incorrect file"),u.onchange=null;else{const g=new FileReader;g.onload=()=>{const w=JSON.parse(g.result);K2(w.modelJson)+""!==w.sha?cr().warn("This file has been tampered with"):(this.model=rT.fromJson(w.modelJson),cr().success(`Diagram reloaded (last modified: ${w.date})`)),u.onchange=null},g.onerror=()=>{cr().error("Some error occurred when reading this file"),u.onchange=null},g.readAsText(f)}},u.click()}doStore(){cr().info("Generating");try{const u=this.model.toJson(),f=new Date().toLocaleDateString().replace(/[/]/g,"-")+" "+new Date().toLocaleTimeString(),y={sha:K2(u)+"",date:f,modelJson:u},g=window.btoa(JSON.stringify(y)),w=document.createElement("a");w.href=`data:text/plain;base64,${g}`,w.download=`diagram_${f.replace(/[-/ ]/g,".").replace(/[:]/g,"")}.fc`,w.click(),cr().success("Done")}catch(u){cr().error("Error: ",u.toString())}}dispose(){this.diagram.div=null,this.palette.div=null}}var ky,wA=new Uint8Array(16);function SA(){if(!ky&&(ky=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ky))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ky(wA)}var MA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kA(s){return typeof s=="string"&&MA.test(s)}var vn=[];for(var n1=0;n1<256;++n1)vn.push((n1+256).toString(16).substr(1));function PA(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=(vn[s[u+0]]+vn[s[u+1]]+vn[s[u+2]]+vn[s[u+3]]+"-"+vn[s[u+4]]+vn[s[u+5]]+"-"+vn[s[u+6]]+vn[s[u+7]]+"-"+vn[s[u+8]]+vn[s[u+9]]+"-"+vn[s[u+10]]+vn[s[u+11]]+vn[s[u+12]]+vn[s[u+13]]+vn[s[u+14]]+vn[s[u+15]]).toLowerCase();if(!kA(f))throw TypeError("Stringified UUID is invalid");return f}function CA(s,u,f){s=s||{};var y=s.random||(s.rng||SA)();if(y[6]=y[6]&15|64,y[8]=y[8]&63|128,u){f=f||0;for(var g=0;g<16;++g)u[f+g]=y[g];return u}return PA(y)}const Z2=s=>{const u=s.currentTarget,f=u.dataset.dragTarget,g=(s.path||s.composedPath&&s.composedPath()).find(R=>!!R.dataset.dragId&&R.dataset.dragId===f);if(!u||!f||!g)return;const w=s.clientX-g.offsetLeft,M=s.clientY-g.offsetTop,C=R=>{const z=R.clientX-w,Y=R.clientY-M;z>0&&z<window.innerWidth-u.offsetWidth-10&&(g.style.left=z+"px"),Y>0&&Y<window.innerHeight-u.offsetHeight-10&&(g.style.top=Y+"px")},A=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",A)},NA=({innerEl:s,initPos:u})=>{const f=Me.exports.useRef(null),y=CA();return Me.exports.useLayoutEffect(()=>{var w;const g=(w=f.current)==null?void 0:w.getElementsByClassName("drag-controller")[0];if(!g)throw new Error("No controller for this draggable element.");return g.dataset.dragTarget=y,g.style.cursor="grab",g.style.userSelect="none",g.addEventListener("mousedown",Z2),()=>{g.removeEventListener("mousedown",Z2)}},[y]),Ee("div",{ref:f,"data-drag-id":y,style:ly({position:"absolute",zIndex:"10000",width:"fit-content",height:"fit-content"},u),children:s})},TA="_inspector-panel_142ym_1";var LA={inspectorPanel:TA};function EA(s){if(Array.isArray(s))return s}function OA(s,u){var f=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(f!=null){var y=[],g=!0,w=!1,M,C;try{for(f=f.call(s);!(g=(M=f.next()).done)&&(y.push(M.value),!(u&&y.length===u));g=!0);}catch(A){w=!0,C=A}finally{try{!g&&f.return!=null&&f.return()}finally{if(w)throw C}}return y}}function Z1(s,u){(u==null||u>s.length)&&(u=s.length);for(var f=0,y=new Array(u);f<u;f++)y[f]=s[f];return y}function uT(s,u){if(!!s){if(typeof s=="string")return Z1(s,u);var f=Object.prototype.toString.call(s).slice(8,-1);if(f==="Object"&&s.constructor&&(f=s.constructor.name),f==="Map"||f==="Set")return Array.from(s);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return Z1(s,u)}}function AA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jA(s,u){return EA(s)||OA(s,u)||uT(s,u)||AA()}function No(s){return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},No(s)}function By(){for(var s=arguments.length,u=new Array(s),f=0;f<s;f++)u[f]=arguments[f];if(u){for(var y=[],g=0;g<u.length;g++){var w=u[g];if(!!w){var M=No(w);if(M==="string"||M==="number")y.push(w);else if(M==="object"){var C=Array.isArray(w)?w:Object.entries(w).map(function(A){var R=jA(A,2),z=R[0],Y=R[1];return Y?z:null});y=C.length?y.concat(C.filter(function(A){return!!A})):y}}}return y.join(" ")}}function hT(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}function Q2(s,u){for(var f=0;f<u.length;f++){var y=u[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}function aT(s,u,f){return u&&Q2(s.prototype,u),f&&Q2(s,f),Object.defineProperty(s,"prototype",{writable:!1}),s}function r1(s,u){var f=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!f){if(Array.isArray(s)||(f=DA(s))||u&&s&&typeof s.length=="number"){f&&(s=f);var y=0,g=function(){};return{s:g,n:function(){return y>=s.length?{done:!0}:{done:!1,value:s[y++]}},e:function(R){throw R},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=!0,M=!1,C;return{s:function(){f=f.call(s)},n:function(){var R=f.next();return w=R.done,R},e:function(R){M=!0,C=R},f:function(){try{!w&&f.return!=null&&f.return()}finally{if(M)throw C}}}}function DA(s,u){if(!!s){if(typeof s=="string")return q2(s,u);var f=Object.prototype.toString.call(s).slice(8,-1);if(f==="Object"&&s.constructor&&(f=s.constructor.name),f==="Map"||f==="Set")return Array.from(s);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return q2(s,u)}}function q2(s,u){(u==null||u>s.length)&&(u=s.length);for(var f=0,y=new Array(u);f<u;f++)y[f]=s[f];return y}var pr=function(){function s(){hT(this,s)}return aT(s,null,[{key:"innerWidth",value:function(f){if(f){var y=f.offsetWidth,g=getComputedStyle(f);return y+=parseFloat(g.paddingLeft)+parseFloat(g.paddingRight),y}return 0}},{key:"width",value:function(f){if(f){var y=f.offsetWidth,g=getComputedStyle(f);return y-=parseFloat(g.paddingLeft)+parseFloat(g.paddingRight),y}return 0}},{key:"getBrowserLanguage",value:function(){return navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"en"}},{key:"getWindowScrollTop",value:function(){var f=document.documentElement;return(window.pageYOffset||f.scrollTop)-(f.clientTop||0)}},{key:"getWindowScrollLeft",value:function(){var f=document.documentElement;return(window.pageXOffset||f.scrollLeft)-(f.clientLeft||0)}},{key:"getOuterWidth",value:function(f,y){if(f){var g=f.offsetWidth||f.getBoundingClientRect().width;if(y){var w=getComputedStyle(f);g+=parseFloat(w.marginLeft)+parseFloat(w.marginRight)}return g}return 0}},{key:"getOuterHeight",value:function(f,y){if(f){var g=f.offsetHeight||f.getBoundingClientRect().height;if(y){var w=getComputedStyle(f);g+=parseFloat(w.marginTop)+parseFloat(w.marginBottom)}return g}return 0}},{key:"getClientHeight",value:function(f,y){if(f){var g=f.clientHeight;if(y){var w=getComputedStyle(f);g+=parseFloat(w.marginTop)+parseFloat(w.marginBottom)}return g}return 0}},{key:"getClientWidth",value:function(f,y){if(f){var g=f.clientWidth;if(y){var w=getComputedStyle(f);g+=parseFloat(w.marginLeft)+parseFloat(w.marginRight)}return g}return 0}},{key:"getViewport",value:function(){var f=window,y=document,g=y.documentElement,w=y.getElementsByTagName("body")[0],M=f.innerWidth||g.clientWidth||w.clientWidth,C=f.innerHeight||g.clientHeight||w.clientHeight;return{width:M,height:C}}},{key:"getOffset",value:function(f){if(f){var y=f.getBoundingClientRect();return{top:y.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:y.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}return{top:"auto",left:"auto"}}},{key:"index",value:function(f){if(f)for(var y=f.parentNode.childNodes,g=0,w=0;w<y.length;w++){if(y[w]===f)return g;y[w].nodeType===1&&g++}return-1}},{key:"addMultipleClasses",value:function(f,y){if(f&&y)if(f.classList)for(var g=y.split(" "),w=0;w<g.length;w++)f.classList.add(g[w]);else for(var M=y.split(" "),C=0;C<M.length;C++)f.className+=" "+M[C]}},{key:"removeMultipleClasses",value:function(f,y){if(f&&y)if(f.classList)for(var g=y.split(" "),w=0;w<g.length;w++)f.classList.remove(g[w]);else for(var M=y.split(" "),C=0;C<M.length;C++)f.className=f.className.replace(new RegExp("(^|\\b)"+M[C].split(" ").join("|")+"(\\b|$)","gi")," ")}},{key:"addClass",value:function(f,y){f&&y&&(f.classList?f.classList.add(y):f.className+=" "+y)}},{key:"removeClass",value:function(f,y){f&&y&&(f.classList?f.classList.remove(y):f.className=f.className.replace(new RegExp("(^|\\b)"+y.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(f,y){if(f)return f.classList?f.classList.contains(y):new RegExp("(^| )"+y+"( |$)","gi").test(f.className)}},{key:"find",value:function(f,y){return f?Array.from(f.querySelectorAll(y)):[]}},{key:"findSingle",value:function(f,y){return f?f.querySelector(y):null}},{key:"getHeight",value:function(f){if(f){var y=f.offsetHeight,g=getComputedStyle(f);return y-=parseFloat(g.paddingTop)+parseFloat(g.paddingBottom)+parseFloat(g.borderTopWidth)+parseFloat(g.borderBottomWidth),y}return 0}},{key:"getWidth",value:function(f){if(f){var y=f.offsetWidth,g=getComputedStyle(f);return y-=parseFloat(g.paddingLeft)+parseFloat(g.paddingRight)+parseFloat(g.borderLeftWidth)+parseFloat(g.borderRightWidth),y}return 0}},{key:"alignOverlay",value:function(f,y,g){var w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;f&&y&&(g==="self"?this.relativePosition(f,y):(w&&(f.style.minWidth=s.getOuterWidth(y)+"px"),this.absolutePosition(f,y)))}},{key:"absolutePosition",value:function(f,y){if(f){var g=f.offsetParent?{width:f.offsetWidth,height:f.offsetHeight}:this.getHiddenElementDimensions(f),w=g.height,M=g.width,C=y.offsetHeight,A=y.offsetWidth,R=y.getBoundingClientRect(),z=this.getWindowScrollTop(),Y=this.getWindowScrollLeft(),Z=this.getViewport(),lt,xt;R.top+C+w>Z.height?(lt=R.top+z-w,lt<0&&(lt=z),f.style.transformOrigin="bottom"):(lt=C+R.top+z,f.style.transformOrigin="top"),R.left+A+M>Z.width?xt=Math.max(0,R.left+Y+A-M):xt=R.left+Y,f.style.top=lt+"px",f.style.left=xt+"px"}}},{key:"relativePosition",value:function(f,y){if(f){var g=f.offsetParent?{width:f.offsetWidth,height:f.offsetHeight}:this.getHiddenElementDimensions(f),w=y.offsetHeight,M=y.getBoundingClientRect(),C=this.getViewport(),A,R;M.top+w+g.height>C.height?(A=-1*g.height,M.top+A<0&&(A=-1*M.top),f.style.transformOrigin="bottom"):(A=w,f.style.transformOrigin="top"),g.width>C.width?R=M.left*-1:M.left+g.width>C.width?R=(M.left+g.width-C.width)*-1:R=0,f.style.top=A+"px",f.style.left=R+"px"}}},{key:"flipfitCollision",value:function(f,y){var g=this,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"left top",M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"left bottom",C=arguments.length>4?arguments[4]:void 0,A=y.getBoundingClientRect(),R=this.getViewport(),z=w.split(" "),Y=M.split(" "),Z=function(U,F){return F?+U.substring(U.search(/(\+|-)/g))||0:U.substring(0,U.search(/(\+|-)/g))||U},lt={my:{x:Z(z[0]),y:Z(z[1]||z[0]),offsetX:Z(z[0],!0),offsetY:Z(z[1]||z[0],!0)},at:{x:Z(Y[0]),y:Z(Y[1]||Y[0]),offsetX:Z(Y[0],!0),offsetY:Z(Y[1]||Y[0],!0)}},xt={left:function(){var U=lt.my.offsetX+lt.at.offsetX;return U+A.left+(lt.my.x==="left"?0:-1*(lt.my.x==="center"?g.getOuterWidth(f)/2:g.getOuterWidth(f)))},top:function(){var U=lt.my.offsetY+lt.at.offsetY;return U+A.top+(lt.my.y==="top"?0:-1*(lt.my.y==="center"?g.getOuterHeight(f)/2:g.getOuterHeight(f)))}},W={count:{x:0,y:0},left:function(){var U=xt.left(),F=s.getWindowScrollLeft();f.style.left=U+F+"px",this.count.x===2?(f.style.left=F+"px",this.count.x=0):U<0&&(this.count.x++,lt.my.x="left",lt.at.x="right",lt.my.offsetX*=-1,lt.at.offsetX*=-1,this.right())},right:function(){var U=xt.left()+s.getOuterWidth(y),F=s.getWindowScrollLeft();f.style.left=U+F+"px",this.count.x===2?(f.style.left=R.width-s.getOuterWidth(f)+F+"px",this.count.x=0):U+s.getOuterWidth(f)>R.width&&(this.count.x++,lt.my.x="right",lt.at.x="left",lt.my.offsetX*=-1,lt.at.offsetX*=-1,this.left())},top:function(){var U=xt.top(),F=s.getWindowScrollTop();f.style.top=U+F+"px",this.count.y===2?(f.style.left=F+"px",this.count.y=0):U<0&&(this.count.y++,lt.my.y="top",lt.at.y="bottom",lt.my.offsetY*=-1,lt.at.offsetY*=-1,this.bottom())},bottom:function(){var U=xt.top()+s.getOuterHeight(y),F=s.getWindowScrollTop();f.style.top=U+F+"px",this.count.y===2?(f.style.left=R.height-s.getOuterHeight(f)+F+"px",this.count.y=0):U+s.getOuterHeight(y)>R.height&&(this.count.y++,lt.my.y="bottom",lt.at.y="top",lt.my.offsetY*=-1,lt.at.offsetY*=-1,this.top())},center:function(U){if(U==="y"){var F=xt.top()+s.getOuterHeight(y)/2;f.style.top=F+s.getWindowScrollTop()+"px",F<0?this.bottom():F+s.getOuterHeight(y)>R.height&&this.top()}else{var J=xt.left()+s.getOuterWidth(y)/2;f.style.left=J+s.getWindowScrollLeft()+"px",J<0?this.left():J+s.getOuterWidth(f)>R.width&&this.right()}}};W[lt.at.x]("x"),W[lt.at.y]("y"),this.isFunction(C)&&C(lt)}},{key:"findCollisionPosition",value:function(f){if(f){var y=f==="top"||f==="bottom",g=f==="left"?"right":"left",w=f==="top"?"bottom":"top";return y?{axis:"y",my:"center ".concat(w),at:"center ".concat(f)}:{axis:"x",my:"".concat(g," center"),at:"".concat(f," center")}}}},{key:"getParents",value:function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return f.parentNode===null?y:this.getParents(f.parentNode,y.concat([f.parentNode]))}},{key:"getScrollableParents",value:function(f){var y=[];if(f){var g=this.getParents(f),w=/(auto|scroll)/,M=function(U){var F=U?getComputedStyle(U):null;return F&&(w.test(F.getPropertyValue("overflow"))||w.test(F.getPropertyValue("overflowX"))||w.test(F.getPropertyValue("overflowY")))},C=r1(g),A;try{for(C.s();!(A=C.n()).done;){var R=A.value,z=R.nodeType===1&&R.dataset.scrollselectors;if(z){var Y=z.split(","),Z=r1(Y),lt;try{for(Z.s();!(lt=Z.n()).done;){var xt=lt.value,W=this.findSingle(R,xt);W&&M(W)&&y.push(W)}}catch(B){Z.e(B)}finally{Z.f()}}R.nodeType!==9&&M(R)&&y.push(R)}}catch(B){C.e(B)}finally{C.f()}}return y}},{key:"getHiddenElementOuterHeight",value:function(f){if(f){f.style.visibility="hidden",f.style.display="block";var y=f.offsetHeight;return f.style.display="none",f.style.visibility="visible",y}return 0}},{key:"getHiddenElementOuterWidth",value:function(f){if(f){f.style.visibility="hidden",f.style.display="block";var y=f.offsetWidth;return f.style.display="none",f.style.visibility="visible",y}return 0}},{key:"getHiddenElementDimensions",value:function(f){var y={};return f&&(f.style.visibility="hidden",f.style.display="block",y.width=f.offsetWidth,y.height=f.offsetHeight,f.style.display="none",f.style.visibility="visible"),y}},{key:"fadeIn",value:function(f,y){if(f){f.style.opacity=0;var g=+new Date,w=0,M=function C(){w=+f.style.opacity+(new Date().getTime()-g)/y,f.style.opacity=w,g=+new Date,+w<1&&(window.requestAnimationFrame&&requestAnimationFrame(C)||setTimeout(C,16))};M()}}},{key:"fadeOut",value:function(f,y){if(f)var g=1,w=50,M=w/y,C=setInterval(function(){g-=M,g<=0&&(g=0,clearInterval(C)),f.style.opacity=g},w)}},{key:"getUserAgent",value:function(){return navigator.userAgent}},{key:"isIOS",value:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}},{key:"isAndroid",value:function(){return/(android)/i.test(navigator.userAgent)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},{key:"isFunction",value:function(f){return!!(f&&f.constructor&&f.call&&f.apply)}},{key:"appendChild",value:function(f,y){if(this.isElement(y))y.appendChild(f);else if(y.el&&y.el.nativeElement)y.el.nativeElement.appendChild(f);else throw new Error("Cannot append "+y+" to "+f)}},{key:"removeChild",value:function(f,y){if(this.isElement(y))y.removeChild(f);else if(y.el&&y.el.nativeElement)y.el.nativeElement.removeChild(f);else throw new Error("Cannot remove "+f+" from "+y)}},{key:"isElement",value:function(f){return(typeof HTMLElement=="undefined"?"undefined":No(HTMLElement))==="object"?f instanceof HTMLElement:f&&No(f)==="object"&&f!==null&&f.nodeType===1&&typeof f.nodeName=="string"}},{key:"scrollInView",value:function(f,y){var g=getComputedStyle(f).getPropertyValue("borderTopWidth"),w=g?parseFloat(g):0,M=getComputedStyle(f).getPropertyValue("paddingTop"),C=M?parseFloat(M):0,A=f.getBoundingClientRect(),R=y.getBoundingClientRect(),z=R.top+document.body.scrollTop-(A.top+document.body.scrollTop)-w-C,Y=f.scrollTop,Z=f.clientHeight,lt=this.getOuterHeight(y);z<0?f.scrollTop=Y+z:z+lt>Z&&(f.scrollTop=Y+z-Z+lt)}},{key:"clearSelection",value:function(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}},{key:"calculateScrollbarWidth",value:function(f){if(f){var y=getComputedStyle(f);return f.offsetWidth-f.clientWidth-parseFloat(y.borderLeftWidth)-parseFloat(y.borderRightWidth)}else{if(this.calculatedScrollbarWidth!=null)return this.calculatedScrollbarWidth;var g=document.createElement("div");g.className="p-scrollbar-measure",document.body.appendChild(g);var w=g.offsetWidth-g.clientWidth;return document.body.removeChild(g),this.calculatedScrollbarWidth=w,w}}},{key:"getBrowser",value:function(){if(!this.browser){var f=this.resolveUserAgent();this.browser={},f.browser&&(this.browser[f.browser]=!0,this.browser.version=f.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}},{key:"resolveUserAgent",value:function(){var f=navigator.userAgent.toLowerCase(),y=/(chrome)[ ]([\w.]+)/.exec(f)||/(webkit)[ ]([\w.]+)/.exec(f)||/(opera)(?:.*version|)[ ]([\w.]+)/.exec(f)||/(msie) ([\w.]+)/.exec(f)||f.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(f)||[];return{browser:y[1]||"",version:y[2]||"0"}}},{key:"isVisible",value:function(f){return f&&f.offsetParent!=null}},{key:"isExist",value:function(f){return f!==null&&typeof f!="undefined"&&f.nodeName&&f.parentNode}},{key:"hasDOM",value:function(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}},{key:"getFocusableElements",value:function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",g=s.find(f,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])'.concat(y,`,
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(y,`,
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(y,`,
                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(y,`,
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(y,`,
                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(y,`,
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`).concat(y)),w=[],M=r1(g),C;try{for(M.s();!(C=M.n()).done;){var A=C.value;getComputedStyle(A).display!=="none"&&getComputedStyle(A).visibility!=="hidden"&&w.push(A)}}catch(R){M.e(R)}finally{M.f()}return w}},{key:"getFirstFocusableElement",value:function(f,y){var g=s.getFocusableElements(f,y);return g.length>0?g[0]:null}},{key:"getLastFocusableElement",value:function(f,y){var g=s.getFocusableElements(f,y);return g.length>0?g[g.length-1]:null}},{key:"getCursorOffset",value:function(f,y,g,w){if(f){var M=getComputedStyle(f),C=document.createElement("div");C.style.position="absolute",C.style.top="0px",C.style.left="0px",C.style.visibility="hidden",C.style.pointerEvents="none",C.style.overflow=M.overflow,C.style.width=M.width,C.style.height=M.height,C.style.padding=M.padding,C.style.border=M.border,C.style.overflowWrap=M.overflowWrap,C.style.whiteSpace=M.whiteSpace,C.style.lineHeight=M.lineHeight,C.innerHTML=y.replace(/\r\n|\r|\n/g,"<br />");var A=document.createElement("span");A.textContent=w,C.appendChild(A);var R=document.createTextNode(g);C.appendChild(R),document.body.appendChild(C);var z=A.offsetLeft,Y=A.offsetTop,Z=A.clientHeight;return document.body.removeChild(C),{left:Math.abs(z-f.scrollLeft),top:Math.abs(Y-f.scrollTop)+Z}}return{top:"auto",left:"auto"}}},{key:"invokeElementMethod",value:function(f,y,g){f[y].apply(f,g)}},{key:"isClickable",value:function(f){var y=f.nodeName,g=f.parentElement&&f.parentElement.nodeName;return y==="INPUT"||y==="TEXTAREA"||y==="BUTTON"||y==="A"||g==="INPUT"||g==="TEXTAREA"||g==="BUTTON"||g==="A"||this.hasClass(f,"p-button")||this.hasClass(f.parentElement,"p-button")||this.hasClass(f.parentElement,"p-checkbox")||this.hasClass(f.parentElement,"p-radiobutton")}},{key:"applyStyle",value:function(f,y){if(typeof y=="string")f.style.cssText=this.style;else for(var g in this.style)f.style[g]=y[g]}},{key:"exportCSV",value:function(f,y){var g=new Blob([f],{type:"application/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(g,y+".csv");else{var w=s.saveAs({name:y+".csv",src:URL.createObjectURL(g)});w||(f="data:text/csv;charset=utf-8,"+f,window.open(encodeURI(f)))}}},{key:"saveAs",value:function(f){if(f){var y=document.createElement("a");if(y.download!==void 0){var g=f.name,w=f.src;return y.setAttribute("href",w),y.setAttribute("download",g),y.style.display="none",document.body.appendChild(y),y.click(),document.body.removeChild(y),!0}}return!1}},{key:"createInlineStyle",value:function(f){var y=document.createElement("style");try{f||(f={}.REACT_APP_CSS_NONCE)}catch{}return f&&y.setAttribute("nonce",f),document.head.appendChild(y),y}},{key:"removeInlineStyle",value:function(f){if(this.isExist(f)){try{document.head.removeChild(f)}catch{}f=null}return f}}]),s}(),fT=function(){function s(){hT(this,s)}return aT(s,null,[{key:"equals",value:function(f,y,g){return g&&f&&No(f)==="object"&&y&&No(y)==="object"?this.resolveFieldData(f,g)===this.resolveFieldData(y,g):this.deepEquals(f,y)}},{key:"deepEquals",value:function(f,y){if(f===y)return!0;if(f&&y&&No(f)=="object"&&No(y)=="object"){var g=Array.isArray(f),w=Array.isArray(y),M,C,A;if(g&&w){if(C=f.length,C!==y.length)return!1;for(M=C;M--!==0;)if(!this.deepEquals(f[M],y[M]))return!1;return!0}if(g!==w)return!1;var R=f instanceof Date,z=y instanceof Date;if(R!==z)return!1;if(R&&z)return f.getTime()===y.getTime();var Y=f instanceof RegExp,Z=y instanceof RegExp;if(Y!==Z)return!1;if(Y&&Z)return f.toString()===y.toString();var lt=Object.keys(f);if(C=lt.length,C!==Object.keys(y).length)return!1;for(M=C;M--!==0;)if(!Object.prototype.hasOwnProperty.call(y,lt[M]))return!1;for(M=C;M--!==0;)if(A=lt[M],!this.deepEquals(f[A],y[A]))return!1;return!0}return f!==f&&y!==y}},{key:"resolveFieldData",value:function(f,y){if(f&&Object.keys(f).length&&y){if(this.isFunction(y))return y(f);if(y.indexOf(".")===-1)return f[y];for(var g=y.split("."),w=f,M=0,C=g.length;M<C;++M){if(w==null)return null;w=w[g[M]]}return w}else return null}},{key:"isFunction",value:function(f){return!!(f&&f.constructor&&f.call&&f.apply)}},{key:"findDiffKeys",value:function(f,y){return!f||!y?{}:Object.keys(f).filter(function(g){return!y.hasOwnProperty(g)}).reduce(function(g,w){return g[w]=f[w],g},{})}},{key:"reorderArray",value:function(f,y,g){var w;if(f&&y!==g){if(g>=f.length)for(w=g-f.length;w--+1;)f.push(void 0);f.splice(g,0,f.splice(y,1)[0])}}},{key:"findIndexInList",value:function(f,y,g){var w=this;return y?g?y.findIndex(function(M){return w.equals(M,f,g)}):y.findIndex(function(M){return M===f}):-1}},{key:"getJSXElement",value:function(f){for(var y=arguments.length,g=new Array(y>1?y-1:0),w=1;w<y;w++)g[w-1]=arguments[w];return this.isFunction(f)?f.apply(void 0,g):f}},{key:"getPropValue",value:function(f){for(var y=arguments.length,g=new Array(y>1?y-1:0),w=1;w<y;w++)g[w-1]=arguments[w];return this.isFunction(f)?f.apply(void 0,g):f}},{key:"getRefElement",value:function(f){return f?No(f)==="object"&&f.hasOwnProperty("current")?f.current:f:null}},{key:"removeAccents",value:function(f){return f&&f.search(/[\xC0-\xFF]/g)>-1&&(f=f.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),f}},{key:"isEmpty",value:function(f){return f==null||f===""||Array.isArray(f)&&f.length===0||!(f instanceof Date)&&No(f)==="object"&&Object.keys(f).length===0}},{key:"isNotEmpty",value:function(f){return!this.isEmpty(f)}},{key:"sort",value:function(f,y){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=arguments.length>3?arguments[3]:void 0,M=null;return f==null&&y!=null?M=-1:f!=null&&y==null?M=1:f==null&&y==null?M=0:typeof f=="string"&&typeof y=="string"?M=f.localeCompare(y,w,{numeric:!0}):M=f<y?-1:f>y?1:0,g*M}}]),s}();function IA(s){if(Array.isArray(s))return Z1(s)}function FA(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function RA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BA(s){return IA(s)||FA(s)||uT(s)||RA()}function VA(){var s=[],u=function(C,A){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:999,z=g(C,A,R),Y=z.value+(z.key===C?0:R)+1;return s.push({key:C,value:Y}),Y},f=function(C){s=s.filter(function(A){return A.value!==C})},y=function(C,A){return g(C,A).value},g=function(C,A){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return BA(s).reverse().find(function(z){return A?!0:z.key===C})||{key:C,value:R}},w=function(C){return C&&parseInt(C.style.zIndex,10)||0};return{get:w,set:function(C,A,R,z){A&&(A.style.zIndex=String(u(C,R,z)))},clear:function(C){C&&(f(gc.get(C)),C.style.zIndex="")},getCurrent:function(C,A){return y(C,A)}}}var gc=VA();function b2(s,u){for(var f=0;f<u.length;f++){var y=u[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}function _A(s,u,f){return u&&b2(s.prototype,u),f&&b2(s,f),Object.defineProperty(s,"prototype",{writable:!1}),s}function UA(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}function Us(s,u,f){return u in s?Object.defineProperty(s,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[u]=f,s}var Dn=Object.freeze({STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter",CUSTOM:"custom"}),mr=_A(function s(){UA(this,s)});Us(mr,"ripple",!1);Us(mr,"inputStyle","outlined");Us(mr,"locale","en");Us(mr,"appendTo",null);Us(mr,"cssTransition",!0);Us(mr,"autoZIndex",!0);Us(mr,"nonce",null);Us(mr,"zIndex",{modal:1100,overlay:1e3,menu:1e3,tooltip:1100,toast:1200});Us(mr,"filterMatchModeOptions",{text:[Dn.STARTS_WITH,Dn.CONTAINS,Dn.NOT_CONTAINS,Dn.ENDS_WITH,Dn.EQUALS,Dn.NOT_EQUALS],numeric:[Dn.EQUALS,Dn.NOT_EQUALS,Dn.LESS_THAN,Dn.LESS_THAN_OR_EQUAL_TO,Dn.GREATER_THAN,Dn.GREATER_THAN_OR_EQUAL_TO],date:[Dn.DATE_IS,Dn.DATE_IS_NOT,Dn.DATE_BEFORE,Dn.DATE_AFTER]});Object.freeze({ALIGN_CENTER:"pi pi-align-center",ALIGN_JUSTIFY:"pi pi-align-justify",ALIGN_LEFT:"pi pi-align-left",ALIGN_RIGHT:"pi pi-align-right",AMAZON:"pi pi-amazon",ANDROID:"pi pi-android",ANGLE_DOUBLE_DOWN:"pi pi-angle-double-down",ANGLE_DOUBLE_LEFT:"pi pi-angle-double-left",ANGLE_DOUBLE_RIGHT:"pi pi-angle-double-right",ANGLE_DOUBLE_UP:"pi pi-angle-double-up",ANGLE_DOWN:"pi pi-angle-down",ANGLE_LEFT:"pi pi-angle-left",ANGLE_RIGHT:"pi pi-angle-right",ANGLE_UP:"pi pi-angle-up",APPLE:"pi pi-apple",ARROW_CIRCLE_DOWN:"pi pi-arrow-circle-down",ARROW_CIRCLE_LEFT:"pi pi-arrow-circle-left",ARROW_CIRCLE_RIGHT:"pi pi-arrow-circle-right",ARROW_CIRCLE_UP:"pi pi-arrow-circle-up",ARROW_DOWN:"pi pi-arrow-down",ARROW_DOWN_LEFT:"pi pi-arrow-down-left",ARROW_DOWN_RIGHT:"pi pi-arrow-down-right",ARROW_LEFT:"pi pi-arrow-left",ARROW_RIGHT:"pi pi-arrow-right",ARROW_UP:"pi pi-arrow-up",ARROW_UP_LEFT:"pi pi-arrow-up-left",ARROW_UP_RIGHT:"pi pi-arrow-up-right",ARROW_H:"pi pi-arrow-h",ARROW_V:"pi pi-arrow-v",AT:"pi pi-at",BACKWARD:"pi pi-backward",BAN:"pi pi-ban",BARS:"pi pi-bars",BELL:"pi pi-bell",BOLT:"pi pi-bolt",BOOK:"pi pi-book",BOOKMARK:"pi pi-bookmark",BOOKMARK_FILL:"pi pi-bookmark-fill",BOX:"pi pi-box",BRIEFCASE:"pi pi-briefcase",BUILDING:"pi pi-building",CALENDAR:"pi pi-calendar",CALENDAR_MINUS:"pi pi-calendar-minus",CALENDAR_PLUS:"pi pi-calendar-plus",CALENDAR_TIMES:"pi pi-calendar-times",CAMERA:"pi pi-camera",CAR:"pi pi-car",CARET_DOWN:"pi pi-caret-down",CARET_LEFT:"pi pi-caret-left",CARET_RIGHT:"pi pi-caret-right",CARET_UP:"pi pi-caret-up",CHART_BAR:"pi pi-chart-bar",CHART_LINE:"pi pi-chart-line",CHART_PIE:"pi pi-chart-pie",CHECK:"pi pi-check",CHECK_CIRCLE:"pi pi-check-circle",CHECK_SQUARE:"pi pi-check-square",CHEVRON_CIRCLE_DOWN:"pi pi-chevron-circle-down",CHEVRON_CIRCLE_LEFT:"pi pi-chevron-circle-left",CHEVRON_CIRCLE_RIGHT:"pi pi-chevron-circle-right",CHEVRON_CIRCLE_UP:"pi pi-chevron-circle-up",CHEVRON_DOWN:"pi pi-chevron-down",CHEVRON_LEFT:"pi pi-chevron-left",CHEVRON_RIGHT:"pi pi-chevron-right",CHEVRON_UP:"pi pi-chevron-up",CIRCLE:"pi pi-circle",CIRCLE_FILL:"pi pi-circle-fill",CLOCK:"pi pi-clock",CLONE:"pi pi-clone",CLOUD:"pi pi-cloud",CLOUD_DOWNLOAD:"pi pi-cloud-download",CLOUD_UPLOAD:"pi pi-cloud-upload",CODE:"pi pi-code",COG:"pi pi-cog",COMMENT:"pi pi-comment",COMMENTS:"pi pi-comments",COMPASS:"pi pi-compass",COPY:"pi pi-copy",CREDIT_CARD:"pi pi-credit-card",DATABASE:"pi pi-database",DESKTOP:"pi pi-desktop",DIRECTIONS:"pi pi-directions",DIRECTIONS_ALT:"pi pi-directions-alt",DISCORD:"pi pi-discord",DOLLAR:"pi pi-dollar",DOWNLOAD:"pi pi-download",EJECT:"pi pi-eject",ELLIPSIS_H:"pi pi-ellipsis-h",ELLIPSIS_V:"pi pi-ellipsis-v",ENVELOPE:"pi pi-envelope",EURO:"pi pi-euro",EXCLAMATION_CIRCLE:"pi pi-exclamation-circle",EXCLAMATION_TRIANGLE:"pi pi-exclamation-triangle",EXTERNAL_LINK:"pi pi-external-link",EYE:"pi pi-eye",EYE_SLASH:"pi pi-eye-slash",FACEBOOK:"pi pi-facebook",FAST_BACKWARD:"pi pi-fast-backward",FAST_FORWARD:"pi pi-fast-forward",FILE:"pi pi-file",FILE_EXCEL:"pi pi-file-excel",FILE_PDF:"pi pi-file-pdf",FILTER:"pi pi-filter",FILTER_FILL:"pi pi-filter-fill",FILTER_SLASH:"pi pi-filter-slash",FLAG:"pi pi-flag",FLAG_FILL:"pi pi-flag-fill",FOLDER:"pi pi-folder",FOLDER_OPEN:"pi pi-folder-open",FORWARD:"pi pi-forward",GITHUB:"pi pi-github",GLOBE:"pi pi-globe",GOOGLE:"pi pi-google",HASHTAG:"pi pi-hashtag",HEART:"pi pi-heart",HEART_FILL:"pi pi-heart-fill",HISTORY:"pi pi-history",HOME:"pi pi-home",ID_CARD:"pi pi-id-card",IMAGE:"pi pi-image",IMAGES:"pi pi-images",INBOX:"pi pi-inbox",INFO:"pi pi-info",INFO_CIRCLE:"pi pi-info-circle",INSTAGRAM:"pi pi-instagram",KEY:"pi pi-key",LINK:"pi pi-link",LINKEDIN:"pi pi-linkedin",LIST:"pi pi-list",LOCK:"pi pi-lock",LOCK_OPEN:"pi pi-lock-open",MAP:"pi pi-map",MAP_MARKER:"pi pi-map-marker",MICROSOFT:"pi pi-microsoft",MINUS:"pi pi-minus",MINUS_CIRCLE:"pi pi-minus-circle",MOBILE:"pi pi-mobile",MONEY_BILL:"pi pi-money-bill",MOON:"pi pi-moon",PALETTE:"pi pi-palette",PAPERCLIP:"pi pi-paperclip",PAUSE:"pi pi-pause",PAYPAL:"pi pi-paypal",PENCIL:"pi pi-pencil",PERCENTAGE:"pi pi-percentage",PHONE:"pi pi-phone",PLAY:"pi pi-play",PLUS:"pi pi-plus",PLUS_CIRCLE:"pi pi-plus-circle",POUND:"pi pi-pound",POWER_OFF:"pi pi-power-off",PRIME:"pi pi-prime",PRINT:"pi pi-print",QRCODE:"pi pi-qrcode",QUESTION:"pi pi-question",QUESTION_CIRCLE:"pi pi-question-circle",REDDIT:"pi pi-reddit",REFRESH:"pi pi-refresh",REPLAY:"pi pi-replay",REPLY:"pi pi-reply",SAVE:"pi pi-save",SEARCH:"pi pi-search",SEARCH_MINUS:"pi pi-search-minus",SEARCH_PLUS:"pi pi-search-plus",SEND:"pi pi-send",SERVER:"pi pi-server",SHARE_ALT:"pi pi-share-alt",SHIELD:"pi pi-shield",SHOPPING_BAG:"pi pi-shopping-bag",SHOPPING_CART:"pi pi-shopping-cart",SIGN_IN:"pi pi-sign-in",SIGN_OUT:"pi pi-sign-out",SITEMAP:"pi pi-sitemap",SLACK:"pi pi-slack",SLIDERS_H:"pi pi-sliders-h",SLIDERS_V:"pi pi-sliders-v",SORT:"pi pi-sort",SORT_ALPHA_DOWN:"pi pi-sort-alpha-down",SORT_ALPHA_ALT_DOWN:"pi pi-sort-alpha-alt-down",SORT_ALPHA_UP:"pi pi-sort-alpha-up",SORT_ALPHA_ALT_UP:"pi pi-sort-alpha-alt-up",SORT_ALT:"pi pi-sort-alt",SORT_ALT_SLASH:"pi pi-sort-slash",SORT_AMOUNT_DOWN:"pi pi-sort-amount-down",SORT_AMOUNT_DOWN_ALT:"pi pi-sort-amount-down-alt",SORT_AMOUNT_UP:"pi pi-sort-amount-up",SORT_AMOUNT_UP_ALT:"pi pi-sort-amount-up-alt",SORT_DOWN:"pi pi-sort-down",SORT_NUMERIC_DOWN:"pi pi-sort-numeric-down",SORT_NUMERIC_ALT_DOWN:"pi pi-sort-numeric-alt-down",SORT_NUMERIC_UP:"pi pi-sort-numeric-up",SORT_NUMERIC_ALT_UP:"pi pi-sort-numeric-alt-up",SORT_UP:"pi pi-sort-up",SPINNER:"pi pi-spinner",STAR:"pi pi-star",STAR_FILL:"pi pi-star-fill",STEP_BACKWARD:"pi pi-step-backward",STEP_BACKWARD_ALT:"pi pi-step-backward-alt",STEP_FORWARD:"pi pi-step-forward",STEP_FORWARD_ALT:"pi pi-step-forward-alt",STOP:"pi pi-stop",STOP_CIRCLE:"pi pi-stop-circle",SUN:"pi pi-sun",SYNC:"pi pi-sync",TABLE:"pi pi-table",TABLET:"pi pi-tablet",TAG:"pi pi-tag",TAGS:"pi pi-tags",TELEGRAM:"pi pi-telegram",TH_LARGE:"pi pi-th-large",THUMBS_DOWN:"pi pi-thumbs-down",THUMBS_UP:"pi pi-thumbs-up",TICKET:"pi pi-ticket",TIMES:"pi pi-times",TIMES_CIRCLE:"pi pi-times-circle",TRASH:"pi pi-trash",TWITTER:"pi pi-twitter",UNDO:"pi pi-undo",UNLOCK:"pi pi-unlock",UPLOAD:"pi pi-upload",USER:"pi pi-user",USER_EDIT:"pi pi-user-edit",USER_MINUS:"pi pi-user-minus",USER_PLUS:"pi pi-user-plus",USERS:"pi pi-users",VIDEO:"pi pi-video",VIMEO:"pi pi-vimeo",VOLUME_DOWN:"pi pi-volume-down",VOLUME_OFF:"pi pi-volume-off",VOLUME_UP:"pi pi-volume-up",WALLET:"pi pi-wallet",WHATSAPP:"pi pi-whatsapp",WIFI:"pi pi-wifi",WINDOW_MAXIMIZE:"pi pi-window-maximize",WINDOW_MINIMIZE:"pi pi-window-minimize",YOUTUBE:"pi pi-youtube"});Object.freeze({SUCCESS:"success",INFO:"info",WARN:"warn",ERROR:"error"});Object.freeze({AND:"and",OR:"or"});function zA(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}function tC(s,u){for(var f=0;f<u.length;f++){var y=u[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}function GA(s,u,f){return u&&tC(s.prototype,u),f&&tC(s,f),Object.defineProperty(s,"prototype",{writable:!1}),s}function cT(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Q1(s,u){return Q1=Object.setPrototypeOf||function(y,g){return y.__proto__=g,y},Q1(s,u)}function YA(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),u&&Q1(s,u)}function q1(s){return q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},q1(s)}function XA(s,u){if(u&&(q1(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cT(s)}function ug(s){return ug=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},ug(s)}function WA(s){var u=HA();return function(){var y=ug(s),g;if(u){var w=ug(this).constructor;g=Reflect.construct(y,arguments,w)}else g=y.apply(this,arguments);return XA(this,g)}}function HA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var KA=function(s){YA(f,s);var u=WA(f);function f(y){var g;return zA(this,f),g=u.call(this,y),g.onMouseDown=g.onMouseDown.bind(cT(g)),g}return GA(f,[{key:"getTarget",value:function(){return this.ink&&this.ink.parentElement}},{key:"bindEvents",value:function(){this.target&&this.target.addEventListener("mousedown",this.onMouseDown)}},{key:"unbindEvents",value:function(){this.target&&this.target.removeEventListener("mousedown",this.onMouseDown)}},{key:"onMouseDown",value:function(g){if(!(!this.ink||getComputedStyle(this.ink,null).display==="none")){if(pr.removeClass(this.ink,"p-ink-active"),!pr.getHeight(this.ink)&&!pr.getWidth(this.ink)){var w=Math.max(pr.getOuterWidth(this.target),pr.getOuterHeight(this.target));this.ink.style.height=w+"px",this.ink.style.width=w+"px"}var M=pr.getOffset(this.target),C=g.pageX-M.left+document.body.scrollTop-pr.getWidth(this.ink)/2,A=g.pageY-M.top+document.body.scrollLeft-pr.getHeight(this.ink)/2;this.ink.style.top=A+"px",this.ink.style.left=C+"px",pr.addClass(this.ink,"p-ink-active")}}},{key:"onAnimationEnd",value:function(g){pr.removeClass(g.currentTarget,"p-ink-active")}},{key:"componentDidMount",value:function(){this.ink&&(this.target=this.getTarget(),this.bindEvents())}},{key:"componentDidUpdate",value:function(){this.ink&&!this.target&&(this.target=this.getTarget(),this.bindEvents())}},{key:"componentWillUnmount",value:function(){this.ink&&(this.target=null,this.unbindEvents())}},{key:"render",value:function(){var g=this;return mr.ripple?Ee("span",{ref:function(M){return g.ink=M},className:"p-ink",onAnimationEnd:this.onAnimationEnd}):null}}]),f}(Me.exports.Component);function hg(){return hg=Object.assign||function(s){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(s[y]=f[y])}return s},hg.apply(this,arguments)}function sw(s,u){if(s==null)return{};var f={},y=Object.keys(s),g,w;for(w=0;w<y.length;w++)g=y[w],!(u.indexOf(g)>=0)&&(f[g]=s[g]);return f}function b1(s,u){return b1=Object.setPrototypeOf||function(y,g){return y.__proto__=g,y},b1(s,u)}function lw(s,u){s.prototype=Object.create(u.prototype),s.prototype.constructor=s,b1(s,u)}function $A(s,u){return s.classList?!!u&&s.classList.contains(u):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+u+" ")!==-1}function JA(s,u){s.classList?s.classList.add(u):$A(s,u)||(typeof s.className=="string"?s.className=s.className+" "+u:s.setAttribute("class",(s.className&&s.className.baseVal||"")+" "+u))}function eC(s,u){return s.replace(new RegExp("(^|\\s)"+u+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ZA(s,u){s.classList?s.classList.remove(u):typeof s.className=="string"?s.className=eC(s.className,u):s.setAttribute("class",eC(s.className&&s.className.baseVal||"",u))}var iC={disabled:!1},ag=Cr.createContext(null),mc="unmounted",Su="exited",Mu="entering",na="entered",tx="exiting",zs=function(s){lw(u,s);function u(y,g){var w;w=s.call(this,y,g)||this;var M=g,C=M&&!M.isMounting?y.enter:y.appear,A;return w.appearStatus=null,y.in?C?(A=Su,w.appearStatus=Mu):A=na:y.unmountOnExit||y.mountOnEnter?A=mc:A=Su,w.state={status:A},w.nextCallback=null,w}u.getDerivedStateFromProps=function(g,w){var M=g.in;return M&&w.status===mc?{status:Su}:null};var f=u.prototype;return f.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},f.componentDidUpdate=function(g){var w=null;if(g!==this.props){var M=this.state.status;this.props.in?M!==Mu&&M!==na&&(w=Mu):(M===Mu||M===na)&&(w=tx)}this.updateStatus(!1,w)},f.componentWillUnmount=function(){this.cancelNextCallback()},f.getTimeouts=function(){var g=this.props.timeout,w,M,C;return w=M=C=g,g!=null&&typeof g!="number"&&(w=g.exit,M=g.enter,C=g.appear!==void 0?g.appear:M),{exit:w,enter:M,appear:C}},f.updateStatus=function(g,w){g===void 0&&(g=!1),w!==null?(this.cancelNextCallback(),w===Mu?this.performEnter(g):this.performExit()):this.props.unmountOnExit&&this.state.status===Su&&this.setState({status:mc})},f.performEnter=function(g){var w=this,M=this.props.enter,C=this.context?this.context.isMounting:g,A=this.props.nodeRef?[C]:[Fy.findDOMNode(this),C],R=A[0],z=A[1],Y=this.getTimeouts(),Z=C?Y.appear:Y.enter;if(!g&&!M||iC.disabled){this.safeSetState({status:na},function(){w.props.onEntered(R)});return}this.props.onEnter(R,z),this.safeSetState({status:Mu},function(){w.props.onEntering(R,z),w.onTransitionEnd(Z,function(){w.safeSetState({status:na},function(){w.props.onEntered(R,z)})})})},f.performExit=function(){var g=this,w=this.props.exit,M=this.getTimeouts(),C=this.props.nodeRef?void 0:Fy.findDOMNode(this);if(!w||iC.disabled){this.safeSetState({status:Su},function(){g.props.onExited(C)});return}this.props.onExit(C),this.safeSetState({status:tx},function(){g.props.onExiting(C),g.onTransitionEnd(M.exit,function(){g.safeSetState({status:Su},function(){g.props.onExited(C)})})})},f.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},f.safeSetState=function(g,w){w=this.setNextCallback(w),this.setState(g,w)},f.setNextCallback=function(g){var w=this,M=!0;return this.nextCallback=function(C){M&&(M=!1,w.nextCallback=null,g(C))},this.nextCallback.cancel=function(){M=!1},this.nextCallback},f.onTransitionEnd=function(g,w){this.setNextCallback(w);var M=this.props.nodeRef?this.props.nodeRef.current:Fy.findDOMNode(this),C=g==null&&!this.props.addEndListener;if(!M||C){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var A=this.props.nodeRef?[this.nextCallback]:[M,this.nextCallback],R=A[0],z=A[1];this.props.addEndListener(R,z)}g!=null&&setTimeout(this.nextCallback,g)},f.render=function(){var g=this.state.status;if(g===mc)return null;var w=this.props,M=w.children;w.in,w.mountOnEnter,w.unmountOnExit,w.appear,w.enter,w.exit,w.timeout,w.addEndListener,w.onEnter,w.onEntering,w.onEntered,w.onExit,w.onExiting,w.onExited,w.nodeRef;var C=sw(w,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Cr.createElement(ag.Provider,{value:null},typeof M=="function"?M(g,C):Cr.cloneElement(Cr.Children.only(M),C))},u}(Cr.Component);zs.contextType=ag;zs.propTypes={};function ta(){}zs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ta,onEntering:ta,onEntered:ta,onExit:ta,onExiting:ta,onExited:ta};zs.UNMOUNTED=mc;zs.EXITED=Su;zs.ENTERING=Mu;zs.ENTERED=na;zs.EXITING=tx;var QA=zs,qA=function(u,f){return u&&f&&f.split(" ").forEach(function(y){return JA(u,y)})},o1=function(u,f){return u&&f&&f.split(" ").forEach(function(y){return ZA(u,y)})},uw=function(s){lw(u,s);function u(){for(var y,g=arguments.length,w=new Array(g),M=0;M<g;M++)w[M]=arguments[M];return y=s.call.apply(s,[this].concat(w))||this,y.appliedClasses={appear:{},enter:{},exit:{}},y.onEnter=function(C,A){var R=y.resolveArguments(C,A),z=R[0],Y=R[1];y.removeClasses(z,"exit"),y.addClass(z,Y?"appear":"enter","base"),y.props.onEnter&&y.props.onEnter(C,A)},y.onEntering=function(C,A){var R=y.resolveArguments(C,A),z=R[0],Y=R[1],Z=Y?"appear":"enter";y.addClass(z,Z,"active"),y.props.onEntering&&y.props.onEntering(C,A)},y.onEntered=function(C,A){var R=y.resolveArguments(C,A),z=R[0],Y=R[1],Z=Y?"appear":"enter";y.removeClasses(z,Z),y.addClass(z,Z,"done"),y.props.onEntered&&y.props.onEntered(C,A)},y.onExit=function(C){var A=y.resolveArguments(C),R=A[0];y.removeClasses(R,"appear"),y.removeClasses(R,"enter"),y.addClass(R,"exit","base"),y.props.onExit&&y.props.onExit(C)},y.onExiting=function(C){var A=y.resolveArguments(C),R=A[0];y.addClass(R,"exit","active"),y.props.onExiting&&y.props.onExiting(C)},y.onExited=function(C){var A=y.resolveArguments(C),R=A[0];y.removeClasses(R,"exit"),y.addClass(R,"exit","done"),y.props.onExited&&y.props.onExited(C)},y.resolveArguments=function(C,A){return y.props.nodeRef?[y.props.nodeRef.current,C]:[C,A]},y.getClassNames=function(C){var A=y.props.classNames,R=typeof A=="string",z=R&&A?A+"-":"",Y=R?""+z+C:A[C],Z=R?Y+"-active":A[C+"Active"],lt=R?Y+"-done":A[C+"Done"];return{baseClassName:Y,activeClassName:Z,doneClassName:lt}},y}var f=u.prototype;return f.addClass=function(g,w,M){var C=this.getClassNames(w)[M+"ClassName"],A=this.getClassNames("enter"),R=A.doneClassName;w==="appear"&&M==="done"&&R&&(C+=" "+R),M==="active"&&g&&g.scrollTop,C&&(this.appliedClasses[w][M]=C,qA(g,C))},f.removeClasses=function(g,w){var M=this.appliedClasses[w],C=M.base,A=M.active,R=M.done;this.appliedClasses[w]={},C&&o1(g,C),A&&o1(g,A),R&&o1(g,R)},f.render=function(){var g=this.props;g.classNames;var w=sw(g,["classNames"]);return Cr.createElement(QA,hg({},w,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},u}(Cr.Component);uw.defaultProps={classNames:""};uw.propTypes={};var bA=uw;function tj(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function hw(s,u){var f=function(w){return u&&Me.exports.isValidElement(w)?u(w):w},y=Object.create(null);return s&&Me.exports.Children.map(s,function(g){return g}).forEach(function(g){y[g.key]=f(g)}),y}function ej(s,u){s=s||{},u=u||{};function f(z){return z in u?u[z]:s[z]}var y=Object.create(null),g=[];for(var w in s)w in u?g.length&&(y[w]=g,g=[]):g.push(w);var M,C={};for(var A in u){if(y[A])for(M=0;M<y[A].length;M++){var R=y[A][M];C[y[A][M]]=f(R)}C[A]=f(A)}for(M=0;M<g.length;M++)C[g[M]]=f(g[M]);return C}function Eu(s,u,f){return f[u]!=null?f[u]:s.props[u]}function ij(s,u){return hw(s.children,function(f){return Me.exports.cloneElement(f,{onExited:u.bind(null,f),in:!0,appear:Eu(f,"appear",s),enter:Eu(f,"enter",s),exit:Eu(f,"exit",s)})})}function nj(s,u,f){var y=hw(s.children),g=ej(u,y);return Object.keys(g).forEach(function(w){var M=g[w];if(!!Me.exports.isValidElement(M)){var C=w in u,A=w in y,R=u[w],z=Me.exports.isValidElement(R)&&!R.props.in;A&&(!C||z)?g[w]=Me.exports.cloneElement(M,{onExited:f.bind(null,M),in:!0,exit:Eu(M,"exit",s),enter:Eu(M,"enter",s)}):!A&&C&&!z?g[w]=Me.exports.cloneElement(M,{in:!1}):A&&C&&Me.exports.isValidElement(R)&&(g[w]=Me.exports.cloneElement(M,{onExited:f.bind(null,M),in:R.props.in,exit:Eu(M,"exit",s),enter:Eu(M,"enter",s)}))}}),g}var rj=Object.values||function(s){return Object.keys(s).map(function(u){return s[u]})},oj={component:"div",childFactory:function(u){return u}},aw=function(s){lw(u,s);function u(y,g){var w;w=s.call(this,y,g)||this;var M=w.handleExited.bind(tj(w));return w.state={contextValue:{isMounting:!0},handleExited:M,firstRender:!0},w}var f=u.prototype;return f.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},f.componentWillUnmount=function(){this.mounted=!1},u.getDerivedStateFromProps=function(g,w){var M=w.children,C=w.handleExited,A=w.firstRender;return{children:A?ij(g,C):nj(g,M,C),firstRender:!1}},f.handleExited=function(g,w){var M=hw(this.props.children);g.key in M||(g.props.onExited&&g.props.onExited(w),this.mounted&&this.setState(function(C){var A=hg({},C.children);return delete A[g.key],{children:A}}))},f.render=function(){var g=this.props,w=g.component,M=g.childFactory,C=sw(g,["component","childFactory"]),A=this.state.contextValue,R=rj(this.state.children).map(M);return delete C.appear,delete C.enter,delete C.exit,w===null?Cr.createElement(ag.Provider,{value:A},R):Cr.createElement(ag.Provider,{value:A},Cr.createElement(w,C,R))},u}(Cr.Component);aw.propTypes={};aw.defaultProps=oj;var sj=aw;function lj(s,u,f){return u in s?Object.defineProperty(s,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[u]=f,s}function uj(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}function nC(s,u){for(var f=0;f<u.length;f++){var y=u[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}function hj(s,u,f){return u&&nC(s.prototype,u),f&&nC(s,f),Object.defineProperty(s,"prototype",{writable:!1}),s}function ku(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function ex(s,u){return ex=Object.setPrototypeOf||function(y,g){return y.__proto__=g,y},ex(s,u)}function aj(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),u&&ex(s,u)}function ix(s){return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},ix(s)}function fj(s,u){if(u&&(ix(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ku(s)}function fg(s){return fg=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},fg(s)}function rC(s,u){var f=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);u&&(y=y.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),f.push.apply(f,y)}return f}function s1(s){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?rC(Object(f),!0).forEach(function(y){lj(s,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(f)):rC(Object(f)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(f,y))})}return s}function cj(s){var u=pj();return function(){var y=fg(s),g;if(u){var w=fg(this).constructor;g=Reflect.construct(y,arguments,w)}else g=y.apply(this,arguments);return fj(this,g)}}function pj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var dj=function(s){aj(f,s);var u=cj(f);function f(y){var g;return uj(this,f),g=u.call(this,y),g.onEnter=g.onEnter.bind(ku(g)),g.onEntering=g.onEntering.bind(ku(g)),g.onEntered=g.onEntered.bind(ku(g)),g.onExit=g.onExit.bind(ku(g)),g.onExiting=g.onExiting.bind(ku(g)),g.onExited=g.onExited.bind(ku(g)),g}return hj(f,[{key:"disabled",get:function(){return this.props.disabled||this.props.options&&this.props.options.disabled||!mr.cssTransition}},{key:"onEnter",value:function(g,w){this.props.onEnter&&this.props.onEnter(g,w),this.props.options&&this.props.options.onEnter&&this.props.options.onEnter(g,w)}},{key:"onEntering",value:function(g,w){this.props.onEntering&&this.props.onEntering(g,w),this.props.options&&this.props.options.onEntering&&this.props.options.onEntering(g,w)}},{key:"onEntered",value:function(g,w){this.props.onEntered&&this.props.onEntered(g,w),this.props.options&&this.props.options.onEntered&&this.props.options.onEntered(g,w)}},{key:"onExit",value:function(g){this.props.onExit&&this.props.onExit(g),this.props.options&&this.props.options.onExit&&this.props.options.onExit(g)}},{key:"onExiting",value:function(g){this.props.onExiting&&this.props.onExiting(g),this.props.options&&this.props.options.onExiting&&this.props.options.onExiting(g)}},{key:"onExited",value:function(g){this.props.onExited&&this.props.onExited(g),this.props.options&&this.props.options.onExited&&this.props.options.onExited(g)}},{key:"componentDidUpdate",value:function(g){if(this.props.in!==g.in&&this.disabled){var w=fT.getRefElement(this.props.nodeRef);this.props.in?(this.onEnter(w,!0),this.onEntering(w,!0),this.onEntered(w,!0)):(this.onExit(w),this.onExiting(w),this.onExited(w))}}},{key:"render",value:function(){if(this.disabled)return this.props.in?this.props.children:null;var g={nodeRef:this.props.nodeRef,in:this.props.in,onEnter:this.onEnter,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited},w={classNames:this.props.classNames,timeout:this.props.timeout,unmountOnExit:this.props.unmountOnExit},M=s1(s1(s1({},w),this.props.options||{}),g);return Ee(bA,LP(ly({},M),{children:this.props.children}))}}]),f}(Me.exports.Component);function yj(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}function oC(s,u){for(var f=0;f<u.length;f++){var y=u[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}function gj(s,u,f){return u&&oC(s.prototype,u),f&&oC(s,f),Object.defineProperty(s,"prototype",{writable:!1}),s}function nx(s,u){return nx=Object.setPrototypeOf||function(y,g){return y.__proto__=g,y},nx(s,u)}function mj(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),u&&nx(s,u)}function rx(s){return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},rx(s)}function vj(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function xj(s,u){if(u&&(rx(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vj(s)}function cg(s){return cg=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},cg(s)}function wj(s,u,f){return u in s?Object.defineProperty(s,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[u]=f,s}function Sj(s){var u=Mj();return function(){var y=cg(s),g;if(u){var w=cg(this).constructor;g=Reflect.construct(y,arguments,w)}else g=y.apply(this,arguments);return xj(this,g)}}function Mj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var pT=function(s){mj(f,s);var u=Sj(f);function f(y){var g;yj(this,f),g=u.call(this,y);var w=y.visible&&pr.hasDOM();return g.state={mounted:w},g}return gj(f,[{key:"componentDidMount",value:function(){pr.hasDOM()&&!this.state.mounted&&this.setState({mounted:!0},this.props.onMounted)}},{key:"componentWillUnmount",value:function(){this.props.onUnmounted&&this.props.onUnmounted()}},{key:"render",value:function(){var g=this.props.element||this.props.children;if(g&&this.state.mounted){var w=this.props.appendTo||mr.appendTo||document.body;return w==="self"?g:Fy.createPortal(g,w)}return null}}]),f}(Me.exports.Component);wj(pT,"defaultProps",{element:null,appendTo:null,visible:!1,onMounted:null,onUnmounted:null});function ox(s,u){(u==null||u>s.length)&&(u=s.length);for(var f=0,y=new Array(u);f<u;f++)y[f]=s[f];return y}function kj(s){if(Array.isArray(s))return ox(s)}function Pj(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Cj(s,u){if(!!s){if(typeof s=="string")return ox(s,u);var f=Object.prototype.toString.call(s).slice(8,-1);if(f==="Object"&&s.constructor&&(f=s.constructor.name),f==="Map"||f==="Set")return Array.from(s);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return ox(s,u)}}function Nj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l1(s){return kj(s)||Pj(s)||Cj(s)||Nj()}function dT(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}function sC(s,u){for(var f=0;f<u.length;f++){var y=u[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}function yT(s,u,f){return u&&sC(s.prototype,u),f&&sC(s,f),Object.defineProperty(s,"prototype",{writable:!1}),s}function wa(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function sx(s,u){return sx=Object.setPrototypeOf||function(y,g){return y.__proto__=g,y},sx(s,u)}function gT(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),u&&sx(s,u)}function lx(s){return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},lx(s)}function mT(s,u){if(u&&(lx(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wa(s)}function Ca(s){return Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},Ca(s)}function fw(s,u,f){return u in s?Object.defineProperty(s,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[u]=f,s}function lC(s,u){var f=Object.keys(s);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);u&&(y=y.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),f.push.apply(f,y)}return f}function uC(s){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?lC(Object(f),!0).forEach(function(y){fw(s,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(f)):lC(Object(f)).forEach(function(y){Object.defineProperty(s,y,Object.getOwnPropertyDescriptor(f,y))})}return s}function Tj(s){var u=Lj();return function(){var y=Ca(s),g;if(u){var w=Ca(this).constructor;g=Reflect.construct(y,arguments,w)}else g=y.apply(this,arguments);return mT(this,g)}}function Lj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var vT=function(s){gT(f,s);var u=Tj(f);function f(y){var g;return dT(this,f),g=u.call(this,y),g.onClick=g.onClick.bind(wa(g)),g.onClose=g.onClose.bind(wa(g)),g}return yT(f,[{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"componentDidMount",value:function(){var g=this;this.props.message.sticky||(this.timeout=setTimeout(function(){g.onClose(null)},this.props.message.life||3e3))}},{key:"onClose",value:function(){this.timeout&&clearTimeout(this.timeout),this.props.onClose&&this.props.onClose(this.props.message)}},{key:"onClick",value:function(g){this.props.onClick&&!(pr.hasClass(g.target,"p-toast-icon-close")||pr.hasClass(g.target,"p-toast-icon-close-icon"))&&this.props.onClick(this.props.message)}},{key:"renderCloseIcon",value:function(){return this.props.message.closable!==!1?cl("button",{type:"button",className:"p-toast-icon-close p-link",onClick:this.onClose,children:[Ee("span",{className:"p-toast-icon-close-icon pi pi-times"}),Ee(KA,{})]}):null}},{key:"renderMessage",value:function(){if(this.props.message){var g=this.props.message,w=g.severity,M=g.content,C=g.summary,A=g.detail,R=fT.getJSXElement(M,uC(uC({},this.props),{},{onClose:this.onClose})),z=By("p-toast-message-icon pi",{"pi-info-circle":w==="info","pi-exclamation-triangle":w==="warn","pi-times":w==="error","pi-check":w==="success"});return R||cl(YO,{children:[Ee("span",{className:z}),cl("div",{className:"p-toast-message-text",children:[Ee("span",{className:"p-toast-summary",children:C}),A&&Ee("div",{className:"p-toast-detail",children:A})]})]})}return null}},{key:"render",value:function(){var g=this.props.message.severity,w=this.props.message.contentClassName,M=this.props.message.contentStyle,C=this.props.message.style,A=By("p-toast-message",{"p-toast-message-info":g==="info","p-toast-message-warn":g==="warn","p-toast-message-error":g==="error","p-toast-message-success":g==="success"},this.props.message.className),R=this.renderMessage(),z=this.renderCloseIcon();return Ee("div",{ref:this.props.forwardRef,className:A,style:C,role:"alert","aria-live":"assertive","aria-atomic":"true",onClick:this.onClick,children:cl("div",{className:By("p-toast-message-content",w),style:M,children:[R,z]})})}}]),f}(Me.exports.Component);fw(vT,"defaultProps",{message:null,onClose:null,onClick:null});var Ej=Cr.forwardRef(function(s,u){return Ee(vT,ly({forwardRef:u},s))});function Oj(s){var u=Aj();return function(){var y=Ca(s),g;if(u){var w=Ca(this).constructor;g=Reflect.construct(y,arguments,w)}else g=y.apply(this,arguments);return mT(this,g)}}function Aj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var hC=0,xT=function(s){gT(f,s);var u=Oj(f);function f(y){var g;return dT(this,f),g=u.call(this,y),g.state={messages:[]},g.onClose=g.onClose.bind(wa(g)),g.onEntered=g.onEntered.bind(wa(g)),g.onExited=g.onExited.bind(wa(g)),g}return yT(f,[{key:"show",value:function(g){if(g&&g){var w;if(Array.isArray(g))for(var M=0;M<g.length;M++)g[M].id=hC++,w=[].concat(l1(this.state.messages),l1(g));else g.id=hC++,w=this.state.messages?[].concat(l1(this.state.messages),[g]):[g];this.state.messages.length===0&&gc.set("toast",this.container,mr.autoZIndex,this.props.baseZIndex||mr.zIndex.toast),this.setState({messages:w})}}},{key:"clear",value:function(){gc.clear(this.container),this.setState({messages:[]})}},{key:"onClose",value:function(g){var w=this.state.messages.filter(function(M){return M.id!==g.id});this.setState({messages:w}),this.props.onRemove&&this.props.onRemove(g)}},{key:"onEntered",value:function(){this.props.onShow&&this.props.onShow()}},{key:"onExited",value:function(){this.state.messages.length===0&&gc.clear(this.container),this.props.onHide&&this.props.onHide()}},{key:"componentWillUnmount",value:function(){gc.clear(this.container)}},{key:"renderElement",value:function(){var g=this,w=By("p-toast p-component p-toast-"+this.props.position,this.props.className);return Ee("div",{ref:function(C){g.container=C},id:this.props.id,className:w,style:this.props.style,children:Ee(sj,{children:this.state.messages.map(function(M){var C=Cr.createRef();return Ee(dj,{nodeRef:C,classNames:"p-toast-message",unmountOnExit:!0,timeout:{enter:300,exit:300},onEntered:g.onEntered,onExited:g.onExited,options:g.props.transitionOptions,children:Ee(Ej,{ref:C,message:M,onClick:g.props.onClick,onClose:g.onClose})},M.id)})})})}},{key:"render",value:function(){var g=this.renderElement();return Ee(pT,{element:g,appendTo:this.props.appendTo})}}]),f}(Me.exports.Component);fw(xT,"defaultProps",{id:null,className:null,style:null,baseZIndex:0,position:"top-right",transitionOptions:null,appendTo:"self",onClick:null,onRemove:null,onShow:null,onHide:null});var jj=()=>{const s=Me.exports.useRef(null),u=Me.exports.useRef(null),f=Me.exports.useRef(null),y=Me.exports.useRef(null),[g,w]=Me.exports.useState(null),[M,C]=Me.exports.useState(!0),A=R=>{if(!!u.current&&!!f.current&&!!y.current){const z=new xA(u.current,f.current,y.current,R);w(z)}};return Me.exports.useLayoutEffect(()=>(cr().bind(s.current),()=>{cr().bind(null),g==null||g.dispose(),w(null)}),[]),cl("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Ee(xT,{ref:s}),Ee("div",{ref:u,className:"custom-canvas-container",style:{position:"relative",width:"100%",height:"100%"}}),Ee("div",{ref:f,className:"custom-canvas-container",style:{position:"absolute",zIndex:"100",width:"199px",height:"100%",top:"0",left:"0",borderRight:"solid 2px #777777",backgroundColor:"#fefefe"}}),Ee(NA,{initPos:{left:"210px",top:"10px"},innerEl:cl("div",{onContextMenu:R=>{R.preventDefault(),R.stopPropagation()},style:{position:"relative",width:"300px",height:"fit-content",border:"solid 2px #aaaaaa",borderRadius:"10px",backgroundColor:"#ffffff",fontFamily:"Fira Sans,Arial,sans-serif"},children:[cl("div",{className:"drag-controller",style:{position:"relative",width:"calc(100% - 20px)",height:"10px",margin:"10px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Ee("i",{className:M?"pi pi-eye":"pi pi-eye-slash",title:`${M?"hide":"show"} inspector`,style:{position:"relative",width:"10px",textAlign:"center",color:"#aaaaaa",fontWeight:"bold",cursor:"pointer"},onClick:()=>{C(!M)}}),Ee("div",{style:{position:"relative",width:"calc(100% - 30px)",height:"10px",margin:"5px",borderRadius:"5px",backgroundColor:"#aaaaaa"}})]}),Ee("div",{className:LA.inspectorPanel,style:{display:M?"block":"none"},children:Ee("div",{ref:y})})]})},"inspector-container"),Ee(XO,{onLoad:A,instance:g})]})};px.exports.render(Ee(Me.exports.StrictMode,{children:Ee(jj,{})}),document.getElementById("root"))});export default Dj();
